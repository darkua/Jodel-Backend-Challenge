{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n.w={},n(n.s=288)}([function(e,t){e.exports=require(\"util\")},function(e,t,n){\"use strict\";var r=n(3).MongoError,o=n(3).ReadPreference,i=t.formatSortValue=function(e){switch((\"\"+e).toLowerCase()){case\"ascending\":case\"asc\":case\"1\":return 1;case\"descending\":case\"desc\":case\"-1\":return-1;default:throw new Error(\"Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]\")}},s=t.formattedOrderClause=function(e){var t={};if(null==e)return null;if(Array.isArray(e)){if(0===e.length)return null;for(var n=0;n<e.length;n++)e[n].constructor===String?t[e[n]]=1:t[e[n][0]]=i(e[n][1])}else if(null!=e&&\"object\"==typeof e)t=e;else{if(\"string\"!=typeof e)throw new Error(\"Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]\");t[e]=1}return t},a=t.isObject=function(e){return\"[object Object]\"===Object.prototype.toString.call(e)},c=[\"w\",\"j\",\"wtimeout\",\"fsync\"];t.filterOptions=function(e,t){var n={};for(var r in e)-1!==t.indexOf(r)&&(n[r]=e[r]);return n},t.mergeOptions=function(e,t){for(var n in t)e[n]=t[n];return e},t.translateOptions=function(e,t){var n={sslCA:\"ca\",sslCRL:\"crl\",sslValidate:\"rejectUnauthorized\",sslKey:\"key\",sslCert:\"cert\",sslPass:\"passphrase\",socketTimeoutMS:\"socketTimeout\",connectTimeoutMS:\"connectionTimeout\",replicaSet:\"setName\",rs_name:\"setName\",secondaryAcceptableLatencyMS:\"acceptableLatency\",connectWithNoPrimary:\"secondaryOnlyConnectionAllowed\",acceptableLatencyMS:\"localThresholdMS\"};for(var r in t)n[r]?e[n[r]]=t[r]:e[r]=t[r];return e},t.shallowClone=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.getSingleProperty=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:function(){return n}})},t.checkCollectionName=function(e){if(\"string\"!=typeof e)throw new r(\"collection name must be a String\");if(!e||-1!==e.indexOf(\"..\"))throw new r(\"collection names cannot be empty\");if(-1!==e.indexOf(\"$\")&&null==e.match(/((^\\$cmd)|(oplog\\.\\$main))/))throw new r(\"collection names must not contain '$'\");if(null!=e.match(/^\\.|\\.$/))throw new r(\"collection names must not start or end with '.'\");if(-1!==e.indexOf(\"\\0\"))throw new r(\"collection names cannot contain a null character\")},t.toError=function(e){if(e instanceof Error)return e;for(var t=e.err||e.errmsg||e.errMessage||e,n=r.create({message:t,driver:!0}),o=\"object\"==typeof e?Object.keys(e):[],i=0;i<o.length;i++)try{n[o[i]]=e[o[i]]}catch(e){}return n},t.formattedOrderClause=s,t.parseIndexOptions=function(e){var t,n={},r=[];return\"string\"==typeof e?(r.push(e+\"_1\"),n[e]=1):Array.isArray(e)?e.forEach(function(e){\"string\"==typeof e?(r.push(e+\"_1\"),n[e]=1):Array.isArray(e)?(r.push(e[0]+\"_\"+(e[1]||1)),n[e[0]]=e[1]||1):a(e)&&(t=Object.keys(e)).forEach(function(t){r.push(t+\"_\"+e[t]),n[t]=e[t]})}):a(e)&&(t=Object.keys(e)).forEach(function(t){r.push(t+\"_\"+e[t]),n[t]=e[t]}),{name:r.join(\"_\"),keys:t,fieldHash:n}},t.normalizeHintField=function(e){var t=null;if(\"string\"==typeof e)t=e;else if(Array.isArray(e))t={},e.forEach(function(e){t[e]=1});else if(null!=e&&\"object\"==typeof e)for(var n in t={},e)t[n]=e[n];return t},t.handleCallback=function(e,t,n,r){try{if(null==e)return;if(e)return r?e(t,n,r):e(t,n)}catch(t){return process.nextTick(function(){throw t}),!1}return!0},t.decorateCommand=function(e,t,n){for(var r in t)null==n[r]&&(e[r]=t[r]);return e},t.isObject=a,t.debugOptions=function(e,t){var n={};return e.forEach(function(e){n[e]=t[e]}),n},t.MAX_JS_INT=9007199254740992,t.mergeOptionsAndWriteConcern=function(e,t,n,r){for(var o=0;o<n.length;o++)e[n[o]]||void 0===t[n[o]]||(e[n[o]]=t[n[o]]);if(!r)return e;var i=!1;for(o=0;o<c.length;o++)if(e[c[o]]){i=!0;break}if(!i)for(o=0;o<c.length;o++)t[c[o]]&&(e[c[o]]=t[c[o]]);return e},t.translateReadPreference=function(e){var t=null;if(!e.readPreference)return e;if(\"string\"==typeof(t=e.readPreference))e.readPreference=new o(t);else if(!t||t instanceof o||\"object\"!=typeof t){if(!(t instanceof o))throw new TypeError(\"Invalid read preference: \"+t)}else{const n=t.mode||t.preference;n&&\"string\"==typeof n&&(e.readPreference=new o(n,t.tags,{maxStalenessSeconds:t.maxStalenessSeconds}))}return e},t.executeOperation=((e,t,n,o)=>{if(null==e)throw new TypeError(\"This method requires a valid topology instance\");if(!Array.isArray(n))throw new TypeError(\"This method requires an array of arguments to apply\");o=o||{};const i=e.s.promiseLibrary;let s,a,c=o.resultMutator,l=n[n.length-1];if(!o.skipSessions&&e.hasSessionSupport())if(null==(a=n[n.length-2])||null==a.session){s=e.startSession();const t=n.length-2;n[t]=Object.assign({},n[t],{session:s})}else if(a.session&&a.session.hasEnded)throw new r(\"Use of expired sessions is not permitted\");if(\"function\"==typeof l)return l=n.pop(),n.push((e,t)=>{if(!s||o.returnsCursor)return e?l(e,null):l(null,c?c(t):t);s.endSession(()=>(delete a.session,e?l(e,null):l(null,c?c(t):t)))}),t.apply(null,n);if(null!=n[n.length-1])throw new TypeError(\"final argument to `executeOperation` must be a callback\");return new i(function(e,r){n[n.length-1]=((t,n)=>{if(s&&!o.returnsCursor)s.endSession(()=>(delete a.session,t?r(t):c?e(c(n)):void e(n)));else{if(t)return r(t);if(c)return e(c(n));e(n)}}),t.apply(null,n)})})},function(e,t,n){\"use strict\";var r=n(4).MongoError,o=n(22),i=n(4).ReadPreference,s=t.formatSortValue=function(e){switch((\"\"+e).toLowerCase()){case\"ascending\":case\"asc\":case\"1\":return 1;case\"descending\":case\"desc\":case\"-1\":return-1;default:throw new Error(\"Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]\")}},a=t.formattedOrderClause=function(e){var t={};if(null==e)return null;if(Array.isArray(e)){if(0===e.length)return null;for(var n=0;n<e.length;n++)e[n].constructor==String?t[e[n]]=1:t[e[n][0]]=s(e[n][1])}else if(null!=e&&\"object\"==typeof e)t=e;else{if(\"string\"!=typeof e)throw new Error(\"Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]\");t[e]=1}return t},c=t.isObject=function(e){return\"[object Object]\"==Object.prototype.toString.call(e)},l=Object.assign?Object.assign:function(e){if(void 0===e||null===e)throw new TypeError(\"Cannot convert first argument to object\");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var o=Object.keys(Object(r)),i=0,s=o.length;i<s;i++){var a=o[i],c=Object.getOwnPropertyDescriptor(r,a);void 0!==c&&c.enumerable&&(t[a]=r[a])}}return t},u=[\"w\",\"j\",\"wtimeout\",\"fsync\"];t.filterOptions=function(e,t){var n={};for(var r in e)-1!=t.indexOf(r)&&(n[r]=e[r]);return n},t.mergeOptions=function(e,t){for(var n in t)e[n]=t[n];return e},t.translateOptions=function(e,t){var n={sslCA:\"ca\",sslCRL:\"crl\",sslValidate:\"rejectUnauthorized\",sslKey:\"key\",sslCert:\"cert\",sslPass:\"passphrase\",socketTimeoutMS:\"socketTimeout\",connectTimeoutMS:\"connectionTimeout\",replicaSet:\"setName\",rs_name:\"setName\",secondaryAcceptableLatencyMS:\"acceptableLatency\",connectWithNoPrimary:\"secondaryOnlyConnectionAllowed\",acceptableLatencyMS:\"localThresholdMS\"};for(var r in t)n[r]?e[n[r]]=t[r]:e[r]=t[r];return e},t.shallowClone=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.getSingleProperty=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:function(){return n}})},t.checkCollectionName=function(e){if(\"string\"!=typeof e)throw new r(\"collection name must be a String\");if(!e||-1!=e.indexOf(\"..\"))throw new r(\"collection names cannot be empty\");if(-1!=e.indexOf(\"$\")&&null==e.match(/((^\\$cmd)|(oplog\\.\\$main))/))throw new r(\"collection names must not contain '$'\");if(null!=e.match(/^\\.|\\.$/))throw new r(\"collection names must not start or end with '.'\");if(~e.indexOf(\"\\0\"))throw new r(\"collection names cannot contain a null character\")},t.toError=function(e){if(e instanceof Error)return e;for(var t=e.err||e.errmsg||e.errMessage||e,n=r.create({message:t,driver:!0}),o=\"object\"==typeof e?Object.keys(e):[],i=0;i<o.length;i++)try{n[o[i]]=e[o[i]]}catch(e){}return n},t.formattedOrderClause=a,t.parseIndexOptions=function(e){var t,n={},r=[];return\"string\"==typeof e?(r.push(e+\"_1\"),n[e]=1):Array.isArray(e)?e.forEach(function(e){\"string\"==typeof e?(r.push(e+\"_1\"),n[e]=1):Array.isArray(e)?(r.push(e[0]+\"_\"+(e[1]||1)),n[e[0]]=e[1]||1):c(e)&&(t=Object.keys(e)).forEach(function(t){r.push(t+\"_\"+e[t]),n[t]=e[t]})}):c(e)&&(t=Object.keys(e)).forEach(function(t){r.push(t+\"_\"+e[t]),n[t]=e[t]}),{name:r.join(\"_\"),keys:t,fieldHash:n}},t.normalizeHintField=function(e){var t=null;if(\"string\"==typeof e)t=e;else if(Array.isArray(e))t={},e.forEach(function(e){t[e]=1});else if(null!=e&&\"object\"==typeof e)for(var n in t={},e)t[n]=e[n];return t},t.handleCallback=function(e,t,n,r){try{if(null==e)return;if(e)return r?e(t,n,r):e(t,n)}catch(t){return process.nextTick(function(){throw t}),!1}return!0},t.decorateCommand=function(e,t,n){for(var r in t)null==n[r]&&(e[r]=t[r]);return e},t.isObject=c,t.debugOptions=function(e,t){var n={};return e.forEach(function(e){n[e]=t[e]}),n},t.MAX_JS_INT=9007199254740992,t.assign=l,t.mergeOptionsAndWriteConcern=function(e,t,n,r){for(var o=0;o<n.length;o++)e[n[o]]||void 0==t[n[o]]||(e[n[o]]=t[n[o]]);if(!r)return e;var i=!1;for(o=0;o<u.length;o++)if(e[u[o]]){i=!0;break}if(!i)for(o=0;o<u.length;o++)t[u[o]]&&(e[u[o]]=t[u[o]]);return e},t.getReadPreference=function(e){var t=null;if(!e.readPreference)return e;if((t=e.readPreference)instanceof o)e.readPreference=new i(t.mode,t.tags,{maxStalenessSeconds:t.maxStalenessSeconds});else if(\"string\"==typeof t)e.readPreference=new i(t);else if(t&&!(t instanceof o)&&\"object\"==typeof t){var n=t.mode||t.preference;n&&\"string\"==typeof n&&(e.readPreference=new i(n,t.tags,{maxStalenessSeconds:t.maxStalenessSeconds}))}return e}},function(e,t,n){\"use strict\";var r=n(84),o=n(30);try{var i=o(\"bson-ext\");i&&(r=i)}catch(e){}e.exports={MongoError:n(6).MongoError,MongoNetworkError:n(6).MongoNetworkError,Connection:n(143),Server:n(111),ReplSet:n(208),Mongos:n(206),Logger:n(28),Cursor:n(76),ReadPreference:n(41),Sessions:n(205),BSON:r,Query:n(15).Query,MongoCR:n(81),X509:n(80),Plain:n(79),GSSAPI:n(78),ScramSHA1:n(77),parseConnectionString:n(203)}},function(e,t,n){var r=n(84),o=n(30);try{var i=o(\"bson-ext\");i&&(r=i)}catch(e){}e.exports={MongoError:n(8),Connection:n(134),Server:n(106),ReplSet:n(187),Mongos:n(185),Logger:n(27),Cursor:n(66),ReadPreference:n(45),BSON:r,Query:n(11).Query,MongoCR:n(71),X509:n(70),Plain:n(69),GSSAPI:n(68),ScramSHA1:n(67)}},function(e,t){e.exports=require(\"events\")},function(e,t,n){\"use strict\";var r=n(0);function o(e){if(Error.apply(this,arguments).name=this.name=\"MongoError\",e instanceof Error)this.message=e.message,this.stack=e.stack;else{if(\"string\"==typeof e)this.message=e;else for(var t in this.message=e.message||e.errmsg||e.$err||\"n/a\",e)this[t]=e[t];Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}r.inherits(o,Error),o.create=function(e){return new o(e)};var i=function(e){o.call(this,e),this.name=\"MongoNetworkError\"};r.inherits(i,o);const s=function(e){o.call(this,e),this.name=\"MongoParseError\"};r.inherits(s,o),e.exports={MongoError:o,MongoNetworkError:i,MongoParseError:s}},function(e,t,n){\"use strict\";const r=n(40),o=n(0).format,i=n(41),s=(0,n(13).retrieveBSON)();function a(e,t,n){e.listeners(t).length>0&&e.emit(t,n)}var c=n(211).version,l=o(\"Node.js %s, %s\",process.version,r.endianness()),u=r.type(),p=process.platform,d=process.arch,f=r.release();function h(e){return JSON.parse(JSON.stringify(e))}var m=function(e,t){e.listeners(\"serverDescriptionChanged\").length>0&&(e.emit(\"serverDescriptionChanged\",{topologyId:-1!==e.s.topologyId?e.s.topologyId:e.id,address:e.name,previousDescription:function(e){return e.s.serverDescription||(e.s.serverDescription={address:e.name,arbiters:[],hosts:[],passives:[],type:\"Unknown\"}),e.s.serverDescription}(e),newDescription:t}),e.s.serverDescription=t)},g=function(e,t){return t||(t=e.ismaster),t?t.ismaster&&\"isdbgrid\"===t.msg?\"Mongos\":t.ismaster&&!t.hosts?\"Standalone\":t.ismaster?\"RSPrimary\":t.secondary?\"RSSecondary\":t.arbiterOnly?\"RSArbiter\":\"Unknown\":\"Unknown\"},y=function(e){return function(t){if(\"destroyed\"!==e.s.state){var n=(new Date).getTime();a(e,\"serverHeartbeatStarted\",{connectionId:e.name}),e.command(\"admin.$cmd\",{ismaster:!0},{monitoring:!0},function(r,o){if(r)a(e,\"serverHeartbeatFailed\",{durationMS:i,failure:r,connectionId:e.name});else{e.emit(\"ismaster\",o,e);var i=(new Date).getTime()-n;a(e,\"serverHeartbeatSucceeded\",{durationMS:i,reply:o.result,connectionId:e.name}),function(e,t,n){var r=g(e,t);return g(e,n)!==r}(e,e.s.ismaster,o.result)&&m(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:e.s.inTopology?g(e):\"Standalone\"}),e.s.ismaster=o.result,e.s.isMasterLatencyMS=i}if(\"function\"==typeof t)return t(r,o);e.s.inquireServerStateTimeout=setTimeout(y(e),e.s.haInterval)})}}};const v={endSessions:function(e,t){Array.isArray(e)||(e=[e]),this.command(\"admin.$cmd\",{endSessions:e},{readPreference:i.primaryPreferred},()=>{\"function\"==typeof t&&t()})}};e.exports.SessionMixins=v,e.exports.resolveClusterTime=function(e,t){null==e.clusterTime?e.clusterTime=t:t.clusterTime.greaterThan(e.clusterTime.clusterTime)&&(e.clusterTime=t)},e.exports.inquireServerState=y,e.exports.getTopologyType=g,e.exports.emitServerDescriptionChanged=m,e.exports.emitTopologyDescriptionChanged=function(e,t){e.listeners(\"topologyDescriptionChanged\").length>0&&(e.emit(\"topologyDescriptionChanged\",{topologyId:-1!==e.s.topologyId?e.s.topologyId:e.id,address:e.name,previousDescription:function(e){return e.s.topologyDescription||(e.s.topologyDescription={topologyType:\"Unknown\",servers:[{address:e.name,arbiters:[],hosts:[],passives:[],type:\"Unknown\"}]}),e.s.topologyDescription}(e),newDescription:t}),e.s.serverDescription=t)},e.exports.cloneOptions=function(e){var t={};for(var n in e)t[n]=e[n];return t},e.exports.createClientInfo=function(e){var t=e.clientInfo?h(e.clientInfo):{driver:{name:\"nodejs-core\",version:c},os:{type:u,name:p,architecture:d,version:f}};if(t.platform&&-1===t.platform.indexOf(\"mongodb-core\")?t.platform=o(\"%s, mongodb-core: %s\",t.platform,c):t.platform||(t.platform=l),e.appname){var n=new Buffer(e.appname),r=n.length>128?n.slice(0,128).toString(\"utf8\"):e.appname;t.application={name:r}}return t},e.exports.createCompressionInfo=function(e){return e.compression&&e.compression.compressors?(e.compression.compressors.forEach(function(e){if(\"snappy\"!==e&&\"zlib\"!==e)throw new Error(\"compressors must be at least one of snappy or zlib\")}),e.compression.compressors):[]},e.exports.clone=h,e.exports.diff=function(e,t){var n={servers:[]};e||(e={servers:[]});for(var r=0;r<e.servers.length;r++){for(var o=!1,i=0;i<t.servers.length;i++)if(t.servers[i].address.toLowerCase()===e.servers[r].address.toLowerCase()){o=!0;break}o||n.servers.push({address:e.servers[r].address,from:e.servers[r].type,to:\"Unknown\"})}for(i=0;i<t.servers.length;i++){for(o=!1,r=0;r<e.servers.length;r++)if(e.servers[r].address.toLowerCase()===t.servers[i].address.toLowerCase()){o=!0;break}o||n.servers.push({address:t.servers[i].address,from:\"Unknown\",to:t.servers[i].type})}for(r=0;r<e.servers.length;r++){var s=e.servers[r];for(i=0;i<t.servers.length;i++){var a=t.servers[i];s.address.toLowerCase()===a.address.toLowerCase()&&s.type!==a.type&&n.servers.push({address:s.address,from:s.type,to:a.type})}}return n},e.exports.Interval=function(e,t){var n=!1;this.start=function(){return this.isRunning()||(n=setInterval(e,t)),this},this.stop=function(){return clearInterval(n),n=!1,this},this.isRunning=function(){return!1!==n}},e.exports.Timeout=function(e,t){var n=!1;this.start=function(){return this.isRunning()||(n=setTimeout(e,t)),this},this.stop=function(){return clearTimeout(n),n=!1,this},this.isRunning=function(){return!(n&&n._called||!1===n)}},e.exports.isRetryableWritesSupported=function(e){return!(e.lastIsMaster().maxWireVersion<6||!e.logicalSessionTimeoutMinutes)},e.exports.getNextTransactionNumber=function(e){return e.serverSession.txnNumber++,s.Long.fromNumber(e.serverSession.txnNumber)}},function(e,t,n){\"use strict\";function r(e){this.name=\"MongoError\",this.message=e,Error.captureStackTrace(this,r)}r.create=function(e){var t=null;if(e instanceof Error)(t=new r(e.message)).stack=e.stack;else if(\"string\"==typeof e)t=new r(e);else for(var n in t=new r(e.message||e.errmsg||e.$err||\"n/a\"),e)t[n]=e[n];return t},r.prototype=new Error,e.exports=r},function(e,t){e.exports=require(\"stream\")},function(e,t){e.exports=require(\"buffer\")},function(e,t,n){\"use strict\";var r=(0,n(14).retrieveBSON)().Long,o=0,i=function(e,t,n,r){if(null==t)throw new Error(\"ns must be specified for query\");if(null==n)throw new Error(\"query must be specified for query\");if(~t.indexOf(\"\\0\"))throw new Error(\"namespace cannot contain a null character\");this.bson=e,this.ns=t,this.query=n,this.options=r||{},this.numberToSkip=r.numberToSkip||0,this.numberToReturn=r.numberToReturn||0,this.returnFieldSelector=r.returnFieldSelector||null,this.requestId=i.getRequestId(),this.serializeFunctions=\"boolean\"==typeof r.serializeFunctions&&r.serializeFunctions,this.ignoreUndefined=\"boolean\"==typeof r.ignoreUndefined&&r.ignoreUndefined,this.maxBsonSize=r.maxBsonSize||16777216,this.checkKeys=\"boolean\"!=typeof r.checkKeys||r.checkKeys,this.batchSize=this.numberToReturn,this.tailable=!1,this.slaveOk=\"boolean\"==typeof r.slaveOk&&r.slaveOk,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1};i.prototype.incRequestId=function(){this.requestId=o++},i.nextRequestId=function(){return o+1},i.prototype.toBin=function(){var e=[],t=null,n=0;this.tailable&&(n|=2),this.slaveOk&&(n|=4),this.oplogReplay&&(n|=8),this.noCursorTimeout&&(n|=16),this.awaitData&&(n|=32),this.exhaust&&(n|=64),this.partial&&(n|=128),this.batchSize!=this.numberToReturn&&(this.numberToReturn=this.batchSize);var r=new Buffer(20+Buffer.byteLength(this.ns)+1+4+4);e.push(r);var o=this.bson.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(o),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0&&(t=this.bson.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),e.push(t));var i=r.length+o.length+(t?t.length:0),s=4;return r[3]=i>>24&255,r[2]=i>>16&255,r[1]=i>>8&255,r[0]=255&i,r[s+3]=this.requestId>>24&255,r[s+2]=this.requestId>>16&255,r[s+1]=this.requestId>>8&255,r[s]=255&this.requestId,r[(s+=4)+3]=0,r[s+2]=0,r[s+1]=0,r[s]=0,r[(s+=4)+3]=0,r[s+2]=0,r[s+1]=7,r[s]=212,r[(s+=4)+3]=n>>24&255,r[s+2]=n>>16&255,r[s+1]=n>>8&255,r[s]=255&n,r[(s=(s+=4)+r.write(this.ns,s,\"utf8\")+1)-1]=0,r[s+3]=this.numberToSkip>>24&255,r[s+2]=this.numberToSkip>>16&255,r[s+1]=this.numberToSkip>>8&255,r[s]=255&this.numberToSkip,r[(s+=4)+3]=this.numberToReturn>>24&255,r[s+2]=this.numberToReturn>>16&255,r[s+1]=this.numberToReturn>>8&255,r[s]=255&this.numberToReturn,s+=4,e},i.getRequestId=function(){return++o};var s=function(e,t,n,r){r=r||{},this.numberToReturn=r.numberToReturn||0,this.requestId=o++,this.bson=e,this.ns=t,this.cursorId=n};s.prototype.toBin=function(){var e=4+Buffer.byteLength(this.ns)+1+4+8+16,t=0,n=new Buffer(e);return n[t+3]=e>>24&255,n[t+2]=e>>16&255,n[t+1]=e>>8&255,n[t]=255&e,n[(t+=4)+3]=this.requestId>>24&255,n[t+2]=this.requestId>>16&255,n[t+1]=this.requestId>>8&255,n[t]=255&this.requestId,n[(t+=4)+3]=0,n[t+2]=0,n[t+1]=0,n[t]=0,n[(t+=4)+3]=0,n[t+2]=0,n[t+1]=7,n[t]=213,n[(t+=4)+3]=0,n[t+2]=0,n[t+1]=0,n[t]=0,n[(t=(t+=4)+n.write(this.ns,t,\"utf8\")+1)-1]=0,n[t+3]=this.numberToReturn>>24&255,n[t+2]=this.numberToReturn>>16&255,n[t+1]=this.numberToReturn>>8&255,n[t]=255&this.numberToReturn,n[(t+=4)+3]=this.cursorId.getLowBits()>>24&255,n[t+2]=this.cursorId.getLowBits()>>16&255,n[t+1]=this.cursorId.getLowBits()>>8&255,n[t]=255&this.cursorId.getLowBits(),n[(t+=4)+3]=this.cursorId.getHighBits()>>24&255,n[t+2]=this.cursorId.getHighBits()>>16&255,n[t+1]=this.cursorId.getHighBits()>>8&255,n[t]=255&this.cursorId.getHighBits(),t+=4,n};var a=function(e,t){this.requestId=o++,this.cursorIds=t};a.prototype.toBin=function(){var e=24+8*this.cursorIds.length,t=0,n=new Buffer(e);n[t+3]=e>>24&255,n[t+2]=e>>16&255,n[t+1]=e>>8&255,n[t]=255&e,n[(t+=4)+3]=this.requestId>>24&255,n[t+2]=this.requestId>>16&255,n[t+1]=this.requestId>>8&255,n[t]=255&this.requestId,n[(t+=4)+3]=0,n[t+2]=0,n[t+1]=0,n[t]=0,n[(t+=4)+3]=0,n[t+2]=0,n[t+1]=7,n[t]=215,n[(t+=4)+3]=0,n[t+2]=0,n[t+1]=0,n[t]=0,n[(t+=4)+3]=this.cursorIds.length>>24&255,n[t+2]=this.cursorIds.length>>16&255,n[t+1]=this.cursorIds.length>>8&255,n[t]=255&this.cursorIds.length,t+=4;for(var r=0;r<this.cursorIds.length;r++)n[t+3]=this.cursorIds[r].getLowBits()>>24&255,n[t+2]=this.cursorIds[r].getLowBits()>>16&255,n[t+1]=this.cursorIds[r].getLowBits()>>8&255,n[t]=255&this.cursorIds[r].getLowBits(),n[(t+=4)+3]=this.cursorIds[r].getHighBits()>>24&255,n[t+2]=this.cursorIds[r].getHighBits()>>16&255,n[t+1]=this.cursorIds[r].getHighBits()>>8&255,n[t]=255&this.cursorIds[r].getHighBits(),t+=4;return n};var c=function(e,t,n){n=n||{promoteLongs:!0,promoteValues:!0,promoteBuffers:!1},this.parsed=!1,this.index=0,this.raw=t,this.data=t,this.bson=e,this.opts=n,this.length=t[this.index]|t[this.index+1]<<8|t[this.index+2]<<16|t[this.index+3]<<24,this.index=this.index+4,this.requestId=t[this.index]|t[this.index+1]<<8|t[this.index+2]<<16|t[this.index+3]<<24,this.index=this.index+4,this.responseTo=t[this.index]|t[this.index+1]<<8|t[this.index+2]<<16|t[this.index+3]<<24,this.index=this.index+4,this.index=this.index+4,this.responseFlags=t[this.index]|t[this.index+1]<<8|t[this.index+2]<<16|t[this.index+3]<<24,this.index=this.index+4;var o=t[this.index]|t[this.index+1]<<8|t[this.index+2]<<16|t[this.index+3]<<24;this.index=this.index+4;var i=t[this.index]|t[this.index+1]<<8|t[this.index+2]<<16|t[this.index+3]<<24;this.index=this.index+4,this.cursorId=new r(o,i),this.startingFrom=t[this.index]|t[this.index+1]<<8|t[this.index+2]<<16|t[this.index+3]<<24,this.index=this.index+4,this.numberReturned=t[this.index]|t[this.index+1]<<8|t[this.index+2]<<16|t[this.index+3]<<24,this.index=this.index+4,this.documents=new Array(this.numberReturned),this.cursorNotFound=0!=(0&this.responseFlags),this.queryFailure=0!=(2&this.responseFlags),this.shardConfigStale=0!=(4&this.responseFlags),this.awaitCapable=0!=(8&this.responseFlags),this.promoteLongs=\"boolean\"!=typeof n.promoteLongs||n.promoteLongs,this.promoteValues=\"boolean\"!=typeof n.promoteValues||n.promoteValues,this.promoteBuffers=\"boolean\"==typeof n.promoteBuffers&&n.promoteBuffers};c.prototype.isParsed=function(){return this.parsed},c.prototype.parse=function(e){if(!this.parsed){var t,n,o=(e=e||{}).raw||!1,i=e.documentsReturnedIn||null;if(n={promoteLongs:\"boolean\"==typeof e.promoteLongs?e.promoteLongs:this.opts.promoteLongs,promoteValues:\"boolean\"==typeof e.promoteValues?e.promoteValues:this.opts.promoteValues,promoteBuffers:\"boolean\"==typeof e.promoteBuffers?e.promoteBuffers:this.opts.promoteBuffers},1==this.numberReturned&&null!=i&&o){t=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24;var s=this.data.slice(this.index,this.index+t),a={};a[i]=!0,n.fieldsAsRaw=a;var c=this.bson.deserialize(s,n);return this.documents=c.cursor[i],this.numberReturned=this.documents.length,this.cursorId=\"number\"==typeof c.cursor.id?r.fromNumber(c.cursor.id):c.cursor.id,this.index=this.index+t,void(this.parsed=!0)}for(var l=0;l<this.numberReturned;l++)t=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,this.documents[l]=o?this.data.slice(this.index,this.index+t):this.bson.deserialize(this.data.slice(this.index,this.index+t),n),this.index=this.index+t;this.parsed=!0}},e.exports={Query:i,GetMore:s,Response:c,KillCursor:a}},function(e,t,n){var r;(function(){\"use strict\";function o(e){return\"function\"==typeof e}var i,s,a=Array.isArray?Array.isArray:function(e){return\"[object Array]\"===Object.prototype.toString.call(e)},c=0,l=function(e,t){w[c]=e,w[c+1]=t,2===(c+=2)&&(s?s(S):g())};var u=\"undefined\"!=typeof window?window:void 0,p=u||{},d=p.MutationObserver||p.WebKitMutationObserver,f=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),h=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel;function m(){return function(){setTimeout(S,1)}}var g,y,v,b,x,w=new Array(1e3);function S(){for(var e=0;e<c;e+=2){(0,w[e])(w[e+1]),w[e]=void 0,w[e+1]=void 0}c=0}f?g=function(){process.nextTick(S)}:d?(v=0,b=new d(S),x=document.createTextNode(\"\"),b.observe(x,{characterData:!0}),g=function(){x.data=v=++v%2}):h?((y=new MessageChannel).port1.onmessage=S,g=function(){y.port2.postMessage(0)}):g=void 0===u?function(){try{var e=n(!function(){var e=new Error('Cannot find module \"vertx\"');throw e.code=\"MODULE_NOT_FOUND\",e}());return i=e.runOnLoop||e.runOnContext,function(){i(S)}}catch(e){return m()}}():m();var k=function(e,t){var n=this,r=new this.constructor(_);void 0===r[C]&&H(r);var o=n._state;if(o){var i=arguments[o-1];l(function(){U(o,r,i,n._result)})}else L(n,r,e,t);return r};var O=function(e){if(e&&\"object\"==typeof e&&e.constructor===this)return e;var t=new this(_);return B(t,e),t},C=Math.random().toString(36).substring(16);function _(){}var E=void 0,I=1,T=2,M=new z;function N(e){try{return e.then}catch(e){return M.error=e,M}}function A(e,t,n){t.constructor===e.constructor&&n===k&&constructor.resolve===O?function(e,t){t._state===I?P(e,t._result):t._state===T?D(e,t._result):L(t,void 0,function(t){B(e,t)},function(t){D(e,t)})}(e,t):n===M?D(e,M.error):void 0===n?P(e,t):o(n)?function(e,t,n){l(function(e){var r=!1,o=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,function(n){r||(r=!0,t!==n?B(e,n):P(e,n))},function(t){r||(r=!0,D(e,t))},e._label);!r&&o&&(r=!0,D(e,o))},e)}(e,t,n):P(e,t)}function B(e,t){var n;e===t?D(e,new TypeError(\"You cannot resolve a promise with itself\")):\"function\"==typeof(n=t)||\"object\"==typeof n&&null!==n?A(e,t,N(t)):P(e,t)}function j(e){e._onerror&&e._onerror(e._result),R(e)}function P(e,t){e._state===E&&(e._result=t,e._state=I,0!==e._subscribers.length&&l(R,e))}function D(e,t){e._state===E&&(e._state=T,e._result=t,l(j,e))}function L(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+I]=n,o[i+T]=r,0===i&&e._state&&l(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,o,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?U(n,r,o,i):o(i);e._subscribers.length=0}}function z(){this.error=null}var q=new z;function U(e,t,n,r){var i,s,a,c,l=o(n);if(l){if((i=function(e,t){try{return e(t)}catch(e){return q.error=e,q}}(n,r))===q?(c=!0,s=i.error,i=null):a=!0,t===i)return void D(t,new TypeError(\"A promises callback cannot return that same promise.\"))}else i=r,a=!0;t._state!==E||(l&&a?B(t,i):c?D(t,s):e===I?P(t,i):e===T&&D(t,i))}var F=0;function H(e){e[C]=F++,e._state=void 0,e._result=void 0,e._subscribers=[]}var V=function(e){return new G(this,e).promise};var $=function(e){var t=this;return a(e)?new t(function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}):new t(function(e,t){t(new TypeError(\"You must pass an array to race.\"))})};var W=function(e){var t=new this(_);return D(t,e),t};var K=Y;function Y(e){this[C]=F++,this._result=this._state=void 0,this._subscribers=[],_!==e&&(\"function\"!=typeof e&&function(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}(),this instanceof Y?function(e,t){try{t(function(t){B(e,t)},function(t){D(e,t)})}catch(t){D(e,t)}}(this,e):function(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}())}Y.all=V,Y.race=$,Y.resolve=O,Y.reject=W,Y._setScheduler=function(e){s=e},Y._setAsap=function(e){l=e},Y._asap=l,Y.prototype={constructor:Y,then:k,catch:function(e){return this.then(null,e)}};var G=J;function J(e,t){this._instanceConstructor=e,this.promise=new e(_),this.promise[C]||H(this.promise),a(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&P(this.promise,this._result))):D(this.promise,new Error(\"Array Methods must be provided an Array\"))}J.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===E&&n<e;n++)this._eachEntry(t[n],n)},J.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===O){var o=N(e);if(o===k&&e._state!==E)this._settledAt(e._state,t,e._result);else if(\"function\"!=typeof o)this._remaining--,this._result[t]=e;else if(n===K){var i=new n(_);A(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(r(e),t)},J.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===E&&(this._remaining--,e===T?D(r,n):this._result[t]=n),0===this._remaining&&P(r,this._result)},J.prototype._willSettleAt=function(e,t){var n=this;L(e,void 0,function(e){n._settledAt(I,t,e)},function(e){n._settledAt(T,t,e)})};var Z=function(){var e;if(\"undefined\"!=typeof global)e=global;else if(\"undefined\"!=typeof self)e=self;else try{e=Function(\"return this\")()}catch(e){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var t=e.Promise;t&&\"[object Promise]\"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=K)},X={Promise:K,polyfill:Z};void 0===(r=function(){return X}.call(t,n,t,e))||(e.exports=r),Z()}).call(this)},function(e,t,n){\"use strict\";var r=n(0).format,o=n(30),i=function(){throw new Error(\"Attempted to use Snappy compression, but Snappy is not installed. Install or disable Snappy compression and try again.\")};t.setProperty=function(e,t,n,o){Object.defineProperty(e,t.name,{enumerable:!0,set:function(e){if(\"boolean\"!=typeof e)throw new Error(r(\"%s required a boolean\",t.name));!0===e&&(o.flags|=n),!1===e&&(o.flags&n)===n&&(o.flags^=n),t.value=e},get:function(){return t.value}})},t.getProperty=function(e,t,n,r,o){Object.defineProperty(e,t,{enumerable:!0,get:function(){return null==r[n]&&e.isParsed&&!e.isParsed()&&e.parse(),\"function\"==typeof o?o(r[n]):r[n]}})},t.getSingleProperty=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:function(){return n}})},t.copy=function(e,t){for(var n in t=t||{},e)t[n]=e[n];return t},t.debugOptions=function(e,t){var n={};return e.forEach(function(e){n[e]=t[e]}),n},t.retrieveBSON=function(){var e=n(84);e.native=!1;try{var t=o(\"bson-ext\");if(t)return t.native=!0,t}catch(e){}return e},t.retrieveSnappy=function(){var e=null;try{e=o(\"snappy\")}catch(e){}return e||(e={compress:i,uncompress:i,compressSync:i,uncompressSync:i}),e}},function(e,t,n){\"use strict\";var r=n(0).format,o=n(30);t.setProperty=function(e,t,n,o){Object.defineProperty(e,t.name,{enumerable:!0,set:function(e){if(\"boolean\"!=typeof e)throw new Error(r(\"%s required a boolean\",t.name));1==e&&(o.flags|=n),0==e&&(o.flags&n)==n&&(o.flags^=n),t.value=e},get:function(){return t.value}})},t.getProperty=function(e,t,n,r,o){Object.defineProperty(e,t,{enumerable:!0,get:function(){return null==r[n]&&e.isParsed&&!e.isParsed()&&e.parse(),\"function\"==typeof o?o(r[n]):r[n]}})},t.getSingleProperty=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:function(){return n}})},t.copy=function(e,t){for(var n in t=t||{},e)t[n]=e[n];return t},t.debugOptions=function(e,t){var n={};return e.forEach(function(e){n[e]=t[e]}),n},t.retrieveBSON=function(){var e=n(84);e.native=!1;try{var t=o(\"bson-ext\");if(t)return t.native=!0,t}catch(e){}return e}},function(e,t,n){\"use strict\";var r=(0,n(13).retrieveBSON)().Long,o=0,i=n(29).opcodes,s=function(e,t,n,r){if(null==t)throw new Error(\"ns must be specified for query\");if(null==n)throw new Error(\"query must be specified for query\");if(-1!==t.indexOf(\"\\0\"))throw new Error(\"namespace cannot contain a null character\");this.bson=e,this.ns=t,this.query=n,this.options=r||{},this.numberToSkip=r.numberToSkip||0,this.numberToReturn=r.numberToReturn||0,this.returnFieldSelector=r.returnFieldSelector||null,this.requestId=s.getRequestId(),this.serializeFunctions=\"boolean\"==typeof r.serializeFunctions&&r.serializeFunctions,this.ignoreUndefined=\"boolean\"==typeof r.ignoreUndefined&&r.ignoreUndefined,this.maxBsonSize=r.maxBsonSize||16777216,this.checkKeys=\"boolean\"==typeof r.checkKeys&&r.checkKeys,this.batchSize=this.numberToReturn,this.tailable=!1,this.slaveOk=\"boolean\"==typeof r.slaveOk&&r.slaveOk,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1};s.prototype.incRequestId=function(){this.requestId=o++},s.nextRequestId=function(){return o+1},s.prototype.toBin=function(){var e=[],t=null,n=0;this.tailable&&(n|=2),this.slaveOk&&(n|=4),this.oplogReplay&&(n|=8),this.noCursorTimeout&&(n|=16),this.awaitData&&(n|=32),this.exhaust&&(n|=64),this.partial&&(n|=128),this.batchSize!==this.numberToReturn&&(this.numberToReturn=this.batchSize);var r=new Buffer(20+Buffer.byteLength(this.ns)+1+4+4);e.push(r);var o=this.bson.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(o),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0&&(t=this.bson.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),e.push(t));var s=r.length+o.length+(t?t.length:0),a=4;return r[3]=s>>24&255,r[2]=s>>16&255,r[1]=s>>8&255,r[0]=255&s,r[a+3]=this.requestId>>24&255,r[a+2]=this.requestId>>16&255,r[a+1]=this.requestId>>8&255,r[a]=255&this.requestId,r[(a+=4)+3]=0,r[a+2]=0,r[a+1]=0,r[a]=0,r[(a+=4)+3]=i.OP_QUERY>>24&255,r[a+2]=i.OP_QUERY>>16&255,r[a+1]=i.OP_QUERY>>8&255,r[a]=255&i.OP_QUERY,r[(a+=4)+3]=n>>24&255,r[a+2]=n>>16&255,r[a+1]=n>>8&255,r[a]=255&n,r[(a=(a+=4)+r.write(this.ns,a,\"utf8\")+1)-1]=0,r[a+3]=this.numberToSkip>>24&255,r[a+2]=this.numberToSkip>>16&255,r[a+1]=this.numberToSkip>>8&255,r[a]=255&this.numberToSkip,r[(a+=4)+3]=this.numberToReturn>>24&255,r[a+2]=this.numberToReturn>>16&255,r[a+1]=this.numberToReturn>>8&255,r[a]=255&this.numberToReturn,a+=4,e},s.getRequestId=function(){return++o};var a=function(e,t,n,r){r=r||{},this.numberToReturn=r.numberToReturn||0,this.requestId=o++,this.bson=e,this.ns=t,this.cursorId=n};a.prototype.toBin=function(){var e=4+Buffer.byteLength(this.ns)+1+4+8+16,t=0,n=new Buffer(e);return n[t+3]=e>>24&255,n[t+2]=e>>16&255,n[t+1]=e>>8&255,n[t]=255&e,n[(t+=4)+3]=this.requestId>>24&255,n[t+2]=this.requestId>>16&255,n[t+1]=this.requestId>>8&255,n[t]=255&this.requestId,n[(t+=4)+3]=0,n[t+2]=0,n[t+1]=0,n[t]=0,n[(t+=4)+3]=i.OP_GETMORE>>24&255,n[t+2]=i.OP_GETMORE>>16&255,n[t+1]=i.OP_GETMORE>>8&255,n[t]=255&i.OP_GETMORE,n[(t+=4)+3]=0,n[t+2]=0,n[t+1]=0,n[t]=0,n[(t=(t+=4)+n.write(this.ns,t,\"utf8\")+1)-1]=0,n[t+3]=this.numberToReturn>>24&255,n[t+2]=this.numberToReturn>>16&255,n[t+1]=this.numberToReturn>>8&255,n[t]=255&this.numberToReturn,n[(t+=4)+3]=this.cursorId.getLowBits()>>24&255,n[t+2]=this.cursorId.getLowBits()>>16&255,n[t+1]=this.cursorId.getLowBits()>>8&255,n[t]=255&this.cursorId.getLowBits(),n[(t+=4)+3]=this.cursorId.getHighBits()>>24&255,n[t+2]=this.cursorId.getHighBits()>>16&255,n[t+1]=this.cursorId.getHighBits()>>8&255,n[t]=255&this.cursorId.getHighBits(),t+=4,n};var c=function(e,t){this.requestId=o++,this.cursorIds=t};c.prototype.toBin=function(){var e=24+8*this.cursorIds.length,t=0,n=new Buffer(e);n[t+3]=e>>24&255,n[t+2]=e>>16&255,n[t+1]=e>>8&255,n[t]=255&e,n[(t+=4)+3]=this.requestId>>24&255,n[t+2]=this.requestId>>16&255,n[t+1]=this.requestId>>8&255,n[t]=255&this.requestId,n[(t+=4)+3]=0,n[t+2]=0,n[t+1]=0,n[t]=0,n[(t+=4)+3]=i.OP_KILL_CURSORS>>24&255,n[t+2]=i.OP_KILL_CURSORS>>16&255,n[t+1]=i.OP_KILL_CURSORS>>8&255,n[t]=255&i.OP_KILL_CURSORS,n[(t+=4)+3]=0,n[t+2]=0,n[t+1]=0,n[t]=0,n[(t+=4)+3]=this.cursorIds.length>>24&255,n[t+2]=this.cursorIds.length>>16&255,n[t+1]=this.cursorIds.length>>8&255,n[t]=255&this.cursorIds.length,t+=4;for(var r=0;r<this.cursorIds.length;r++)n[t+3]=this.cursorIds[r].getLowBits()>>24&255,n[t+2]=this.cursorIds[r].getLowBits()>>16&255,n[t+1]=this.cursorIds[r].getLowBits()>>8&255,n[t]=255&this.cursorIds[r].getLowBits(),n[(t+=4)+3]=this.cursorIds[r].getHighBits()>>24&255,n[t+2]=this.cursorIds[r].getHighBits()>>16&255,n[t+1]=this.cursorIds[r].getHighBits()>>8&255,n[t]=255&this.cursorIds[r].getHighBits(),t+=4;return n};var l=function(e,t,n,o,i){i=i||{promoteLongs:!0,promoteValues:!0,promoteBuffers:!1},this.parsed=!1,this.raw=t,this.data=o,this.bson=e,this.opts=i,this.length=n.length,this.requestId=n.requestId,this.responseTo=n.responseTo,this.opCode=n.opCode,this.fromCompressed=n.fromCompressed,this.responseFlags=o.readInt32LE(0),this.cursorId=new r(o.readInt32LE(4),o.readInt32LE(8)),this.startingFrom=o.readInt32LE(12),this.numberReturned=o.readInt32LE(16),this.documents=new Array(this.numberReturned),this.cursorNotFound=0!=(0&this.responseFlags),this.queryFailure=0!=(2&this.responseFlags),this.shardConfigStale=0!=(4&this.responseFlags),this.awaitCapable=0!=(8&this.responseFlags),this.promoteLongs=\"boolean\"!=typeof i.promoteLongs||i.promoteLongs,this.promoteValues=\"boolean\"!=typeof i.promoteValues||i.promoteValues,this.promoteBuffers=\"boolean\"==typeof i.promoteBuffers&&i.promoteBuffers};l.prototype.isParsed=function(){return this.parsed},l.prototype.parse=function(e){if(!this.parsed){var t,n,o=(e=e||{}).raw||!1,i=e.documentsReturnedIn||null;if(n={promoteLongs:\"boolean\"==typeof e.promoteLongs?e.promoteLongs:this.opts.promoteLongs,promoteValues:\"boolean\"==typeof e.promoteValues?e.promoteValues:this.opts.promoteValues,promoteBuffers:\"boolean\"==typeof e.promoteBuffers?e.promoteBuffers:this.opts.promoteBuffers},this.index=20,1===this.numberReturned&&null!=i&&o){t=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24;var s=this.data.slice(this.index,this.index+t),a={};a[i]=!0,n.fieldsAsRaw=a;var c=this.bson.deserialize(s,n);return this.documents=c.cursor[i],this.numberReturned=this.documents.length,this.cursorId=\"number\"==typeof c.cursor.id?r.fromNumber(c.cursor.id):c.cursor.id,this.index=this.index+t,void(this.parsed=!0)}for(var l=0;l<this.numberReturned;l++)t=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,this.documents[l]=o?this.data.slice(this.index,this.index+t):this.bson.deserialize(this.data.slice(this.index,this.index+t),n),this.index=this.index+t;this.parsed=!0}},e.exports={Query:s,GetMore:a,Response:l,KillCursor:c}},function(e,t,n){var r=n(0).format,o=function(e,t,n){this.name=e,this.object=t,this.stream=\"boolean\"==typeof n&&n,this.instrumentations={}};o.prototype.classMethod=function(e,t){var n=Object.keys(t).sort(),r=i(n,t);null==this.instrumentations[r]&&(this.instrumentations[r]={methods:[],options:t}),this.instrumentations[r].methods.push(e)};var i=function(e,t){for(var n=[],o=0;o<e.length;o++)n.push(r(\"%s=%s\",e[o],t[e[o]]));return n.join()};o.prototype.staticMethod=function(e,t){t.static=!0;var n=Object.keys(t).sort(),r=i(n,t);null==this.instrumentations[r]&&(this.instrumentations[r]={methods:[],options:t}),this.instrumentations[r].methods.push(e)},o.prototype.generate=function(){var e={name:this.name,obj:this.object,stream:this.stream,instrumentations:[]};for(var t in this.instrumentations)e.instrumentations.push(this.instrumentations[t]);return e},e.exports=o},function(e,t,n){\"use strict\";var r=n(0).format,o=function(e,t,n){this.name=e,this.object=t,this.stream=\"boolean\"==typeof n&&n,this.instrumentations={}};o.prototype.classMethod=function(e,t){var n=Object.keys(t).sort(),r=i(n,t);null==this.instrumentations[r]&&(this.instrumentations[r]={methods:[],options:t}),this.instrumentations[r].methods.push(e)};var i=function(e,t){for(var n=[],o=0;o<e.length;o++)n.push(r(\"%s=%s\",e[o],t[e[o]]));return n.join()};o.prototype.staticMethod=function(e,t){t.static=!0;var n=Object.keys(t).sort(),r=i(n,t);null==this.instrumentations[r]&&(this.instrumentations[r]={methods:[],options:t}),this.instrumentations[r].methods.push(e)},o.prototype.generate=function(){var e={name:this.name,obj:this.object,stream:this.stream,instrumentations:[]};for(var t in this.instrumentations)e.instrumentations.push(this.instrumentations[t]);return e},e.exports=o},function(e,t){e.exports=require(\"crypto\")},function(e,t,n){\"use strict\";var r=n(40),o=n(0).format;function i(e,t,n){e.listeners(t).length>0&&e.emit(t,n)}var s=n(188).version,a=o(\"Node.js %s, %s\",process.version,r.endianness()),c=r.type(),l=process.platform,u=process.arch,p=r.release();function d(e){return JSON.parse(JSON.stringify(e))}var f=function(e,t){e.listeners(\"serverDescriptionChanged\").length>0&&(e.emit(\"serverDescriptionChanged\",{topologyId:-1!=e.s.topologyId?e.s.topologyId:e.id,address:e.name,previousDescription:function(e){return e.s.serverDescription||(e.s.serverDescription={address:e.name,arbiters:[],hosts:[],passives:[],type:\"Unknown\"}),e.s.serverDescription}(e),newDescription:t}),e.s.serverDescription=t)},h=function(e,t){return t||(t=e.ismaster),t?t.ismaster&&\"isdbgrid\"==t.msg?\"Mongos\":t.ismaster&&!t.hosts?\"Standalone\":t.ismaster?\"RSPrimary\":t.secondary?\"RSSecondary\":t.arbiterOnly?\"RSArbiter\":\"Unknown\":\"Unknown\"},m=function(e){return function(t){if(\"destroyed\"!=e.s.state){var n=(new Date).getTime();i(e,\"serverHeartbeatStarted\",{connectionId:e.name}),e.command(\"admin.$cmd\",{ismaster:!0},{monitoring:!0},function(r,o){if(r)i(e,\"serverHeartbeatFailed\",{durationMS:s,failure:r,connectionId:e.name});else{e.emit(\"ismaster\",o,e);var s=(new Date).getTime()-n;i(e,\"serverHeartbeatSucceeded\",{durationMS:s,reply:o.result,connectionId:e.name}),function(e,t,n){var r=h(e,t);return h(e,n)!=r}(e,e.s.ismaster,o.result)&&f(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:e.s.inTopology?h(e):\"Standalone\"}),e.s.ismaster=o.result,e.s.isMasterLatencyMS=s}if(\"function\"==typeof t)return t(r,o);e.s.inquireServerStateTimeout=setTimeout(m(e),e.s.haInterval)})}}};e.exports.inquireServerState=m,e.exports.getTopologyType=h,e.exports.emitServerDescriptionChanged=f,e.exports.emitTopologyDescriptionChanged=function(e,t){e.listeners(\"topologyDescriptionChanged\").length>0&&(e.emit(\"topologyDescriptionChanged\",{topologyId:-1!=e.s.topologyId?e.s.topologyId:e.id,address:e.name,previousDescription:function(e){return e.s.topologyDescription||(e.s.topologyDescription={topologyType:\"Unknown\",servers:[{address:e.name,arbiters:[],hosts:[],passives:[],type:\"Unknown\"}]}),e.s.topologyDescription}(e),newDescription:t}),e.s.serverDescription=t)},e.exports.cloneOptions=function(e){var t={};for(var n in e)t[n]=e[n];return t},e.exports.createClientInfo=function(e){var t=e.clientInfo?d(e.clientInfo):{driver:{name:\"nodejs-core\",version:s},os:{type:c,name:l,architecture:u,version:p}};if(t.platform&&-1==t.platform.indexOf(\"mongodb-core\")?t.platform=o(\"%s, mongodb-core: %s\",t.platform,s):t.platform||(t.platform=a),e.appname){var n=new Buffer(e.appname),r=n.length>128?n.slice(0,128).toString(\"utf8\"):e.appname;t.application={name:r}}return t},e.exports.clone=d,e.exports.diff=function(e,t){var n={servers:[]};e||(e={servers:[]});for(var r=0;r<e.servers.length;r++){for(var o=!1,i=0;i<t.servers.length;i++)if(t.servers[i].address.toLowerCase()===e.servers[r].address.toLowerCase()){o=!0;break}o||n.servers.push({address:e.servers[r].address,from:e.servers[r].type,to:\"Unknown\"})}for(i=0;i<t.servers.length;i++){for(o=!1,r=0;r<e.servers.length;r++)if(e.servers[r].address.toLowerCase()===t.servers[i].address.toLowerCase()){o=!0;break}o||n.servers.push({address:t.servers[i].address,from:\"Unknown\",to:t.servers[i].type})}for(r=0;r<e.servers.length;r++){var s=e.servers[r];for(i=0;i<t.servers.length;i++){var a=t.servers[i];s.address.toLowerCase()===a.address.toLowerCase()&&s.type!=a.type&&n.servers.push({address:s.address,from:s.type,to:a.type})}}return n},e.exports.Interval=function(e,t){var n=!1;this.start=function(){return this.isRunning()||(n=setInterval(e,t)),this},this.stop=function(){return clearInterval(n),n=!1,this},this.isRunning=function(){return!1!==n}},e.exports.Timeout=function(e,t){var n=!1;this.start=function(){return this.isRunning()||(n=setTimeout(function(){e(),n&&void 0===n._called&&(n._called=!0)},t)),this},this.stop=function(){return clearTimeout(n),n=!1,this},this.isRunning=function(){return!(n&&n._called||!1===n)}}},function(e,t,n){\"undefined\"!=typeof process&&\"renderer\"===process.type?e.exports=n(276):e.exports=n(275)},function(e,t){e.exports=require(\"path\")},function(e,t,n){\"use strict\";var r=function(e,t,n){if(!(this instanceof r))return new r(e,t,n);this._type=\"ReadPreference\",this.mode=e,this.tags=t,this.options=n,t&&\"object\"==typeof t&&!Array.isArray(t)&&t.maxStalenessSeconds&&(this.options=t,this.tags=null),this.options&&this.options.maxStalenessSeconds&&(this.maxStalenessSeconds=this.options.maxStalenessSeconds)};r.isValid=function(e){return e==r.PRIMARY||e==r.PRIMARY_PREFERRED||e==r.SECONDARY||e==r.SECONDARY_PREFERRED||e==r.NEAREST||1==e||0==e||null==e},r.prototype.isValid=function(e){var t=\"string\"==typeof e?e:this.mode;return r.isValid(t)},r.prototype.toObject=function(){var e={mode:this.mode};return null!=this.tags&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),e},r.prototype.toJSON=function(){return this.toObject()},r.PRIMARY=\"primary\",r.PRIMARY_PREFERRED=\"primaryPreferred\",r.SECONDARY=\"secondary\",r.SECONDARY_PREFERRED=\"secondaryPreferred\",r.NEAREST=\"nearest\",e.exports=r},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(0).format,i=n(2).formattedOrderClause,s=n(2).handleCallback,a=n(22),c=n(4).MongoError,l=n(9).Readable||n(65).Readable,u=n(16),p=n(4).Cursor,d=n(4).BSON.Map,f=n(4).ReadPreference,h=[\"tailable\",\"oplogReplay\",\"noCursorTimeout\",\"awaitData\",\"exhaust\",\"partial\"],m=[\"numberOfRetries\",\"tailableRetryInterval\"],g=Array.prototype.push,y=function(e,t,r,o,i,s){p.apply(this,Array.prototype.slice.call(arguments,0));var a=y.INIT,c=o.numberOfRetries||5,u=o.tailableRetryInterval||500,d=c,f=o.promiseLibrary;f||(f=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),l.call(this,{objectMode:!0}),this.s={numberOfRetries:c,tailableRetryInterval:u,currentNumberOfRetries:d,state:a,streamOptions:{},bson:e,ns:t,cmd:r,options:o,topology:i,topologyOptions:s,promiseLibrary:f,currentDoc:null},1==this.s.options.noCursorTimeout&&this.addCursorFlag(\"noCursorTimeout\",!0),this.sortValue=this.s.cmd.sort;var h=r.cursor&&r.cursor.batchSize?r.cursor&&r.cursor.batchSize:o.cursor&&o.cursor.batchSize?o.cursor.batchSize:1e3;this.setCursorBatchSize(h)};for(var v in r(y,l),p.prototype._next=p.prototype.next,p.prototype)y.prototype[v]=p.prototype[v];var b=y.define=new u(\"Cursor\",y,!0);y.prototype.hasNext=function(e){var t=this;return\"function\"==typeof e?t.s.currentDoc?e(null,!0):x(t,function(n,r){return n?e(n,null):r?(t.s.currentDoc=r,void e(null,!0)):e(null,!1)}):new this.s.promiseLibrary(function(e,n){t.s.currentDoc?e(!0):x(t,function(r,o){return t.s.state==y.CLOSED||t.isDead()?e(!1):r?n(r):o?(t.s.currentDoc=o,void e(!0)):e(!1)})})},b.classMethod(\"hasNext\",{callback:!0,promise:!0}),y.prototype.next=function(e){var t=this;if(\"function\"==typeof e){if(t.s.currentDoc){var n=t.s.currentDoc;return t.s.currentDoc=null,e(null,n)}return x(t,e)}return new this.s.promiseLibrary(function(e,n){if(t.s.currentDoc){var r=t.s.currentDoc;return t.s.currentDoc=null,e(r)}x(t,function(t,r){if(t)return n(t);e(r)})})},b.classMethod(\"next\",{callback:!0,promise:!0}),y.prototype.filter=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.query=e,this},b.classMethod(\"filter\",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxScan=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.maxScan=e,this},b.classMethod(\"maxScan\",{callback:!1,promise:!1,returns:[y]}),y.prototype.hint=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.hint=e,this},b.classMethod(\"hint\",{callback:!1,promise:!1,returns:[y]}),y.prototype.min=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.min=e,this},b.classMethod(\"min\",{callback:!1,promise:!1,returns:[y]}),y.prototype.max=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.max=e,this},b.classMethod(\"max\",{callback:!1,promise:!1,returns:[y]}),y.prototype.returnKey=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.returnKey=e,this},b.classMethod(\"returnKey\",{callback:!1,promise:!1,returns:[y]}),y.prototype.showRecordId=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.showDiskLoc=e,this},b.classMethod(\"showRecordId\",{callback:!1,promise:!1,returns:[y]}),y.prototype.snapshot=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.snapshot=e,this},b.classMethod(\"snapshot\",{callback:!1,promise:!1,returns:[y]}),y.prototype.setCursorOption=function(e,t){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(-1==m.indexOf(e))throw c.create({message:o(\"option %s not a supported option %s\",e,m),driver:!0});return this.s[e]=t,\"numberOfRetries\"==e&&(this.s.currentNumberOfRetries=t),this},b.classMethod(\"setCursorOption\",{callback:!1,promise:!1,returns:[y]}),y.prototype.addCursorFlag=function(e,t){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(-1==h.indexOf(e))throw c.create({message:o(\"flag %s not a supported flag %s\",e,h),driver:!0});if(\"boolean\"!=typeof t)throw c.create({message:o(\"flag %s must be a boolean value\",e),driver:!0});return this.s.cmd[e]=t,this},b.classMethod(\"addCursorFlag\",{callback:!1,promise:!1,returns:[y]}),y.prototype.addQueryModifier=function(e,t){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(\"$\"!=e[0])throw c.create({message:o(\"%s is not a valid query modifier\"),driver:!0});var n=e.substr(1);return this.s.cmd[n]=t,\"orderby\"==n&&(this.s.cmd.sort=this.s.cmd[n]),this},b.classMethod(\"addQueryModifier\",{callback:!1,promise:!1,returns:[y]}),y.prototype.comment=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.comment=e,this},b.classMethod(\"comment\",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxAwaitTimeMS=function(e){if(\"number\"!=typeof e)throw c.create({message:\"maxAwaitTimeMS must be a number\",driver:!0});if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.maxAwaitTimeMS=e,this},b.classMethod(\"maxAwaitTimeMS\",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxTimeMS=function(e){if(\"number\"!=typeof e)throw c.create({message:\"maxTimeMS must be a number\",driver:!0});if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.maxTimeMS=e,this},b.classMethod(\"maxTimeMS\",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxTimeMs=y.prototype.maxTimeMS,b.classMethod(\"maxTimeMs\",{callback:!1,promise:!1,returns:[y]}),y.prototype.project=function(e){if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.fields=e,this},b.classMethod(\"project\",{callback:!1,promise:!1,returns:[y]}),y.prototype.sort=function(e,t){if(this.s.options.tailable)throw c.create({message:\"Tailable cursor doesn't support sorting\",driver:!0});if(this.s.state==y.CLOSED||this.s.state==y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});var n=e;return Array.isArray(n)&&Array.isArray(n[0])&&(n=new d(n.map(function(e){var t=[e[0],null];if(\"asc\"==e[1])t[1]=1;else if(\"desc\"==e[1])t[1]=-1;else{if(1!=e[1]&&-1!=e[1])throw new c(\"Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]\");t[1]=e[1]}return t}))),null!=t&&(n=[[e,t]]),this.s.cmd.sort=n,this.sortValue=n,this},b.classMethod(\"sort\",{callback:!1,promise:!1,returns:[y]}),y.prototype.batchSize=function(e){if(this.s.options.tailable)throw c.create({message:\"Tailable cursor doesn't support batchSize\",driver:!0});if(this.s.state==y.CLOSED||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof e)throw c.create({message:\"batchSize requires an integer\",driver:!0});return this.s.cmd.batchSize=e,this.setCursorBatchSize(e),this},b.classMethod(\"batchSize\",{callback:!1,promise:!1,returns:[y]}),y.prototype.collation=function(e){return this.s.cmd.collation=e,this},b.classMethod(\"collation\",{callback:!1,promise:!1,returns:[y]}),y.prototype.limit=function(e){if(this.s.options.tailable)throw c.create({message:\"Tailable cursor doesn't support limit\",driver:!0});if(this.s.state==y.OPEN||this.s.state==y.CLOSED||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof e)throw c.create({message:\"limit requires an integer\",driver:!0});return this.s.cmd.limit=e,this.setCursorLimit(e),this},b.classMethod(\"limit\",{callback:!1,promise:!1,returns:[y]}),y.prototype.skip=function(e){if(this.s.options.tailable)throw c.create({message:\"Tailable cursor doesn't support skip\",driver:!0});if(this.s.state==y.OPEN||this.s.state==y.CLOSED||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof e)throw c.create({message:\"skip requires an integer\",driver:!0});return this.s.cmd.skip=e,this.setCursorSkip(e),this},b.classMethod(\"skip\",{callback:!1,promise:!1,returns:[y]}),y.prototype.nextObject=y.prototype.next;var x=function(e,t){if(e.s.state==y.CLOSED||e.isDead&&e.isDead())return s(t,c.create({message:\"Cursor is closed\",driver:!0}));if(e.s.state==y.INIT&&e.s.cmd.sort)try{e.s.cmd.sort=i(e.s.cmd.sort)}catch(e){return s(t,e)}e._next(function(n,r){if(e.s.state=y.OPEN,n)return s(t,n);s(t,null,r)})};b.classMethod(\"nextObject\",{callback:!0,promise:!0});var w=function(e,t){if(0!=e.bufferedCount())return e._next(t),w};y.prototype.next=y.prototype.nextObject,b.classMethod(\"next\",{callback:!0,promise:!0}),y.prototype.each=function(e){this.rewind(),this.s.state=y.INIT,S(this,e)},b.classMethod(\"each\",{callback:!0,promise:!1});var S=function(e,t){if(!t)throw c.create({message:\"callback is mandatory\",driver:!0});if(!e.isNotified()){if(e.s.state==y.CLOSED||e.isDead())return s(t,c.create({message:\"Cursor is closed\",driver:!0}));e.s.state==y.INIT&&(e.s.state=y.OPEN);var n=null;if(e.bufferedCount()>0){for(;n=w(e,t);)n(e,t);S(e,t)}else e.next(function(n,r){return n?s(t,n):null==r?(e.s.state=y.CLOSED,s(t,null,null)):void(0!=s(t,null,r)&&S(e,t))})}};y.prototype.forEach=function(e,t){this.each(function(n,r){if(n)return t(n),!1;if(null!=r)return e(r),!0;if(null==r&&t){var o=t;return t=null,o(null),!1}})},b.classMethod(\"forEach\",{callback:!0,promise:!1}),y.prototype.setReadPreference=function(e){if(this.s.state!=y.INIT)throw c.create({message:\"cannot change cursor readPreference after cursor has been accessed\",driver:!0});return e instanceof a?this.s.options.readPreference=new f(e.mode,e.tags,{maxStalenessSeconds:e.maxStalenessSeconds}):\"string\"==typeof e?this.s.options.readPreference=new f(e):e instanceof f&&(this.s.options.readPreference=e),this},b.classMethod(\"setReadPreference\",{callback:!1,promise:!1,returns:[y]}),y.prototype.toArray=function(e){var t=this;if(t.s.options.tailable)throw c.create({message:\"Tailable cursor cannot be converted to array\",driver:!0});return\"function\"==typeof e?k(t,e):new this.s.promiseLibrary(function(e,n){k(t,function(t,r){if(t)return n(t);e(r)})})};var k=function(e,t){var n=[];e.rewind(),e.s.state=y.INIT;var r=function(){e._next(function(o,i){if(o)return s(t,o);if(null==i)return e.s.state=y.CLOSED,s(t,null,n);if(n.push(i),e.bufferedCount()>0){var a=e.readBufferedDocuments(e.bufferedCount());e.s.transforms&&\"function\"==typeof e.s.transforms.doc&&(a=a.map(e.s.transforms.doc)),g.apply(n,a)}r()})};r()};b.classMethod(\"toArray\",{callback:!0,promise:!0}),y.prototype.count=function(e,t,n){var r=this;if(null==r.s.cmd.query)throw c.create({message:\"count can only be used with find command\",driver:!0});return\"function\"==typeof t&&(n=t,t={}),t=t||{},\"function\"==typeof n?O(r,e,t,n):new this.s.promiseLibrary(function(n,o){O(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var O=function(e,t,n,r){\"function\"==typeof t&&(r=t,t=!0),t&&(\"number\"==typeof e.cursorSkip()&&(n.skip=e.cursorSkip()),\"number\"==typeof e.cursorLimit()&&(n.limit=e.cursorLimit()));var i=e.s.ns.indexOf(\".\"),s={count:e.s.ns.substr(i+1),query:e.s.cmd.query};e.s.cmd.readConcern&&(s.readConcern=e.s.cmd.readConcern),e.s.cmd.hint&&(s.hint=e.s.cmd.hint),\"number\"==typeof n.maxTimeMS?s.maxTimeMS=n.maxTimeMS:e.s.cmd&&\"number\"==typeof e.s.cmd.maxTimeMS&&(s.maxTimeMS=e.s.cmd.maxTimeMS),n.skip&&(s.skip=n.skip),n.limit&&(s.limit=n.limit),e.s.options.hint&&(s.hint=e.s.options.hint),e.server=e.topology,e.topology.command(o(\"%s.$cmd\",e.s.ns.substr(0,i)),s,function(e,t){r(e,t?t.result.n:null)},e.options)};b.classMethod(\"count\",{callback:!0,promise:!0}),y.prototype.close=function(e){return this.s.state=y.CLOSED,this.kill(),this.emit(\"close\"),\"function\"==typeof e?s(e,null,this):new this.s.promiseLibrary(function(e){e()})},b.classMethod(\"close\",{callback:!0,promise:!0}),y.prototype.map=function(e){if(this.cursorState.transforms&&this.cursorState.transforms.doc){var t=this.cursorState.transforms.doc;this.cursorState.transforms.doc=function(n){return e(t(n))}}else this.cursorState.transforms={doc:e};return this},b.classMethod(\"map\",{callback:!1,promise:!1,returns:[y]}),y.prototype.isClosed=function(){return this.isDead()},b.classMethod(\"isClosed\",{callback:!1,promise:!1,returns:[Boolean]}),y.prototype.destroy=function(e){e&&this.emit(\"error\",e),this.pause(),this.close()},b.classMethod(\"destroy\",{callback:!1,promise:!1}),y.prototype.stream=function(e){return this.s.streamOptions=e||{},this},b.classMethod(\"stream\",{callback:!1,promise:!1,returns:[y]}),y.prototype.explain=function(e){var t=this;return this.s.cmd.explain=!0,this.s.cmd.readConcern&&delete this.s.cmd.readConcern,\"function\"==typeof e?this._next(e):new this.s.promiseLibrary(function(e,n){t._next(function(t,r){if(t)return n(t);e(r)})})},b.classMethod(\"explain\",{callback:!0,promise:!0}),y.prototype._read=function(){var e=this;if(e.s.state==y.CLOSED||e.isDead())return e.push(null);e.nextObject(function(t,n){return t?(e.listeners(\"error\")&&e.listeners(\"error\").length>0&&e.emit(\"error\",t),e.isDead()||e.close(),e.emit(\"end\"),e.emit(\"finish\")):\"function\"==typeof e.s.streamOptions.transform&&null!=n?e.push(e.s.streamOptions.transform(n)):e.cursorState.transforms&&\"function\"==typeof e.cursorState.transforms.doc&&null!=n?e.push(e.cursorState.transforms.doc(n)):void e.push(n)})},Object.defineProperty(y.prototype,\"readPreference\",{enumerable:!0,get:function(){return this&&this.s?this.s.options.readPreference:null}}),Object.defineProperty(y.prototype,\"namespace\",{enumerable:!0,get:function(){if(!this||!this.s)return null;var e=this.s.ns||\"\",t=e.indexOf(\".\");return t<0?{database:this.s.ns,collection:\"\"}:{database:e.substr(0,t),collection:e.substr(t+1)}}}),y.INIT=0,y.OPEN=1,y.CLOSED=2,y.GET_MORE=3,e.exports=y},function(e,t,n){\"use strict\";const r=n(5),o=n(3).MongoError,i=n(0).format,s=n(40),a=n(1).translateReadPreference,c=n(3).Sessions.ClientSession;var l=function(e,t){var n=this;t=t||{force:!1,bufferMaxEntries:-1},this.s={storedOps:[],storeOptions:t,topology:e},Object.defineProperty(this,\"length\",{enumerable:!0,get:function(){return n.s.storedOps.length}})};l.prototype.add=function(e,t,n,r,s){if(this.s.storeOptions.force)return s(o.create({message:\"db closed by application\",driver:!0}));if(0===this.s.storeOptions.bufferMaxEntries)return s(o.create({message:i(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries)for(;this.s.storedOps.length>0;){this.s.storedOps.shift().c(o.create({message:i(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}))}else this.s.storedOps.push({t:e,n:t,o:n,op:r,c:s})},l.prototype.addObjectAndMethod=function(e,t,n,r,s){if(this.s.storeOptions.force)return s(o.create({message:\"db closed by application\",driver:!0}));if(0===this.s.storeOptions.bufferMaxEntries)return s(o.create({message:i(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries)for(;this.s.storedOps.length>0;){this.s.storedOps.shift().c(o.create({message:i(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}))}else this.s.storedOps.push({t:e,m:n,o:t,p:r,c:s})},l.prototype.flush=function(e){for(;this.s.storedOps.length>0;)this.s.storedOps.shift().c(e||o.create({message:i(\"no connection available for operation\"),driver:!0}))};var u=[\"primary\",\"primaryPreferred\",\"nearest\",\"secondaryPreferred\"],p=[\"secondary\",\"secondaryPreferred\"];l.prototype.execute=function(e){e=e||{};var t=this.s.storedOps;this.s.storedOps=[];for(var n=\"boolean\"!=typeof e.executePrimary||e.executePrimary,r=\"boolean\"!=typeof e.executeSecondary||e.executeSecondary;t.length>0;){var o=t.shift();\"cursor\"===o.t?n&&r?o.o[o.m].apply(o.o,o.p):n&&o.o.options&&o.o.options.readPreference&&-1!==u.indexOf(o.o.options.readPreference.mode)?o.o[o.m].apply(o.o,o.p):!n&&r&&o.o.options&&o.o.options.readPreference&&-1!==p.indexOf(o.o.options.readPreference.mode)&&o.o[o.m].apply(o.o,o.p):\"auth\"===o.t?this.s.topology[o.t].apply(this.s.topology,o.o):n&&r?this.s.topology[o.t](o.n,o.o,o.op,o.c):n&&o.op&&o.op.readPreference&&-1!==u.indexOf(o.op.readPreference.mode)?this.s.topology[o.t](o.n,o.o,o.op,o.c):!n&&r&&o.op&&o.op.readPreference&&-1!==p.indexOf(o.op.readPreference.mode)&&this.s.topology[o.t](o.n,o.o,o.op,o.c)}},l.prototype.all=function(){return this.s.storedOps};var d=function(e){var t=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:function(){return n}})},n=!1,r=!1,o=!1,i=!1,s=!1,a=!1,c=e.maxWriteBatchSize||1e3,l=!1,u=!1;e.minWireVersion>=0&&(o=!0),e.maxWireVersion>=1&&(n=!0,i=!0),e.maxWireVersion>=2&&(r=!0),e.maxWireVersion>=3&&(s=!0,a=!0),e.maxWireVersion>=5&&(l=!0,u=!0),null==e.minWireVersion&&(e.minWireVersion=0),null==e.maxWireVersion&&(e.maxWireVersion=0),t(this,\"hasAggregationCursor\",n),t(this,\"hasWriteCommands\",r),t(this,\"hasTextSearch\",o),t(this,\"hasAuthCommands\",i),t(this,\"hasListCollectionsCommand\",s),t(this,\"hasListIndexesCommand\",a),t(this,\"minWireVersion\",e.minWireVersion),t(this,\"maxWireVersion\",e.maxWireVersion),t(this,\"maxNumberOfDocsInBatch\",c),t(this,\"commandsTakeWriteConcern\",l),t(this,\"commandsTakeCollation\",u)};const f=n(199).version,h=i(\"Node.js %s, %s\",process.version,s.endianness()),m=s.type(),g=process.platform,y=process.arch,v=s.release();class b extends r{constructor(){super(),this.clientInfo={driver:{name:\"nodejs\",version:f},os:{type:m,name:g,architecture:y,version:v},platform:h},this.setMaxListeners(1/0)}hasSessionSupport(){return null!=this.logicalSessionTimeoutMinutes}startSession(e){const t=new c(this,this.s.sessionPool,e);return t.once(\"ended\",()=>{this.s.sessions=this.s.sessions.filter(e=>!e.equals(t))}),this.s.sessions.push(t),t}endSessions(e,t){return this.s.coreTopology.endSessions(e,t)}capabilities(){return this.s.sCapabilities?this.s.sCapabilities:null==this.s.coreTopology.lastIsMaster()?null:(this.s.sCapabilities=new d(this.s.coreTopology.lastIsMaster()),this.s.sCapabilities)}command(e,t,n,r){this.s.coreTopology.command(e,t,a(n),r)}insert(e,t,n,r){this.s.coreTopology.insert(e,t,n,r)}update(e,t,n,r){this.s.coreTopology.update(e,t,n,r)}remove(e,t,n,r){this.s.coreTopology.remove(e,t,n,r)}isConnected(e){return e=a(e=e||{}),this.s.coreTopology.isConnected(e)}isDestroyed(){return this.s.coreTopology.isDestroyed()}cursor(e,t,n){return(n=a(n=n||{})).disconnectHandler=this.s.store,n.topology=this,this.s.coreTopology.cursor(e,t,n)}lastIsMaster(){return this.s.coreTopology.lastIsMaster()}getServer(e){return this.s.coreTopology.getServer(e)}getConnection(e){return this.s.coreTopology.getConnection(e)}unref(){return this.s.coreTopology.unref()}auth(){var e=Array.prototype.slice.call(arguments,0);this.s.coreTopology.auth.apply(this.s.coreTopology,e)}logout(){var e=Array.prototype.slice.call(arguments,0);this.s.coreTopology.logout.apply(this.s.coreTopology,e)}connections(){return this.s.coreTopology.connections()}close(e){this.s.sessions.length&&(this.endSessions(this.s.sessions.map(e=>e.id)),this.s.sessions.forEach(e=>e.endSession({skipCommand:!0}))),this.s.sessionPool&&this.s.sessionPool.endAllPooledSessions(),this.s.coreTopology.destroy({force:\"boolean\"==typeof e&&e}),!0===e&&(this.s.storeOptions.force=e,this.s.store.flush())}}Object.defineProperty(b.prototype,\"isMasterDoc\",{enumerable:!0,get:function(){return this.s.coreTopology.lastIsMaster()}}),Object.defineProperty(b.prototype,\"bson\",{enumerable:!0,get:function(){return this.s.coreTopology.s.bson}}),Object.defineProperty(b.prototype,\"parserType\",{enumerable:!0,get:function(){return this.s.coreTopology.parserType}}),Object.defineProperty(b.prototype,\"logicalSessionTimeoutMinutes\",{enumerable:!0,get:function(){return this.s.coreTopology.logicalSessionTimeoutMinutes}}),Object.defineProperty(b.prototype,\"type\",{enumerable:!0,get:function(){return this.s.coreTopology.type}}),t.Store=l,t.ServerCapabilities=d,t.TopologyBase=b},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(0).format,i=n(1).formattedOrderClause,s=n(1).handleCallback,a=n(3).ReadPreference,c=n(3).MongoError,l=n(9).Readable,u=n(17),p=n(3).Cursor,d=n(3).BSON.Map,f=n(1).executeOperation,h=[\"tailable\",\"oplogReplay\",\"noCursorTimeout\",\"awaitData\",\"exhaust\",\"partial\"],m=[\"numberOfRetries\",\"tailableRetryInterval\"],g=Array.prototype.push,y=function(e,t,n,r,o,i){p.apply(this,Array.prototype.slice.call(arguments,0));var s=y.INIT,a=r.numberOfRetries||5,c=r.tailableRetryInterval||500,u=a,d=r.promiseLibrary||Promise;l.call(this,{objectMode:!0}),this.s={numberOfRetries:a,tailableRetryInterval:c,currentNumberOfRetries:u,state:s,streamOptions:{},bson:e,ns:t,cmd:n,options:r,topology:o,topologyOptions:i,promiseLibrary:d,currentDoc:null,session:r.session},!0===this.s.options.noCursorTimeout&&this.addCursorFlag(\"noCursorTimeout\",!0),this.sortValue=this.s.cmd.sort;var f=n.cursor&&n.cursor.batchSize?n.cursor&&n.cursor.batchSize:r.cursor&&r.cursor.batchSize?r.cursor.batchSize:1e3;this.setCursorBatchSize(f)};for(var v in r(y,l),p.prototype._next=p.prototype.next,p.prototype)y.prototype[v]=p.prototype[v];var b=y.define=new u(\"Cursor\",y,!0);y.prototype.hasNext=function(e){return f(this.s.topology,x,[this,e],{skipSessions:!0})};const x=(e,t)=>{if(e.s.currentDoc)return t(null,!0);S(e,function(n,r){return n?t(n,null):e.s.state===y.CLOSED||e.isDead()?t(null,!1):r?(e.s.currentDoc=r,void t(null,!0)):t(null,!1)})};b.classMethod(\"hasNext\",{callback:!0,promise:!0}),y.prototype.next=function(e){return f(this.s.topology,w,[this,e],{skipSessions:!0})};const w=(e,t)=>{if(e.s.currentDoc){var n=e.s.currentDoc;return e.s.currentDoc=null,t(null,n)}S(e,t)};b.classMethod(\"next\",{callback:!0,promise:!0}),y.prototype.filter=function(e){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.query=e,this},b.classMethod(\"filter\",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxScan=function(e){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.maxScan=e,this},b.classMethod(\"maxScan\",{callback:!1,promise:!1,returns:[y]}),y.prototype.hint=function(e){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.hint=e,this},b.classMethod(\"hint\",{callback:!1,promise:!1,returns:[y]}),y.prototype.min=function(e){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.min=e,this},b.classMethod(\"min\",{callback:!1,promise:!1,returns:[y]}),y.prototype.max=function(e){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.max=e,this},b.classMethod(\"max\",{callback:!1,promise:!1,returns:[y]}),y.prototype.returnKey=function(e){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.returnKey=e,this},b.classMethod(\"returnKey\",{callback:!1,promise:!1,returns:[y]}),y.prototype.showRecordId=function(e){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.showDiskLoc=e,this},b.classMethod(\"showRecordId\",{callback:!1,promise:!1,returns:[y]}),y.prototype.snapshot=function(e){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.snapshot=e,this},b.classMethod(\"snapshot\",{callback:!1,promise:!1,returns:[y]}),y.prototype.setCursorOption=function(e,t){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(-1===m.indexOf(e))throw c.create({message:o(\"option %s not a supported option %s\",e,m),driver:!0});return this.s[e]=t,\"numberOfRetries\"===e&&(this.s.currentNumberOfRetries=t),this},b.classMethod(\"setCursorOption\",{callback:!1,promise:!1,returns:[y]}),y.prototype.addCursorFlag=function(e,t){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(-1===h.indexOf(e))throw c.create({message:o(\"flag %s not a supported flag %s\",e,h),driver:!0});if(\"boolean\"!=typeof t)throw c.create({message:o(\"flag %s must be a boolean value\",e),driver:!0});return this.s.cmd[e]=t,this},b.classMethod(\"addCursorFlag\",{callback:!1,promise:!1,returns:[y]}),y.prototype.addQueryModifier=function(e,t){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(\"$\"!==e[0])throw c.create({message:o(\"%s is not a valid query modifier\"),driver:!0});var n=e.substr(1);return this.s.cmd[n]=t,\"orderby\"===n&&(this.s.cmd.sort=this.s.cmd[n]),this},b.classMethod(\"addQueryModifier\",{callback:!1,promise:!1,returns:[y]}),y.prototype.comment=function(e){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.comment=e,this},b.classMethod(\"comment\",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxAwaitTimeMS=function(e){if(\"number\"!=typeof e)throw c.create({message:\"maxAwaitTimeMS must be a number\",driver:!0});if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.maxAwaitTimeMS=e,this},b.classMethod(\"maxAwaitTimeMS\",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxTimeMS=function(e){if(\"number\"!=typeof e)throw c.create({message:\"maxTimeMS must be a number\",driver:!0});if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.maxTimeMS=e,this},b.classMethod(\"maxTimeMS\",{callback:!1,promise:!1,returns:[y]}),y.prototype.maxTimeMs=y.prototype.maxTimeMS,b.classMethod(\"maxTimeMs\",{callback:!1,promise:!1,returns:[y]}),y.prototype.project=function(e){if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});return this.s.cmd.fields=e,this},b.classMethod(\"project\",{callback:!1,promise:!1,returns:[y]}),y.prototype.sort=function(e,t){if(this.s.options.tailable)throw c.create({message:\"Tailable cursor doesn't support sorting\",driver:!0});if(this.s.state===y.CLOSED||this.s.state===y.OPEN||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});var n=e;return Array.isArray(n)&&Array.isArray(n[0])&&(n=new d(n.map(function(e){var t=[e[0],null];if(\"asc\"===e[1])t[1]=1;else if(\"desc\"===e[1])t[1]=-1;else{if(1!==e[1]&&-1!==e[1])throw new c(\"Illegal sort clause, must be of the form [['field1', '(ascending|descending)'], ['field2', '(ascending|descending)']]\");t[1]=e[1]}return t}))),null!=t&&(n=[[e,t]]),this.s.cmd.sort=n,this.sortValue=n,this},b.classMethod(\"sort\",{callback:!1,promise:!1,returns:[y]}),y.prototype.batchSize=function(e){if(this.s.options.tailable)throw c.create({message:\"Tailable cursor doesn't support batchSize\",driver:!0});if(this.s.state===y.CLOSED||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof e)throw c.create({message:\"batchSize requires an integer\",driver:!0});return this.s.cmd.batchSize=e,this.setCursorBatchSize(e),this},b.classMethod(\"batchSize\",{callback:!1,promise:!1,returns:[y]}),y.prototype.collation=function(e){return this.s.cmd.collation=e,this},b.classMethod(\"collation\",{callback:!1,promise:!1,returns:[y]}),y.prototype.limit=function(e){if(this.s.options.tailable)throw c.create({message:\"Tailable cursor doesn't support limit\",driver:!0});if(this.s.state===y.OPEN||this.s.state===y.CLOSED||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof e)throw c.create({message:\"limit requires an integer\",driver:!0});return this.s.cmd.limit=e,this.setCursorLimit(e),this},b.classMethod(\"limit\",{callback:!1,promise:!1,returns:[y]}),y.prototype.skip=function(e){if(this.s.options.tailable)throw c.create({message:\"Tailable cursor doesn't support skip\",driver:!0});if(this.s.state===y.OPEN||this.s.state===y.CLOSED||this.isDead())throw c.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof e)throw c.create({message:\"skip requires an integer\",driver:!0});return this.s.cmd.skip=e,this.setCursorSkip(e),this},b.classMethod(\"skip\",{callback:!1,promise:!1,returns:[y]});var S=function(e,t){if(e.s.state===y.CLOSED||e.isDead&&e.isDead())return s(t,c.create({message:\"Cursor is closed\",driver:!0}));if(e.s.state===y.INIT&&e.s.cmd.sort)try{e.s.cmd.sort=i(e.s.cmd.sort)}catch(e){return s(t,e)}e._next(function(n,r){if(e.s.state=y.OPEN,n)return s(t,n);s(t,null,r)})},k=function(e,t){if(0!==e.bufferedCount())return e._next(t),k};y.prototype.each=function(e){this.rewind(),this.s.state=y.INIT,O(this,e)},b.classMethod(\"each\",{callback:!0,promise:!1});var O=function(e,t){if(!t)throw c.create({message:\"callback is mandatory\",driver:!0});if(!e.isNotified()){if(e.s.state===y.CLOSED||e.isDead())return s(t,c.create({message:\"Cursor is closed\",driver:!0}));e.s.state===y.INIT&&(e.s.state=y.OPEN);var n=null;if(e.bufferedCount()>0){for(;n=k(e,t);)n(e,t);O(e,t)}else e.next(function(n,r){return n?s(t,n):null==r?e.close({skipKillCursors:!0},()=>s(t,null,null)):void(!1!==s(t,null,r)&&O(e,t))})}};y.prototype.forEach=function(e,t){this.each(function(n,r){if(n)return t(n),!1;if(null!=r)return e(r),!0;if(null==r&&t){var o=t;return t=null,o(null),!1}})},b.classMethod(\"forEach\",{callback:!0,promise:!1}),y.prototype.setReadPreference=function(e){if(this.s.state!==y.INIT)throw c.create({message:\"cannot change cursor readPreference after cursor has been accessed\",driver:!0});if(e instanceof a)this.s.options.readPreference=e;else{if(\"string\"!=typeof e)throw new TypeError(\"Invalid read preference: \"+e);this.s.options.readPreference=new a(e)}return this},b.classMethod(\"setReadPreference\",{callback:!1,promise:!1,returns:[y]}),y.prototype.toArray=function(e){if(this.s.options.tailable)throw c.create({message:\"Tailable cursor cannot be converted to array\",driver:!0});return f(this.s.topology,C,[this,e],{skipSessions:!0})};var C=function(e,t){var n=[];e.rewind(),e.s.state=y.INIT;var r=function(){e._next(function(o,i){if(o)return s(t,o);if(null==i)return e.close({skipKillCursors:!0},()=>s(t,null,n));if(n.push(i),e.bufferedCount()>0){var a=e.readBufferedDocuments(e.bufferedCount());e.s.transforms&&\"function\"==typeof e.s.transforms.doc&&(a=a.map(e.s.transforms.doc)),g.apply(n,a)}r()})};r()};b.classMethod(\"toArray\",{callback:!0,promise:!0}),y.prototype.count=function(e,t,n){if(null==this.s.cmd.query)throw c.create({message:\"count can only be used with find command\",driver:!0});return\"function\"==typeof t&&(n=t,t={}),t=t||{},f(this.s.topology,_,[this,e,t,n],{skipSessions:!0})};var _=function(e,t,n,r){\"function\"==typeof t&&(r=t,t=!0),t&&(\"number\"==typeof e.cursorSkip()&&(n.skip=e.cursorSkip()),\"number\"==typeof e.cursorLimit()&&(n.limit=e.cursorLimit()));var i=e.s.ns.indexOf(\".\"),s={count:e.s.ns.substr(i+1),query:e.s.cmd.query};e.s.cmd.readConcern&&(s.readConcern=e.s.cmd.readConcern),e.s.cmd.hint&&(s.hint=e.s.cmd.hint),\"number\"==typeof n.maxTimeMS?s.maxTimeMS=n.maxTimeMS:e.s.cmd&&\"number\"==typeof e.s.cmd.maxTimeMS&&(s.maxTimeMS=e.s.cmd.maxTimeMS),n.skip&&(s.skip=n.skip),n.limit&&(s.limit=n.limit),e.s.options.hint&&(s.hint=e.s.options.hint),e.server=e.topology.s.coreTopology,e.s.topology.command(o(\"%s.$cmd\",e.s.ns.substr(0,i)),s,function(e,t){r(e,t?t.result.n:null)},e.options)};b.classMethod(\"count\",{callback:!0,promise:!0}),y.prototype.close=function(e,t){\"function\"==typeof e&&(t=e,e={}),e=Object.assign({},{skipKillCursors:!1},e),this.s.state=y.CLOSED,e.skipKillCursors||this.kill();const n=()=>(this.emit(\"close\"),\"function\"==typeof t?s(t,null,this):new this.s.promiseLibrary(function(e){e()}));return this.s.session?this.s.session.endSession(()=>n()):n()},b.classMethod(\"close\",{callback:!0,promise:!0}),y.prototype.map=function(e){if(this.cursorState.transforms&&this.cursorState.transforms.doc){var t=this.cursorState.transforms.doc;this.cursorState.transforms.doc=function(n){return e(t(n))}}else this.cursorState.transforms={doc:e};return this},b.classMethod(\"map\",{callback:!1,promise:!1,returns:[y]}),y.prototype.isClosed=function(){return this.isDead()},b.classMethod(\"isClosed\",{callback:!1,promise:!1,returns:[Boolean]}),y.prototype.destroy=function(e){e&&this.emit(\"error\",e),this.pause(),this.close()},b.classMethod(\"destroy\",{callback:!1,promise:!1}),y.prototype.stream=function(e){return this.s.streamOptions=e||{},this},b.classMethod(\"stream\",{callback:!1,promise:!1,returns:[y]}),y.prototype.explain=function(e){return this.s.cmd.explain=!0,this.s.cmd.readConcern&&delete this.s.cmd.readConcern,f(this.s.topology,this._next.bind(this),[e],{skipSessions:!0})},b.classMethod(\"explain\",{callback:!0,promise:!0}),y.prototype._read=function(){var e=this;if(e.s.state===y.CLOSED||e.isDead())return e.push(null);e.next(function(t,n){return t?(e.listeners(\"error\")&&e.listeners(\"error\").length>0&&e.emit(\"error\",t),e.isDead()||e.close(),e.emit(\"end\"),e.emit(\"finish\")):\"function\"==typeof e.s.streamOptions.transform&&null!=n?e.push(e.s.streamOptions.transform(n)):e.cursorState.transforms&&\"function\"==typeof e.cursorState.transforms.doc&&null!=n?e.push(e.cursorState.transforms.doc(n)):(e.push(n),void(null===n&&e.isDead()&&e.once(\"end\",()=>{e.close(),e.emit(\"finish\")})))})},Object.defineProperty(y.prototype,\"readPreference\",{enumerable:!0,get:function(){return this&&this.s?this.s.options.readPreference:null}}),Object.defineProperty(y.prototype,\"namespace\",{enumerable:!0,get:function(){if(!this||!this.s)return null;var e=this.s.ns||\"\",t=e.indexOf(\".\");return t<0?{database:this.s.ns,collection:\"\"}:{database:e.substr(0,t),collection:e.substr(t+1)}}}),y.INIT=0,y.OPEN=1,y.CLOSED=2,y.GET_MORE=3,e.exports=y},function(e,t){e.exports=require(\"fs\")},function(e,t,n){\"use strict\";var r=n(0).format,o=n(8),i={},s={},a=null,c=process.pid,l=null,u=function(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},this.className=e,t.logger?l=t.logger:null==l&&(l=console.log),t.loggerLevel&&(a=t.loggerLevel||\"error\"),null==s[this.className]&&(i[this.className]=!0)};u.prototype.debug=function(e,t){if(this.isDebug()&&(Object.keys(s).length>0&&s[this.className]||0==Object.keys(s).length&&i[this.className])){var n=(new Date).getTime(),o=r(\"[%s-%s:%s] %s %s\",\"DEBUG\",this.className,c,n,e),a={type:\"debug\",message:e,className:this.className,pid:c,date:n};t&&(a.meta=t),l(o,a)}},u.prototype.warn=function(e,t){if(this.isWarn()&&(Object.keys(s).length>0&&s[this.className]||0==Object.keys(s).length&&i[this.className])){var n=(new Date).getTime(),o=r(\"[%s-%s:%s] %s %s\",\"WARN\",this.className,c,n,e),a={type:\"warn\",message:e,className:this.className,pid:c,date:n};t&&(a.meta=t),l(o,a)}},u.prototype.info=function(e,t){if(this.isInfo()&&(Object.keys(s).length>0&&s[this.className]||0==Object.keys(s).length&&i[this.className])){var n=(new Date).getTime(),o=r(\"[%s-%s:%s] %s %s\",\"INFO\",this.className,c,n,e),a={type:\"info\",message:e,className:this.className,pid:c,date:n};t&&(a.meta=t),l(o,a)}},u.prototype.error=function(e,t){if(this.isError()&&(Object.keys(s).length>0&&s[this.className]||0==Object.keys(s).length&&i[this.className])){var n=(new Date).getTime(),o=r(\"[%s-%s:%s] %s %s\",\"ERROR\",this.className,c,n,e),a={type:\"error\",message:e,className:this.className,pid:c,date:n};t&&(a.meta=t),l(o,a)}},u.prototype.isInfo=function(){return\"info\"==a||\"debug\"==a},u.prototype.isError=function(){return\"error\"==a||\"info\"==a||\"debug\"==a},u.prototype.isWarn=function(){return\"error\"==a||\"warn\"==a||\"info\"==a||\"debug\"==a},u.prototype.isDebug=function(){return\"debug\"==a},u.reset=function(){a=\"error\",s={}},u.currentLogger=function(){return l},u.setCurrentLogger=function(e){if(\"function\"!=typeof e)throw new o(\"current logger must be a function\");l=e},u.filter=function(e,t){\"class\"==e&&Array.isArray(t)&&(s={},t.forEach(function(e){s[e]=!0}))},u.setLevel=function(e){if(\"info\"!=e&&\"error\"!=e&&\"debug\"!=e&&\"warn\"!=e)throw new Error(r(\"%s is an illegal logging level\",e));a=e},e.exports=u},function(e,t,n){\"use strict\";var r=n(0).format,o=n(6).MongoError,i={},s={},a=null,c=process.pid,l=null,u=function(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},this.className=e,t.logger?l=t.logger:null==l&&(l=console.log),t.loggerLevel&&(a=t.loggerLevel||\"error\"),null==s[this.className]&&(i[this.className]=!0)};u.prototype.debug=function(e,t){if(this.isDebug()&&(Object.keys(s).length>0&&s[this.className]||0===Object.keys(s).length&&i[this.className])){var n=(new Date).getTime(),o=r(\"[%s-%s:%s] %s %s\",\"DEBUG\",this.className,c,n,e),a={type:\"debug\",message:e,className:this.className,pid:c,date:n};t&&(a.meta=t),l(o,a)}},u.prototype.warn=function(e,t){if(this.isWarn()&&(Object.keys(s).length>0&&s[this.className]||0===Object.keys(s).length&&i[this.className])){var n=(new Date).getTime(),o=r(\"[%s-%s:%s] %s %s\",\"WARN\",this.className,c,n,e),a={type:\"warn\",message:e,className:this.className,pid:c,date:n};t&&(a.meta=t),l(o,a)}},u.prototype.info=function(e,t){if(this.isInfo()&&(Object.keys(s).length>0&&s[this.className]||0===Object.keys(s).length&&i[this.className])){var n=(new Date).getTime(),o=r(\"[%s-%s:%s] %s %s\",\"INFO\",this.className,c,n,e),a={type:\"info\",message:e,className:this.className,pid:c,date:n};t&&(a.meta=t),l(o,a)}},u.prototype.error=function(e,t){if(this.isError()&&(Object.keys(s).length>0&&s[this.className]||0===Object.keys(s).length&&i[this.className])){var n=(new Date).getTime(),o=r(\"[%s-%s:%s] %s %s\",\"ERROR\",this.className,c,n,e),a={type:\"error\",message:e,className:this.className,pid:c,date:n};t&&(a.meta=t),l(o,a)}},u.prototype.isInfo=function(){return\"info\"===a||\"debug\"===a},u.prototype.isError=function(){return\"error\"===a||\"info\"===a||\"debug\"===a},u.prototype.isWarn=function(){return\"error\"===a||\"warn\"===a||\"info\"===a||\"debug\"===a},u.prototype.isDebug=function(){return\"debug\"===a},u.reset=function(){a=\"error\",s={}},u.currentLogger=function(){return l},u.setCurrentLogger=function(e){if(\"function\"!=typeof e)throw new o(\"current logger must be a function\");l=e},u.filter=function(e,t){\"class\"===e&&Array.isArray(t)&&(s={},t.forEach(function(e){s[e]=!0}))},u.setLevel=function(e){if(\"info\"!==e&&\"error\"!==e&&\"debug\"!==e&&\"warn\"!==e)throw new Error(r(\"%s is an illegal logging level\",e));a=e},e.exports=u},function(e,t,n){\"use strict\";var r=n(41),o=n(6).MongoError;e.exports={getReadPreference:function(e,t){var n=e.readPreference||new r(\"primary\");if(t.readPreference&&(n=t.readPreference),\"string\"==typeof n&&(n=new r(n)),!(n instanceof r))throw new o(\"readPreference must be a ReadPreference instance\");return n},MESSAGE_HEADER_SIZE:16,opcodes:{OP_REPLY:1,OP_UPDATE:2001,OP_INSERT:2002,OP_QUERY:2004,OP_GETMORE:2005,OP_DELETE:2006,OP_KILL_CURSORS:2007,OP_COMPRESSED:2012},parseHeader:function(e){return{length:e.readInt32LE(0),requestId:e.readInt32LE(4),responseTo:e.readInt32LE(8),opCode:e.readInt32LE(12)}}}},function(e,t,n){(function(e){var t=n(21),r=n(26),o=n(0).format,i=n(216),s=n(214),a=r.existsSync||t.existsSync,c=function(e){for(var n=!1;!n;)if(a(e+\"/package.json\"))n=e;else{if(\"/\"===e)return!1;e=t.dirname(e)}return e},l=function(t,a){(a=a||{}).strict=\"boolean\"!=typeof a.strict||a.strict;var l=function(t){for(var n=e,i=!1;n;){s=n.filename;var s=c(s);if(s){var a=JSON.parse(r.readFileSync(o(\"%s/package.json\",s))),l=t.split(/\\//);if(a.peerOptionalDependencies&&(!a.peerOptionalDependencies||a.peerOptionalDependencies[l[0]])){i=!0;break}n=n.parent}else n=n.parent}if(!i)throw new Error(o(\"no optional dependency [%s] defined in peerOptionalDependencies in any package.json\",l[0]));return{object:a,parts:l}}(t),u=l.object,p=l.parts,d=u.peerOptionalDependencies[p[0]],f=void 0,h=t;try{f=n(112)(h)}catch(e){try{if(null==(h=i(process.cwd(),t)))return;f=n(112)(h)}catch(e){if(\"MODULE_NOT_FOUND\"===e.code)return}}var m=c(n(112).resolve(h));if(!m)throw new Error(\"package.json can not be located\");var g=JSON.parse(r.readFileSync(o(\"%s/package.json\",m))).version;if(0==s.satisfies(g,d)&&a.strict){var y=new Error(o(\"optional dependency [%s] found but version [%s] did not satisfy constraint [%s]\",p[0],g,d));throw y.code=\"OPTIONAL_MODULE_NOT_FOUND\",y}return f};l.exists=function(e){try{return void 0!==l(e)}catch(e){return!1}},e.exports=l}).call(this,n(144)(e))},function(module,exports,__webpack_require__){var callSiteToString=__webpack_require__(165).callSiteToString,eventListenerCount=__webpack_require__(165).eventListenerCount,relative=__webpack_require__(21).relative;module.exports=depd;var basePath=process.cwd();function containsNamespace(e,t){for(var n=e.split(/[ ,]+/),r=String(t).toLowerCase(),o=0;o<n.length;o++){var i=n[o];if(i&&(\"*\"===i||i.toLowerCase()===r))return!0}return!1}function convertDataDescriptorToAccessor(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t),o=r.value;return r.get=function(){return o},r.writable&&(r.set=function(e){return o=e}),delete r.value,delete r.writable,Object.defineProperty(e,t,r),r}function createArgumentsString(e){for(var t=\"\",n=0;n<e;n++)t+=\", arg\"+n;return t.substr(2)}function createStackString(e){var t=this.name+\": \"+this.namespace;this.message&&(t+=\" deprecated \"+this.message);for(var n=0;n<e.length;n++)t+=\"\\n    at \"+callSiteToString(e[n]);return t}function depd(e){if(!e)throw new TypeError(\"argument namespace is required\");var t=callSiteLocation(getStack()[1])[0];function n(e){log.call(n,e)}return n._file=t,n._ignored=isignored(e),n._namespace=e,n._traced=istraced(e),n._warned=Object.create(null),n.function=wrapfunction,n.property=wrapproperty,n}function isignored(e){return!!process.noDeprecation||containsNamespace(process.env.NO_DEPRECATION||\"\",e)}function istraced(e){return!!process.traceDeprecation||containsNamespace(process.env.TRACE_DEPRECATION||\"\",e)}function log(e,t){var n=0!==eventListenerCount(process,\"deprecation\");if(n||!this._ignored){var r,o,i,s,a=0,c=!1,l=getStack(),u=this._file;for(t?(s=t,(i=callSiteLocation(l[1])).name=s.name,u=i[0]):i=s=callSiteLocation(l[a=2]);a<l.length;a++)if((o=(r=callSiteLocation(l[a]))[0])===u)c=!0;else if(o===this._file)u=this._file;else if(c)break;var p=r?s.join(\":\")+\"__\"+r.join(\":\"):void 0;if(!(void 0!==p&&p in this._warned)){this._warned[p]=!0;var d=e;if(d||(d=i!==s&&i.name?defaultMessage(i):defaultMessage(s)),n){var f=DeprecationError(this._namespace,d,l.slice(a));process.emit(\"deprecation\",f)}else{var h=(process.stderr.isTTY?formatColor:formatPlain).call(this,d,r,l.slice(a));process.stderr.write(h+\"\\n\",\"utf8\")}}}}function callSiteLocation(e){var t=e.getFileName()||\"<anonymous>\",n=e.getLineNumber(),r=e.getColumnNumber();e.isEval()&&(t=e.getEvalOrigin()+\", \"+t);var o=[t,n,r];return o.callSite=e,o.name=e.getFunctionName(),o}function defaultMessage(e){var t=e.callSite,n=e.name;n||(n=\"<anonymous@\"+formatLocation(e)+\">\");var r=t.getThis(),o=r&&t.getTypeName();return\"Object\"===o&&(o=void 0),\"Function\"===o&&(o=r.name||o),o&&t.getMethodName()?o+\".\"+n:n}function formatPlain(e,t,n){var r=(new Date).toUTCString()+\" \"+this._namespace+\" deprecated \"+e;if(this._traced){for(var o=0;o<n.length;o++)r+=\"\\n    at \"+callSiteToString(n[o]);return r}return t&&(r+=\" at \"+formatLocation(t)),r}function formatColor(e,t,n){var r=\"\u001b[36;1m\"+this._namespace+\"\u001b[22;39m \u001b[33;1mdeprecated\u001b[22;39m \u001b[0m\"+e+\"\u001b[39m\";if(this._traced){for(var o=0;o<n.length;o++)r+=\"\\n    \u001b[36mat \"+callSiteToString(n[o])+\"\u001b[39m\";return r}return t&&(r+=\" \u001b[36m\"+formatLocation(t)+\"\u001b[39m\"),r}function formatLocation(e){return relative(basePath,e[0])+\":\"+e[1]+\":\"+e[2]}function getStack(){var e=Error.stackTraceLimit,t={},n=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace,Error.stackTraceLimit=Math.max(10,e),Error.captureStackTrace(t);var r=t.stack.slice(1);return Error.prepareStackTrace=n,Error.stackTraceLimit=e,r}function prepareObjectStackTrace(e,t){return t}function wrapfunction(fn,message){if(\"function\"!=typeof fn)throw new TypeError(\"argument fn must be a function\");var args=createArgumentsString(fn.length),deprecate=this,stack=getStack(),site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval(\"(function (\"+args+') {\\n\"use strict\"\\nlog.call(deprecate, message, site)\\nreturn fn.apply(this, arguments)\\n})');return deprecatedfn}function wrapproperty(e,t,n){if(!e||\"object\"!=typeof e&&\"function\"!=typeof e)throw new TypeError(\"argument obj must be object\");var r=Object.getOwnPropertyDescriptor(e,t);if(!r)throw new TypeError(\"must call property on owner object\");if(!r.configurable)throw new TypeError(\"property must be configurable\");var o=this,i=callSiteLocation(getStack()[1]);i.name=t,\"value\"in r&&(r=convertDataDescriptorToAccessor(e,t,n));var s=r.get,a=r.set;\"function\"==typeof s&&(r.get=function(){return log.call(o,n,i),s.apply(this,arguments)}),\"function\"==typeof a&&(r.set=function(){return log.call(o,n,i),a.apply(this,arguments)}),Object.defineProperty(e,t,r)}function DeprecationError(e,t,n){var r,o=new Error;return Object.defineProperty(o,\"constructor\",{value:DeprecationError}),Object.defineProperty(o,\"message\",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(o,\"name\",{enumerable:!1,configurable:!0,value:\"DeprecationError\",writable:!0}),Object.defineProperty(o,\"namespace\",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(o,\"stack\",{configurable:!0,enumerable:!1,get:function(){return void 0!==r?r:r=createStackString.call(this,n)},set:function(e){r=e}}),o}},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(22),i=n(4).MongoError,s=n(9).Readable||n(65).Readable,a=n(16),c=n(23),l=n(4).ReadPreference,u=function(e,t,r,o,i,a){c.apply(this,Array.prototype.slice.call(arguments,0));var l=u.INIT,p=o.promiseLibrary;p||(p=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),s.call(this,{objectMode:!0}),this.s={maxTimeMS:null,state:l,streamOptions:{},bson:e,ns:t,cmd:r,options:o,topology:i,topologyOptions:a,promiseLibrary:p}};r(u,s);for(var p=[\"_next\",\"next\",\"hasNext\",\"each\",\"forEach\",\"toArray\",\"rewind\",\"bufferedCount\",\"readBufferedDocuments\",\"close\",\"isClosed\",\"kill\",\"setCursorBatchSize\",\"_find\",\"_getmore\",\"_killcursor\",\"isDead\",\"explain\",\"isNotified\",\"isKilled\"],d=0;d<p.length;d++)u.prototype[p[d]]=c.prototype[p[d]];var f=u.define=new a(\"CommandCursor\",u,!0);u.prototype.setReadPreference=function(e){if(this.s.state==u.CLOSED||this.isDead())throw i.create({message:\"Cursor is closed\",driver:!0});if(this.s.state!=u.INIT)throw i.create({message:\"cannot change cursor readPreference after cursor has been accessed\",driver:!0});return e instanceof o?this.s.options.readPreference=new l(e.mode,e.tags,{maxStalenessSeconds:e.maxStalenessSeconds}):\"string\"==typeof e?this.s.options.readPreference=new l(e):e instanceof l&&(this.s.options.readPreference=e),this},f.classMethod(\"setReadPreference\",{callback:!1,promise:!1,returns:[u]}),u.prototype.batchSize=function(e){if(this.s.state==u.CLOSED||this.isDead())throw i.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof e)throw i.create({message:\"batchSize requires an integer\",driver:!0});return this.s.cmd.cursor&&(this.s.cmd.cursor.batchSize=e),this.setCursorBatchSize(e),this},f.classMethod(\"batchSize\",{callback:!1,promise:!1,returns:[u]}),u.prototype.maxTimeMS=function(e){return this.s.topology.lastIsMaster().minWireVersion>2&&(this.s.cmd.maxTimeMS=e),this},f.classMethod(\"maxTimeMS\",{callback:!1,promise:!1,returns:[u]}),u.prototype.get=u.prototype.toArray,f.classMethod(\"get\",{callback:!0,promise:!1}),f.classMethod(\"toArray\",{callback:!0,promise:!0}),f.classMethod(\"each\",{callback:!0,promise:!1}),f.classMethod(\"forEach\",{callback:!0,promise:!1}),f.classMethod(\"next\",{callback:!0,promise:!0}),f.classMethod(\"hasNext\",{callback:!0,promise:!0}),f.classMethod(\"close\",{callback:!0,promise:!0}),f.classMethod(\"isClosed\",{callback:!1,promise:!1,returns:[Boolean]}),f.classMethod(\"rewind\",{callback:!1,promise:!1}),f.classMethod(\"bufferedCount\",{callback:!1,promise:!1,returns:[Number]}),f.classMethod(\"readBufferedDocuments\",{callback:!1,promise:!1,returns:[Array]}),u.INIT=0,u.OPEN=1,u.CLOSED=2,e.exports=u},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(3).ReadPreference,i=n(3).MongoError,s=n(9).Readable,a=n(17),c=n(25),l=function(e,t,n,r,o,i){c.apply(this,Array.prototype.slice.call(arguments,0));var a=l.INIT,u=r.promiseLibrary||Promise;s.call(this,{objectMode:!0}),this.s={maxTimeMS:null,state:a,streamOptions:{},bson:e,ns:t,cmd:n,options:r,topology:o,topologyOptions:i,promiseLibrary:u}};r(l,s);for(var u=[\"_next\",\"next\",\"hasNext\",\"each\",\"forEach\",\"toArray\",\"rewind\",\"bufferedCount\",\"readBufferedDocuments\",\"close\",\"isClosed\",\"kill\",\"setCursorBatchSize\",\"_find\",\"_getmore\",\"_killcursor\",\"isDead\",\"explain\",\"isNotified\",\"isKilled\"],p=0;p<u.length;p++)l.prototype[u[p]]=c.prototype[u[p]];var d=l.define=new a(\"CommandCursor\",l,!0);l.prototype.setReadPreference=function(e){if(this.s.state===l.CLOSED||this.isDead())throw i.create({message:\"Cursor is closed\",driver:!0});if(this.s.state!==l.INIT)throw i.create({message:\"cannot change cursor readPreference after cursor has been accessed\",driver:!0});if(e instanceof o)this.s.options.readPreference=e;else{if(\"string\"!=typeof e)throw new TypeError(\"Invalid read preference: \"+e);this.s.options.readPreference=new o(e)}return this},d.classMethod(\"setReadPreference\",{callback:!1,promise:!1,returns:[l]}),l.prototype.batchSize=function(e){if(this.s.state===l.CLOSED||this.isDead())throw i.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof e)throw i.create({message:\"batchSize requires an integer\",driver:!0});return this.s.cmd.cursor&&(this.s.cmd.cursor.batchSize=e),this.setCursorBatchSize(e),this},d.classMethod(\"batchSize\",{callback:!1,promise:!1,returns:[l]}),l.prototype.maxTimeMS=function(e){return this.s.topology.lastIsMaster().minWireVersion>2&&(this.s.cmd.maxTimeMS=e),this},d.classMethod(\"maxTimeMS\",{callback:!1,promise:!1,returns:[l]}),l.prototype.get=l.prototype.toArray,d.classMethod(\"get\",{callback:!0,promise:!1}),d.classMethod(\"toArray\",{callback:!0,promise:!0}),d.classMethod(\"each\",{callback:!0,promise:!1}),d.classMethod(\"forEach\",{callback:!0,promise:!1}),d.classMethod(\"next\",{callback:!0,promise:!0}),d.classMethod(\"hasNext\",{callback:!0,promise:!0}),d.classMethod(\"close\",{callback:!0,promise:!0}),d.classMethod(\"isClosed\",{callback:!1,promise:!1,returns:[Boolean]}),d.classMethod(\"rewind\",{callback:!1,promise:!1}),d.classMethod(\"bufferedCount\",{callback:!1,promise:!1,returns:[Number]}),d.classMethod(\"readBufferedDocuments\",{callback:!1,promise:!1,returns:[Array]}),l.INIT=0,l.OPEN=1,l.CLOSED=2,e.exports=l},function(e,t){t.readIEEE754=function(e,t,n,r,o){var i,s,a=\"big\"===n,c=8*o-r-1,l=(1<<c)-1,u=l>>1,p=-7,d=a?0:o-1,f=a?1:-1,h=e[t+d];for(d+=f,i=h&(1<<-p)-1,h>>=-p,p+=c;p>0;i=256*i+e[t+d],d+=f,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=r;p>0;s=256*s+e[t+d],d+=f,p-=8);if(0===i)i=1-u;else{if(i===l)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=u}return(h?-1:1)*s*Math.pow(2,i-r)},t.writeIEEE754=function(e,t,n,r,o,i){var s,a,c,l=\"big\"===r,u=8*i-o-1,p=(1<<u)-1,d=p>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=l?i-1:0,m=l?-1:1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=p?(a=0,s=p):s+d>=1?(a=(t*c-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[n+h]=255&a,h+=m,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[n+h]=255&s,h+=m,s/=256,u-=8);e[n+h-m]|=128*g}},function(e,t,n){\"use strict\";var r=n(115).Buffer,o=n(149),i=n(94),s=n(31)(\"express\"),a=n(87),c=n(114).mime,l=n(148),u=n(145),p=n(119),d=n(118);function f(e){return function(t,n){var o=r.isBuffer(t)?t:r.from(t,n);return l(o,e)}}function h(e){return p.parse(e,{allowPrototypes:!0})}function m(){return{}}t.etag=f({weak:!1}),t.wetag=f({weak:!0}),t.isAbsolute=function(e){return\"/\"===e[0]||(\":\"===e[1]&&(\"\\\\\"===e[2]||\"/\"===e[2])||(\"\\\\\\\\\"===e.substring(0,2)||void 0))},t.flatten=s.function(a,\"utils.flatten: use array-flatten npm module instead\"),t.normalizeType=function(e){return~e.indexOf(\"/\")?function(e,t){for(var n=e.split(/ *; */),r={value:n[0],quality:1,params:{},originalIndex:t},o=1;o<n.length;++o){var i=n[o].split(/ *= */);\"q\"===i[0]?r.quality=parseFloat(i[1]):r.params[i[0]]=i[1]}return r}(e):{value:c.lookup(e),params:{}}},t.normalizeTypes=function(e){for(var n=[],r=0;r<e.length;++r)n.push(t.normalizeType(e[r]));return n},t.contentDisposition=s.function(o,\"utils.contentDisposition: use content-disposition npm module instead\"),t.compileETag=function(e){var n;if(\"function\"==typeof e)return e;switch(e){case!0:n=t.wetag;break;case!1:break;case\"strong\":n=t.etag;break;case\"weak\":n=t.wetag;break;default:throw new TypeError(\"unknown value for etag function: \"+e)}return n},t.compileQueryParser=function(e){var t;if(\"function\"==typeof e)return e;switch(e){case!0:t=d.parse;break;case!1:t=m;break;case\"extended\":t=h;break;case\"simple\":t=d.parse;break;default:throw new TypeError(\"unknown value for query parser function: \"+e)}return t},t.compileTrust=function(e){return\"function\"==typeof e?e:!0===e?function(){return!0}:\"number\"==typeof e?function(t,n){return n<e}:(\"string\"==typeof e&&(e=e.split(/ *, */)),u.compile(e||[]))},t.setCharset=function(e,t){if(!e||!t)return e;var n=i.parse(e);return n.parameters.charset=t,i.format(n)}},function(e,t,n){\"use strict\";var r=n(4).MongoError,o=n(0).format,i=function(e,t){var n=this;t=t||{force:!1,bufferMaxEntries:-1},this.s={storedOps:[],storeOptions:t,topology:e},Object.defineProperty(this,\"length\",{enumerable:!0,get:function(){return n.s.storedOps.length}})};i.prototype.add=function(e,t,n,i,s){if(this.s.storeOptions.force)return s(r.create({message:\"db closed by application\",driver:!0}));if(0==this.s.storeOptions.bufferMaxEntries)return s(r.create({message:o(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries)for(;this.s.storedOps.length>0;){this.s.storedOps.shift().c(r.create({message:o(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}))}else this.s.storedOps.push({t:e,n:t,o:n,op:i,c:s})},i.prototype.addObjectAndMethod=function(e,t,n,i,s){if(this.s.storeOptions.force)return s(r.create({message:\"db closed by application\",driver:!0}));if(0==this.s.storeOptions.bufferMaxEntries)return s(r.create({message:o(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}));if(this.s.storeOptions.bufferMaxEntries>0&&this.s.storedOps.length>this.s.storeOptions.bufferMaxEntries)for(;this.s.storedOps.length>0;){this.s.storedOps.shift().c(r.create({message:o(\"no connection available for operation and number of stored operation > %s\",this.s.storeOptions.bufferMaxEntries),driver:!0}))}else this.s.storedOps.push({t:e,m:n,o:t,p:i,c:s})},i.prototype.flush=function(e){for(;this.s.storedOps.length>0;)this.s.storedOps.shift().c(e||r.create({message:o(\"no connection available for operation\"),driver:!0}))};var s=[\"primary\",\"primaryPreferred\",\"nearest\",\"secondaryPreferred\"],a=[\"secondary\",\"secondaryPreferred\"];i.prototype.execute=function(e){e=e||{};var t=this.s.storedOps;this.s.storedOps=[];for(var n=\"boolean\"!=typeof e.executePrimary||e.executePrimary,r=\"boolean\"!=typeof e.executeSecondary||e.executeSecondary;t.length>0;){var o=t.shift();\"cursor\"==o.t?n&&r?o.o[o.m].apply(o.o,o.p):n&&o.o.options&&o.o.options.readPreference&&-1!=s.indexOf(o.o.options.readPreference.mode)?o.o[o.m].apply(o.o,o.p):!n&&r&&o.o.options&&o.o.options.readPreference&&-1!=a.indexOf(o.o.options.readPreference.mode)&&o.o[o.m].apply(o.o,o.p):\"auth\"==o.t?this.s.topology[o.t].apply(this.s.topology,o.o):n&&r?this.s.topology[o.t](o.n,o.o,o.op,o.c):n&&o.op&&o.op.readPreference&&-1!=s.indexOf(o.op.readPreference.mode)?this.s.topology[o.t](o.n,o.o,o.op,o.c):!n&&r&&o.op&&o.op.readPreference&&-1!=a.indexOf(o.op.readPreference.mode)&&this.s.topology[o.t](o.n,o.o,o.op,o.c)}},i.prototype.all=function(){return this.s.storedOps};t.Store=i,t.ServerCapabilities=function(e){var t=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:function(){return n}})},n=!1,r=!1,o=!1,i=!1,s=!1,a=!1,c=e.maxWriteBatchSize||1e3,l=!1,u=!1;e.minWireVersion>=0&&(o=!0),e.maxWireVersion>=1&&(n=!0,i=!0),e.maxWireVersion>=2&&(r=!0),e.maxWireVersion>=3&&(s=!0,a=!0),e.maxWireVersion>=5&&(l=!0,u=!0),null==e.minWireVersion&&(e.minWireVersion=0),null==e.maxWireVersion&&(e.maxWireVersion=0),t(this,\"hasAggregationCursor\",n),t(this,\"hasWriteCommands\",r),t(this,\"hasTextSearch\",o),t(this,\"hasAuthCommands\",i),t(this,\"hasListCollectionsCommand\",s),t(this,\"hasListIndexesCommand\",a),t(this,\"minWireVersion\",e.minWireVersion),t(this,\"maxWireVersion\",e.maxWireVersion),t(this,\"maxNumberOfDocsInBatch\",c),t(this,\"commandsTakeWriteConcern\",l),t(this,\"commandsTakeCollation\",u)}},function(e,t,n){\"use strict\";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=p;var o=n(102),i=n(44);i.inherits=n(43);var s=n(132),a=n(131);i.inherits(p,s);for(var c=r(a.prototype),l=0;l<c.length;l++){var u=c[l];p.prototype[u]||(p.prototype[u]=a.prototype[u])}function p(e){if(!(this instanceof p))return new p(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once(\"end\",d)}function d(){this.allowHalfOpen||this._writableState.ended||o(f,this)}function f(e){e.end()}},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(4).MongoError,i=n(9).Readable||n(65).Readable,s=n(16),a=n(23),c=function(e,t,r,o,s,l){a.apply(this,Array.prototype.slice.call(arguments,0));var u=c.INIT,p=o.promiseLibrary;p||(p=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),i.call(this,{objectMode:!0}),this.s={maxTimeMS:null,state:u,streamOptions:{},bson:e,ns:t,cmd:r,options:o,topology:s,topologyOptions:l,promiseLibrary:p}};for(var l in r(c,i),a.prototype)c.prototype[l]=a.prototype[l];var u=c.define=new s(\"AggregationCursor\",c,!0);c.prototype.batchSize=function(e){if(this.s.state==c.CLOSED||this.isDead())throw o.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof e)throw o.create({message:\"batchSize requires an integer\",driver:!0});return this.s.cmd.cursor&&(this.s.cmd.cursor.batchSize=e),this.setCursorBatchSize(e),this},u.classMethod(\"batchSize\",{callback:!1,promise:!1,returns:[c]}),c.prototype.geoNear=function(e){return this.s.cmd.pipeline.push({$geoNear:e}),this},u.classMethod(\"geoNear\",{callback:!1,promise:!1,returns:[c]}),c.prototype.group=function(e){return this.s.cmd.pipeline.push({$group:e}),this},u.classMethod(\"group\",{callback:!1,promise:!1,returns:[c]}),c.prototype.limit=function(e){return this.s.cmd.pipeline.push({$limit:e}),this},u.classMethod(\"limit\",{callback:!1,promise:!1,returns:[c]}),c.prototype.match=function(e){return this.s.cmd.pipeline.push({$match:e}),this},u.classMethod(\"match\",{callback:!1,promise:!1,returns:[c]}),c.prototype.maxTimeMS=function(e){return this.s.topology.lastIsMaster().minWireVersion>2&&(this.s.cmd.maxTimeMS=e),this},u.classMethod(\"maxTimeMS\",{callback:!1,promise:!1,returns:[c]}),c.prototype.out=function(e){return this.s.cmd.pipeline.push({$out:e}),this},u.classMethod(\"out\",{callback:!1,promise:!1,returns:[c]}),c.prototype.project=function(e){return this.s.cmd.pipeline.push({$project:e}),this},u.classMethod(\"project\",{callback:!1,promise:!1,returns:[c]}),c.prototype.lookup=function(e){return this.s.cmd.pipeline.push({$lookup:e}),this},u.classMethod(\"lookup\",{callback:!1,promise:!1,returns:[c]}),c.prototype.redact=function(e){return this.s.cmd.pipeline.push({$redact:e}),this},u.classMethod(\"redact\",{callback:!1,promise:!1,returns:[c]}),c.prototype.skip=function(e){return this.s.cmd.pipeline.push({$skip:e}),this},u.classMethod(\"skip\",{callback:!1,promise:!1,returns:[c]}),c.prototype.sort=function(e){return this.s.cmd.pipeline.push({$sort:e}),this},u.classMethod(\"sort\",{callback:!1,promise:!1,returns:[c]}),c.prototype.unwind=function(e){return this.s.cmd.pipeline.push({$unwind:e}),this},u.classMethod(\"unwind\",{callback:!1,promise:!1,returns:[c]}),c.prototype.get=c.prototype.toArray,u.classMethod(\"toArray\",{callback:!0,promise:!0}),u.classMethod(\"each\",{callback:!0,promise:!1}),u.classMethod(\"forEach\",{callback:!0,promise:!1}),u.classMethod(\"hasNext\",{callback:!0,promise:!0}),u.classMethod(\"next\",{callback:!0,promise:!0}),u.classMethod(\"close\",{callback:!0,promise:!0}),u.classMethod(\"isClosed\",{callback:!1,promise:!1,returns:[Boolean]}),u.classMethod(\"rewind\",{callback:!1,promise:!1}),u.classMethod(\"bufferedCount\",{callback:!1,promise:!1,returns:[Number]}),u.classMethod(\"readBufferedDocuments\",{callback:!1,promise:!1,returns:[Array]}),c.INIT=0,c.OPEN=1,c.CLOSED=2,e.exports=c},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(3).MongoError,i=n(9).Readable,s=n(17),a=n(25),c=function(e,t,n,r,o,s){a.apply(this,Array.prototype.slice.call(arguments,0));var l=c.INIT,u=r.promiseLibrary||Promise;i.call(this,{objectMode:!0}),this.s={maxTimeMS:null,state:l,streamOptions:{},bson:e,ns:t,cmd:n,options:r,topology:o,topologyOptions:s,promiseLibrary:u}};for(var l in r(c,i),a.prototype)c.prototype[l]=a.prototype[l];var u=c.define=new s(\"AggregationCursor\",c,!0);c.prototype.batchSize=function(e){if(this.s.state===c.CLOSED||this.isDead())throw o.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof e)throw o.create({message:\"batchSize requires an integer\",drvier:!0});return this.s.cmd.cursor&&(this.s.cmd.cursor.batchSize=e),this.setCursorBatchSize(e),this},u.classMethod(\"batchSize\",{callback:!1,promise:!1,returns:[c]}),c.prototype.geoNear=function(e){return this.s.cmd.pipeline.push({$geoNear:e}),this},u.classMethod(\"geoNear\",{callback:!1,promise:!1,returns:[c]}),c.prototype.group=function(e){return this.s.cmd.pipeline.push({$group:e}),this},u.classMethod(\"group\",{callback:!1,promise:!1,returns:[c]}),c.prototype.limit=function(e){return this.s.cmd.pipeline.push({$limit:e}),this},u.classMethod(\"limit\",{callback:!1,promise:!1,returns:[c]}),c.prototype.match=function(e){return this.s.cmd.pipeline.push({$match:e}),this},u.classMethod(\"match\",{callback:!1,promise:!1,returns:[c]}),c.prototype.maxTimeMS=function(e){return this.s.topology.lastIsMaster().minWireVersion>2&&(this.s.cmd.maxTimeMS=e),this},u.classMethod(\"maxTimeMS\",{callback:!1,promise:!1,returns:[c]}),c.prototype.out=function(e){return this.s.cmd.pipeline.push({$out:e}),this},u.classMethod(\"out\",{callback:!1,promise:!1,returns:[c]}),c.prototype.project=function(e){return this.s.cmd.pipeline.push({$project:e}),this},u.classMethod(\"project\",{callback:!1,promise:!1,returns:[c]}),c.prototype.lookup=function(e){return this.s.cmd.pipeline.push({$lookup:e}),this},u.classMethod(\"lookup\",{callback:!1,promise:!1,returns:[c]}),c.prototype.redact=function(e){return this.s.cmd.pipeline.push({$redact:e}),this},u.classMethod(\"redact\",{callback:!1,promise:!1,returns:[c]}),c.prototype.skip=function(e){return this.s.cmd.pipeline.push({$skip:e}),this},u.classMethod(\"skip\",{callback:!1,promise:!1,returns:[c]}),c.prototype.sort=function(e){return this.s.cmd.pipeline.push({$sort:e}),this},u.classMethod(\"sort\",{callback:!1,promise:!1,returns:[c]}),c.prototype.unwind=function(e){return this.s.cmd.pipeline.push({$unwind:e}),this},u.classMethod(\"unwind\",{callback:!1,promise:!1,returns:[c]}),c.prototype.get=c.prototype.toArray,u.classMethod(\"toArray\",{callback:!0,promise:!0}),u.classMethod(\"each\",{callback:!0,promise:!1}),u.classMethod(\"forEach\",{callback:!0,promise:!1}),u.classMethod(\"hasNext\",{callback:!0,promise:!0}),u.classMethod(\"next\",{callback:!0,promise:!0}),u.classMethod(\"close\",{callback:!0,promise:!0}),u.classMethod(\"isClosed\",{callback:!1,promise:!1,returns:[Boolean]}),u.classMethod(\"rewind\",{callback:!1,promise:!1}),u.classMethod(\"bufferedCount\",{callback:!1,promise:!1,returns:[Number]}),u.classMethod(\"readBufferedDocuments\",{callback:!1,promise:!1,returns:[Array]}),c.INIT=0,c.OPEN=1,c.CLOSED=2,e.exports=c},function(e,t){e.exports=require(\"os\")},function(e,t,n){\"use strict\";const r=function(e,t,n){this.mode=e,this.tags=t,this.options=n,this.options&&null!=this.options.maxStalenessSeconds?(this.options=n,this.maxStalenessSeconds=this.options.maxStalenessSeconds>=0?this.options.maxStalenessSeconds:null):t&&\"object\"==typeof t&&(this.options=t,t=null)};Object.defineProperty(r.prototype,\"preference\",{enumerable:!0,get:function(){return this.mode}});const o=[r.PRIMARY=\"primary\",r.PRIMARY_PREFERRED=\"primaryPreferred\",r.SECONDARY=\"secondary\",r.SECONDARY_PREFERRED=\"secondaryPreferred\",r.NEAREST=\"nearest\",!0,!1,null];r.isValid=function(e){return-1!==o.indexOf(e)},r.prototype.isValid=function(e){return r.isValid(\"string\"==typeof e?e:this.mode)};const i=[\"primaryPreferred\",\"secondary\",\"secondaryPreferred\",\"nearest\"];r.prototype.slaveOk=function(){return-1!==i.indexOf(this.mode)},r.prototype.equals=function(e){return e.mode===this.mode},r.prototype.toJSON=function(){const e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),e},r.primary=new r(\"primary\"),r.primaryPreferred=new r(\"primaryPreferred\"),r.secondary=new r(\"secondary\"),r.secondaryPreferred=new r(\"secondaryPreferred\"),r.nearest=new r(\"nearest\"),e.exports=r},function(e,t){function n(e,t){if(!(this instanceof n))return new n(e,t);this._bsontype=\"Long\",this.low_=0|e,this.high_=0|t}n.prototype.toInt=function(){return this.low_},n.prototype.toNumber=function(){return this.high_*n.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},n.prototype.toJSON=function(){return this.toString()},n.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error(\"radix out of range: \"+t);if(this.isZero())return\"0\";if(this.isNegative()){if(this.equals(n.MIN_VALUE)){var r=n.fromNumber(t),o=this.div(r),i=o.multiply(r).subtract(this);return o.toString(t)+i.toInt().toString(t)}return\"-\"+this.negate().toString(t)}for(var s=n.fromNumber(Math.pow(t,6)),a=(i=this,\"\");;){var c=i.div(s),l=i.subtract(c.multiply(s)).toInt().toString(t);if((i=c).isZero())return l+a;for(;l.length<6;)l=\"0\"+l;a=\"\"+l+a}},n.prototype.getHighBits=function(){return this.high_},n.prototype.getLowBits=function(){return this.low_},n.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:n.TWO_PWR_32_DBL_+this.low_},n.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(n.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high_?this.high_:this.low_,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high_?t+33:t+1},n.prototype.isZero=function(){return 0==this.high_&&0==this.low_},n.prototype.isNegative=function(){return this.high_<0},n.prototype.isOdd=function(){return 1==(1&this.low_)},n.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_},n.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_},n.prototype.lessThan=function(e){return this.compare(e)<0},n.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},n.prototype.greaterThan=function(e){return this.compare(e)>0},n.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},n.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.subtract(e).isNegative()?-1:1},n.prototype.negate=function(){return this.equals(n.MIN_VALUE)?n.MIN_VALUE:this.not().add(n.ONE)},n.prototype.add=function(e){var t=this.high_>>>16,r=65535&this.high_,o=this.low_>>>16,i=65535&this.low_,s=e.high_>>>16,a=65535&e.high_,c=e.low_>>>16,l=0,u=0,p=0,d=0;return p+=(d+=i+(65535&e.low_))>>>16,d&=65535,u+=(p+=o+c)>>>16,p&=65535,l+=(u+=r+a)>>>16,u&=65535,l+=t+s,l&=65535,n.fromBits(p<<16|d,l<<16|u)},n.prototype.subtract=function(e){return this.add(e.negate())},n.prototype.multiply=function(e){if(this.isZero())return n.ZERO;if(e.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE))return e.isOdd()?n.MIN_VALUE:n.ZERO;if(e.equals(n.MIN_VALUE))return this.isOdd()?n.MIN_VALUE:n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(n.TWO_PWR_24_)&&e.lessThan(n.TWO_PWR_24_))return n.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,r=65535&this.high_,o=this.low_>>>16,i=65535&this.low_,s=e.high_>>>16,a=65535&e.high_,c=e.low_>>>16,l=65535&e.low_,u=0,p=0,d=0,f=0;return d+=(f+=i*l)>>>16,f&=65535,p+=(d+=o*l)>>>16,d&=65535,p+=(d+=i*c)>>>16,d&=65535,u+=(p+=r*l)>>>16,p&=65535,u+=(p+=o*c)>>>16,p&=65535,u+=(p+=i*a)>>>16,p&=65535,u+=t*l+r*c+o*a+i*s,u&=65535,n.fromBits(d<<16|f,u<<16|p)},n.prototype.div=function(e){if(e.isZero())throw Error(\"division by zero\");if(this.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE)){if(e.equals(n.ONE)||e.equals(n.NEG_ONE))return n.MIN_VALUE;if(e.equals(n.MIN_VALUE))return n.ONE;if((o=this.shiftRight(1).div(e).shiftLeft(1)).equals(n.ZERO))return e.isNegative()?n.ONE:n.NEG_ONE;var t=this.subtract(e.multiply(o));return o.add(t.div(e))}if(e.equals(n.MIN_VALUE))return n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var r=n.ZERO;for(t=this;t.greaterThanOrEqual(e);){for(var o=Math.max(1,Math.floor(t.toNumber()/e.toNumber())),i=Math.ceil(Math.log(o)/Math.LN2),s=i<=48?1:Math.pow(2,i-48),a=n.fromNumber(o),c=a.multiply(e);c.isNegative()||c.greaterThan(t);)o-=s,c=(a=n.fromNumber(o)).multiply(e);a.isZero()&&(a=n.ONE),r=r.add(a),t=t.subtract(c)}return r},n.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},n.prototype.not=function(){return n.fromBits(~this.low_,~this.high_)},n.prototype.and=function(e){return n.fromBits(this.low_&e.low_,this.high_&e.high_)},n.prototype.or=function(e){return n.fromBits(this.low_|e.low_,this.high_|e.high_)},n.prototype.xor=function(e){return n.fromBits(this.low_^e.low_,this.high_^e.high_)},n.prototype.shiftLeft=function(e){if(0==(e&=63))return this;var t=this.low_;if(e<32){var r=this.high_;return n.fromBits(t<<e,r<<e|t>>>32-e)}return n.fromBits(0,t<<e-32)},n.prototype.shiftRight=function(e){if(0==(e&=63))return this;var t=this.high_;if(e<32){var r=this.low_;return n.fromBits(r>>>e|t<<32-e,t>>e)}return n.fromBits(t>>e-32,t>=0?0:-1)},n.prototype.shiftRightUnsigned=function(e){if(0==(e&=63))return this;var t=this.high_;if(e<32){var r=this.low_;return n.fromBits(r>>>e|t<<32-e,t>>>e)}return 32==e?n.fromBits(t,0):n.fromBits(t>>>e-32,0)},n.fromInt=function(e){if(-128<=e&&e<128){var t=n.INT_CACHE_[e];if(t)return t}var r=new n(0|e,e<0?-1:0);return-128<=e&&e<128&&(n.INT_CACHE_[e]=r),r},n.fromNumber=function(e){return isNaN(e)||!isFinite(e)?n.ZERO:e<=-n.TWO_PWR_63_DBL_?n.MIN_VALUE:e+1>=n.TWO_PWR_63_DBL_?n.MAX_VALUE:e<0?n.fromNumber(-e).negate():new n(e%n.TWO_PWR_32_DBL_|0,e/n.TWO_PWR_32_DBL_|0)},n.fromBits=function(e,t){return new n(e,t)},n.fromString=function(e,t){if(0==e.length)throw Error(\"number format error: empty string\");var r=t||10;if(r<2||36<r)throw Error(\"radix out of range: \"+r);if(\"-\"==e.charAt(0))return n.fromString(e.substring(1),r).negate();if(e.indexOf(\"-\")>=0)throw Error('number format error: interior \"-\" character: '+e);for(var o=n.fromNumber(Math.pow(r,8)),i=n.ZERO,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),r);if(a<8){var l=n.fromNumber(Math.pow(r,a));i=i.multiply(l).add(n.fromNumber(c))}else i=(i=i.multiply(o)).add(n.fromNumber(c))}return i},n.INT_CACHE_={},n.TWO_PWR_16_DBL_=65536,n.TWO_PWR_24_DBL_=1<<24,n.TWO_PWR_32_DBL_=n.TWO_PWR_16_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_31_DBL_=n.TWO_PWR_32_DBL_/2,n.TWO_PWR_48_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_64_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_32_DBL_,n.TWO_PWR_63_DBL_=n.TWO_PWR_64_DBL_/2,n.ZERO=n.fromInt(0),n.ONE=n.fromInt(1),n.NEG_ONE=n.fromInt(-1),n.MAX_VALUE=n.fromBits(-1,2147483647),n.MIN_VALUE=n.fromBits(0,-2147483648),n.TWO_PWR_24_=n.fromInt(1<<24),e.exports=n,e.exports.Long=n},function(e,t,n){try{var r=n(0);if(\"function\"!=typeof r.inherits)throw\"\";e.exports=r.inherits}catch(t){e.exports=n(277)}},function(e,t){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):\"[object Array]\"===n(e)},t.isBoolean=function(e){return\"boolean\"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return\"number\"==typeof e},t.isString=function(e){return\"string\"==typeof e},t.isSymbol=function(e){return\"symbol\"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return\"[object RegExp]\"===n(e)},t.isObject=function(e){return\"object\"==typeof e&&null!==e},t.isDate=function(e){return\"[object Date]\"===n(e)},t.isError=function(e){return\"[object Error]\"===n(e)||e instanceof Error},t.isFunction=function(e){return\"function\"==typeof e},t.isPrimitive=function(e){return null===e||\"boolean\"==typeof e||\"number\"==typeof e||\"string\"==typeof e||\"symbol\"==typeof e||void 0===e},t.isBuffer=Buffer.isBuffer},function(e,t,n){\"use strict\";var r=[\"primaryPreferred\",\"secondary\",\"secondaryPreferred\",\"nearest\"],o=function(e,t,n){this.preference=e,this.tags=t,this.options=n,this.options&&null!=this.options.maxStalenessSeconds?(this.options=n,this.maxStalenessSeconds=this.options.maxStalenessSeconds>=0?this.options.maxStalenessSeconds:null):t&&\"object\"==typeof t&&(this.options=t,t=null)};o.prototype.slaveOk=function(){return-1!=r.indexOf(this.preference)},o.prototype.equals=function(e){return e.preference==this.preference},o.prototype.toJSON=function(){var e={mode:this.preference};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),e},o.primary=new o(\"primary\"),o.primaryPreferred=new o(\"primaryPreferred\"),o.secondary=new o(\"secondary\"),o.secondaryPreferred=new o(\"secondaryPreferred\"),o.nearest=new o(\"nearest\"),e.exports=o},function(e,t,n){\"use strict\";var r=n(1).checkCollectionName,o=n(3).BSON.ObjectID,i=n(3).BSON.Long,s=n(3).BSON.Code,a=n(0).format,c=n(39),l=n(3).MongoError,u=n(1).shallowClone,p=n(1).isObject,d=n(1).toError,f=n(1).normalizeHintField,h=n(1).handleCallback,m=n(1).decorateCommand,g=n(1).formattedOrderClause,y=n(3).ReadPreference,v=n(33),b=n(17),x=n(25),w=n(107),S=n(108),k=n(201),O=n(1).executeOperation,C=[\"readPreference\",\"ignoreUndefined\"],_=function(e,t,n,i,s,c){r(i);var l=null==c||null==c.slaveOk?e.slaveOk:c.slaveOk,u=null==c||null==c.serializeFunctions?e.s.options.serializeFunctions:c.serializeFunctions,p=null==c||null==c.raw?e.s.options.raw:c.raw,d=null==c||null==c.promoteLongs?e.s.options.promoteLongs:c.promoteLongs,f=null==c||null==c.promoteValues?e.s.options.promoteValues:c.promoteValues,h=null==c||null==c.promoteBuffers?e.s.options.promoteBuffers:c.promoteBuffers,m=null,g=a(\"%s.%s\",n,i),y=c.promiseLibrary||Promise;c&&c.readPreference?m=c.readPreference:e.options.readPreference&&(m=e.options.readPreference),s=null==s?o:s,this.s={pkFactory:s,db:e,topology:t,dbName:n,options:c,namespace:g,readPreference:m,slaveOk:l,serializeFunctions:u,raw:p,promoteLongs:d,promoteValues:f,promoteBuffers:h,internalHint:null,collectionHint:null,name:i,promiseLibrary:y,readConcern:c.readConcern}},E=_.define=new b(\"Collection\",_,!1);Object.defineProperty(_.prototype,\"dbName\",{enumerable:!0,get:function(){return this.s.dbName}}),Object.defineProperty(_.prototype,\"collectionName\",{enumerable:!0,get:function(){return this.s.name}}),Object.defineProperty(_.prototype,\"namespace\",{enumerable:!0,get:function(){return this.s.namespace}}),Object.defineProperty(_.prototype,\"readConcern\",{enumerable:!0,get:function(){return this.s.readConcern||{level:\"local\"}}}),Object.defineProperty(_.prototype,\"writeConcern\",{enumerable:!0,get:function(){var e={};return null!=this.s.options.w&&(e.w=this.s.options.w),null!=this.s.options.j&&(e.j=this.s.options.j),null!=this.s.options.fsync&&(e.fsync=this.s.options.fsync),null!=this.s.options.wtimeout&&(e.wtimeout=this.s.options.wtimeout),e}}),Object.defineProperty(_.prototype,\"hint\",{enumerable:!0,get:function(){return this.s.collectionHint},set:function(e){this.s.collectionHint=f(e)}}),_.prototype.find=function(e,t,n){let r=e;\"function\"!=typeof n&&(\"function\"==typeof t?(n=t,t=void 0):null==t&&(n=\"function\"==typeof r?r:void 0,r=\"object\"==typeof r?r:void 0));var o=r=null==r?{}:r;if(Buffer.isBuffer(o)){var i=o[0]|o[1]<<8|o[2]<<16|o[3]<<24;if(i!==o.length){var s=new Error(\"query selector raw message size does not match message header size [\"+o.length+\"] != [\"+i+\"]\");throw s.name=\"MongoError\",s}}null!=r&&\"ObjectID\"===r._bsontype&&(r={_id:r}),t||(t={});let a=t.projection||t.fields;a&&!Buffer.isBuffer(a)&&Array.isArray(a)&&(a=a.length?a.reduce((e,t)=>(e[t]=1,e),{}):{_id:1});var c={};for(var u in this.s.options)-1!==C.indexOf(u)&&(c[u]=this.s.options[u]);for(var p in t)c[p]=t[p];if(c.skip=t.skip?t.skip:0,c.limit=t.limit?t.limit:0,c.raw=\"boolean\"==typeof t.raw?t.raw:this.s.raw,c.hint=null!=t.hint?f(t.hint):this.s.collectionHint,c.timeout=void 0===t.timeout?void 0:t.timeout,c.slaveOk=null!=t.slaveOk?t.slaveOk:this.s.db.slaveOk,null==(c=ge(this,c,this.s.db)).readPreference||\"primary\"===c.readPreference&&\"primary\"===c.readPreference.mode||(c.slaveOk=!0),null!=r&&\"object\"!=typeof r)throw l.create({message:\"query selector must be an object\",driver:!0});var d={find:this.s.namespace,limit:c.limit,skip:c.skip,query:r};for(var m in\"boolean\"==typeof c.awaitdata&&(c.awaitData=c.awaitdata),\"boolean\"==typeof c.timeout&&(c.noCursorTimeout=c.timeout),c)null!=c[m]&&\"session\"!==m&&(d[m]=c[m]);return a&&(d.fields=a),c.db=this.s.db,c.promiseLibrary=this.s.promiseLibrary,null==c.raw&&\"boolean\"==typeof this.s.raw&&(c.raw=this.s.raw),null==c.promoteLongs&&\"boolean\"==typeof this.s.promoteLongs&&(c.promoteLongs=this.s.promoteLongs),null==c.promoteValues&&\"boolean\"==typeof this.s.promoteValues&&(c.promoteValues=this.s.promoteValues),null==c.promoteBuffers&&\"boolean\"==typeof this.s.promoteBuffers&&(c.promoteBuffers=this.s.promoteBuffers),d.sort&&(d.sort=g(d.sort)),le(d,this,t),ce(d,this,t),\"function\"==typeof n?h(n,null,this.s.topology.cursor(this.s.namespace,d,c)):this.s.topology.cursor(this.s.namespace,d,c)},E.classMethod(\"find\",{callback:!1,promise:!1,returns:[x]}),_.prototype.insertOne=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{},this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),O(this.s.topology,I,[this,e,t,n])};var I=function(e,t,n,r){if(Array.isArray(t))return r(l.create({message:\"doc parameter must be an object\",driver:!0}));M(e,[t],n,function(e,n){if(null!=r){if(e&&r)return r(e);if(null==n)return r(null,{result:{ok:1}});n.insertedCount=n.result.n,n.insertedId=t._id,r&&r(null,n)}})};E.classMethod(\"insertOne\",{callback:!0,promise:!0}),_.prototype.insertMany=function(e,t,n){if(\"function\"==typeof t&&(n=t,t={}),t=t?u(t):{ordered:!0},!Array.isArray(e)&&\"function\"==typeof n)return n(l.create({message:\"docs parameter must be an array of documents\",driver:!0}));if(!Array.isArray(e))return new this.s.promiseLibrary(function(e,t){t(l.create({message:\"docs parameter must be an array of documents\",driver:!0}))});if(t.serializeFunctions=t.serializeFunctions||this.s.serializeFunctions,!0!==(\"boolean\"==typeof t.forceServerObjectId?t.forceServerObjectId:this.s.db.options.forceServerObjectId))for(var r=0;r<e.length;r++)null==e[r]._id&&(e[r]._id=this.s.pkFactory.createPk());var o=[{insertMany:e}];return O(this.s.topology,T,[this,o,t,n],{resultMutator:t=>(function(e,t){var n={result:{ok:1,n:t.insertedCount},ops:e,insertedCount:t.insertedCount,insertedIds:t.insertedIds};return t.getLastOp()&&(n.result.opTime=t.getLastOp()),n})(e,t)})},E.classMethod(\"insertMany\",{callback:!0,promise:!0}),_.prototype.bulkWrite=function(e,t,n){if(\"function\"==typeof t&&(n=t,t={}),t=t||{ordered:!0},!Array.isArray(e))throw l.create({message:\"operations must be an array of documents\",driver:!0});return O(this.s.topology,T,[this,e,t,n])};var T=function(e,t,n,r){e.s.options.ignoreUndefined&&((n=u(n)).ignoreUndefined=e.s.options.ignoreUndefined);var o=!0===n.ordered||null==n.ordered?e.initializeOrderedBulkOp(n):e.initializeUnorderedBulkOp(n),i=!1;try{for(var s=0;s<t.length;s++){var c=Object.keys(t[s])[0];t[s][c].collation&&(i=!0),o.raw(t[s])}}catch(e){return r(e,null)}var p=me(u(n),e.s.db,e,n),d=p.writeConcern?p.writeConcern:{},f=e.s.topology.capabilities();if(i&&f&&!f.commandsTakeCollation)return r(new l(a(\"server/primary/mongos does not support collation\")));o.execute(d,p,function(e,t){if(!t&&e)return r(e,null);t.insertedCount=t.nInserted,t.matchedCount=t.nMatched,t.modifiedCount=t.nModified||0,t.deletedCount=t.nRemoved,t.upsertedCount=t.getUpsertedIds().length,t.upsertedIds={},t.insertedIds={},t.n=t.insertedCount;for(var n=t.getInsertedIds(),o=0;o<n.length;o++)t.insertedIds[n[o].index]=n[o]._id;var i=t.getUpsertedIds();for(o=0;o<i.length;o++)t.upsertedIds[i[o].index]=i[o]._id;r(null,t)})},M=function(e,t,n,r){\"function\"==typeof n&&(r=n,n={}),n=n||{},t=Array.isArray(t)?t:[t];var o=me(u(n),e.s.db,e,n);if(!0===o.keepGoing&&(o.ordered=!1),o.serializeFunctions=n.serializeFunctions||e.s.serializeFunctions,!0!==(\"boolean\"==typeof n.forceServerObjectId?n.forceServerObjectId:e.s.db.options.forceServerObjectId))for(var i=0;i<t.length;i++)void 0===t[i]._id&&(t[i]._id=e.s.pkFactory.createPk());e.s.topology.insert(e.s.namespace,t,o,function(e,n){if(null!=r){if(e)return h(r,e);if(null==n)return h(r,null,null);if(n.result.code)return h(r,d(n.result));if(n.result.writeErrors)return h(r,d(n.result.writeErrors[0]));n.ops=t,h(r,null,n)}})};E.classMethod(\"bulkWrite\",{callback:!0,promise:!0}),_.prototype.insert=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{ordered:!1},e=Array.isArray(e)?e:[e],!0===t.keepGoing&&(t.ordered=!1),this.insertMany(e,t,n)},E.classMethod(\"insert\",{callback:!0,promise:!0}),_.prototype.updateOne=function(e,t,n,r){\"function\"==typeof n&&(r=n,n={}),n=n||{};var o=N(t);return o?\"function\"==typeof r?r(o):this.s.promiseLibrary.reject(o):(n=u(n),this.s.options.ignoreUndefined&&((n=u(n)).ignoreUndefined=this.s.options.ignoreUndefined),O(this.s.topology,A,[this,e,t,n,r]))};var N=function(e){var t=Object.keys(e);return 0===t.length?d(\"The update operation document must contain at least one atomic operator.\"):\"$\"!==t[0][0]?d(\"the update operation document must contain atomic operators.\"):void 0},A=function(e,t,n,r,o){r.multi=!1,P(e,t,n,r,function(e,t){if(null!=o){if(e&&o)return o(e);if(null==t)return o(null,{result:{ok:1}});t.modifiedCount=null!=t.result.nModified?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,o&&o(null,t)}})};E.classMethod(\"updateOne\",{callback:!0,promise:!0}),_.prototype.replaceOne=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n={}),n=u(n),this.s.options.ignoreUndefined&&((n=u(n)).ignoreUndefined=this.s.options.ignoreUndefined),O(this.s.topology,B,[this,e,t,n,r])};var B=function(e,t,n,r,o){r.multi=!1,P(e,t,n,r,function(e,t){if(null!=o){if(e&&o)return o(e);if(null==t)return o(null,{result:{ok:1}});t.modifiedCount=null!=t.result.nModified?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,t.ops=[n],o&&o(null,t)}})};E.classMethod(\"replaceOne\",{callback:!0,promise:!0}),_.prototype.updateMany=function(e,t,n,r){\"function\"==typeof n&&(r=n,n={}),n=n||{};var o=N(t);return o?\"function\"==typeof r?r(o):this.s.promiseLibrary.reject(o):(n=u(n),this.s.options.ignoreUndefined&&((n=u(n)).ignoreUndefined=this.s.options.ignoreUndefined),O(this.s.topology,j,[this,e,t,n,r]))};var j=function(e,t,n,r,o){r.multi=!0,P(e,t,n,r,function(e,t){if(null!=o){if(e&&o)return o(e);if(null==t)return o(null,{result:{ok:1}});t.modifiedCount=null!=t.result.nModified?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,o&&o(null,t)}})};E.classMethod(\"updateMany\",{callback:!0,promise:!0});var P=function(e,t,n,r,o){if(\"function\"==typeof r&&(o=r,r=null),null==r&&(r={}),\"function\"!=typeof o&&(o=null),null==t||\"object\"!=typeof t)return o(d(\"selector must be a valid JavaScript object\"));if(null==n||\"object\"!=typeof n)return o(d(\"document must be a valid JavaScript object\"));var i=me(u(r),e.s.db,e,r);i.serializeFunctions=r.serializeFunctions||e.s.serializeFunctions;var s={q:t,u:n};s.upsert=void 0!==r.upsert&&!!r.upsert,s.multi=void 0!==r.multi&&!!r.multi,i.arrayFilters&&(s.arrayFilters=i.arrayFilters,delete i.arrayFilters),ce(i,e,r),e.s.topology.update(e.s.namespace,[s],i,function(e,t){if(null!=o)return e?h(o,e,null):null==t?h(o,null,null):t.result.code?h(o,d(t.result)):t.result.writeErrors?h(o,d(t.result.writeErrors[0])):void h(o,null,t)})};_.prototype.update=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n={}),n=n||{},this.s.options.ignoreUndefined&&((n=u(n)).ignoreUndefined=this.s.options.ignoreUndefined),O(this.s.topology,P,[this,e,t,n,r])},E.classMethod(\"update\",{callback:!0,promise:!0}),_.prototype.deleteOne=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=u(t),this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),O(this.s.topology,D,[this,e,t,n])};var D=function(e,t,n,r){n.single=!0,R(e,t,n,function(e,t){if(null!=r){if(e&&r)return r(e);if(null==t)return r(null,{result:{ok:1}});t.deletedCount=t.result.n,r&&r(null,t)}})};E.classMethod(\"deleteOne\",{callback:!0,promise:!0}),_.prototype.removeOne=_.prototype.deleteOne,E.classMethod(\"removeOne\",{callback:!0,promise:!0}),_.prototype.deleteMany=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=u(t),this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),O(this.s.topology,L,[this,e,t,n])};var L=function(e,t,n,r){n.single=!1,R(e,t,n,function(e,t){if(null!=r){if(e&&r)return r(e);if(null==t)return r(null,{result:{ok:1}});t.deletedCount=t.result.n,r&&r(null,t)}})},R=function(e,t,n,r){\"function\"==typeof n?(r=n,n={}):\"function\"==typeof t&&(r=t,n={},t={});var o=me(u(n=n||{}),e.s.db,e,n);null==t&&(t={});var i={q:t,limit:0};n.single&&(i.limit=1),ce(o,e,n),e.s.topology.remove(e.s.namespace,[i],o,function(e,t){if(null!=r)return e?h(r,e,null):null==t?h(r,null,null):t.result.code?h(r,d(t.result)):t.result.writeErrors?h(r,d(t.result.writeErrors[0])):void h(r,null,t)})};E.classMethod(\"deleteMany\",{callback:!0,promise:!0}),_.prototype.removeMany=_.prototype.deleteMany,E.classMethod(\"removeMany\",{callback:!0,promise:!0}),_.prototype.remove=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{},this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),O(this.s.topology,R,[this,e,t,n])},E.classMethod(\"remove\",{callback:!0,promise:!0}),_.prototype.save=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{},this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),O(this.s.topology,z,[this,e,t,n])};var z=function(e,t,n,r){var o=me(u(n),e.s.db,e,n);if(null!=t._id)return o.upsert=!0,P(e,{_id:t._id},t,o,r);M(e,[t],o,function(e,n){if(null!=r)return null==t?h(r,null,null):e?h(r,e,null):void h(r,null,n)})};E.classMethod(\"save\",{callback:!0,promise:!0}),_.prototype.findOne=function(e,t,n){return\"function\"==typeof e&&(n=e,e={},t={}),\"function\"==typeof t&&(n=t,t={}),e=e||{},t=t||{},O(this.s.topology,q,[this,e,t,n])};var q=function(e,t,n,r){e.find(t,n).limit(-1).batchSize(1).next(function(e,t){if(null!=e)return h(r,d(e),null);h(r,null,t)})};E.classMethod(\"findOne\",{callback:!0,promise:!0}),_.prototype.rename=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=Object.assign({},t,{readPreference:y.PRIMARY}),O(this.s.topology,U,[this,e,t,n])};var U=function(e,t,n,o){r(t);var i={renameCollection:a(\"%s.%s\",e.s.dbName,e.s.name),to:a(\"%s.%s\",e.s.dbName,t),dropTarget:\"boolean\"==typeof n.dropTarget&&n.dropTarget};ae(i,e,n),e.s.db.admin().command(i,n,function(n,r){if(n)return h(o,n,null);if(r.errmsg)return h(o,d(r),null);try{return h(o,null,new _(e.s.db,e.s.topology,e.s.dbName,t,e.s.pkFactory,e.s.options))}catch(n){return h(o,d(n),null)}})};E.classMethod(\"rename\",{callback:!0,promise:!0}),_.prototype.drop=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},O(this.s.topology,this.s.db.dropCollection.bind(this.s.db),[this.s.name,e,t])},E.classMethod(\"drop\",{callback:!0,promise:!0}),_.prototype.options=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},O(this.s.topology,F,[this,e,t])};var F=function(e,t,n){e.s.db.listCollections({name:e.s.name},t).toArray(function(t,r){return t?h(n,t):0===r.length?h(n,l.create({message:a(\"collection %s not found\",e.s.namespace),driver:!0})):void h(n,t,r[0].options||null)})};E.classMethod(\"options\",{callback:!0,promise:!0}),_.prototype.isCapped=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},O(this.s.topology,H,[this,e,t])};var H=function(e,t,n){e.options(t,function(e,t){if(e)return h(n,e);h(n,null,t&&t.capped)})};E.classMethod(\"isCapped\",{callback:!0,promise:!0}),_.prototype.createIndex=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{},O(this.s.topology,V,[this,e,t,n])};var V=function(e,t,n,r){e.s.db.createIndex(e.s.name,t,n,r)};E.classMethod(\"createIndex\",{callback:!0,promise:!0}),_.prototype.createIndexes=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),\"number\"!=typeof(t=t?u(t):{}).maxTimeMS&&delete t.maxTimeMS,O(this.s.topology,$,[this,e,t,n])};var $=function(e,t,n,r){for(var o=e.s.topology.capabilities(),i=0;i<t.length;i++)if(null==t[i].name){var s=[];if(t[i].collation&&o&&!o.commandsTakeCollation)return r(new l(a(\"server/primary/mongos does not support collation\")));for(var c in t[i].key)s.push(a(\"%s_%s\",c,t[i].key[c]));t[i].name=s.join(\"_\")}n=Object.assign({},n,{readPreference:y.PRIMARY}),e.s.db.command({createIndexes:e.s.name,indexes:t},n,r)};E.classMethod(\"createIndexes\",{callback:!0,promise:!0}),_.prototype.dropIndex=function(e,t,n){var r=Array.prototype.slice.call(arguments,1);return n=\"function\"==typeof r[r.length-1]?r.pop():void 0,(t=r.length&&r.shift()||{}).readPreference=y.PRIMARY,O(this.s.topology,W,[this,e,t,n])};var W=function(e,t,n,r){var o={dropIndexes:e.s.name,index:t};ae(o,e,n),e.s.db.command(o,n,function(e,t){if(\"function\"==typeof r)return e?h(r,e,null):void h(r,null,t)})};E.classMethod(\"dropIndex\",{callback:!0,promise:!0}),_.prototype.dropIndexes=function(e,t){return\"function\"==typeof e&&(t=e,e={}),\"number\"!=typeof(e=e?u(e):{}).maxTimeMS&&delete e.maxTimeMS,O(this.s.topology,K,[this,e,t])};var K=function(e,t,n){e.dropIndex(\"*\",t,function(e){if(e)return h(n,e,!1);h(n,null,!0)})};E.classMethod(\"dropIndexes\",{callback:!0,promise:!0}),_.prototype.dropAllIndexes=_.prototype.dropIndexes,E.classMethod(\"dropAllIndexes\",{callback:!0,promise:!0}),_.prototype.reIndex=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},O(this.s.topology,Y,[this,e,t])};var Y=function(e,t,n){var r={reIndex:e.s.name};e.s.db.command(r,t,function(e,t){if(null!=n)return e?h(n,e,null):void h(n,null,!!t.ok)})};E.classMethod(\"reIndex\",{callback:!0,promise:!0}),_.prototype.listIndexes=function(e){if(e=u(e=e||{}),(e=ge(this,e,this.s.db,this)).cursorFactory=v,e.promiseLibrary=this.s.promiseLibrary,!this.s.topology.capabilities())throw new l(\"cannot connect to server\");if(this.s.topology.capabilities().hasListIndexesCommand){var t=e.batchSize?{batchSize:e.batchSize}:{},n={listIndexes:this.s.name,cursor:t};return t=this.s.topology.cursor(a(\"%s.$cmd\",this.s.dbName),n,e),e.readPreference&&t.setReadPreference(e.readPreference),t}var r=a(\"%s.system.indexes\",this.s.dbName);return t=this.s.topology.cursor(r,{find:r,query:{ns:this.s.namespace}},e),e.readPreference&&t.setReadPreference(e.readPreference),e.batchSize&&(t=t.batchSize(e.batchSize)),t},E.classMethod(\"listIndexes\",{callback:!1,promise:!1,returns:[v]}),_.prototype.ensureIndex=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{},O(this.s.topology,G,[this,e,t,n])};var G=function(e,t,n,r){e.s.db.ensureIndex(e.s.name,t,n,r)};E.classMethod(\"ensureIndex\",{callback:!0,promise:!0}),_.prototype.indexExists=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{},O(this.s.topology,J,[this,e,t,n])};var J=function(e,t,n,r){e.indexInformation(n,function(e,n){if(null!=e)return h(r,e,null);if(!Array.isArray(t))return h(r,null,null!=n[t]);for(var o=0;o<t.length;o++)if(null==n[t[o]])return h(r,null,!1);return h(r,null,!0)})};E.classMethod(\"indexExists\",{callback:!0,promise:!0}),_.prototype.indexInformation=function(e,t){var n=Array.prototype.slice.call(arguments,0);return t=\"function\"==typeof n[n.length-1]?n.pop():void 0,e=n.length&&n.shift()||{},O(this.s.topology,Z,[this,e,t])};var Z=function(e,t,n){e.s.db.indexInformation(e.s.name,t,n)};E.classMethod(\"indexInformation\",{callback:!0,promise:!0}),_.prototype.count=function(e,t,n){var r=Array.prototype.slice.call(arguments,0);return n=\"function\"==typeof r[r.length-1]?r.pop():void 0,e=r.length&&r.shift()||{},t=r.length&&r.shift()||{},O(this.s.topology,X,[this,e,t,n])};var X=function(e,t,n,r){var o=n.skip,i=n.limit,s=n.hint,a=n.maxTimeMS,c={count:e.s.name,query:t};\"number\"==typeof o&&(c.skip=o),\"number\"==typeof i&&(c.limit=i),\"number\"==typeof a&&(c.maxTimeMS=a),s&&(c.hint=s),n=u(n),le(c,e,n=ge(e,n,e.s.db)),ce(c,e,n),e.s.db.command(c,n,function(e,t){if(e)return h(r,e);h(r,null,t.n)})};E.classMethod(\"count\",{callback:!0,promise:!0}),_.prototype.distinct=function(e,t,n,r){var o=Array.prototype.slice.call(arguments,1);r=\"function\"==typeof o[o.length-1]?o.pop():void 0;var i=o.length&&o.shift()||{},s=o.length&&o.shift()||{};return O(this.s.topology,Q,[this,e,i,s,r])};var Q=function(e,t,n,r,o){var i=r.maxTimeMS,s={distinct:e.s.name,key:t,query:n};r=u(r),r=ge(e,r,e.s.db,e),\"number\"==typeof i&&(s.maxTimeMS=i),le(s,e,r),ce(s,e,r),e.s.db.command(s,r,function(e,t){if(e)return h(o,e);h(o,null,t.values)})};E.classMethod(\"distinct\",{callback:!0,promise:!0}),_.prototype.indexes=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},O(this.s.topology,ee,[this,e,t])};var ee=function(e,t,n){t=Object.assign({},{full:!0},t),e.s.db.indexInformation(e.s.name,t,n)};E.classMethod(\"indexes\",{callback:!0,promise:!0}),_.prototype.stats=function(e,t){var n=Array.prototype.slice.call(arguments,0);return t=\"function\"==typeof n[n.length-1]?n.pop():void 0,e=n.length&&n.shift()||{},O(this.s.topology,te,[this,e,t])};var te=function(e,t,n){var r={collStats:e.s.name};null!=t.scale&&(r.scale=t.scale),t=u(t),t=ge(e,t,e.s.db,e),e.s.db.command(r,t,n)};E.classMethod(\"stats\",{callback:!0,promise:!0}),_.prototype.findOneAndDelete=function(e,t,n){if(\"function\"==typeof t&&(n=t,t={}),t=t||{},null==e||\"object\"!=typeof e)throw d(\"filter parameter must be an object\");return O(this.s.topology,ne,[this,e,t,n])};var ne=function(e,t,n,r){var o=u(n);o.fields=n.projection,o.remove=!0,e.findAndModify(t,n.sort,null,o,r)};E.classMethod(\"findOneAndDelete\",{callback:!0,promise:!0}),_.prototype.findOneAndReplace=function(e,t,n,r){if(\"function\"==typeof n&&(r=n,n={}),n=n||{},null==e||\"object\"!=typeof e)throw d(\"filter parameter must be an object\");if(null==t||\"object\"!=typeof t)throw d(\"replacement parameter must be an object\");return O(this.s.topology,re,[this,e,t,n,r])};var re=function(e,t,n,r,o){var i=u(r);i.fields=r.projection,i.update=!0,i.new=void 0!==r.returnOriginal&&!r.returnOriginal,i.upsert=void 0!==r.upsert&&!!r.upsert,e.findAndModify(t,r.sort,n,i,o)};E.classMethod(\"findOneAndReplace\",{callback:!0,promise:!0}),_.prototype.findOneAndUpdate=function(e,t,n,r){if(\"function\"==typeof n&&(r=n,n={}),n=n||{},null==e||\"object\"!=typeof e)throw d(\"filter parameter must be an object\");if(null==t||\"object\"!=typeof t)throw d(\"update parameter must be an object\");return O(this.s.topology,oe,[this,e,t,n,r])};var oe=function(e,t,n,r,o){var i=u(r);i.fields=r.projection,i.update=!0,i.new=\"boolean\"==typeof r.returnOriginal&&!r.returnOriginal,i.upsert=\"boolean\"==typeof r.upsert&&r.upsert,e.findAndModify(t,r.sort,n,i,o)};E.classMethod(\"findOneAndUpdate\",{callback:!0,promise:!0}),_.prototype.findAndModify=function(e,t,n,r,o){var i=Array.prototype.slice.call(arguments,1);return o=\"function\"==typeof i[i.length-1]?i.pop():void 0,t=i.length&&i.shift()||[],n=i.length?i.shift():null,r=i.length&&i.shift()||{},(r=u(r)).readPreference=y.PRIMARY,O(this.s.topology,ie,[this,e,t,n,r,o])};var ie=function(e,t,n,r,o,i){var s={findandmodify:e.s.name,query:t};(n=g(n))&&(s.sort=n),s.new=!!o.new,s.remove=!!o.remove,s.upsert=!!o.upsert;const a=o.projection||o.fields;a&&(s.fields=a),o.arrayFilters&&(s.arrayFilters=o.arrayFilters,delete o.arrayFilters),r&&!o.remove&&(s.update=r),o.maxTimeMS&&(s.maxTimeMS=o.maxTimeMS),null!=o.serializeFunctions?o.serializeFunctions=o.serializeFunctions:o.serializeFunctions=e.s.serializeFunctions,o.checkKeys=!1;var c=me(o,e.s.db,e,o);c.writeConcern&&(s.writeConcern=c.writeConcern),\"boolean\"==typeof c.bypassDocumentValidation&&(s.bypassDocumentValidation=c.bypassDocumentValidation),ce(s,e,c),e.s.db.command(s,c,function(e,t){return e?h(i,e,null):h(i,null,t)})};E.classMethod(\"findAndModify\",{callback:!0,promise:!0}),_.prototype.findAndRemove=function(e,t,n,r){var o=Array.prototype.slice.call(arguments,1);return r=\"function\"==typeof o[o.length-1]?o.pop():void 0,t=o.length&&o.shift()||[],n=o.length&&o.shift()||{},O(this.s.topology,se,[this,e,t,n,r])};var se=function(e,t,n,r,o){r.remove=!0,e.findAndModify(t,n,null,r,o)};function ae(e,t,n){var r=t.s.topology.capabilities();if(r&&r.commandsTakeWriteConcern){var o=me(u(n),t.s.db,t,n);o.writeConcern&&(e.writeConcern=o.writeConcern)}}function ce(e,t,n){var r=t.s.topology.capabilities();r&&r.commandsTakeCollation&&n.collation&&\"object\"==typeof n.collation&&(e.collation=n.collation)}function le(e,t,n){let r=Object.assign({},e.readConcern||{});t.s.readConcern&&Object.assign(r,t.s.readConcern),n.session&&n.session.supports.causalConsistency&&n.session.operationTime&&Object.assign(r,{afterClusterTime:n.session.operationTime}),Object.keys(r).length>0&&Object.assign(e,{readConcern:r})}E.classMethod(\"findAndRemove\",{callback:!0,promise:!0}),_.prototype.aggregate=function(e,t,n){if(Array.isArray(e))\"function\"==typeof t&&(n=t,t={}),null==t&&null==n&&(t={});else{var r=Array.prototype.slice.call(arguments,0);n=r.pop();var o=r[r.length-1];t=o&&(o.readPreference||o.explain||o.cursor||o.out||o.maxTimeMS||o.hint||o.allowDiskUse)?r.pop():{},e=r}var i=!1,s={aggregate:this.s.name,pipeline:e};if(\"string\"==typeof t.out?(e.push({$out:t.out}),i=!0):e.length>0&&e[e.length-1].$out&&(i=!0),e.length>0&&e[e.length-1].$out&&ae(s,this,t),ce(s,this,t),\"boolean\"==typeof t.bypassDocumentValidation&&(s.bypassDocumentValidation=t.bypassDocumentValidation),i||le(s,this,t),t.allowDiskUse&&(s.allowDiskUse=t.allowDiskUse),\"number\"==typeof t.maxTimeMS&&(s.maxTimeMS=t.maxTimeMS),t.hint&&(s.hint=t.hint),t=u(t),(t=ge(this,t,this.s.db,this)).explain){if(s.readConcern||s.writeConcern)throw d('\"explain\" cannot be used on an aggregate call with readConcern/writeConcern');s.explain=t.explain}if(\"string\"==typeof t.comment&&(s.comment=t.comment),null!=t.cursor&&\"object\"!=typeof t.cursor)throw d(\"cursor options must be an object\");if(t.cursor=t.cursor||{batchSize:1e3},s.cursor=t.cursor,t.promiseLibrary=this.s.promiseLibrary,t.cursorFactory=c,\"function\"!=typeof n){if(!this.s.topology.capabilities())throw new l(\"cannot connect to server\");return\"boolean\"==typeof t.allowDiskUse&&(s.allowDiskUse=t.allowDiskUse),\"number\"==typeof t.maxTimeMS&&(s.maxTimeMS=t.maxTimeMS),this.s.topology.cursor(this.s.namespace,s,t)}return h(n,null,this.s.topology.cursor(this.s.namespace,s,t))},E.classMethod(\"aggregate\",{callback:!0,promise:!1}),_.prototype.watch=function(e,t){return e=e||[],t=t||{},Array.isArray(e)||(t=e,e=[]),new k(this,e,t)},E.classMethod(\"watch\",{callback:!1,promise:!1}),_.prototype.parallelCollectionScan=function(e,t){return\"function\"==typeof e&&(t=e,e={numCursors:1}),e.numCursors=e.numCursors||1,e.batchSize=e.batchSize||1e3,e=u(e),(e=ge(this,e,this.s.db,this)).promiseLibrary=this.s.promiseLibrary,O(this.s.topology,ue,[this,e,t],{returnsCursor:!0})};var ue=function(e,t,n){var r={parallelCollectionScan:e.s.name,numCursors:t.numCursors};le(r,e,t);var o=t.raw;delete t.raw,e.s.db.command(r,t,function(r,s){if(r)return h(n,r,null);if(null==s)return h(n,new Error(\"no result returned for parallelCollectionScan\"),null);var a=[];o&&(t.raw=o);for(var c=0;c<s.cursors.length;c++){var l=s.cursors[c].cursor.id,u=\"number\"==typeof l?i.fromNumber(l):l;a.push(e.s.topology.cursor(e.s.namespace,u,t))}h(n,null,a)})};E.classMethod(\"parallelCollectionScan\",{callback:!0,promise:!0}),_.prototype.geoHaystackSearch=function(e,t,n,r){var o=Array.prototype.slice.call(arguments,2);return r=\"function\"==typeof o[o.length-1]?o.pop():void 0,n=o.length&&o.shift()||{},O(this.s.topology,pe,[this,e,t,n,r])};var pe=function(e,t,n,r,o){var i={geoSearch:e.s.name,near:[t,n]};i=m(i,r,{readPreference:!0,session:!0}),r=u(r),le(i,e,r=ge(e,r,e.s.db,e)),e.s.db.command(i,r,function(e,t){if(e)return h(o,e);(t.err||t.errmsg)&&h(o,d(t)),h(o,null,t)})};E.classMethod(\"geoHaystackSearch\",{callback:!0,promise:!0});_.prototype.group=function(e,t,n,r,o,i,s,a){var c=Array.prototype.slice.call(arguments,3);return a=\"function\"==typeof c[c.length-1]?c.pop():void 0,r=c.length?c.shift():null,o=c.length?c.shift():null,i=c.length?c.shift():null,s=c.length&&c.shift()||{},\"function\"!=typeof o&&(i=o,o=null),!Array.isArray(e)&&e instanceof Object&&\"function\"!=typeof e&&\"Code\"!==e._bsontype&&(e=Object.keys(e)),\"function\"==typeof r&&(r=r.toString()),\"function\"==typeof o&&(o=o.toString()),i=null==i||i,O(this.s.topology,de,[this,e,t,n,r,o,i,s,a])};var de=function(e,t,n,r,o,i,a,c,l){if(a){var p=o&&\"Code\"===o._bsontype?o:new s(o),d={group:{ns:e.s.name,$reduce:p,cond:n,initial:r,out:\"inline\"}};if(null!=i&&(d.group.finalize=i),\"function\"==typeof t||t&&\"Code\"===t._bsontype)d.group.$keyf=t&&\"Code\"===t._bsontype?t:new s(t);else{var f={};t.forEach(function(e){f[e]=1}),d.group.key=f}c=u(c),le(d,e,c=ge(e,c,e.s.db,e)),ce(d,e,c),e.s.db.command(d,c,function(e,t){if(e)return h(l,e,null);h(l,null,t.retval)})}else{var m=null!=o&&\"Code\"===o._bsontype?o.scope:{};m.ns=e.s.name,m.keys=t,m.condition=n,m.initial=r;var g='function () {\\nvar c = db[ns].find(condition);\\nvar map = new Map();\\nvar reduce_function = reduce;\\n\\nwhile (c.hasNext()) {\\nvar obj = c.next();\\nvar key = {};\\n\\nfor (var i = 0, len = keys.length; i < len; ++i) {\\nvar k = keys[i];\\nkey[k] = obj[k];\\n}\\n\\nvar aggObj = map.get(key);\\n\\nif (aggObj == null) {\\nvar newObj = Object.extend({}, key);\\naggObj = Object.extend(newObj, initial);\\nmap.put(key, aggObj);\\n}\\n\\nreduce_function(obj, aggObj);\\n}\\n\\nreturn { \"result\": map.values() };\\n}'.replace(/ reduce;/,o.toString()+\";\");e.s.db.eval(new s(g,m),null,c,function(e,t){if(e)return h(l,e,null);h(l,null,t.result||t)})}};function fe(e){if(!p(e)||\"ObjectID\"===e._bsontype)return e;for(var t,n=Object.keys(e),r=n.length,o={};r--;)\"function\"==typeof e[t=n[r]]?o[t]=new s(String(e[t])):o[t]=fe(e[t]);return o}E.classMethod(\"group\",{callback:!0,promise:!0}),_.prototype.mapReduce=function(e,t,n,r){if(\"function\"==typeof n&&(r=n,n={}),null==n.out)throw new Error(\"the out option parameter must be defined, see mongodb docs for possible values\");return\"function\"==typeof e&&(e=e.toString()),\"function\"==typeof t&&(t=t.toString()),\"function\"==typeof n.finalize&&(n.finalize=n.finalize.toString()),O(this.s.topology,he,[this,e,t,n,r])};var he=function(e,t,r,o,i){var s={mapreduce:e.s.name,map:t,reduce:r},a=[\"readPreference\",\"session\"];for(var c in o)\"scope\"===c?s[c]=fe(o[c]):-1===a.indexOf(c)&&(s[c]=o[c]);o=u(o),!1!==(o=ge(e,o,e.s.db,e)).readPreference&&\"primary\"!==o.readPreference&&o.out&&1!==o.out.inline&&\"inline\"!==o.out?(o.readPreference=\"primary\",ae(s,e,o)):le(s,e,o),\"boolean\"==typeof o.bypassDocumentValidation&&(s.bypassDocumentValidation=o.bypassDocumentValidation),ce(s,e,o),e.s.db.command(s,o,function(t,r){if(t)return h(i,t);if(1!==r.ok||r.err||r.errmsg)return h(i,d(r));var s={};if(r.timeMillis&&(s.processtime=r.timeMillis),r.counts&&(s.counts=r.counts),r.timing&&(s.timing=r.timing),r.results)return null!=o.verbose&&o.verbose?h(i,null,{results:r.results,stats:s}):h(i,null,r.results);var a=null;if(null!=r.result&&\"object\"==typeof r.result){var c=r.result;a=new(n(74))(c.db,e.s.db.s.topology,e.s.db.s.options).collection(c.collection)}else a=e.s.db.collection(r.result);if(null==o.verbose||!o.verbose)return h(i,t,a);h(i,t,{collection:a,stats:s})})};E.classMethod(\"mapReduce\",{callback:!0,promise:!0}),_.prototype.initializeUnorderedBulkOp=function(e){return(e=e||{}).promiseLibrary=this.s.promiseLibrary,w(this.s.topology,this,e)},E.classMethod(\"initializeUnorderedBulkOp\",{callback:!1,promise:!1,returns:[S.UnorderedBulkOperation]}),_.prototype.initializeOrderedBulkOp=function(e){return(e=e||{}).promiseLibrary=this.s.promiseLibrary,S(this.s.topology,this,e)},E.classMethod(\"initializeOrderedBulkOp\",{callback:!1,promise:!1,returns:[S.OrderedBulkOperation]});var me=function(e,t,n,r){if(null!=r.w||null!=r.j||null!=r.fsync){var o={};null!=r.w&&(o.w=r.w),null!=r.wtimeout&&(o.wtimeout=r.wtimeout),null!=r.j&&(o.j=r.j),null!=r.fsync&&(o.fsync=r.fsync),e.writeConcern=o}else null!=n.writeConcern.w||null!=n.writeConcern.j||null!=n.writeConcern.fsync?e.writeConcern=n.writeConcern:null==t.writeConcern.w&&null==t.writeConcern.j&&null==t.writeConcern.fsync||(e.writeConcern=t.writeConcern);return t.s.options.retryWrites&&(e.retryWrites=!0),e},ge=function(e,t,n){let r=null;if(t.readPreference)r=t.readPreference;else if(e.s.readPreference)r=e.s.readPreference;else{if(!n.s.readPreference)return t;r=n.s.readPreference}if(\"string\"==typeof r)t.readPreference=new y(r);else if(!r||r instanceof y||\"object\"!=typeof r){if(!(r instanceof y))throw new TypeError(\"Invalid read preference: \"+r)}else{const e=r.mode||r.preference;e&&\"string\"==typeof e&&(t.readPreference=new y(e,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds}))}return t};e.exports=_},function(e,t,n){if(\"undefined\"!=typeof global)var r=n(10).Buffer;function o(e,t){if(!(this instanceof o))return new o(e,t);if(this._bsontype=\"Binary\",e instanceof Number?(this.sub_type=e,this.position=0):(this.sub_type=null==t?i:t,this.position=0),null==e||e instanceof Number)void 0!==r?this.buffer=new r(o.BUFFER_SIZE):\"undefined\"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(o.BUFFER_SIZE)):this.buffer=new Array(o.BUFFER_SIZE),this.position=0;else{if(\"string\"==typeof e)if(void 0!==r)this.buffer=new r(e);else{if(\"undefined\"==typeof Uint8Array&&\"[object Array]\"!=Object.prototype.toString.call(e))throw new Error(\"only String, Buffer, Uint8Array or Array accepted\");this.buffer=s(e)}else this.buffer=e;this.position=e.length}}o.prototype.put=function(e){if(null!=e.length&&\"number\"!=typeof e&&1!=e.length)throw new Error(\"only accepts single character String, Uint8Array or Array\");if(\"number\"!=typeof e&&e<0||e>255)throw new Error(\"only accepts number in a valid unsigned byte range 0-255\");var t=null;if(t=\"string\"==typeof e?e.charCodeAt(0):null!=e.length?e[0]:e,this.buffer.length>this.position)this.buffer[this.position++]=t;else if(void 0!==r&&r.isBuffer(this.buffer)){var n=new r(o.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=t}else{n=null;n=\"[object Uint8Array]\"==Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(o.BUFFER_SIZE+this.buffer.length)):new Array(o.BUFFER_SIZE+this.buffer.length);for(var i=0;i<this.buffer.length;i++)n[i]=this.buffer[i];this.buffer=n,this.buffer[this.position++]=t}},o.prototype.write=function(e,t){if(t=\"number\"==typeof t?t:this.position,this.buffer.length<t+e.length){var n=null;if(void 0!==r&&r.isBuffer(this.buffer))n=new r(this.buffer.length+e.length),this.buffer.copy(n,0,0,this.buffer.length);else if(\"[object Uint8Array]\"==Object.prototype.toString.call(this.buffer)){n=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var o=0;o<this.position;o++)n[o]=this.buffer[o]}this.buffer=n}if(void 0!==r&&r.isBuffer(e)&&r.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==r&&\"string\"==typeof e&&r.isBuffer(this.buffer))this.buffer.write(e,t,\"binary\"),this.position=t+e.length>this.position?t+e.length:this.position;else if(\"[object Uint8Array]\"==Object.prototype.toString.call(e)||\"[object Array]\"==Object.prototype.toString.call(e)&&\"string\"!=typeof e){for(o=0;o<e.length;o++)this.buffer[t++]=e[o];this.position=t>this.position?t:this.position}else if(\"string\"==typeof e){for(o=0;o<e.length;o++)this.buffer[t++]=e.charCodeAt(o);this.position=t>this.position?t:this.position}},o.prototype.read=function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var n=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),r=0;r<t;r++)n[r]=this.buffer[e++];return n},o.prototype.value=function(e){if((e=null!=e&&e)&&void 0!==r&&r.isBuffer(this.buffer)&&this.buffer.length==this.position)return this.buffer;if(void 0!==r&&r.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString(\"binary\",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=\"[object Uint8Array]\"==Object.prototype.toString.call(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),n=0;n<this.position;n++)t[n]=this.buffer[n];return t}return a(this.buffer,0,this.position)},o.prototype.length=function(){return this.position},o.prototype.toJSON=function(){return null!=this.buffer?this.buffer.toString(\"base64\"):\"\"},o.prototype.toString=function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):\"\"};var i=0,s=function(e){for(var t=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},a=function(e,t,n){for(var r=\"\",o=t;o<n;o++)r+=String.fromCharCode(e[o]);return r};o.BUFFER_SIZE=256,o.SUBTYPE_DEFAULT=0,o.SUBTYPE_FUNCTION=1,o.SUBTYPE_BYTE_ARRAY=2,o.SUBTYPE_UUID_OLD=3,o.SUBTYPE_UUID=4,o.SUBTYPE_MD5=5,o.SUBTYPE_USER_DEFINED=128,e.exports=o,e.exports.Binary=o},function(e,t){function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);this._bsontype=\"DBRef\",this.namespace=e,this.oid=t,this.db=r}n.prototype.toJSON=function(){return{$ref:this.namespace,$id:this.oid,$db:null==this.db?\"\":this.db}},e.exports=n,e.exports.DBRef=n},function(e,t){function n(){if(!(this instanceof n))return new n;this._bsontype=\"MaxKey\"}e.exports=n,e.exports.MaxKey=n},function(e,t){function n(){if(!(this instanceof n))return new n;this._bsontype=\"MinKey\"}e.exports=n,e.exports.MinKey=n},function(e,t,n){\"use strict\";var r=n(42),o=/^(\\+|\\-)?(\\d+|(\\d*\\.\\d*))?(E|e)?([\\-\\+])?(\\d+)?$/,i=/^(\\+|\\-)?(Infinity|inf)$/i,s=/^(\\+|\\-)?NaN$/i,a=6176,c=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),l=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),u=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),p=/^([\\-\\+])?(\\d+)?$/,d=function(e){return!isNaN(parseInt(e,10))},f=function(e){var t=r.fromNumber(1e9),n=r.fromNumber(0),o=0;if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:n};for(o=0;o<=3;o++)n=(n=n.shiftLeft(32)).add(new r(e.parts[o],0)),e.parts[o]=n.div(t).low_,n=n.modulo(t);return{quotient:e,rem:n}},h=function(e){this._bsontype=\"Decimal128\",this.bytes=e};h.fromString=function(e){var t=!1,n=!1,f=!1,m=0,g=0,y=0,v=0,b=0,x=[0],w=0,S=0,k=0,O=0,C=0,_=0,E=[0,0],I=[0,0],T=0,M=(e=e.trim()).match(o),N=e.match(i),A=e.match(s);if(!M&&!N&&!A||0==e.length)throw new Error(e+\" not a valid Decimal128 string\");if(M&&M[4]&&void 0===M[2])throw new Error(e+\" not a valid Decimal128 string\");if(\"+\"!=e[T]&&\"-\"!=e[T]||(t=\"-\"==e[T++]),!d(e[T])&&\".\"!=e[T]){if(\"i\"==e[T]||\"I\"==e[T])return new h(new Buffer(t?l:u));if(\"N\"==e[T])return new h(new Buffer(c))}for(;d(e[T])||\".\"==e[T];)if(\".\"!=e[T])w<34&&(\"0\"!=e[T]||f)&&(f||(b=g),f=!0,x[S++]=parseInt(e[T],10),w+=1),f&&(y+=1),n&&(v+=1),g+=1,T+=1;else{if(n)return new h(new Buffer(c));n=!0,T+=1}if(n&&!g)throw new Error(e+\" not a valid Decimal128 string\");if(\"e\"==e[T]||\"E\"==e[T]){var B=e.substr(++T).match(p);if(!B||!B[2])return new h(new Buffer(c));C=parseInt(B[0],10),T+=B[0].length}if(e[T])return new h(new Buffer(c));if(k=0,w){if(O=w-1,m=y,0!=C&&1!=m)for(;\"0\"==e[b+m-1];)m-=1}else k=0,O=0,x[0]=0,y=1,w=1,m=0;for(C<=v&&v-C>16384?C=-6176:C-=v;C>6111;){if((O+=1)-k>34){if(x.join(\"\").match(/^0+$/)){C=6111;break}return new h(new Buffer(t?l:u))}C-=1}for(;C<-6176||w<y;){if(0==O){C=-6176,m=0;break}if(w<y?y-=1:O-=1,!(C<6111)){if(x.join(\"\").match(/^0+$/)){C=6111;break}return new h(new Buffer(t?l:u))}C+=1}if(O-k+1<m&&\"0\"!=e[m]){var j=g;n&&-6176==C&&(b+=1,j+=1);var P=parseInt(e[b+O+1],10),D=0;if(P>=5&&(D=1,5==P)){D=x[O]%2==1;for(_=b+O+2;_<j;_++)if(parseInt(e[_],10)){D=1;break}}if(D)for(var L=O;L>=0&&++x[L]>9;L--)if(x[L]=0,0==L){if(!(C<6111))return new h(new Buffer(t?l:u));C+=1,x[L]=1}}if(E=r.fromNumber(0),I=r.fromNumber(0),0==m)E=r.fromNumber(0),I=r.fromNumber(0);else if(O-k<17){L=k;for(I=r.fromNumber(x[L++]),E=new r(0,0);L<=O;L++)I=(I=I.multiply(r.fromNumber(10))).add(r.fromNumber(x[L]))}else{L=k;for(E=r.fromNumber(x[L++]);L<=O-17;L++)E=(E=E.multiply(r.fromNumber(10))).add(r.fromNumber(x[L]));for(I=r.fromNumber(x[L++]);L<=O;L++)I=(I=I.multiply(r.fromNumber(10))).add(r.fromNumber(x[L]))}var R,z,q,U,F=function(e,t){if(!e&&!t)return{high:r.fromNumber(0),low:r.fromNumber(0)};var n=e.shiftRightUnsigned(32),o=new r(e.getLowBits(),0),i=t.shiftRightUnsigned(32),s=new r(t.getLowBits(),0),a=n.multiply(i),c=n.multiply(s),l=o.multiply(i),u=o.multiply(s);return a=a.add(c.shiftRightUnsigned(32)),c=new r(c.getLowBits(),0).add(l).add(u.shiftRightUnsigned(32)),{high:a=a.add(c.shiftRightUnsigned(32)),low:u=c.shiftLeft(32).add(new r(u.getLowBits(),0))}}(E,r.fromString(\"100000000000000000\"));F.low=F.low.add(I),R=F.low,z=I,q=R.high_>>>0,U=z.high_>>>0,(q<U||q==U&&R.low_>>>0<z.low_>>>0)&&(F.high=F.high.add(r.fromNumber(1)));var H=C+a,V={low:r.fromNumber(0),high:r.fromNumber(0)};F.high.shiftRightUnsigned(49).and(r.fromNumber(1)).equals(r.fromNumber)?(V.high=V.high.or(r.fromNumber(3).shiftLeft(61)),V.high=V.high.or(r.fromNumber(H).and(r.fromNumber(16383).shiftLeft(47))),V.high=V.high.or(F.high.and(r.fromNumber(0x7fffffffffff)))):(V.high=V.high.or(r.fromNumber(16383&H).shiftLeft(49)),V.high=V.high.or(F.high.and(r.fromNumber(562949953421311)))),V.low=F.low,t&&(V.high=V.high.or(r.fromString(\"9223372036854775808\")));var $=new Buffer(16);T=0;return $[T++]=255&V.low.low_,$[T++]=V.low.low_>>8&255,$[T++]=V.low.low_>>16&255,$[T++]=V.low.low_>>24&255,$[T++]=255&V.low.high_,$[T++]=V.low.high_>>8&255,$[T++]=V.low.high_>>16&255,$[T++]=V.low.high_>>24&255,$[T++]=255&V.high.low_,$[T++]=V.high.low_>>8&255,$[T++]=V.high.low_>>16&255,$[T++]=V.high.low_>>24&255,$[T++]=255&V.high.high_,$[T++]=V.high.high_>>8&255,$[T++]=V.high.high_>>16&255,$[T++]=V.high.high_>>24&255,new h($)};a=6176;h.prototype.toString=function(){for(var e,t,n,o,i,s,c=0,l=new Array(36),u=0;u<l.length;u++)l[u]=0;var p,d,h,m=0,g=!1,y={parts:new Array(4)},v=[],b=(m=0,this.bytes);o=b[m++]|b[m++]<<8|b[m++]<<16|b[m++]<<24,n=b[m++]|b[m++]<<8|b[m++]<<16|b[m++]<<24,t=b[m++]|b[m++]<<8|b[m++]<<16|b[m++]<<24,e=b[m++]|b[m++]<<8|b[m++]<<16|b[m++]<<24;m=0;if({low:new r(o,n),high:new r(t,e)}.high.lessThan(r.ZERO)&&v.push(\"-\"),(i=e>>26&31)>>3==3){if(30==i)return v.join(\"\")+\"Infinity\";if(31==i)return\"NaN\";s=e>>15&16383,h=8+(e>>14&1)}else h=e>>14&7,s=e>>17&16383;if(p=s-a,y.parts[0]=(16383&e)+((15&h)<<14),y.parts[1]=t,y.parts[2]=n,y.parts[3]=o,0==y.parts[0]&&0==y.parts[1]&&0==y.parts[2]&&0==y.parts[3])g=!0;else for(var x=3;x>=0;x--){var w=0,S=f(y);if(y=S.quotient,w=S.rem.low_)for(var k=8;k>=0;k--)l[9*x+k]=w%10,w=Math.floor(w/10)}if(g)c=1,l[m]=0;else{c=36;for(u=0;!l[m];)u++,c-=1,m+=1}if((d=c-1+p)>=34||d<=-7||p>0){v.push(l[m++]),(c-=1)&&v.push(\".\");for(u=0;u<c;u++)v.push(l[m++]);v.push(\"E\"),d>0?v.push(\"+\"+d):v.push(d)}else if(p>=0)for(u=0;u<c;u++)v.push(l[m++]);else{var O=c+p;if(O>0)for(u=0;u<O;u++)v.push(l[m++]);else v.push(\"0\");for(v.push(\".\");O++<0;)v.push(\"0\");for(u=0;u<c-Math.max(O-1,0);u++)v.push(l[m++])}return v.join(\"\")},h.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.exports=h,e.exports.Decimal128=h},function(e,t){var n=function e(t,n){if(!(this instanceof e))return new e(t,n);this._bsontype=\"Code\",this.code=t,this.scope=n};n.prototype.toJSON=function(){return{scope:this.scope,code:this.code}},e.exports=n,e.exports.Code=n},function(e,t){function n(e){if(!(this instanceof n))return new n(e);this._bsontype=\"Symbol\",this.value=e}n.prototype.valueOf=function(){return this.value},n.prototype.toString=function(){return this.value},n.prototype.inspect=function(){return this.value},n.prototype.toJSON=function(){return this.value},e.exports=n,e.exports.Symbol=n},function(e,t){function n(e,t){if(!(this instanceof n))return new n;this._bsontype=\"BSONRegExp\",this.pattern=e||\"\",this.options=t||\"\";for(var r=0;r<this.options.length;r++)if(\"i\"!=this.options[r]&&\"m\"!=this.options[r]&&\"x\"!=this.options[r]&&\"l\"!=this.options[r]&&\"s\"!=this.options[r]&&\"u\"!=this.options[r])throw new Error(\"the regular expression options [\"+this.options[r]+\"] is not supported\")}e.exports=n,e.exports.BSONRegExp=n},function(e,t){var n=parseInt(16777215*Math.random(),10),r=new RegExp(\"^[0-9a-fA-F]{24}$\"),o=!1;try{Buffer&&Buffer.from&&(o=!0)}catch(e){}for(var i=function e(t){if(t instanceof e)return t;if(!(this instanceof e))return new e(t);if(this._bsontype=\"ObjectID\",null==t||\"number\"==typeof t)return this.id=this.generate(t),void(e.cacheHexString&&(this.__id=this.toString(\"hex\")));var n=e.isValid(t);if(!n&&null!=t)throw new Error(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\");if(n&&\"string\"==typeof t&&24==t.length&&o)return new e(new Buffer(t,\"hex\"));if(n&&\"string\"==typeof t&&24==t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return t;throw new Error(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\")}this.id=t,e.cacheHexString&&(this.__id=this.toString(\"hex\"))},s=[],a=0;a<256;a++)s[a]=(a<=15?\"0\":\"\")+a.toString(16);i.prototype.toHexString=function(){if(i.cacheHexString&&this.__id)return this.__id;var e=\"\";if(!this.id||!this.id.length)throw new Error(\"invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is [\"+JSON.stringify(this.id)+\"]\");if(this.id instanceof l)return e=u(this.id),i.cacheHexString&&(this.__id=e),e;for(var t=0;t<this.id.length;t++)e+=s[this.id.charCodeAt(t)];return i.cacheHexString&&(this.__id=e),e},i.prototype.get_inc=function(){return i.index=(i.index+1)%16777215},i.prototype.getInc=function(){return this.get_inc()},i.prototype.generate=function(e){\"number\"!=typeof e&&(e=~~(Date.now()/1e3));var t=(\"undefined\"==typeof process?Math.floor(1e5*Math.random()):process.pid)%65535,r=this.get_inc(),o=new Buffer(12);return o[3]=255&e,o[2]=e>>8&255,o[1]=e>>16&255,o[0]=e>>24&255,o[6]=255&n,o[5]=n>>8&255,o[4]=n>>16&255,o[8]=255&t,o[7]=t>>8&255,o[11]=255&r,o[10]=r>>8&255,o[9]=r>>16&255,o},i.prototype.toString=function(e){return this.id&&this.id.copy?this.id.toString(\"string\"==typeof e?e:\"hex\"):this.toHexString()},i.prototype.inspect=i.prototype.toString,i.prototype.toJSON=function(){return this.toHexString()},i.prototype.equals=function(e){return e instanceof i?this.toString()==e.toString():\"string\"==typeof e&&i.isValid(e)&&12==e.length&&this.id instanceof l?e===this.id.toString(\"binary\"):\"string\"==typeof e&&i.isValid(e)&&24==e.length?e.toLowerCase()===this.toHexString():\"string\"==typeof e&&i.isValid(e)&&12==e.length?e===this.id:!(null==e||!(e instanceof i||e.toHexString))&&e.toHexString()===this.toHexString()},i.prototype.getTimestamp=function(){var e=new Date,t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return e.setTime(1e3*Math.floor(t)),e},i.index=~~(16777215*Math.random()),i.createPk=function(){return new i},i.createFromTime=function(e){var t=new Buffer([0,0,0,0,0,0,0,0,0,0,0,0]);return t[3]=255&e,t[2]=e>>8&255,t[1]=e>>16&255,t[0]=e>>24&255,new i(t)};\"0123456789abcdef\".split(\"\");var c=[];for(a=0;a<10;)c[48+a]=a++;for(;a<16;)c[55+a]=c[87+a]=a++;var l=Buffer,u=function(e){return e.toString(\"hex\")};i.createFromHexString=function(e){if(void 0===e||null!=e&&24!=e.length)throw new Error(\"Argument passed in must be a single String of 12 bytes or a string of 24 hex characters\");if(o)return new i(new Buffer(e,\"hex\"));for(var t=new l(12),n=0,r=0;r<24;)t[n++]=c[e.charCodeAt(r++)]<<4|c[e.charCodeAt(r++)];return new i(t)},i.isValid=function(e){return null!=e&&(\"number\"==typeof e||(\"string\"==typeof e?12==e.length||24==e.length&&r.test(e):e instanceof i||(e instanceof l||!!e.toHexString&&(12==e.id.length||24==e.id.length&&r.test(e.id)))))},Object.defineProperty(i.prototype,\"generationTime\",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),e.exports=i,e.exports.ObjectID=i,e.exports.ObjectId=i},function(e,t){function n(e,t){if(!(this instanceof n))return new n(e,t);this._bsontype=\"Timestamp\",this.low_=0|e,this.high_=0|t}n.prototype.toInt=function(){return this.low_},n.prototype.toNumber=function(){return this.high_*n.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},n.prototype.toJSON=function(){return this.toString()},n.prototype.toString=function(e){var t=e||10;if(t<2||36<t)throw Error(\"radix out of range: \"+t);if(this.isZero())return\"0\";if(this.isNegative()){if(this.equals(n.MIN_VALUE)){var r=n.fromNumber(t),o=this.div(r),i=o.multiply(r).subtract(this);return o.toString(t)+i.toInt().toString(t)}return\"-\"+this.negate().toString(t)}for(var s=n.fromNumber(Math.pow(t,6)),a=(i=this,\"\");;){var c=i.div(s),l=i.subtract(c.multiply(s)).toInt().toString(t);if((i=c).isZero())return l+a;for(;l.length<6;)l=\"0\"+l;a=\"\"+l+a}},n.prototype.getHighBits=function(){return this.high_},n.prototype.getLowBits=function(){return this.low_},n.prototype.getLowBitsUnsigned=function(){return this.low_>=0?this.low_:n.TWO_PWR_32_DBL_+this.low_},n.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(n.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!=this.high_?this.high_:this.low_,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high_?t+33:t+1},n.prototype.isZero=function(){return 0==this.high_&&0==this.low_},n.prototype.isNegative=function(){return this.high_<0},n.prototype.isOdd=function(){return 1==(1&this.low_)},n.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_},n.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_},n.prototype.lessThan=function(e){return this.compare(e)<0},n.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},n.prototype.greaterThan=function(e){return this.compare(e)>0},n.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},n.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.subtract(e).isNegative()?-1:1},n.prototype.negate=function(){return this.equals(n.MIN_VALUE)?n.MIN_VALUE:this.not().add(n.ONE)},n.prototype.add=function(e){var t=this.high_>>>16,r=65535&this.high_,o=this.low_>>>16,i=65535&this.low_,s=e.high_>>>16,a=65535&e.high_,c=e.low_>>>16,l=0,u=0,p=0,d=0;return p+=(d+=i+(65535&e.low_))>>>16,d&=65535,u+=(p+=o+c)>>>16,p&=65535,l+=(u+=r+a)>>>16,u&=65535,l+=t+s,l&=65535,n.fromBits(p<<16|d,l<<16|u)},n.prototype.subtract=function(e){return this.add(e.negate())},n.prototype.multiply=function(e){if(this.isZero())return n.ZERO;if(e.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE))return e.isOdd()?n.MIN_VALUE:n.ZERO;if(e.equals(n.MIN_VALUE))return this.isOdd()?n.MIN_VALUE:n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(n.TWO_PWR_24_)&&e.lessThan(n.TWO_PWR_24_))return n.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,r=65535&this.high_,o=this.low_>>>16,i=65535&this.low_,s=e.high_>>>16,a=65535&e.high_,c=e.low_>>>16,l=65535&e.low_,u=0,p=0,d=0,f=0;return d+=(f+=i*l)>>>16,f&=65535,p+=(d+=o*l)>>>16,d&=65535,p+=(d+=i*c)>>>16,d&=65535,u+=(p+=r*l)>>>16,p&=65535,u+=(p+=o*c)>>>16,p&=65535,u+=(p+=i*a)>>>16,p&=65535,u+=t*l+r*c+o*a+i*s,u&=65535,n.fromBits(d<<16|f,u<<16|p)},n.prototype.div=function(e){if(e.isZero())throw Error(\"division by zero\");if(this.isZero())return n.ZERO;if(this.equals(n.MIN_VALUE)){if(e.equals(n.ONE)||e.equals(n.NEG_ONE))return n.MIN_VALUE;if(e.equals(n.MIN_VALUE))return n.ONE;if((o=this.shiftRight(1).div(e).shiftLeft(1)).equals(n.ZERO))return e.isNegative()?n.ONE:n.NEG_ONE;var t=this.subtract(e.multiply(o));return o.add(t.div(e))}if(e.equals(n.MIN_VALUE))return n.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();var r=n.ZERO;for(t=this;t.greaterThanOrEqual(e);){for(var o=Math.max(1,Math.floor(t.toNumber()/e.toNumber())),i=Math.ceil(Math.log(o)/Math.LN2),s=i<=48?1:Math.pow(2,i-48),a=n.fromNumber(o),c=a.multiply(e);c.isNegative()||c.greaterThan(t);)o-=s,c=(a=n.fromNumber(o)).multiply(e);a.isZero()&&(a=n.ONE),r=r.add(a),t=t.subtract(c)}return r},n.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},n.prototype.not=function(){return n.fromBits(~this.low_,~this.high_)},n.prototype.and=function(e){return n.fromBits(this.low_&e.low_,this.high_&e.high_)},n.prototype.or=function(e){return n.fromBits(this.low_|e.low_,this.high_|e.high_)},n.prototype.xor=function(e){return n.fromBits(this.low_^e.low_,this.high_^e.high_)},n.prototype.shiftLeft=function(e){if(0==(e&=63))return this;var t=this.low_;if(e<32){var r=this.high_;return n.fromBits(t<<e,r<<e|t>>>32-e)}return n.fromBits(0,t<<e-32)},n.prototype.shiftRight=function(e){if(0==(e&=63))return this;var t=this.high_;if(e<32){var r=this.low_;return n.fromBits(r>>>e|t<<32-e,t>>e)}return n.fromBits(t>>e-32,t>=0?0:-1)},n.prototype.shiftRightUnsigned=function(e){if(0==(e&=63))return this;var t=this.high_;if(e<32){var r=this.low_;return n.fromBits(r>>>e|t<<32-e,t>>>e)}return 32==e?n.fromBits(t,0):n.fromBits(t>>>e-32,0)},n.fromInt=function(e){if(-128<=e&&e<128){var t=n.INT_CACHE_[e];if(t)return t}var r=new n(0|e,e<0?-1:0);return-128<=e&&e<128&&(n.INT_CACHE_[e]=r),r},n.fromNumber=function(e){return isNaN(e)||!isFinite(e)?n.ZERO:e<=-n.TWO_PWR_63_DBL_?n.MIN_VALUE:e+1>=n.TWO_PWR_63_DBL_?n.MAX_VALUE:e<0?n.fromNumber(-e).negate():new n(e%n.TWO_PWR_32_DBL_|0,e/n.TWO_PWR_32_DBL_|0)},n.fromBits=function(e,t){return new n(e,t)},n.fromString=function(e,t){if(0==e.length)throw Error(\"number format error: empty string\");var r=t||10;if(r<2||36<r)throw Error(\"radix out of range: \"+r);if(\"-\"==e.charAt(0))return n.fromString(e.substring(1),r).negate();if(e.indexOf(\"-\")>=0)throw Error('number format error: interior \"-\" character: '+e);for(var o=n.fromNumber(Math.pow(r,8)),i=n.ZERO,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),r);if(a<8){var l=n.fromNumber(Math.pow(r,a));i=i.multiply(l).add(n.fromNumber(c))}else i=(i=i.multiply(o)).add(n.fromNumber(c))}return i},n.INT_CACHE_={},n.TWO_PWR_16_DBL_=65536,n.TWO_PWR_24_DBL_=1<<24,n.TWO_PWR_32_DBL_=n.TWO_PWR_16_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_31_DBL_=n.TWO_PWR_32_DBL_/2,n.TWO_PWR_48_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_16_DBL_,n.TWO_PWR_64_DBL_=n.TWO_PWR_32_DBL_*n.TWO_PWR_32_DBL_,n.TWO_PWR_63_DBL_=n.TWO_PWR_64_DBL_/2,n.ZERO=n.fromInt(0),n.ONE=n.fromInt(1),n.NEG_ONE=n.fromInt(-1),n.MAX_VALUE=n.fromBits(-1,2147483647),n.MIN_VALUE=n.fromBits(0,-2147483648),n.TWO_PWR_24_=n.fromInt(1<<24),e.exports=n,e.exports.Timestamp=n},function(e,t){function n(e){if(!(this instanceof n))return new n(e);this._bsontype=\"Double\",this.value=e}n.prototype.valueOf=function(){return this.value},n.prototype.toJSON=function(){return this.value},e.exports=n,e.exports.Double=n},function(e,t){e.exports=require(\"url\")},function(e,t,n){\"use strict\";var r=n(58),o=r.parse,i=r.Url;function s(e){var t=e.url;if(void 0!==t){var n=e._parsedUrl;return c(t,n)?n:((n=a(t))._raw=t,e._parsedUrl=n)}}function a(e){if(\"string\"!=typeof e||47!==e.charCodeAt(0))return o(e);for(var t=e,n=null,r=null,s=1;s<e.length;s++)switch(e.charCodeAt(s)){case 63:null===r&&(t=e.substring(0,s),n=e.substring(s+1),r=e.substring(s));break;case 9:case 10:case 12:case 13:case 32:case 35:case 160:case 65279:return o(e)}var a=void 0!==i?new i:{};return a.path=e,a.href=e,a.pathname=t,a.query=n,a.search=r,a}function c(e,t){return\"object\"==typeof t&&null!==t&&(void 0===i||t instanceof i)&&t._raw===e}e.exports=s,e.exports.original=function(e){var t=e.originalUrl;if(\"string\"!=typeof t)return s(e);var n=e._parsedOriginalUrl;if(c(t,n))return n;return(n=a(t))._raw=t,e._parsedOriginalUrl=n}},function(e,t,n){\"use strict\";var r=n(253),o=n(156);function i(e,t){var n,o,i=t,s=function(e){try{return function(e){var t=r.parse(e);return t.parameters=void 0,r.format(t)}(e)}catch(e){return null}}(e);if(!s)return!1;if(i&&!Array.isArray(i))for(i=new Array(arguments.length-1),n=0;n<i.length;n++)i[n]=arguments[n+1];if(!i||!i.length)return s;for(n=0;n<i.length;n++)if(c(a(o=i[n]),s))return\"+\"===o[0]||-1!==o.indexOf(\"*\")?s:o;return!1}function s(e){return void 0!==e.headers[\"transfer-encoding\"]||!isNaN(e.headers[\"content-length\"])}function a(e){if(\"string\"!=typeof e)return!1;switch(e){case\"urlencoded\":return\"application/x-www-form-urlencoded\";case\"multipart\":return\"multipart/*\"}return\"+\"===e[0]?\"*/*\"+e:-1===e.indexOf(\"/\")?o.lookup(e):e}function c(e,t){if(!1===e)return!1;var n=t.split(\"/\"),r=e.split(\"/\");return 2===n.length&&2===r.length&&((\"*\"===r[0]||r[0]===n[0])&&(\"*+\"===r[1].substr(0,2)?r[1].length<=n[1].length+1&&r[1].substr(1)===n[1].substr(1-r[1].length):\"*\"===r[1]||r[1]===n[1]))}e.exports=function(e,t){var n=t;if(!s(e))return null;if(arguments.length>2){n=new Array(arguments.length-1);for(var r=0;r<n.length;r++)n[r]=arguments[r+1]}return i(e.headers[\"content-type\"],n)},e.exports.is=i,e.exports.hasBody=s,e.exports.normalize=a,e.exports.match=c},function(e,t,n){\"use strict\";var r=n(282)(\"http-errors\"),o=n(279),i=n(93),s=n(43);function a(e){return Number(String(e).charAt(0)+\"00\")}e.exports=function e(){var t;var n;var o=500;var s={};for(var c=0;c<arguments.length;c++){var l=arguments[c];if(l instanceof Error)o=(t=l).status||t.statusCode||o;else switch(typeof l){case\"string\":n=l;break;case\"number\":o=l,0!==c&&r(\"non-first-argument status code; replace with createError(\"+l+\", ...)\");break;case\"object\":s=l}}\"number\"==typeof o&&(o<400||o>=600)&&r(\"non-error status code; use only 4xx or 5xx status codes\");(\"number\"!=typeof o||!i[o]&&(o<400||o>=600))&&(o=500);var u=e[o]||e[a(o)];t||(t=u?new u(n):new Error(n||i[o]),Error.captureStackTrace(t,e));u&&t instanceof u&&t.status===o||(t.expose=o<500,t.status=t.statusCode=o);for(var p in s)\"status\"!==p&&\"statusCode\"!==p&&(t[p]=s[p]);return t},e.exports.HttpError=function(){function e(){throw new TypeError(\"cannot construct abstract class\")}return s(e,Error),e}(),function(e,t,n){t.forEach(function(t){var r,c=i[t].split(\" \").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join(\"\").replace(/[^ _0-9a-z]/gi,\"\");switch(a(t)){case 400:r=function(e,t,n){var r=t.match(/Error$/)?t:t+\"Error\";function a(e){var t=null!=e?e:i[n],s=new Error(t);return Error.captureStackTrace(s,a),o(s,a.prototype),Object.defineProperty(s,\"message\",{enumerable:!0,configurable:!0,value:t,writable:!0}),Object.defineProperty(s,\"name\",{enumerable:!1,configurable:!0,value:r,writable:!0}),s}return s(a,e),a.prototype.status=n,a.prototype.statusCode=n,a.prototype.expose=!0,a}(n,c,t);break;case 500:r=function(e,t,n){var r=t.match(/Error$/)?t:t+\"Error\";function a(e){var t=null!=e?e:i[n],s=new Error(t);return Error.captureStackTrace(s,a),o(s,a.prototype),Object.defineProperty(s,\"message\",{enumerable:!0,configurable:!0,value:t,writable:!0}),Object.defineProperty(s,\"name\",{enumerable:!1,configurable:!0,value:r,writable:!0}),s}return s(a,e),a.prototype.status=n,a.prototype.statusCode=n,a.prototype.expose=!1,a}(n,c,t)}r&&(e[t]=r,e[c]=r)}),e[\"I'mateapot\"]=r.function(e.ImATeapot,'\"I\\'mateapot\"; use \"ImATeapot\" instead')}(e.exports,i.codes,e.exports.HttpError)},function(e,t,n){\"use strict\";e.exports=function(e,t){if(\"string\"==typeof e)return c(e);if(\"number\"==typeof e)return a(e,t);return null},e.exports.format=a,e.exports.parse=c;var r=/\\B(?=(\\d{3})+(?!\\d))/g,o=/(?:\\.0*|(\\.[^0]+)0+)$/,i={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)},s=/^((-|\\+)?(\\d+(?:\\.\\d+)?)) *(kb|mb|gb|tb)$/i;function a(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),s=t&&t.thousandsSeparator||\"\",a=t&&t.unitSeparator||\"\",c=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,l=Boolean(t&&t.fixedDecimals),u=t&&t.unit||\"\";u&&i[u.toLowerCase()]||(u=n>=i.tb?\"TB\":n>=i.gb?\"GB\":n>=i.mb?\"MB\":n>=i.kb?\"KB\":\"B\");var p=(e/i[u.toLowerCase()]).toFixed(c);return l||(p=p.replace(o,\"$1\")),s&&(p=p.replace(r,s)),p+a+u}function c(e){if(\"number\"==typeof e&&!isNaN(e))return e;if(\"string\"!=typeof e)return null;var t,n=s.exec(e),r=\"b\";return n?(t=parseFloat(n[1]),r=n[4].toLowerCase()):(t=parseInt(e,10),r=\"b\"),Math.floor(i[r]*t)}},function(e,t,n){\"use strict\";var r=n(5).EventEmitter,o=n(0).inherits,i=n(4).Server,s=n(23),a=n(38),c=n(32),l=n(0).format,u=n(36).ServerCapabilities,p=n(36).Store,d=n(16),f=n(4).MongoError,h=n(2).MAX_JS_INT,m=n(2).translateOptions,g=n(2).filterOptions,y=n(2).mergeOptions,v=n(2).getReadPreference,b=n(40),x=n(96).version,w=l(\"Node.js %s, %s\",process.version,b.endianness()),S=b.type(),k=process.platform,O=process.arch,C=b.release(),_=[\"ha\",\"haInterval\",\"acceptableLatencyMS\",\"poolSize\",\"ssl\",\"checkServerIdentity\",\"sslValidate\",\"ciphers\",\"ecdhCurve\",\"sslCA\",\"sslCRL\",\"sslCert\",\"sslKey\",\"sslPass\",\"socketOptions\",\"bufferMaxEntries\",\"store\",\"auto_reconnect\",\"autoReconnect\",\"emitError\",\"keepAlive\",\"noDelay\",\"connectTimeoutMS\",\"socketTimeoutMS\",\"family\",\"loggerLevel\",\"logger\",\"reconnectTries\",\"reconnectInterval\",\"monitoring\",\"appname\",\"domainsEnabled\",\"servername\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\"],E=function(e,t,n){if(n=n||{},!(this instanceof E))return new E(e,t,n);r.call(this);var o={force:!1,bufferMaxEntries:\"number\"==typeof(n=g(n,_)).bufferMaxEntries?n.bufferMaxEntries:h},a=n.store||new p(this,o);if(-1!=e.indexOf(\"/\"))null!=t&&\"object\"==typeof t&&(n=t,t=null);else if(null==t)throw f.create({message:\"port must be specified\",driver:!0});var c=\"boolean\"!=typeof n.auto_reconnect||n.auto_reconnect;c=\"boolean\"==typeof n.autoReconnect?n.autoReconnect:c;var l=y({},{host:e,port:t,disconnectHandler:a,cursorFactory:s,reconnect:c,emitError:\"boolean\"!=typeof n.emitError||n.emitError,size:\"number\"==typeof n.poolSize?n.poolSize:5});l=m(l,n);var u=n.socketOptions&&Object.keys(n.socketOptions).length>0?n.socketOptions:n;\"number\"==typeof(l=m(l,u)).keepAlive&&(l.keepAliveInitialDelay=l.keepAlive,l.keepAlive=l.keepAlive>0),this.clientInfo={driver:{name:\"nodejs\",version:x},os:{type:S,name:k,architecture:O,version:C},platform:w},l.clientInfo=this.clientInfo,n.appname&&(l.clientInfo.application={name:n.appname});var d=new i(l);this.s={server:d,sCapabilities:null,clonedOptions:l,reconnect:l.reconnect,emitError:l.emitError,poolSize:l.size,storeOptions:o,store:a,host:e,port:t,options:n}};o(E,r);var I=E.define=new d(\"Server\",E,!1);Object.defineProperty(E.prototype,\"bson\",{enumerable:!0,get:function(){return this.s.server.s.bson}}),Object.defineProperty(E.prototype,\"isMasterDoc\",{enumerable:!0,get:function(){return this.s.server.lastIsMaster()}}),Object.defineProperty(E.prototype,\"parserType\",{enumerable:!0,get:function(){return this.s.server.parserType}}),Object.defineProperty(E.prototype,\"poolSize\",{enumerable:!0,get:function(){return this.s.server.connections().length}}),Object.defineProperty(E.prototype,\"autoReconnect\",{enumerable:!0,get:function(){return this.s.reconnect}}),Object.defineProperty(E.prototype,\"host\",{enumerable:!0,get:function(){return this.s.host}}),Object.defineProperty(E.prototype,\"port\",{enumerable:!0,get:function(){return this.s.port}}),E.prototype.connect=function(e,t,n){var r=this;\"function\"==typeof t&&(n=t,t={}),null==t&&(t={}),\"function\"!=typeof n&&(n=null),r.s.options=t,r.s.storeOptions.bufferMaxEntries=e.bufferMaxEntries;var o=function(){return function(e){[\"timeout\",\"error\",\"close\"].forEach(function(e){r.s.server.removeListener(e,c[e])}),r.s.server.removeListener(\"connect\",o);try{n(e)}catch(e){process.nextTick(function(){throw e})}}},i=function(e){return function(t){\"error\"!=e&&r.emit(e,t)}},s=function(){r.s.store.flush()},a=function(e){return function(t,n){r.emit(e,t,n)}},c={timeout:o(\"timeout\"),error:o(\"error\"),close:o(\"close\")};[\"timeout\",\"error\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\"].forEach(function(e){r.s.server.removeAllListeners(e)}),r.s.server.once(\"timeout\",c.timeout),r.s.server.once(\"error\",c.error),r.s.server.once(\"close\",c.close),r.s.server.once(\"connect\",function(){[\"timeout\",\"error\",\"close\",\"destroy\"].forEach(function(e){r.s.server.removeAllListeners(e)}),r.s.server.on(\"timeout\",i(\"timeout\")),r.s.server.once(\"error\",i(\"error\")),r.s.server.on(\"close\",i(\"close\")),r.s.server.on(\"destroy\",s),r.emit(\"open\",null,r);try{n(null,r)}catch(e){console.log(e.stack),process.nextTick(function(){throw e})}}),r.s.server.on(\"reconnect\",function(){r.emit(\"reconnect\",r),r.s.store.execute()}),r.s.server.on(\"reconnectFailed\",function(e){r.emit(\"reconnectFailed\",e),r.s.store.flush(e)}),r.s.server.on(\"serverDescriptionChanged\",a(\"serverDescriptionChanged\")),r.s.server.on(\"serverHeartbeatStarted\",a(\"serverHeartbeatStarted\")),r.s.server.on(\"serverHeartbeatSucceeded\",a(\"serverHeartbeatSucceeded\")),r.s.server.on(\"serverHeartbeatFailed\",a(\"serverHeartbeatFailed\")),r.s.server.on(\"serverOpening\",a(\"serverOpening\")),r.s.server.on(\"serverClosed\",a(\"serverClosed\")),r.s.server.on(\"topologyOpening\",a(\"topologyOpening\")),r.s.server.on(\"topologyClosed\",a(\"topologyClosed\")),r.s.server.on(\"topologyDescriptionChanged\",a(\"topologyDescriptionChanged\")),r.s.server.on(\"attemptReconnect\",a(\"attemptReconnect\")),r.s.server.on(\"monitoring\",a(\"monitoring\")),r.s.server.connect(t)},E.prototype.capabilities=function(){return this.s.sCapabilities?this.s.sCapabilities:null==this.s.server.lastIsMaster()?null:(this.s.sCapabilities=new u(this.s.server.lastIsMaster()),this.s.sCapabilities)},I.classMethod(\"capabilities\",{callback:!1,promise:!1,returns:[u]}),E.prototype.command=function(e,t,n,r){this.s.server.command(e,t,v(n),r)},I.classMethod(\"command\",{callback:!0,promise:!1}),E.prototype.insert=function(e,t,n,r){this.s.server.insert(e,t,n,r)},I.classMethod(\"insert\",{callback:!0,promise:!1}),E.prototype.update=function(e,t,n,r){this.s.server.update(e,t,n,r)},I.classMethod(\"update\",{callback:!0,promise:!1}),E.prototype.remove=function(e,t,n,r){this.s.server.remove(e,t,n,r)},I.classMethod(\"remove\",{callback:!0,promise:!1}),E.prototype.isConnected=function(){return this.s.server.isConnected()},E.prototype.isDestroyed=function(){return this.s.server.isDestroyed()},I.classMethod(\"isConnected\",{callback:!1,promise:!1,returns:[Boolean]}),E.prototype.cursor=function(e,t,n){return n.disconnectHandler=this.s.store,this.s.server.cursor(e,t,n)},I.classMethod(\"cursor\",{callback:!1,promise:!1,returns:[s,a,c]}),E.prototype.lastIsMaster=function(){return this.s.server.lastIsMaster()},E.prototype.unref=function(){this.s.server.unref()},E.prototype.close=function(e){this.s.server.destroy(),1==e&&(this.s.storeOptions.force=e,this.s.store.flush())},I.classMethod(\"close\",{callback:!1,promise:!1}),E.prototype.auth=function(){var e=Array.prototype.slice.call(arguments,0);this.s.server.auth.apply(this.s.server,e)},I.classMethod(\"auth\",{callback:!0,promise:!1}),E.prototype.logout=function(){var e=Array.prototype.slice.call(arguments,0);this.s.server.logout.apply(this.s.server,e)},I.classMethod(\"logout\",{callback:!0,promise:!1}),E.prototype.connections=function(){return this.s.server.connections()},I.classMethod(\"connections\",{callback:!1,promise:!1,returns:[Array]}),e.exports=E},function(e,t,n){\"use strict\";var r=n(2).checkCollectionName,o=n(4).BSON.ObjectID,i=n(4).BSON.Long,s=n(4).BSON.Code,a=n(0).format,c=n(38),l=n(4).MongoError,u=n(2).shallowClone,p=n(2).isObject,d=n(2).toError,f=n(2).normalizeHintField,h=n(2).handleCallback,m=n(2).decorateCommand,g=n(2).formattedOrderClause,y=n(22),v=n(4).ReadPreference,b=n(32),x=n(16),w=n(23),S=n(99),k=n(100),O=n(2).assign,C=[\"readPreference\",\"ignoreUndefined\"],_=function(e,t,i,s,c,l){r(s);var u=null==l||null==l.slaveOk?e.slaveOk:l.slaveOk,p=null==l||null==l.serializeFunctions?e.s.options.serializeFunctions:l.serializeFunctions,d=null==l||null==l.raw?e.s.options.raw:l.raw,f=null==l||null==l.promoteLongs?e.s.options.promoteLongs:l.promoteLongs,h=null==l||null==l.promoteValues?e.s.options.promoteValues:l.promoteValues,m=null==l||null==l.promoteBuffers?e.s.options.promoteBuffers:l.promoteBuffers,g=null,y=a(\"%s.%s\",i,s),v=l.promiseLibrary;v||(v=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),l&&l.readPreference?g=l.readPreference:e.options.readPreference&&(g=e.options.readPreference),c=null==c?o:c,this.s={pkFactory:c,db:e,topology:t,dbName:i,options:l,namespace:y,readPreference:g,slaveOk:u,serializeFunctions:p,raw:d,promoteLongs:f,promoteValues:h,promoteBuffers:m,internalHint:null,collectionHint:null,name:s,promiseLibrary:v,readConcern:l.readConcern}},E=_.define=new x(\"Collection\",_,!1);Object.defineProperty(_.prototype,\"collectionName\",{enumerable:!0,get:function(){return this.s.name}}),Object.defineProperty(_.prototype,\"namespace\",{enumerable:!0,get:function(){return this.s.namespace}}),Object.defineProperty(_.prototype,\"readConcern\",{enumerable:!0,get:function(){return this.s.readConcern||{level:\"local\"}}}),Object.defineProperty(_.prototype,\"writeConcern\",{enumerable:!0,get:function(){var e={};return null!=this.s.options.w&&(e.w=this.s.options.w),null!=this.s.options.j&&(e.j=this.s.options.j),null!=this.s.options.fsync&&(e.fsync=this.s.options.fsync),null!=this.s.options.wtimeout&&(e.wtimeout=this.s.options.wtimeout),e}}),Object.defineProperty(_.prototype,\"hint\",{enumerable:!0,get:function(){return this.s.collectionHint},set:function(e){this.s.collectionHint=f(e)}}),_.prototype.find=function(){var e,t=Array.prototype.slice.call(arguments,0),n=\"function\"==typeof t[t.length-1],r=\"function\"==typeof t[0],o=n?t.pop():r?t.shift():null,i=t.length,s=i>=1?t[0]:{},a=i>=2?t[1]:void 0;if(1===i&&r&&(s={},e=t[0]),2!==i||void 0===a||Array.isArray(a)){if(2===i&&Array.isArray(a)&&!Array.isArray(a[0])){var c={};for(d=0;d<a.length;d++)c[a[d]]=1;a=c}}else{for(var u=Object.keys(a),p=!1,d=0;d<u.length;d++)if(null!=ye[u[d]]){p=!0;break}p?(e=a,a=void 0):e={}}3===i&&(e=t[2]);var m=s=null==s?{}:s;if(Buffer.isBuffer(m)){var y=m[0]|m[1]<<8|m[2]<<16|m[3]<<24;if(y!=m.length){var v=new Error(\"query selector raw message size does not match message header size [\"+m.length+\"] != [\"+y+\"]\");throw v.name=\"MongoError\",v}}if(m=a,Buffer.isBuffer(m)&&(y=m[0]|m[1]<<8|m[2]<<16|m[3]<<24)!=m.length)throw(v=new Error(\"query fields raw message size does not match message header size [\"+m.length+\"] != [\"+y+\"]\")).name=\"MongoError\",v;if(null!=s&&\"ObjectID\"==s._bsontype&&(s={_id:s}),e&&e.fields&&!Buffer.isBuffer(e.fields))if(a={},Array.isArray(e.fields))if(e.fields.length){var b=e.fields.length;for(d=0;d<b;d++)a[e.fields[d]]=1}else a._id=1;else a=e.fields;e||(e={});var x={};for(var w in this.s.options)-1!=C.indexOf(w)&&(x[w]=this.s.options[w]);for(var w in e)x[w]=e[w];if(x.skip=i>3?t[2]:e.skip?e.skip:0,x.limit=i>3?t[3]:e.limit?e.limit:0,x.raw=null!=e.raw&&\"boolean\"==typeof e.raw?e.raw:this.s.raw,x.hint=null!=e.hint?f(e.hint):this.s.collectionHint,x.timeout=5==i?t[4]:void 0===e.timeout?void 0:e.timeout,x.slaveOk=null!=e.slaveOk?e.slaveOk:this.s.db.slaveOk,null==(x=ge(this,x,this.s.db,this)).readPreference||\"primary\"==x.readPreference&&\"primary\"==x.readPreference.mode||(x.slaveOk=!0),null!=s&&\"object\"!=typeof s)throw l.create({message:\"query selector must be an object\",driver:!0});var S={find:this.s.namespace,limit:x.limit,skip:x.skip,query:s};for(var k in\"boolean\"==typeof x.awaitdata&&(x.awaitData=x.awaitdata),\"boolean\"==typeof x.timeout&&(x.noCursorTimeout=x.timeout),x)null!=x[k]&&(S[k]=x[k]);return a&&(S.fields=function(e){var t={};if(Array.isArray(e))for(var n=0;n<e.length;n++)Array.isArray(e[n])?t[e[n][0]]=e[n][1]:t[e[n][0]]=1;else t=e;return t}(a)),x.db=this.s.db,x.promiseLibrary=this.s.promiseLibrary,null==x.raw&&\"boolean\"==typeof this.s.raw&&(x.raw=this.s.raw),null==x.promoteLongs&&\"boolean\"==typeof this.s.promoteLongs&&(x.promoteLongs=this.s.promoteLongs),null==x.promoteValues&&\"boolean\"==typeof this.s.promoteValues&&(x.promoteValues=this.s.promoteValues),null==x.promoteBuffers&&\"boolean\"==typeof this.s.promoteBuffers&&(x.promoteBuffers=this.s.promoteBuffers),S.sort&&(S.sort=g(S.sort)),this.s.readConcern&&(S.readConcern=this.s.readConcern),ce(S,this,e),\"function\"==typeof o?h(o,null,this.s.topology.cursor(this.s.namespace,S,x)):this.s.topology.cursor(this.s.namespace,S,x)},E.classMethod(\"find\",{callback:!1,promise:!1,returns:[w]}),_.prototype.insertOne=function(e,t,n){var r=this;return\"function\"==typeof t&&(n=t,t={}),t=t||{},Array.isArray(e)&&\"function\"==typeof n?n(l.create({message:\"doc parameter must be an object\",driver:!0})):Array.isArray(e)?new this.s.promiseLibrary(function(e,t){t(l.create({message:\"doc parameter must be an object\",driver:!0}))}):(this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),\"function\"==typeof n?I(r,e,t,n):new this.s.promiseLibrary(function(n,o){I(r,e,t,function(e,t){if(e)return o(e);n(t)})}))};var I=function(e,t,n,r){N(e,[t],n,function(e,n){if(null!=r){if(e&&r)return r(e);if(null==n)return r(null,{result:{ok:1}});n.insertedCount=n.result.n,n.insertedId=t._id,r&&r(null,n)}})},T=function(e,t){for(var n=t.getInsertedIds(),r=Object.keys(n),o=new Array(r.length),i=0;i<r.length;i++)n[r[i]]._id&&(o[n[r[i]].index]=n[r[i]]._id);var s={result:{ok:1,n:t.insertedCount},ops:e,insertedCount:t.insertedCount,insertedIds:o};return t.getLastOp()&&(s.result.opTime=t.getLastOp()),s};E.classMethod(\"insertOne\",{callback:!0,promise:!0}),_.prototype.insertMany=function(e,t,n){var r=this;if(\"function\"==typeof t&&(n=t,t={}),t=t?u(t):{ordered:!0},!Array.isArray(e)&&\"function\"==typeof n)return n(l.create({message:\"docs parameter must be an array of documents\",driver:!0}));if(!Array.isArray(e))return new this.s.promiseLibrary(function(e,t){t(l.create({message:\"docs parameter must be an array of documents\",driver:!0}))});if(\"boolean\"!=typeof t.checkKeys&&(t.checkKeys=!0),t.serializeFunctions=t.serializeFunctions||r.s.serializeFunctions,!0!==(\"boolean\"==typeof t.forceServerObjectId?t.forceServerObjectId:r.s.db.options.forceServerObjectId))for(var o=0;o<e.length;o++)null==e[o]._id&&(e[o]._id=r.s.pkFactory.createPk());var i=[{insertMany:e}];return\"function\"==typeof n?M(r,i,t,function(t,r){if(t)return n(t,r);n(null,T(e,r))}):new this.s.promiseLibrary(function(n,o){M(r,i,t,function(t,r){if(t)return o(t);n(T(e,r))})})},E.classMethod(\"insertMany\",{callback:!0,promise:!0}),_.prototype.bulkWrite=function(e,t,n){var r=this;if(\"function\"==typeof t&&(n=t,t={}),t=t||{ordered:!0},!Array.isArray(e))throw l.create({message:\"operations must be an array of documents\",driver:!0});return\"function\"==typeof n?M(r,e,t,n):new this.s.promiseLibrary(function(n,o){M(r,e,t,function(e,t){if(e&&null==t)return o(e);n(t)})})};var M=function(e,t,n,r){e.s.options.ignoreUndefined&&((n=u(n)).ignoreUndefined=e.s.options.ignoreUndefined);var o=1==n.ordered||null==n.ordered?e.initializeOrderedBulkOp(n):e.initializeUnorderedBulkOp(n),i=!1;try{for(var s=0;s<t.length;s++){var c=Object.keys(t[s])[0];t[s][c].collation&&(i=!0),o.raw(t[s])}}catch(e){return r(e,null)}var p=me(u(n),e.s.db,e,n),f=p.writeConcern?p.writeConcern:{},h=e.s.topology.capabilities();if(i&&h&&!h.commandsTakeCollation)return r(new l(a(\"server/primary/mongos does not support collation\")));o.execute(f,function(e,t){if(!t&&e)return r(e,null);if(t&&t.hasWriteErrors()&&1==t.getWriteErrorCount())return r(d(t.getWriteErrorAt(0)),t);t.insertedCount=t.nInserted,t.matchedCount=t.nMatched,t.modifiedCount=t.nModified||0,t.deletedCount=t.nRemoved,t.upsertedCount=t.getUpsertedIds().length,t.upsertedIds={},t.insertedIds={},t.n=t.insertedCount;for(var n=t.getInsertedIds(),o=0;o<n.length;o++)t.insertedIds[n[o].index]=n[o]._id;var i=t.getUpsertedIds();for(o=0;o<i.length;o++)t.upsertedIds[i[o].index]=i[o]._id;if(t.hasWriteErrors()){var s=t.getWriteErrors();return r(d({message:\"write operation failed\",code:s[0].code,writeErrors:s}),t)}if(t.getWriteConcernError())return r(d(t.getWriteConcernError()),t);r(null,t)})},N=function(e,t,n,r){\"function\"==typeof n&&(r=n,n={}),n=n||{},t=Array.isArray(t)?t:[t];var o=me(u(n),e.s.db,e,n);if(\"boolean\"!=typeof o.checkKeys&&(o.checkKeys=!0),1==o.keepGoing&&(o.ordered=!1),o.serializeFunctions=n.serializeFunctions||e.s.serializeFunctions,!0!==(\"boolean\"==typeof n.forceServerObjectId?n.forceServerObjectId:e.s.db.options.forceServerObjectId))for(var i=0;i<t.length;i++)void 0===t[i]._id&&(t[i]._id=e.s.pkFactory.createPk());e.s.topology.insert(e.s.namespace,t,o,function(e,n){if(null!=r){if(e)return h(r,e);if(null==n)return h(r,null,null);if(n.result.code)return h(r,d(n.result));if(n.result.writeErrors)return h(r,d(n.result.writeErrors[0]));n.ops=t,h(r,null,n)}})};E.classMethod(\"bulkWrite\",{callback:!0,promise:!0}),_.prototype.insert=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{ordered:!1},e=Array.isArray(e)?e:[e],1==t.keepGoing&&(t.ordered=!1),this.insertMany(e,t,n)},E.classMethod(\"insert\",{callback:!0,promise:!0}),_.prototype.updateOne=function(e,t,n,r){var o=this;return\"function\"==typeof n&&(r=n,n={}),n=u(n),this.s.options.ignoreUndefined&&((n=u(n)).ignoreUndefined=this.s.options.ignoreUndefined),\"function\"==typeof r?A(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){A(o,e,t,n,function(e,t){if(e)return i(e);r(t)})})};var A=function(e,t,n,r,o){r.multi=!1,P(e,t,n,r,function(e,t){if(null!=o){if(e&&o)return o(e);if(null==t)return o(null,{result:{ok:1}});t.modifiedCount=null!=t.result.nModified?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,o&&o(null,t)}})};E.classMethod(\"updateOne\",{callback:!0,promise:!0}),_.prototype.replaceOne=function(e,t,n,r){var o=this;return\"function\"==typeof n&&(r=n,n={}),n=u(n),this.s.options.ignoreUndefined&&((n=u(n)).ignoreUndefined=this.s.options.ignoreUndefined),\"function\"==typeof r?B(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){B(o,e,t,n,function(e,t){if(e)return i(e);r(t)})})};var B=function(e,t,n,r,o){r.multi=!1,P(e,t,n,r,function(e,t){if(null!=o){if(e&&o)return o(e);if(null==t)return o(null,{result:{ok:1}});t.modifiedCount=null!=t.result.nModified?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,t.ops=[n],o&&o(null,t)}})};E.classMethod(\"replaceOne\",{callback:!0,promise:!0}),_.prototype.updateMany=function(e,t,n,r){var o=this;return\"function\"==typeof n&&(r=n,n={}),n=u(n),this.s.options.ignoreUndefined&&((n=u(n)).ignoreUndefined=this.s.options.ignoreUndefined),\"function\"==typeof r?j(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){j(o,e,t,n,function(e,t){if(e)return i(e);r(t)})})};var j=function(e,t,n,r,o){r.multi=!0,P(e,t,n,r,function(e,t){if(null!=o){if(e&&o)return o(e);if(null==t)return o(null,{result:{ok:1}});t.modifiedCount=null!=t.result.nModified?t.result.nModified:t.result.n,t.upsertedId=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?t.result.upserted[0]:null,t.upsertedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length?t.result.upserted.length:0,t.matchedCount=Array.isArray(t.result.upserted)&&t.result.upserted.length>0?0:t.result.n,o&&o(null,t)}})};E.classMethod(\"updateMany\",{callback:!0,promise:!0});var P=function(e,t,n,r,o){if(\"function\"==typeof r&&(o=r,r=null),null==r&&(r={}),\"function\"!=typeof o&&(o=null),null==t||\"object\"!=typeof t)return o(d(\"selector must be a valid JavaScript object\"));if(null==n||\"object\"!=typeof n)return o(d(\"document must be a valid JavaScript object\"));var i=me(u(r),e.s.db,e,r);i.serializeFunctions=r.serializeFunctions||e.s.serializeFunctions;var s={q:t,u:n};s.upsert=void 0!==r.upsert&&!!r.upsert,s.multi=void 0!==r.multi&&!!r.multi,ce(i,e,r),e.s.topology.update(e.s.namespace,[s],i,function(e,t){if(null!=o)return e?h(o,e,null):null==t?h(o,null,null):t.result.code?h(o,d(t.result)):t.result.writeErrors?h(o,d(t.result.writeErrors[0])):void h(o,null,t)})};_.prototype.update=function(e,t,n,r){var o=this;return this.s.options.ignoreUndefined&&((n=u(n)).ignoreUndefined=this.s.options.ignoreUndefined),\"function\"==typeof r?P(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){P(o,e,t,n,function(e,t){if(e)return i(e);r(t)})})},E.classMethod(\"update\",{callback:!0,promise:!0}),_.prototype.deleteOne=function(e,t,n){var r=this;return\"function\"==typeof t&&(n=t,t={}),t=u(t),this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),\"function\"==typeof n?D(r,e,t,n):new this.s.promiseLibrary(function(n,o){D(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var D=function(e,t,n,r){n.single=!0,R(e,t,n,function(e,t){if(null!=r){if(e&&r)return r(e);if(null==t)return r(null,{result:{ok:1}});t.deletedCount=t.result.n,r&&r(null,t)}})};E.classMethod(\"deleteOne\",{callback:!0,promise:!0}),_.prototype.removeOne=_.prototype.deleteOne,E.classMethod(\"removeOne\",{callback:!0,promise:!0}),_.prototype.deleteMany=function(e,t,n){var r=this;return\"function\"==typeof t&&(n=t,t={}),t=u(t),this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),\"function\"==typeof n?L(r,e,t,n):new this.s.promiseLibrary(function(n,o){L(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var L=function(e,t,n,r){n.single=!1,R(e,t,n,function(e,t){if(null!=r){if(e&&r)return r(e);if(null==t)return r(null,{result:{ok:1}});t.deletedCount=t.result.n,r&&r(null,t)}})},R=function(e,t,n,r){\"function\"==typeof n?(r=n,n={}):\"function\"==typeof t&&(r=t,n={},t={});var o=me(u(n=n||{}),e.s.db,e,n);null==t&&(t={});var i={q:t,limit:0};n.single&&(i.limit=1),ce(o,e,n),e.s.topology.remove(e.s.namespace,[i],o,function(e,t){if(null!=r)return e?h(r,e,null):null==t?h(r,null,null):t.result.code?h(r,d(t.result)):t.result.writeErrors?h(r,d(t.result.writeErrors[0])):void h(r,null,t)})};E.classMethod(\"deleteMany\",{callback:!0,promise:!0}),_.prototype.removeMany=_.prototype.deleteMany,E.classMethod(\"removeMany\",{callback:!0,promise:!0}),_.prototype.remove=function(e,t,n){var r=this;return this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),\"function\"==typeof n?R(r,e,t,n):new this.s.promiseLibrary(function(n,o){R(r,e,t,function(e,t){if(e)return o(e);n(t)})})},E.classMethod(\"remove\",{callback:!0,promise:!0}),_.prototype.save=function(e,t,n){var r=this;return\"function\"==typeof t&&(n=t,t={}),t=t||{},this.s.options.ignoreUndefined&&((t=u(t)).ignoreUndefined=this.s.options.ignoreUndefined),\"function\"==typeof n?z(r,e,t,n):new this.s.promiseLibrary(function(n,o){z(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var z=function(e,t,n,r){var o=me(u(n),e.s.db,e,n);if(null!=t._id)return o.upsert=!0,P(e,{_id:t._id},t,o,r);N(e,[t],n,function(e,n){if(null!=r)return null==t?h(r,null,null):e?h(r,e,null):void h(r,null,n)})};E.classMethod(\"save\",{callback:!0,promise:!0}),_.prototype.findOne=function(){var e=this,t=Array.prototype.slice.call(arguments,0),n=t.pop();return\"function\"!=typeof n&&t.push(n),\"function\"==typeof n?q(e,t,n):new this.s.promiseLibrary(function(n,r){q(e,t,function(e,t){if(e)return r(e);n(t)})})};var q=function(e,t,n){e.find.apply(e,t).limit(-1).batchSize(1).next(function(e,t){if(null!=e)return h(n,d(e),null);h(n,null,t)})};E.classMethod(\"findOne\",{callback:!0,promise:!0}),_.prototype.rename=function(e,t,n){var r=this;return\"function\"==typeof t&&(n=t,t={}),t=O({},t,{readPreference:y.PRIMARY}),\"function\"==typeof n?U(r,e,t,n):new this.s.promiseLibrary(function(n,o){U(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var U=function(e,t,n,o){r(t);var i={renameCollection:a(\"%s.%s\",e.s.dbName,e.s.name),to:a(\"%s.%s\",e.s.dbName,t),dropTarget:\"boolean\"==typeof n.dropTarget&&n.dropTarget};ae(i,e,n),e.s.db.admin().command(i,n,function(n,r){if(n)return h(o,n,null);if(r.errmsg)return h(o,d(r),null);try{return h(o,null,new _(e.s.db,e.s.topology,e.s.dbName,t,e.s.pkFactory,e.s.options))}catch(n){return h(o,d(n),null)}})};E.classMethod(\"rename\",{callback:!0,promise:!0}),_.prototype.drop=function(e,t){var n=this;return\"function\"==typeof e&&(t=e,e={}),e=e||{},\"function\"==typeof t?n.s.db.dropCollection(n.s.name,e,t):new this.s.promiseLibrary(function(t,r){n.s.db.dropCollection(n.s.name,e,function(e,n){if(e)return r(e);t(n)})})},E.classMethod(\"drop\",{callback:!0,promise:!0}),_.prototype.options=function(e){var t=this;return\"function\"==typeof e?F(t,e):new this.s.promiseLibrary(function(e,n){F(t,function(t,r){if(t)return n(t);e(r)})})};var F=function(e,t){e.s.db.listCollections({name:e.s.name}).toArray(function(n,r){return n?h(t,n):0==r.length?h(t,l.create({message:a(\"collection %s not found\",e.s.namespace),driver:!0})):void h(t,n,r[0].options||null)})};E.classMethod(\"options\",{callback:!0,promise:!0}),_.prototype.isCapped=function(e){var t=this;return\"function\"==typeof e?H(t,e):new this.s.promiseLibrary(function(e,n){H(t,function(t,r){if(t)return n(t);e(r)})})};var H=function(e,t){e.options(function(e,n){if(e)return h(t,e);h(t,null,n&&n.capped)})};E.classMethod(\"isCapped\",{callback:!0,promise:!0}),_.prototype.createIndex=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,1);return\"function\"!=typeof(n=o.pop())&&o.push(n),t=o.length&&o.shift()||{},t=null==(t=\"function\"==typeof n?t:n)?{}:t,\"function\"==typeof n?V(r,e,t,n):new this.s.promiseLibrary(function(n,o){V(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var V=function(e,t,n,r){e.s.db.createIndex(e.s.name,t,n,r)};E.classMethod(\"createIndex\",{callback:!0,promise:!0}),_.prototype.createIndexes=function(e,t){var n=this;return\"function\"==typeof t?$(n,e,t):new this.s.promiseLibrary(function(t,r){$(n,e,function(e,n){if(e)return r(e);t(n)})})};var $=function(e,t,n){for(var r=e.s.topology.capabilities(),o=0;o<t.length;o++)if(null==t[o].name){var i=[];if(t[o].collation&&r&&!r.commandsTakeCollation)return n(new l(a(\"server/primary/mongos does not support collation\")));for(var s in t[o].key)i.push(a(\"%s_%s\",s,t[o].key[s]));t[o].name=i.join(\"_\")}e.s.db.command({createIndexes:e.s.name,indexes:t},{readPreference:y.PRIMARY},n)};E.classMethod(\"createIndexes\",{callback:!0,promise:!0}),_.prototype.dropIndex=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,1);return\"function\"!=typeof(n=o.pop())&&o.push(n),(t=o.length&&o.shift()||{}).readPreference=y.PRIMARY,\"function\"==typeof n?W(r,e,t,n):new this.s.promiseLibrary(function(n,o){W(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var W=function(e,t,n,r){var o={dropIndexes:e.s.name,index:t};ae(o,e,n),e.s.db.command(o,n,function(e,t){if(\"function\"==typeof r)return e?h(r,e,null):void h(r,null,t)})};E.classMethod(\"dropIndex\",{callback:!0,promise:!0}),_.prototype.dropIndexes=function(e,t){var n=this;return\"function\"==typeof e&&(t=e,e={}),e=e||{},\"function\"==typeof t?K(n,e,t):new this.s.promiseLibrary(function(e,t){K(n,function(n,r){if(n)return t(n);e(r)})})};var K=function(e,t,n){e.dropIndex(\"*\",t,function(e){if(e)return h(n,e,!1);h(n,null,!0)})};E.classMethod(\"dropIndexes\",{callback:!0,promise:!0}),_.prototype.dropAllIndexes=_.prototype.dropIndexes,E.classMethod(\"dropAllIndexes\",{callback:!0,promise:!0}),_.prototype.reIndex=function(e,t){var n=this;return\"function\"==typeof e&&(t=e,e={}),e=e||{},\"function\"==typeof t?Y(n,e,t):new this.s.promiseLibrary(function(t,r){Y(n,e,function(e,n){if(e)return r(e);t(n)})})};var Y=function(e,t,n){var r={reIndex:e.s.name};e.s.db.command(r,t,function(e,t){if(null!=n)return e?h(n,e,null):void h(n,null,!!t.ok)})};E.classMethod(\"reIndex\",{callback:!0,promise:!0}),_.prototype.listIndexes=function(e){if(e=u(e=e||{}),(e=ge(this,e,this.s.db,this)).cursorFactory=b,e.promiseLibrary=this.s.promiseLibrary,!this.s.topology.capabilities())throw new l(\"cannot connect to server\");if(this.s.topology.capabilities().hasListIndexesCommand){var t=e.batchSize?{batchSize:e.batchSize}:{},n={listIndexes:this.s.name,cursor:t};return t=this.s.topology.cursor(a(\"%s.$cmd\",this.s.dbName),n,e),e.readPreference&&t.setReadPreference(e.readPreference),t}var r=a(\"%s.system.indexes\",this.s.dbName);return t=this.s.topology.cursor(r,{find:r,query:{ns:this.s.namespace}},e),e.readPreference&&t.setReadPreference(e.readPreference),e.batchSize&&(t=t.batchSize(e.batchSize)),t},E.classMethod(\"listIndexes\",{callback:!1,promise:!1,returns:[b]}),_.prototype.ensureIndex=function(e,t,n){var r=this;return\"function\"==typeof t&&(n=t,t={}),t=t||{},\"function\"==typeof n?G(r,e,t,n):new this.s.promiseLibrary(function(n,o){G(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var G=function(e,t,n,r){e.s.db.ensureIndex(e.s.name,t,n,r)};E.classMethod(\"ensureIndex\",{callback:!0,promise:!0}),_.prototype.indexExists=function(e,t){var n=this;return\"function\"==typeof t?J(n,e,t):new this.s.promiseLibrary(function(t,r){J(n,e,function(e,n){if(e)return r(e);t(n)})})};var J=function(e,t,n){e.indexInformation(function(e,r){if(null!=e)return h(n,e,null);if(!Array.isArray(t))return h(n,null,null!=r[t]);for(var o=0;o<t.length;o++)if(null==r[t[o]])return h(n,null,!1);return h(n,null,!0)})};E.classMethod(\"indexExists\",{callback:!0,promise:!0}),_.prototype.indexInformation=function(e,t){var n=this,r=Array.prototype.slice.call(arguments,0);return\"function\"!=typeof(t=r.pop())&&r.push(t),e=r.length&&r.shift()||{},\"function\"==typeof t?Z(n,e,t):new this.s.promiseLibrary(function(t,r){Z(n,e,function(e,n){if(e)return r(e);t(n)})})};var Z=function(e,t,n){e.s.db.indexInformation(e.s.name,t,n)};E.classMethod(\"indexInformation\",{callback:!0,promise:!0}),_.prototype.count=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,0);\"function\"!=typeof(n=o.pop())&&o.push(n);var i=o.length&&o.shift()||{},s=o.length&&o.shift()||{};return\"function\"==typeof n?X(r,i,s,n):(e=e||{},t=t||{},new this.s.promiseLibrary(function(n,o){X(r,e,t,function(e,t){if(e)return o(e);n(t)})}))};var X=function(e,t,n,r){var o=n.skip,i=n.limit,s=n.hint,a=n.maxTimeMS,c={count:e.s.name,query:t};\"number\"==typeof o&&(c.skip=o),\"number\"==typeof i&&(c.limit=i),\"number\"==typeof a&&(c.maxTimeMS=a),s&&(c.hint=s),n=u(n),n=ge(e,n,e.s.db,e),e.s.readConcern&&(c.readConcern=e.s.readConcern),ce(c,e,n),e.s.db.command(c,n,function(e,t){if(e)return h(r,e);h(r,null,t.n)})};E.classMethod(\"count\",{callback:!0,promise:!0}),_.prototype.distinct=function(e,t,n,r){var o=this,i=Array.prototype.slice.call(arguments,1);\"function\"!=typeof(r=i.pop())&&i.push(r);var s=i.length&&i.shift()||{},a=i.length&&i.shift()||{};return\"function\"==typeof r?Q(o,e,s,a,r):(t=t||{},n=n||{},new this.s.promiseLibrary(function(r,i){Q(o,e,t,n,function(e,t){if(e)return i(e);r(t)})}))};var Q=function(e,t,n,r,o){var i=r.maxTimeMS,s={distinct:e.s.name,key:t,query:n};r=u(r),r=ge(e,r,e.s.db,e),\"number\"==typeof i&&(s.maxTimeMS=i),e.s.readConcern&&(s.readConcern=e.s.readConcern),ce(s,e,r),e.s.db.command(s,r,function(e,t){if(e)return h(o,e);h(o,null,t.values)})};E.classMethod(\"distinct\",{callback:!0,promise:!0}),_.prototype.indexes=function(e){var t=this;return\"function\"==typeof e?ee(t,e):new this.s.promiseLibrary(function(e,n){ee(t,function(t,r){if(t)return n(t);e(r)})})};var ee=function(e,t){e.s.db.indexInformation(e.s.name,{full:!0},t)};E.classMethod(\"indexes\",{callback:!0,promise:!0}),_.prototype.stats=function(e,t){var n=this,r=Array.prototype.slice.call(arguments,0);return\"function\"!=typeof(t=r.pop())&&r.push(t),e=r.length&&r.shift()||{},\"function\"==typeof t?te(n,e,t):new this.s.promiseLibrary(function(t,r){te(n,e,function(e,n){if(e)return r(e);t(n)})})};var te=function(e,t,n){var r={collStats:e.s.name};null!=t.scale&&(r.scale=t.scale),t=u(t),t=ge(e,t,e.s.db,e),e.s.db.command(r,t,n)};E.classMethod(\"stats\",{callback:!0,promise:!0}),_.prototype.findOneAndDelete=function(e,t,n){var r=this;if(\"function\"==typeof t&&(n=t,t={}),t=t||{},null==e||\"object\"!=typeof e)throw d(\"filter parameter must be an object\");return\"function\"==typeof n?ne(r,e,t,n):new this.s.promiseLibrary(function(n,o){ne(r,e,t=t||{},function(e,t){if(e)return o(e);n(t)})})};var ne=function(e,t,n,r){var o=u(n);o.fields=n.projection,o.remove=!0,e.findAndModify(t,n.sort,null,o,r)};E.classMethod(\"findOneAndDelete\",{callback:!0,promise:!0}),_.prototype.findOneAndReplace=function(e,t,n,r){var o=this;if(\"function\"==typeof n&&(r=n,n={}),n=n||{},null==e||\"object\"!=typeof e)throw d(\"filter parameter must be an object\");if(null==t||\"object\"!=typeof t)throw d(\"replacement parameter must be an object\");return\"function\"==typeof r?re(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){re(o,e,t,n=n||{},function(e,t){if(e)return i(e);r(t)})})};var re=function(e,t,n,r,o){var i=u(r);i.fields=r.projection,i.update=!0,i.new=\"boolean\"==typeof r.returnOriginal&&!r.returnOriginal,i.upsert=\"boolean\"==typeof r.upsert&&r.upsert,e.findAndModify(t,r.sort,n,i,o)};E.classMethod(\"findOneAndReplace\",{callback:!0,promise:!0}),_.prototype.findOneAndUpdate=function(e,t,n,r){var o=this;if(\"function\"==typeof n&&(r=n,n={}),n=n||{},null==e||\"object\"!=typeof e)throw d(\"filter parameter must be an object\");if(null==t||\"object\"!=typeof t)throw d(\"update parameter must be an object\");return\"function\"==typeof r?oe(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){oe(o,e,t,n=n||{},function(e,t){if(e)return i(e);r(t)})})};var oe=function(e,t,n,r,o){var i=u(r);i.fields=r.projection,i.update=!0,i.new=void 0!==r.returnOriginal&&!r.returnOriginal,i.upsert=void 0!==r.upsert&&!!r.upsert,e.findAndModify(t,r.sort,n,i,o)};E.classMethod(\"findOneAndUpdate\",{callback:!0,promise:!0}),_.prototype.findAndModify=function(e,t,n,r,o){var i=this,s=Array.prototype.slice.call(arguments,1);return\"function\"!=typeof(o=s.pop())&&s.push(o),t=s.length&&s.shift()||[],n=s.length?s.shift():null,r=s.length&&s.shift()||{},(r=u(r)).readPreference=y.PRIMARY,\"function\"==typeof o?ie(i,e,t,n,r,o):new this.s.promiseLibrary(function(o,s){ie(i,e,t,n,r=r||{},function(e,t){if(e)return s(e);o(t)})})};var ie=function(e,t,n,r,o,i){var s={findandmodify:e.s.name,query:t};(n=g(n))&&(s.sort=n),s.new=!!o.new,s.remove=!!o.remove,s.upsert=!!o.upsert,o.fields&&(s.fields=o.fields),r&&!o.remove&&(s.update=r),o.maxTimeMS&&(s.maxTimeMS=o.maxTimeMS),null!=o.serializeFunctions?o.serializeFunctions=o.serializeFunctions:o.serializeFunctions=e.s.serializeFunctions,o.checkKeys=!1;var a=me(o,e.s.db,e,o);a.writeConcern&&(s.writeConcern=a.writeConcern),\"boolean\"==typeof a.bypassDocumentValidation&&(s.bypassDocumentValidation=a.bypassDocumentValidation),ce(s,e,o),e.s.db.command(s,o,function(e,t){return e?h(i,e,null):h(i,null,t)})};E.classMethod(\"findAndModify\",{callback:!0,promise:!0}),_.prototype.findAndRemove=function(e,t,n,r){var o=this,i=Array.prototype.slice.call(arguments,1);return\"function\"!=typeof(r=i.pop())&&i.push(r),t=i.length&&i.shift()||[],n=i.length&&i.shift()||{},\"function\"==typeof r?se(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){se(o,e,t,n,function(e,t){if(e)return i(e);r(t)})})};var se=function(e,t,n,r,o){r.remove=!0,e.findAndModify(t,n,null,r,o)};function ae(e,t,n){var r=t.s.topology.capabilities();if(r&&r.commandsTakeWriteConcern){var o=me(u(n),t.s.db,t,n);o.writeConcern&&(e.writeConcern=o.writeConcern)}}function ce(e,t,n){var r=t.s.topology.capabilities();r&&r.commandsTakeCollation&&n.collation&&\"object\"==typeof n.collation&&(e.collation=n.collation)}E.classMethod(\"findAndRemove\",{callback:!0,promise:!0}),_.prototype.aggregate=function(e,t,n){if(Array.isArray(e))\"function\"==typeof t&&(n=t,t={}),null==t&&null==n&&(t={});else{var r=Array.prototype.slice.call(arguments,0);n=r.pop();var o=r[r.length-1];t=o&&(o.readPreference||o.explain||o.cursor||o.out||o.maxTimeMS||o.allowDiskUse)?r.pop():{},e=r}var i=!1,s={aggregate:this.s.name,pipeline:e};if(\"string\"==typeof t.out?(e.push({$out:t.out}),i=!0):e.length>0&&e[e.length-1].$out&&(i=!0),e.length>0&&e[e.length-1].$out&&ae(s,this,t),ce(s,this,t),\"boolean\"==typeof t.bypassDocumentValidation&&(s.bypassDocumentValidation=t.bypassDocumentValidation),!i&&this.s.readConcern&&(s.readConcern=this.s.readConcern),t.allowDiskUse&&(s.allowDiskUse=t.allowDiskUse),\"number\"==typeof t.maxTimeMS&&(s.maxTimeMS=t.maxTimeMS),t=u(t),(t=ge(this,t,this.s.db,this)).explain&&(s.explain=t.explain),null!=t.cursor&&\"object\"!=typeof t.cursor)throw d(\"cursor options must be an object\");if(this.s.topology.capabilities().hasAggregationCursor&&(t.cursor=t.cursor||{batchSize:1e3},s.cursor=t.cursor),t.promiseLibrary=this.s.promiseLibrary,t.cursorFactory=c,\"function\"!=typeof n){if(!this.s.topology.capabilities())throw new l(\"cannot connect to server\");return\"boolean\"==typeof t.allowDiskUse&&(s.allowDiskUse=t.allowDiskUse),\"number\"==typeof t.maxTimeMS&&(s.maxTimeMS=t.maxTimeMS),this.s.topology.cursor(this.s.namespace,s,t)}if(t.cursor)return this.s.topology.cursor(this.s.namespace,s,t).toArray(function(e,t){if(e)return h(n,e);h(n,null,t)});this.s.db.command(s,t,function(e,t){e?h(n,e):t.err||t.errmsg?h(n,d(t)):\"object\"==typeof t&&t.serverPipeline?h(n,null,t.serverPipeline):\"object\"==typeof t&&t.stages?h(n,null,t.stages):h(n,null,t.result)})},E.classMethod(\"aggregate\",{callback:!0,promise:!1}),_.prototype.parallelCollectionScan=function(e,t){var n=this;return\"function\"==typeof e&&(t=e,e={numCursors:1}),e.numCursors=e.numCursors||1,e.batchSize=e.batchSize||1e3,e=u(e),(e=ge(this,e,this.s.db,this)).promiseLibrary=this.s.promiseLibrary,\"function\"==typeof t?le(n,e,t):new this.s.promiseLibrary(function(t,r){le(n,e,function(e,n){if(e)return r(e);t(n)})})};var le=function(e,t,n){var r={parallelCollectionScan:e.s.name,numCursors:t.numCursors};e.s.readConcern&&(r.readConcern=e.s.readConcern);var o=t.raw;delete t.raw,e.s.db.command(r,t,function(r,s){if(r)return h(n,r,null);if(null==s)return h(n,new Error(\"no result returned for parallelCollectionScan\"),null);var a=[];o&&(t.raw=o);for(var c=0;c<s.cursors.length;c++){var l=s.cursors[c].cursor.id,u=\"number\"==typeof l?i.fromNumber(l):l;a.push(e.s.topology.cursor(e.s.namespace,u,t))}h(n,null,a)})};E.classMethod(\"parallelCollectionScan\",{callback:!0,promise:!0}),_.prototype.geoNear=function(e,t,n,r){var o=this,i=\"object\"==typeof e&&e,s=Array.prototype.slice.call(arguments,i?1:2);return\"function\"!=typeof(r=s.pop())&&s.push(r),n=s.length&&s.shift()||{},\"function\"==typeof r?ue(o,e,t,i,n,r):new this.s.promiseLibrary(function(r,s){ue(o,e,t,i,n,function(e,t){if(e)return s(e);r(t)})})};var ue=function(e,t,n,r,o,i){var s={geoNear:e.s.name,near:r||[t,n]};o=u(o),o=ge(e,o,e.s.db,e);s=m(s,o,{readPreference:!0,geoNear:!0,near:!0}),e.s.readConcern&&(s.readConcern=e.s.readConcern),ce(s,e,o),e.s.db.command(s,o,function(e,t){return e?h(i,e):t.err||t.errmsg?h(i,d(t)):void h(i,null,t)})};E.classMethod(\"geoNear\",{callback:!0,promise:!0}),_.prototype.geoHaystackSearch=function(e,t,n,r){var o=this,i=Array.prototype.slice.call(arguments,2);return\"function\"!=typeof(r=i.pop())&&i.push(r),n=i.length&&i.shift()||{},\"function\"==typeof r?pe(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){pe(o,e,t,n,function(e,t){if(e)return i(e);r(t)})})};var pe=function(e,t,n,r,o){var i={geoSearch:e.s.name,near:[t,n]};i=m(i,r,{readPreference:!0}),r=u(r),r=ge(e,r,e.s.db,e),e.s.readConcern&&(i.readConcern=e.s.readConcern),e.s.db.command(i,r,function(e,t){if(e)return h(o,e);(t.err||t.errmsg)&&h(o,d(t)),h(o,null,t)})};E.classMethod(\"geoHaystackSearch\",{callback:!0,promise:!0});_.prototype.group=function(e,t,n,r,o,i,s,a){var c=this,l=Array.prototype.slice.call(arguments,3);return\"function\"!=typeof(a=l.pop())&&l.push(a),r=l.length?l.shift():null,o=l.length?l.shift():null,i=l.length?l.shift():null,s=l.length&&l.shift()||{},\"function\"!=typeof o&&(i=o,o=null),!Array.isArray(e)&&e instanceof Object&&\"function\"!=typeof e&&\"Code\"!=e._bsontype&&(e=Object.keys(e)),\"function\"==typeof r&&(r=r.toString()),\"function\"==typeof o&&(o=o.toString()),i=null==i||i,\"function\"==typeof a?de(c,e,t,n,r,o,i,s,a):new this.s.promiseLibrary(function(a,l){de(c,e,t,n,r,o,i,s,function(e,t){if(e)return l(e);a(t)})})};var de=function(e,t,n,r,o,i,a,c,l){if(a){var p=o&&\"Code\"==o._bsontype?o:new s(o),d={group:{ns:e.s.name,$reduce:p,cond:n,initial:r,out:\"inline\"}};if(null!=i&&(d.group.finalize=i),\"function\"==typeof t||t&&\"Code\"==t._bsontype)d.group.$keyf=t&&\"Code\"==t._bsontype?t:new s(t);else{var f={};t.forEach(function(e){f[e]=1}),d.group.key=f}c=u(c),c=ge(e,c,e.s.db,e),e.s.readConcern&&(d.readConcern=e.s.readConcern),ce(d,e,c),e.s.db.command(d,c,function(e,t){if(e)return h(l,e,null);h(l,null,t.retval)})}else{var m=null!=o&&\"Code\"==o._bsontype?o.scope:{};m.ns=e.s.name,m.keys=t,m.condition=n,m.initial=r;var g='function () {\\nvar c = db[ns].find(condition);\\nvar map = new Map();\\nvar reduce_function = reduce;\\n\\nwhile (c.hasNext()) {\\nvar obj = c.next();\\nvar key = {};\\n\\nfor (var i = 0, len = keys.length; i < len; ++i) {\\nvar k = keys[i];\\nkey[k] = obj[k];\\n}\\n\\nvar aggObj = map.get(key);\\n\\nif (aggObj == null) {\\nvar newObj = Object.extend({}, key);\\naggObj = Object.extend(newObj, initial);\\nmap.put(key, aggObj);\\n}\\n\\nreduce_function(obj, aggObj);\\n}\\n\\nreturn { \"result\": map.values() };\\n}'.replace(/ reduce;/,o.toString()+\";\");e.s.db.eval(new s(g,m),function(e,t){if(e)return h(l,e,null);h(l,null,t.result||t)})}};function fe(e){if(!p(e)||\"ObjectID\"==e._bsontype)return e;for(var t,n=Object.keys(e),r=n.length,o={};r--;)\"function\"==typeof e[t=n[r]]?o[t]=new s(String(e[t])):o[t]=fe(e[t]);return o}E.classMethod(\"group\",{callback:!0,promise:!0}),_.prototype.mapReduce=function(e,t,n,r){var o=this;if(\"function\"==typeof n&&(r=n,n={}),null==n.out)throw new Error(\"the out option parameter must be defined, see mongodb docs for possible values\");return\"function\"==typeof e&&(e=e.toString()),\"function\"==typeof t&&(t=t.toString()),\"function\"==typeof n.finalize&&(n.finalize=n.finalize.toString()),\"function\"==typeof r?he(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){he(o,e,t,n,function(e,t,n){return e?i(e):n?void r({results:t,stats:n}):r(t)})})};var he=function(e,t,n,r,o){var i={mapreduce:e.s.name,map:t,reduce:n},s=[\"readPreference\"];for(var a in r)\"scope\"==a?i[a]=fe(r[a]):-1==s.indexOf(a)&&(i[a]=r[a]);r=u(r),0!=(r=ge(e,r,e.s.db,e)).readPreference&&\"primary\"!=r.readPreference&&r.out&&1!=r.out.inline&&\"inline\"!=r.out?(r.readPreference=\"primary\",ae(i,e,r)):e.s.readConcern&&(i.readConcern=e.s.readConcern),\"boolean\"==typeof r.bypassDocumentValidation&&(i.bypassDocumentValidation=r.bypassDocumentValidation),ce(i,e,r),e.s.db.command(i,{readPreference:r.readPreference},function(t,n){if(t)return h(o,t);if(1!=n.ok||n.err||n.errmsg)return h(o,d(n));var i={};if(n.timeMillis&&(i.processtime=n.timeMillis),n.counts&&(i.counts=n.counts),n.timing&&(i.timing=n.timing),n.results)return null!=r.verbose&&r.verbose?h(o,null,n.results,i):h(o,null,n.results);var s=null;if(null!=n.result&&\"object\"==typeof n.result){var a=n.result;s=e.s.db.db(a.db).collection(a.collection)}else s=e.s.db.collection(n.result);if(null==r.verbose||!r.verbose)return h(o,t,s);h(o,t,s,i)})};E.classMethod(\"mapReduce\",{callback:!0,promise:!0}),_.prototype.initializeUnorderedBulkOp=function(e){return(e=e||{}).promiseLibrary=this.s.promiseLibrary,S(this.s.topology,this,e)},E.classMethod(\"initializeUnorderedBulkOp\",{callback:!1,promise:!1,returns:[k.UnorderedBulkOperation]}),_.prototype.initializeOrderedBulkOp=function(e){return(e=e||{}).promiseLibrary=this.s.promiseLibrary,k(this.s.topology,this,e)},E.classMethod(\"initializeOrderedBulkOp\",{callback:!1,promise:!1,returns:[k.OrderedBulkOperation]});var me=function(e,t,n,r){if(null!=r.w||null!=r.j||null!=r.fsync){var o={};null!=r.w&&(o.w=r.w),null!=r.wtimeout&&(o.wtimeout=r.wtimeout),null!=r.j&&(o.j=r.j),null!=r.fsync&&(o.fsync=r.fsync),e.writeConcern=o}else null!=n.writeConcern.w||null!=n.writeConcern.j||null!=n.writeConcern.fsync?e.writeConcern=n.writeConcern:null==t.writeConcern.w&&null==t.writeConcern.j&&null==t.writeConcern.fsync||(e.writeConcern=t.writeConcern);return e},ge=function(e,t,n){var r=null;if(t.readPreference?r=t.readPreference:e.s.readPreference?r=e.s.readPreference:n.s.readPreference&&(r=n.s.readPreference),r instanceof y)t.readPreference=new v(r.mode,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds});else if(\"string\"==typeof r)t.readPreference=new v(r);else if(r&&!(r instanceof y)&&\"object\"==typeof r){var o=r.mode||r.preference;o&&\"string\"==typeof o&&(t.readPreference=new v(o,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds}))}return t},ye={limit:1,sort:1,fields:1,skip:1,hint:1,explain:1,snapshot:1,timeout:1,tailable:1,tailableRetryInterval:1,numberOfRetries:1,awaitdata:1,awaitData:1,exhaust:1,batchSize:1,returnKey:1,maxScan:1,min:1,max:1,showDiskLoc:1,comment:1,raw:1,readPreference:1,partial:1,read:1,dbName:1,oplogReplay:1,connection:1,maxTimeMS:1,transforms:1,collation:1,noCursorTimeout:1};e.exports=_},function(e,t,n){var r=n(9);\"disable\"===process.env.READABLE_STREAM&&r?(e.exports=r,(t=e.exports=r.Readable).Readable=r.Readable,t.Writable=r.Writable,t.Duplex=r.Duplex,t.Transform=r.Transform,t.PassThrough=r.PassThrough,t.Stream=r):((t=e.exports=n(132)).Stream=r||t,t.Readable=t,t.Writable=n(131),t.Duplex=n(37),t.Transform=n(129),t.PassThrough=n(180))},function(e,t,n){\"use strict\";var r=n(27),o=n(14).retrieveBSON,i=n(8),s=n(0).format,a=o().Long,c=function(e,t,n,o,i,s){o=o||{},this.pool=null,this.server=null,this.disconnectHandler=o.disconnectHandler,this.bson=e,this.ns=t,this.cmd=n,this.options=o,this.topology=i,this.cursorState={cursorId:null,cmd:n,documents:o.documents||[],cursorIndex:0,dead:!1,killed:!1,init:!1,notified:!1,limit:o.limit||n.limit||0,skip:o.skip||n.skip||0,batchSize:o.batchSize||n.batchSize||1e3,currentLimit:0,transforms:o.transforms},\"boolean\"==typeof s.promoteLongs?this.cursorState.promoteLongs=s.promoteLongs:\"boolean\"==typeof o.promoteLongs&&(this.cursorState.promoteLongs=o.promoteLongs),\"boolean\"==typeof s.promoteValues?this.cursorState.promoteValues=s.promoteValues:\"boolean\"==typeof o.promoteValues&&(this.cursorState.promoteValues=o.promoteValues),\"boolean\"==typeof s.promoteBuffers?this.cursorState.promoteBuffers=s.promoteBuffers:\"boolean\"==typeof o.promoteBuffers&&(this.cursorState.promoteBuffers=o.promoteBuffers),this.logger=r(\"Cursor\",s),\"number\"==typeof n?(this.cursorState.cursorId=a.fromNumber(n),this.cursorState.lastCursorId=this.cursorState.cursorId):n instanceof a&&(this.cursorState.cursorId=n,this.cursorState.lastCursorId=n)};c.prototype.setCursorBatchSize=function(e){this.cursorState.batchSize=e},c.prototype.cursorBatchSize=function(){return this.cursorState.batchSize},c.prototype.setCursorLimit=function(e){this.cursorState.limit=e},c.prototype.cursorLimit=function(){return this.cursorState.limit},c.prototype.setCursorSkip=function(e){this.cursorState.skip=e},c.prototype.cursorSkip=function(){return this.cursorState.skip};var l=function(e,t,n){try{e(t,n)}catch(t){process.nextTick(function(){throw t})}};c.prototype._find=function(e){var t=this;t.logger.isDebug()&&t.logger.debug(s(\"issue initial query [%s] with flags [%s]\",JSON.stringify(t.cmd),JSON.stringify(t.query)));var n={};(t.options.raw||t.cmd.raw)&&(n.raw=t.options.raw||t.cmd.raw),\"string\"==typeof t.query.documentsReturnedIn&&(n.documentsReturnedIn=t.query.documentsReturnedIn),\"boolean\"==typeof t.cursorState.promoteLongs&&(n.promoteLongs=t.cursorState.promoteLongs),\"boolean\"==typeof t.cursorState.promoteValues&&(n.promoteValues=t.cursorState.promoteValues),\"boolean\"==typeof t.cursorState.promoteBuffers&&(n.promoteBuffers=t.cursorState.promoteBuffers),t.server.s.pool.write(t.query,n,function(n,r){if(n)return e(n);var o=r.message;if(o.queryFailure)return e(i.create(o.documents[0]),null);if(Array.isArray(o.documents)&&1==o.documents.length&&(!t.cmd.find||t.cmd.find&&0==t.cmd.virtual)&&(\"string\"!=o.documents[0].cursor||o.documents[0].$err||o.documents[0].errmsg||Array.isArray(o.documents[0].result))){if(o.documents[0].$err||o.documents[0].errmsg)return e(i.create(o.documents[0]),null);if(null!=o.documents[0].cursor&&\"string\"!=typeof o.documents[0].cursor){var s=o.documents[0].cursor.id;return o.documents[0].cursor.ns&&(t.ns=o.documents[0].cursor.ns),t.cursorState.cursorId=\"number\"==typeof s?a.fromNumber(s):s,t.cursorState.lastCursorId=t.cursorState.cursorId,Array.isArray(o.documents[0].cursor.firstBatch)&&(t.cursorState.documents=o.documents[0].cursor.firstBatch),e(null,null)}if(Array.isArray(o.documents[0].result))return t.cursorState.documents=o.documents[0].result,t.cursorState.cursorId=a.ZERO,e(null,null)}t.cursorState.cursorId=o.cursorId,t.cursorState.documents=o.documents,t.cursorState.lastCursorId=o.cursorId,t.cursorState.transforms&&\"function\"==typeof t.cursorState.transforms.query&&(t.cursorState.documents=t.cursorState.transforms.query(o)),e(null,null)})},c.prototype._getmore=function(e){this.logger.isDebug()&&this.logger.debug(s(\"schedule getMore call for query [%s]\",JSON.stringify(this.query)));var t=this.options.raw||this.cmd.raw,n=this.cursorState.batchSize;this.cursorState.limit>0&&this.cursorState.currentLimit+n>this.cursorState.limit&&(n=this.cursorState.limit-this.cursorState.currentLimit);var r=this.server.s.pool;this.server.wireProtocolHandler.getMore(this.bson,this.ns,this.cursorState,n,t,r,this.options,e)},c.prototype._killcursor=function(e){if(this.cursorState.dead=!0,this.cursorState.killed=!0,this.cursorState.documents=[],null==this.cursorState.cursorId||this.cursorState.cursorId.isZero()||0==this.cursorState.init)e&&e(null,null);else{var t=this.server.s.pool;this.server.wireProtocolHandler.killCursor(this.bson,this.ns,this.cursorState.cursorId,t,e)}},c.prototype.clone=function(){return this.topology.cursor(this.ns,this.cmd,this.options)},c.prototype.isDead=function(){return 1==this.cursorState.dead},c.prototype.isKilled=function(){return 1==this.cursorState.killed},c.prototype.isNotified=function(){return 1==this.cursorState.notified},c.prototype.bufferedCount=function(){return this.cursorState.documents.length-this.cursorState.cursorIndex},c.prototype.readBufferedDocuments=function(e){var t=this.cursorState.documents.length-this.cursorState.cursorIndex,n=e<t?e:t,r=this.cursorState.documents.slice(this.cursorState.cursorIndex,this.cursorState.cursorIndex+n);if(this.cursorState.transforms&&\"function\"==typeof this.cursorState.transforms.doc)for(var o=0;o<r.length;o++)r[o]=this.cursorState.transforms.doc(r[o]);return this.cursorState.limit>0&&this.cursorState.currentLimit+r.length>this.cursorState.limit&&(r=r.slice(0,this.cursorState.limit-this.cursorState.currentLimit),this.kill()),this.cursorState.currentLimit=this.cursorState.currentLimit+r.length,this.cursorState.cursorIndex=this.cursorState.cursorIndex+r.length,r},c.prototype.kill=function(e){this._killcursor(e)},c.prototype.rewind=function(){this.cursorState.init&&(this.cursorState.dead||this.kill(),this.cursorState.currentLimit=0,this.cursorState.init=!1,this.cursorState.dead=!1,this.cursorState.killed=!1,this.cursorState.notified=!1,this.cursorState.documents=[],this.cursorState.cursorId=null,this.cursorState.cursorIndex=0)};var u=function(e,t){return!(!e.pool||!e.pool.isDestroyed())&&(e.cursorState.notified=!0,e.cursorState.killed=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,t(i.create(s(\"connection to host %s:%s was destroyed\",e.pool.host,e.pool.port))),!0)},p=function(e,t){e.cursorState.dead=!0,e.cursorState.notified=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,l(t,null,null)},d=function(e,t){if(e.cursorState.notified)return t(new Error(\"cursor is exhausted\"));if(!function(e,t){return!!e.cursorState.killed&&(e.cursorState.notified=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,l(t,null,null),!0)}(e,t)&&!function(e,t){return!(!e.cursorState.dead||e.cursorState.killed||(e.cursorState.notified=!0,e.cursorState.killed=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,l(t,null,null),0))}(e,t)&&!function(e,t){return!(!e.cursorState.dead||!e.cursorState.killed||(l(t,i.create(\"cursor is dead\")),0))}(e,t)){if(!e.cursorState.init){if(!e.topology.isConnected(e.options)){if(\"server\"===e.topology._type&&!e.topology.s.options.reconnect)return t(new i(\"no connection available\"));if(null!=e.disconnectHandler)return e.topology.isDestroyed()?t(new i(\"Topology was destroyed\")):e.disconnectHandler.addObjectAndMethod(\"cursor\",e,\"next\",[t],t)}try{e.server=e.topology.getServer(e.options)}catch(n){return null!=e.disconnectHandler?e.disconnectHandler.addObjectAndMethod(\"cursor\",e,\"next\",[t],t):t(n)}if(e.cursorState.init=!0,e.cmd&&e.cmd.collation&&e.server.ismaster.maxWireVersion<5)return t(new i(s(\"server %s does not support collation\",e.server.name)));try{e.query=e.server.wireProtocolHandler.command(e.bson,e.ns,e.cmd,e.cursorState,e.topology,e.options)}catch(e){return t(e)}}if(null==e.cursorState.cursorId){if(u(e,t))return;if(e.topology.isDestroyed())return t(new i(\"connection destroyed, not possible to instantiate cursor\"));e._find(function(n){return n?l(t,n,null):0==e.cursorState.documents.length&&e.cursorState.cursorId&&e.cursorState.cursorId.isZero()&&!e.cmd.tailable&&!e.cmd.awaitData?function(e,t){e.cursorState.notified=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,l(t,null,null)}(e,t):void d(e,t)})}else{if(e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit)return e.kill(),p(e,t);if(e.cursorState.cursorIndex!=e.cursorState.documents.length||a.ZERO.equals(e.cursorState.cursorId)){if(e.cursorState.documents.length==e.cursorState.cursorIndex&&e.cmd.tailable&&a.ZERO.equals(e.cursorState.cursorId))return l(t,i.create({message:\"No more documents in tailed cursor\",tailable:e.cmd.tailable,awaitData:e.cmd.awaitData}));if(e.cursorState.documents.length==e.cursorState.cursorIndex&&a.ZERO.equals(e.cursorState.cursorId))p(e,t);else{if(e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit)return e.kill(),p(e,t);e.cursorState.currentLimit+=1;var n=e.cursorState.documents[e.cursorState.cursorIndex++];if(!n||n.$err)return e.kill(),p(e,function(){l(t,new i(n?n.$err:void 0))});e.cursorState.transforms&&\"function\"==typeof e.cursorState.transforms.doc&&(n=e.cursorState.transforms.doc(n)),l(t,null,n)}}else{if(e.cursorState.documents=[],e.cursorState.cursorIndex=0,e.topology.isDestroyed())return t(new i(\"connection destroyed, not possible to instantiate cursor\"));if(u(e,t))return;e._getmore(function(n,r,o){return n?l(t,n):(e.connection=o,0==e.cursorState.documents.length&&e.cmd.tailable&&a.ZERO.equals(e.cursorState.cursorId)?l(t,i.create({message:\"No more documents in tailed cursor\",tailable:e.cmd.tailable,awaitData:e.cmd.awaitData})):0==e.cursorState.documents.length&&e.cmd.tailable&&!a.ZERO.equals(e.cursorState.cursorId)?d(e,t):e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit?p(e,t):void d(e,t))})}}}};c.prototype.next=function(e){d(this,e)},e.exports=c},function(e,t,n){\"use strict\";var r=n(0).format,o=n(18),i=n(14).retrieveBSON,s=n(11).Query,a=n(8),c=i().Binary,l=function(e,t,n){this.db=e,this.username=t,this.password=n};l.prototype.equal=function(e){return e.db==this.db&&e.username==this.username&&e.password==this.password};var u=0,p=function(e){this.bson=e,this.authStore=[],this.id=u++},d={},f=0,h=function(e,t,n){var r=[e,t.toString(\"base64\"),n].join(\"_\");if(void 0!==d[r])return d[r];var i=o.pbkdf2Sync(e,t,n,20,\"sha1\");return f>=200&&(d={},f=0),d[r]=i,f+=1,i};p.prototype.auth=function(e,t,n,i,u,p){var d=this,f=t.length;if(0==f)return p(null,null);for(var g=0,y=null,v=function(t){i=i.replace(\"=\",\"=3D\").replace(\",\",\"=2C\");var v=o.randomBytes(24).toString(\"base64\"),b=r(\"n=%s,r=%s\",i,v),x={saslStart:1,mechanism:\"SCRAM-SHA-1\",payload:new c(r(\"n,,%s\",b)),autoAuthorize:1},w=function(e,t){return e?(g-=1,y=e,!1):t.result.$err?(y=t.result,!1):t.result.errmsg?(y=t.result,!1):(g+=1,!0)},S=function(e,t){var o;w(e,t),0==(o=f-=1)&&g>0?(m(d.authStore,new l(n,i,u)),p(null,!0)):0==o&&(null==y&&(y=new a(r(\"failed to authenticate using scram\"))),p(y,!1))};e(t,new s(d.bson,r(\"%s.$cmd\",n),x,{numberToSkip:0,numberToReturn:1}),function(v,x){if(0==w(v,x))return 0==(f-=1)&&g>0?(m(d.authStore,new l(n,i,u)),p(null,!0)):0==f?(null==y&&(y=new a(r(\"failed to authenticate using scram\"))),p(y,!1)):void 0;var k=function(e){for(var t={},n=e.split(\",\"),r=0;r<n.length;r++){var o=n[r].split(\"=\");t[o[0]]=o[1]}return t}(x.result.payload.value()),O=parseInt(k.i,10),C=k.s,_=k.r,E=r(\"c=biws,r=%s\",_),I=function(e,t){if(\"string\"!=typeof e)throw new a(\"username must be a string\");if(\"string\"!=typeof t)throw new a(\"password must be a string\");if(0==t.length)throw new a(\"password cannot be empty\");var n=o.createHash(\"md5\");return n.update(e+\":mongo:\"+t,\"utf8\"),n.digest(\"hex\")}(i,u),T=h(I,new Buffer(C,\"base64\"),O),M=o.createHmac(\"sha1\",T);M.update(new Buffer(\"Client Key\"));var N=new Buffer(M.digest(\"base64\"),\"base64\"),A=o.createHash(\"sha1\");A.update(N);var B=new Buffer(A.digest(\"base64\"),\"base64\"),j=[b,x.result.payload.value().toString(\"base64\"),E].join(\",\");(M=o.createHmac(\"sha1\",B)).update(new Buffer(j));var P=new Buffer(M.digest(\"base64\"),\"base64\"),D=[E,r(\"p=%s\",new Buffer(function(e,t){Buffer.isBuffer(e)||(e=new Buffer(e)),Buffer.isBuffer(t)||(t=new Buffer(t));var n=[];if(e.length>t.length)for(var r=0;r<t.length;r++)n.push(e[r]^t[r]);else for(r=0;r<e.length;r++)n.push(e[r]^t[r]);return new Buffer(n)}(N,P)).toString(\"base64\"))].join(\",\"),L={saslContinue:1,conversationId:x.result.conversationId,payload:new c(new Buffer(D))};e(t,new s(d.bson,r(\"%s.$cmd\",n),L,{numberToSkip:0,numberToReturn:1}),function(o,i){if(i&&0==i.result.done){var a={saslContinue:1,conversationId:i.result.conversationId,payload:new Buffer(0)};e(t,new s(d.bson,r(\"%s.$cmd\",n),a,{numberToSkip:0,numberToReturn:1}),function(e,t){S(e,t)})}else S(o,i)})})},b=function(e){process.nextTick(function(){v(e)})};t.length>0;)b(t.shift())};var m=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};p.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!=e})},p.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0==o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,function(e){0==(o-=1)&&n(e,null)})},e.exports=p},function(e,t,n){\"use strict\";var r=n(0).format,o=n(30),i=n(11).Query,s=n(8),a=function(e,t,n,r){this.db=e,this.username=t,this.password=n,this.options=r};a.prototype.equal=function(e){return e.db==this.db&&e.username==this.username&&e.password==this.password};var c=null,l=null;try{c=o(\"kerberos\").Kerberos,l=o(\"kerberos\").processes.MongoAuthProcess}catch(e){}var u=function(e){this.bson=e,this.authStore=[]};u.prototype.auth=function(e,t,n,o,i,l,u){var d=this;if(null==c)return u(new Error(\"Kerberos library is not installed\"));var f=l.gssapiServiceName||\"mongodb\",h=t.length;if(0==h)return u(null,null);for(var g=0,y=null;t.length>0;){!function(t){process.nextTick(function(){p(d,n,o,i,n,f,e,t,l,function(e,t){h-=1,e?y=e:t.result.$err?y=t.result:t.result.errmsg?y=t.result:g+=1,0==h&&g>0?(m(d.authStore,new a(n,o,i,l)),u(null,!0)):0==h&&(null==y&&(y=new s(r(\"failed to authenticate using mongocr\"))),u(y,!1))})})}(t.shift())}};var p=function(e,t,n,r,o,i,s,a,c,u){var p=new l(a.host,a.port,i,c);p.init(n,r,function(i){if(i)return u(i,!1);p.transition(\"\",function(i,c){if(i)return u(i,!1);d(e,p,c,t,n,r,o,s,a,u)})})},d=function(e,t,n,r,o,s,a,c,l,u){var p={saslStart:1,mechanism:\"GSSAPI\",payload:n,autoAuthorize:1};c(l,new i(e.bson,\"$external.$cmd\",p,{numberToSkip:0,numberToReturn:1}),function(n,i){if(n)return u(n,!1);var p=i.result;t.transition(i.result.payload,function(n,i){if(n)return u(n,!1);f(e,t,i,p,r,o,s,a,c,l,u)})})},f=function(e,t,n,r,o,s,a,c,l,u,p){var d={saslContinue:1,conversationId:r.conversationId,payload:n};l(u,new i(e.bson,\"$external.$cmd\",d,{numberToSkip:0,numberToReturn:1}),function(n,r){if(n)return p(n,!1);var i=r.result;t.transition(i.payload,function(n,r){if(n)return p(n,!1);h(e,t,r,i,o,s,a,c,l,u,p)})})},h=function(e,t,n,r,o,s,a,c,l,u,p){var d={saslContinue:1,conversationId:r.conversationId,payload:n};l(u,new i(e.bson,\"$external.$cmd\",d,{numberToSkip:0,numberToReturn:1}),function(e,n){if(e)return p(e,!1);t.transition(null,function(e){if(e)return p(e,null);p(null,n)})})},m=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};u.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!=e})},u.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0==o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,r[i].options,function(e){0==(o-=1)&&n(e,null)})},e.exports=u},function(e,t,n){\"use strict\";var r=n(0).format,o=n(14).retrieveBSON,i=n(11).Query,s=n(8),a=o().Binary,c=function(e,t,n){this.db=e,this.username=t,this.password=n};c.prototype.equal=function(e){return e.db==this.db&&e.username==this.username&&e.password==this.password};var l=function(e){this.bson=e,this.authStore=[]};l.prototype.auth=function(e,t,n,o,l,p){var d=this,f=t.length;if(0==f)return p(null,null);for(var h=0,m=null;t.length>0;){!function(t){process.nextTick(function(){var g,y;g=t,y={saslStart:1,mechanism:\"PLAIN\",payload:new a(r(\"\\0%s\\0%s\",o,l)),autoAuthorize:1},e(g,new i(d.bson,\"$external.$cmd\",y,{numberToSkip:0,numberToReturn:1}),function(e,t){f-=1,e?m=e:t.result.$err?m=t.result:t.result.errmsg?m=t.result:h+=1,0==f&&h>0?(u(d.authStore,new c(n,o,l)),p(null,!0)):0==f&&(null==m&&(m=new s(r(\"failed to authenticate using mongocr\"))),p(m,!1))})})}(t.shift())}};var u=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};l.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!=e})},l.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0==o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,function(e){0==(o-=1)&&n(e,null)})},e.exports=l},function(e,t,n){\"use strict\";var r=n(0).format,o=n(11).Query,i=n(8),s=function(e,t,n){this.db=e,this.username=t,this.password=n};s.prototype.equal=function(e){return e.db==this.db&&e.username==this.username&&e.password==this.password};var a=function(e){this.bson=e,this.authStore=[]};a.prototype.auth=function(e,t,n,a,l,u){var p=this,d=t.length;if(0==d)return u(null,null);for(var f=0,h=null;t.length>0;){!function(t){process.nextTick(function(){var m,g;m=t,g={authenticate:1,mechanism:\"MONGODB-X509\"},a&&(g.user=a),e(m,new o(p.bson,\"$external.$cmd\",g,{numberToSkip:0,numberToReturn:1}),function(e,t){d-=1,e?h=e:t.result.$err?h=t.result:t.result.errmsg?h=t.result:f+=1,0==d&&f>0?(c(p.authStore,new s(n,a,l)),u(null,!0)):0==d&&(null==h&&(h=new i(r(\"failed to authenticate using mongocr\"))),u(h,!1))})})}(t.shift())}};var c=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};a.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!=e})},a.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0==o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,function(e){0==(o-=1)&&n(e,null)})},e.exports=a},function(e,t,n){\"use strict\";var r=n(0).format,o=n(18),i=n(11).Query,s=n(8),a=function(e,t,n){this.db=e,this.username=t,this.password=n};a.prototype.equal=function(e){return e.db==this.db&&e.username==this.username&&e.password==this.password};var c=function(e){this.bson=e,this.authStore=[]},l=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};c.prototype.auth=function(e,t,n,c,u,p){var d=this,f=t.length;if(0==f)return p(null,null);for(var h=0,m=null;t.length>0;){!function(t){process.nextTick(function(){var g;e(g=t,new i(d.bson,r(\"%s.$cmd\",n),{getnonce:1},{numberToSkip:0,numberToReturn:1}),function(t,y){var v=null,b=null;if(null==t){v=y.result.nonce;var x=o.createHash(\"md5\");x.update(c+\":mongo:\"+u,\"utf8\");var w=x.digest(\"hex\");(x=o.createHash(\"md5\")).update(v+c+w,\"utf8\"),b=x.digest(\"hex\")}e(g,new i(d.bson,r(\"%s.$cmd\",n),{authenticate:1,user:c,nonce:v,key:b},{numberToSkip:0,numberToReturn:1}),function(e,t){f-=1,e?m=e:t.result.$err?m=t.result:t.result.errmsg?m=t.result:h+=1,0==f&&h>0?(l(d.authStore,new a(n,c,u)),p(null,!0)):0==f&&(null==m&&(m=new s(r(\"failed to authenticate using mongocr\"))),p(m,!1))})})})}(t.shift())}},c.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!=e})},c.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0==o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,function(e){0==(o-=1)&&n(e,null)})},e.exports=c},function(e,t){var n=Object.assign?Object.assign:function(e){if(void 0===e||null===e)throw new TypeError(\"Cannot convert first argument to object\");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var o=Object.keys(Object(r)),i=0,s=o.length;i<s;i++){var a=o[i],c=Object.getOwnPropertyDescriptor(r,a);void 0!==c&&c.enumerable&&(t[a]=r[a])}}return t};e.exports={assign:n}},function(e,t,n){\"use strict\";var r=n(3).Server,o=n(25),i=n(39),s=n(33),a=n(24).ServerCapabilities,c=n(24).TopologyBase,l=n(24).Store,u=n(17),p=n(3).MongoError,d=n(1).MAX_JS_INT,f=n(1).translateOptions,h=n(1).filterOptions,m=n(1).mergeOptions,g=[\"ha\",\"haInterval\",\"acceptableLatencyMS\",\"poolSize\",\"ssl\",\"checkServerIdentity\",\"sslValidate\",\"sslCA\",\"sslCRL\",\"sslCert\",\"ciphers\",\"ecdhCurve\",\"sslKey\",\"sslPass\",\"socketOptions\",\"bufferMaxEntries\",\"store\",\"auto_reconnect\",\"autoReconnect\",\"emitError\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectTimeoutMS\",\"socketTimeoutMS\",\"family\",\"loggerLevel\",\"logger\",\"reconnectTries\",\"reconnectInterval\",\"monitoring\",\"appname\",\"domainsEnabled\",\"servername\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"compression\",\"promiseLibrary\"];class y extends c{constructor(e,t,n){super();const i=(n=h(n,g)).promiseLibrary;var s={force:!1,bufferMaxEntries:\"number\"==typeof n.bufferMaxEntries?n.bufferMaxEntries:d},a=n.store||new l(this,s);if(-1!==e.indexOf(\"/\"))null!=t&&\"object\"==typeof t&&(n=t,t=null);else if(null==t)throw p.create({message:\"port must be specified\",driver:!0});var c=\"boolean\"!=typeof n.auto_reconnect||n.auto_reconnect;c=\"boolean\"==typeof n.autoReconnect?n.autoReconnect:c;var u=m({},{host:e,port:t,disconnectHandler:a,cursorFactory:o,reconnect:c,emitError:\"boolean\"!=typeof n.emitError||n.emitError,size:\"number\"==typeof n.poolSize?n.poolSize:5});u=f(u,n);var y=n.socketOptions&&Object.keys(n.socketOptions).length>0?n.socketOptions:n;(u=f(u,y)).clientInfo=this.clientInfo,n.appname&&(u.clientInfo.application={name:n.appname}),this.s={coreTopology:new r(u),sCapabilities:null,clonedOptions:u,reconnect:u.reconnect,emitError:u.emitError,poolSize:u.size,storeOptions:s,store:a,host:e,port:t,options:n,sessionPool:null,sessions:[],promiseLibrary:i||Promise}}connect(e,t){var n=this;\"function\"==typeof e&&(t=e,e={}),null==e&&(e=this.s.clonedOptions),\"function\"!=typeof t&&(t=null),e=Object.assign({},this.s.clonedOptions,e),n.s.options=e,n.s.storeOptions.bufferMaxEntries=\"number\"==typeof e.bufferMaxEntries?e.bufferMaxEntries:-1;var r=function(){return function(e){[\"timeout\",\"error\",\"close\"].forEach(function(e){n.s.coreTopology.removeListener(e,a[e])}),n.s.coreTopology.removeListener(\"connect\",r);try{t(e)}catch(e){process.nextTick(function(){throw e})}}},o=function(e){return function(t){\"error\"!==e&&n.emit(e,t)}},i=function(){n.s.store.flush()},s=function(e){return function(t,r){n.emit(e,t,r)}},a={timeout:r(\"timeout\"),error:r(\"error\"),close:r(\"close\")};[\"timeout\",\"error\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\"].forEach(function(e){n.s.coreTopology.removeAllListeners(e)}),n.s.coreTopology.once(\"timeout\",a.timeout),n.s.coreTopology.once(\"error\",a.error),n.s.coreTopology.once(\"close\",a.close),n.s.coreTopology.once(\"connect\",function(){[\"timeout\",\"error\",\"close\",\"destroy\"].forEach(function(e){n.s.coreTopology.removeAllListeners(e)}),n.s.coreTopology.on(\"timeout\",o(\"timeout\")),n.s.coreTopology.once(\"error\",o(\"error\")),n.s.coreTopology.on(\"close\",o(\"close\")),n.s.coreTopology.on(\"destroy\",i),n.emit(\"open\",null,n);try{t(null,n)}catch(e){console.log(e.stack),process.nextTick(function(){throw e})}}),n.s.coreTopology.on(\"reconnect\",function(){n.emit(\"reconnect\",n),n.s.store.execute()}),n.s.coreTopology.on(\"reconnectFailed\",function(e){n.emit(\"reconnectFailed\",e),n.s.store.flush(e)}),n.s.coreTopology.on(\"serverDescriptionChanged\",s(\"serverDescriptionChanged\")),n.s.coreTopology.on(\"serverHeartbeatStarted\",s(\"serverHeartbeatStarted\")),n.s.coreTopology.on(\"serverHeartbeatSucceeded\",s(\"serverHeartbeatSucceeded\")),n.s.coreTopology.on(\"serverHeartbeatFailed\",s(\"serverHeartbeatFailed\")),n.s.coreTopology.on(\"serverOpening\",s(\"serverOpening\")),n.s.coreTopology.on(\"serverClosed\",s(\"serverClosed\")),n.s.coreTopology.on(\"topologyOpening\",s(\"topologyOpening\")),n.s.coreTopology.on(\"topologyClosed\",s(\"topologyClosed\")),n.s.coreTopology.on(\"topologyDescriptionChanged\",s(\"topologyDescriptionChanged\")),n.s.coreTopology.on(\"attemptReconnect\",s(\"attemptReconnect\")),n.s.coreTopology.on(\"monitoring\",s(\"monitoring\")),n.s.coreTopology.connect(e)}}Object.defineProperty(y.prototype,\"poolSize\",{enumerable:!0,get:function(){return this.s.coreTopology.connections().length}}),Object.defineProperty(y.prototype,\"autoReconnect\",{enumerable:!0,get:function(){return this.s.reconnect}}),Object.defineProperty(y.prototype,\"host\",{enumerable:!0,get:function(){return this.s.host}}),Object.defineProperty(y.prototype,\"port\",{enumerable:!0,get:function(){return this.s.port}});const v=y.define=new u(\"Server\",y,!1);v.classMethod(\"capabilities\",{callback:!1,promise:!1,returns:[a]}),v.classMethod(\"command\",{callback:!0,promise:!1}),v.classMethod(\"insert\",{callback:!0,promise:!1}),v.classMethod(\"update\",{callback:!0,promise:!1}),v.classMethod(\"remove\",{callback:!0,promise:!1}),v.classMethod(\"isConnected\",{callback:!1,promise:!1,returns:[Boolean]}),v.classMethod(\"isDestroyed\",{callback:!1,promise:!1,returns:[Boolean]}),v.classMethod(\"cursor\",{callback:!1,promise:!1,returns:[o,i,s]}),v.classMethod(\"close\",{callback:!1,promise:!1}),v.classMethod(\"auth\",{callback:!0,promise:!1}),v.classMethod(\"logout\",{callback:!0,promise:!1}),v.classMethod(\"connections\",{callback:!1,promise:!1,returns:[Array]}),e.exports=y},function(e,t,n){\"use strict\";var r=n(5).EventEmitter,o=n(0).inherits,i=n(1).getSingleProperty,s=n(1).shallowClone,a=n(1).parseIndexOptions,c=n(1).debugOptions,l=n(33),u=n(1).handleCallback,p=n(1).filterOptions,d=n(1).toError,f=n(3).ReadPreference,h=n(0).format,m=n(139),g=n(3).BSON.Code,y=n(3).MongoError,v=n(3).ObjectID,b=n(17),x=n(3).Logger,w=n(46),S=n(18),k=n(1).mergeOptionsAndWriteConcern,O=n(1).executeOperation,C=[\"authSource\",\"w\",\"wtimeout\",\"j\",\"native_parser\",\"forceServerObjectId\",\"serializeFunctions\",\"raw\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"bufferMaxEntries\",\"numberOfRetries\",\"retryMiliSeconds\",\"readPreference\",\"pkFactory\",\"parentDb\",\"promiseLibrary\",\"noListener\"],_=[\"w\",\"wtimeout\",\"j\",\"fsync\",\"autoIndexId\",\"strict\",\"serializeFunctions\",\"pkFactory\",\"raw\",\"readPreference\",\"session\"],E=[\"w\",\"wtimeout\",\"fsync\",\"j\",\"readPreference\",\"readPreferenceTags\",\"native_parser\",\"forceServerObjectId\",\"pkFactory\",\"serializeFunctions\",\"raw\",\"bufferMaxEntries\",\"authSource\",\"ignoreUndefined\",\"promoteLongs\",\"promiseLibrary\",\"readConcern\",\"retryMiliSeconds\",\"numberOfRetries\",\"parentDb\",\"noListener\",\"loggerLevel\",\"logger\",\"promoteBuffers\",\"promoteLongs\",\"promoteValues\",\"compression\",\"retryWrites\"],I=function(e,t,n){if(n=n||{},!(this instanceof I))return new I(e,t,n);r.call(this);var o=n.promiseLibrary||Promise;(n=p(n,E)).promiseLibrary=o,this.s={databaseName:e,dbCache:{},children:[],topology:t,options:n,logger:x(\"Db\",n),bson:t?t.bson:null,readPreference:n.readPreference,bufferMaxEntries:\"number\"==typeof n.bufferMaxEntries?n.bufferMaxEntries:-1,parentDb:n.parentDb||null,pkFactory:n.pkFactory||v,nativeParser:n.nativeParser||n.native_parser,promiseLibrary:o,noListener:\"boolean\"==typeof n.noListener&&n.noListener,readConcern:n.readConcern},J(this.s.databaseName),i(this,\"serverConfig\",this.s.topology),i(this,\"bufferMaxEntries\",this.s.bufferMaxEntries),i(this,\"databaseName\",this.s.databaseName),n.parentDb||this.s.noListener||(t.on(\"error\",X(this,\"error\",this)),t.on(\"timeout\",X(this,\"timeout\",this)),t.on(\"close\",X(this,\"close\",this)),t.on(\"parseError\",X(this,\"parseError\",this)),t.once(\"open\",X(this,\"open\",this)),t.once(\"fullsetup\",X(this,\"fullsetup\",this)),t.once(\"all\",X(this,\"all\",this)),t.on(\"reconnect\",X(this,\"reconnect\",this)))};o(I,r);var T=I.define=new b(\"Db\",I,!1);Object.defineProperty(I.prototype,\"topology\",{enumerable:!0,get:function(){return this.s.topology}}),Object.defineProperty(I.prototype,\"options\",{enumerable:!0,get:function(){return this.s.options}}),Object.defineProperty(I.prototype,\"slaveOk\",{enumerable:!0,get:function(){return null!=this.s.options.readPreference&&(\"primary\"!==this.s.options.readPreference||\"primary\"!==this.s.options.readPreference.mode)}}),Object.defineProperty(I.prototype,\"writeConcern\",{enumerable:!0,get:function(){var e={};return null!=this.s.options.w&&(e.w=this.s.options.w),null!=this.s.options.j&&(e.j=this.s.options.j),null!=this.s.options.fsync&&(e.fsync=this.s.options.fsync),null!=this.s.options.wtimeout&&(e.wtimeout=this.s.options.wtimeout),e}});const M=function(e){if(e){if(\"string\"==typeof e)return new f(e);if(!e||e instanceof f||\"object\"!=typeof e){if(!(e instanceof f))throw new TypeError(\"Invalid read preference: \"+e)}else{const t=e.mode||e.preference;if(t&&\"string\"==typeof t)return new f(t,e.tags,{maxStalenessSeconds:e.maxStalenessSeconds})}}return e};var N=function(e,t,n,r){if(e.serverConfig&&e.serverConfig.isDestroyed())return r(new y(\"topology was destroyed\"));var o=n.dbName||n.authdb||e.s.databaseName;null==n.readPreference&&e.s.readPreference&&(n.readPreference=e.s.readPreference),n.readPreference?n.readPreference=M(n.readPreference):n.readPreference=f.primary,e.s.logger.isDebug()&&e.s.logger.debug(h(\"executing command %s against %s with options [%s]\",JSON.stringify(t),h(\"%s.$cmd\",o),JSON.stringify(c(C,n)))),e.s.topology.command(h(\"%s.$cmd\",o),t,n,function(e,t){return e?u(r,e):n.full?u(r,null,t):void u(r,null,t.result)})};I.prototype.command=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=s(t),O(this.s.topology,N,[this,e,t,n])},T.classMethod(\"command\",{callback:!0,promise:!0}),I.prototype.admin=function(){return new m(this,this.s.topology,this.s.promiseLibrary)},T.classMethod(\"admin\",{callback:!1,promise:!1,returns:[m]});var A=[\"pkFactory\",\"readPreference\",\"serializeFunctions\",\"strict\",\"readConcern\",\"ignoreUndefined\",\"promoteValues\",\"promoteBuffers\",\"promoteLongs\"];function B(e,t,n){if(t.s.topology.capabilities().commandsTakeWriteConcern){var r=Z(s(n),t,n);r.writeConcern&&(e.writeConcern=r.writeConcern)}}I.prototype.collection=function(e,t,n){var r=this;if(\"function\"==typeof t&&(n=t,t={}),(t=s(t=t||{})).promiseLibrary=this.s.promiseLibrary,t.readConcern=t.readConcern||this.s.readConcern,this.s.options.ignoreUndefined&&(t.ignoreUndefined=this.s.options.ignoreUndefined),null==(t=k(t,this.s.options,A,!0))||!t.strict)try{var o=new w(this,this.s.topology,this.s.databaseName,e,this.s.pkFactory,t);return n&&n(null,o),o}catch(e){if(e instanceof y&&n)return n(e);throw e}if(\"function\"!=typeof n)throw d(h(\"A callback is required in strict mode. While getting collection %s.\",e));if(r.serverConfig&&r.serverConfig.isDestroyed())return n(new y(\"topology was destroyed\"));this.listCollections({name:e},t).toArray(function(o,i){if(null!=o)return u(n,o,null);if(0===i.length)return u(n,d(h(\"Collection %s does not exist. Currently in strict mode.\",e)),null);try{return u(n,null,new w(r,r.s.topology,r.s.databaseName,e,r.s.pkFactory,t))}catch(o){return u(n,o,null)}})},T.classMethod(\"collection\",{callback:!0,promise:!1,returns:[w]});var j=function(e,t,n,r){var o=Z(s(n),e,n);if(e.serverConfig&&e.serverConfig.isDestroyed())return r(new y(\"topology was destroyed\"));e.listCollections({name:t},o).setReadPreference(f.PRIMARY).toArray(function(i,s){if(null!=i)return u(r,i,null);if(s.length>0&&o.strict)return u(r,y.create({message:h(\"Collection %s already exists. Currently in strict mode.\",t),driver:!0}),null);if(s.length>0)try{return u(r,null,new w(e,e.s.topology,e.s.databaseName,t,e.s.pkFactory,n))}catch(i){return u(r,i)}var a={create:t};for(var c in B(a,e,n),n)null!=n[c]&&\"function\"!=typeof n[c]&&-1===_.indexOf(c)&&(a[c]=n[c]);o.readPreference=f.PRIMARY,e.command(a,o,function(o){if(o)return u(r,o);u(r,null,new w(e,e.s.topology,e.s.databaseName,t,e.s.pkFactory,n))})})};I.prototype.createCollection=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),(t=t||{}).promiseLibrary=t.promiseLibrary||this.s.promiseLibrary,O(this.s.topology,j,[this,e,t,n])},T.classMethod(\"createCollection\",{callback:!0,promise:!0}),I.prototype.stats=function(e,t){\"function\"==typeof e&&(t=e,e={});var n={dbStats:!0};return null!=(e=e||{}).scale&&(n.scale=e.scale),null==e.readPreference&&this.s.readPreference&&(e.readPreference=this.s.readPreference),this.command(n,e,t)},T.classMethod(\"stats\",{callback:!0,promise:!0});I.prototype.listCollections=function(e,t){if(e=e||{},(t=s(t=t||{})).promiseLibrary=this.s.promiseLibrary,t.readPreference?t.readPreference=M(t.readPreference):t.readPreference=this.s.readPreference||f.primary,this.serverConfig.capabilities().hasListCollectionsCommand){var n=t.batchSize?{batchSize:t.batchSize}:{},r={listCollections:!0,filter:e,cursor:n};return t.cursorFactory=l,n=this.s.topology.cursor(h(\"%s.$cmd\",this.s.databaseName),r,t),t.readPreference&&n.setReadPreference(t.readPreference),n}this.serverConfig.capabilities().hasListCollectionsCommand||\"string\"!=typeof e.name||new RegExp(\"^\"+this.databaseName+\"\\\\.\").test(e.name)||((e=s(e)).name=h(\"%s.%s\",this.s.databaseName,e.name)),null==e&&(e.name=h(\"/%s/\",this.s.databaseName)),e=e.name?{$and:[{name:e.name},{name:/^((?!\\$).)*$/}]}:{name:/^((?!\\$).)*$/};var o,i,a={transforms:(o=this.s.databaseName,i=h(\"%s.\",o),{doc:function(e){var t=e.name.indexOf(i);return e.name&&0===t&&(e.name=e.name.substr(t+i.length)),e}})};return n=this.collection(I.SYSTEM_NAMESPACE_COLLECTION).find(e,a),t.readPreference&&n.setReadPreference(t.readPreference),t.batchSize&&(n=n.batchSize(t.batchSize)),n},T.classMethod(\"listCollections\",{callback:!1,promise:!1,returns:[l]});var P=function(e,t,n,r,o){var i=t,s=[];if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new y(\"topology was destroyed\"));i&&\"Code\"===i._bsontype||(i=new g(i)),null==n||Array.isArray(n)||\"function\"==typeof n?null!=n&&Array.isArray(n)&&\"function\"!=typeof n&&(s=n):s=[n];var a={$eval:i,args:s};r.nolock&&(a.nolock=r.nolock),r.readPreference=new f(f.PRIMARY),e.command(a,r,function(e,t){return e?u(o,e,null):t&&1===t.ok?u(o,null,t.retval):t?u(o,y.create({message:h(\"eval failed: %s\",t.errmsg),driver:!0}),null):void u(o,e,t)})};I.prototype.eval=function(e,t,n,r){var o=Array.prototype.slice.call(arguments,1);return r=\"function\"==typeof o[o.length-1]?o.pop():void 0,t=o.length?o.shift():t,n=o.length&&o.shift()||{},O(this.s.topology,P,[this,e,t,n,r])},T.classMethod(\"eval\",{callback:!0,promise:!0}),I.prototype.renameCollection=function(e,t,n,r){\"function\"==typeof n&&(r=n,n={}),(n=n||{}).new_collection=!0;const o=this.collection(e);return O(this.s.topology,o.rename.bind(o),[t,n,r])},T.classMethod(\"renameCollection\",{callback:!0,promise:!0}),I.prototype.dropCollection=function(e,t,n){\"function\"==typeof t&&(n=t,t={});var r={drop:e};B(r,this,t=t||{});const o=Object.assign({},this.s.options,{readPreference:f.PRIMARY});return t.session&&(o.session=t.session),O(this.s.topology,D,[this,r,o,n])};const D=(e,t,n,r)=>e.command(t,n,function(t,n){return e.serverConfig&&e.serverConfig.isDestroyed()?r(new y(\"topology was destroyed\")):t?u(r,t):n.ok?u(r,null,!0):void u(r,null,!1)});T.classMethod(\"dropCollection\",{callback:!0,promise:!0}),I.prototype.dropDatabase=function(e,t){\"function\"==typeof e&&(t=e,e={});var n={dropDatabase:1};B(n,this,e=e||{});const r=Object.assign({},{readPreference:f.PRIMARY},this.s.options);return e.session&&(r.session=e.session),O(this.s.topology,L,[this,n,r,t])};const L=(e,t,n,r)=>{e.command(t,n,function(t,n){return e.serverConfig&&e.serverConfig.isDestroyed()?r(new y(\"topology was destroyed\")):null!=r?t?u(r,t,null):void u(r,null,!!n.ok):void 0})};T.classMethod(\"dropDatabase\",{callback:!0,promise:!0}),I.prototype.collections=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},O(this.s.topology,R,[this,e,t])};var R=function(e,t,n){e.listCollections({},t).toArray(function(t,r){if(null!=t)return u(n,t,null);r=r.filter(function(e){return-1===e.name.indexOf(\"$\")}),u(n,null,r.map(function(t){return new w(e,e.s.topology,e.s.databaseName,t.name,e.s.pkFactory,e.s.options)}))})};T.classMethod(\"collections\",{callback:!0,promise:!0}),I.prototype.executeDbAdminCommand=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),(t=t||{}).readPreference&&(t.readPreference=M(t.readPreference)),O(this.s.topology,z,[this,e,t,n])};const z=(e,t,n,r)=>{e.s.topology.command(\"admin.$cmd\",t,n,function(t,n){return e.serverConfig&&e.serverConfig.isDestroyed()?r(new y(\"topology was destroyed\")):t?u(r,t):void u(r,null,n.result)})};T.classMethod(\"executeDbAdminCommand\",{callback:!0,promise:!0}),I.prototype.createIndex=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n={}),n=n?s(n):{},O(this.s.topology,q,[this,e,t,n,r])};var q=function(e,t,n,r,o){var i=Object.assign({},{readPreference:f.PRIMARY},r);if((i=Z(i,e,r)).writeConcern&&\"function\"!=typeof o)throw y.create({message:\"Cannot use a writeConcern without a provided callback\",driver:!0});if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new y(\"topology was destroyed\"));G(e,t,n,r,function(s,a){if(null==s)return u(o,s,a);if(67===s.code||11e3===s.code||85===s.code||11600===s.code)return u(o,s,a);var c=Y(e,t,n,r);i.checkKeys=!1,e.s.topology.insert(h(\"%s.%s\",e.s.databaseName,I.SYSTEM_INDEX_COLLECTION),c,i,function(e,t){if(null!=o)return e?u(o,e):null==t?u(o,null,null):t.result.writeErrors?u(o,y.create(t.result.writeErrors[0]),null):void u(o,null,c.name)})})};T.classMethod(\"createIndex\",{callback:!0,promise:!0}),I.prototype.ensureIndex=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n={}),n=n||{},O(this.s.topology,U,[this,e,t,n,r])};var U=function(e,t,n,r,o){var i=Z({},e,r),s=Y(e,t,n,r).name;if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new y(\"topology was destroyed\"));i.readPreference=f.PRIMARY,e.indexInformation(t,i,function(i,a){if(null!=i&&26!==i.code)return u(o,i,null);if(null!=a&&a[s]){if(\"function\"==typeof o)return u(o,null,s)}else e.createIndex(t,n,r,o)})};T.classMethod(\"ensureIndex\",{callback:!0,promise:!0}),I.prototype.addChild=function(e){if(this.s.parentDb)return this.s.parentDb.addChild(e);this.s.children.push(e)};var F=function(e,t,n,r,o){if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new y(\"topology was destroyed\"));!function(e,t,n,r,o){if(\"string\"==typeof t&&null!=n&&\"object\"==typeof n&&(r=n,n=null),\"function\"==typeof r&&(o=r,r={}),null!=r.digestPassword)throw d(\"The digestPassword option is not supported via add_user. Please use db.command('createUser', ...) instead for this option.\");var i=null!=r.customData?r.customData:{},s=Array.isArray(r.roles)?r.roles:[],a=\"number\"==typeof r.maxTimeMS?r.maxTimeMS:null;0===s.length&&console.log(\"Creating a user without roles is deprecated in MongoDB >= 2.6\");var c={writeCommand:!0};r.dbName&&(c.dbName=r.dbName),null!=a&&(c.maxTimeMS=a),\"admin\"!==e.databaseName.toLowerCase()&&\"admin\"!==r.dbName||Array.isArray(r.roles)?Array.isArray(r.roles)||(s=[\"dbOwner\"]):s=[\"root\"];var l={createUser:t,customData:i,roles:s,digestPassword:!1};l=Z(l,e,r);var p=S.createHash(\"md5\");p.update(t+\":mongo:\"+n);var h=p.digest(\"hex\");\"string\"==typeof n&&(l.pwd=h),c.readPreference=f.primary,e.command(l,c,function(e,n){return e&&0===e.ok&&void 0===e.code?u(o,{code:-5e3},null):e?u(o,e,null):void u(o,n.ok?null:d(n),n.ok?[{user:t,pwd:\"\"}]:null)})}(e,t,n,r,function(i,a){if(i&&-5e3===i.code){var c=Z(s(r),e,r),l=S.createHash(\"md5\");l.update(t+\":mongo:\"+n);var p=l.digest(\"hex\"),d=(r.dbName?new I(r.dbName,e.s.topology,e.s.options):e).collection(I.SYSTEM_USER_COLLECTION);d.count({},c,function(e,n){if(null!=e)return u(o,e,null);d.find({user:t},{dbName:r.dbName},c).toArray(function(e){if(null!=e)return u(o,e,null);c.upsert=!0,d.update({user:t},{$set:{user:t,pwd:p}},c,function(e){return 0===n&&e?u(o,null,[{user:t,pwd:p}]):e?u(o,e,null):void u(o,null,[{user:t,pwd:p}])})})})}else{if(i)return u(o,i);u(o,i,a)}})};I.prototype.addUser=function(e,t,n,r){var o=Array.prototype.slice.call(arguments,2);return r=\"function\"==typeof o[o.length-1]?o.pop():void 0,n=o.length&&o.shift()||{},O(this.s.topology,F,[this,e,t,n,r])},T.classMethod(\"addUser\",{callback:!0,promise:!0});var H=function(e,t,n,r){!function(e,t,n,r){if(\"function\"==typeof n&&(r=n,n={}),n=n||{},e.serverConfig&&e.serverConfig.isDestroyed())return r(new y(\"topology was destroyed\"));var o={writeCommand:!0};n.dbName&&(o.dbName=n.dbName);var i=\"number\"==typeof n.maxTimeMS?n.maxTimeMS:null;null!=i&&(o.maxTimeMS=i);var s={dropUser:t};s=Z(s,e,n),o.readPreference=f.primary,e.command(s,o,function(e,t){return e&&!e.ok&&void 0===e.code?u(r,{code:-5e3}):e?u(r,e,null):void u(r,null,!!t.ok)})}(e,t,n,function(o,i){if(o&&-5e3===o.code){var a=Z(s(n),e,n),c=(n.dbName?new I(n.dbName,e.s.topology,e.s.options):e).collection(I.SYSTEM_USER_COLLECTION);c.findOne({user:t},a,function(e,n){if(null==n)return u(r,e,!1);c.remove({user:t},a,function(e){u(r,e,!0)})})}else{if(o)return u(r,o);u(r,o,i)}})};T.classMethod(\"removeUser\",{callback:!0,promise:!0}),I.prototype.removeUser=function(e,t,n){var r=Array.prototype.slice.call(arguments,1);return n=\"function\"==typeof r[r.length-1]?r.pop():void 0,t=r.length&&r.shift()||{},O(this.s.topology,H,[this,e,t,n])},I.prototype.setProfilingLevel=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{},O(this.s.topology,V,[this,e,t,n])};var V=function(e,t,n,r){var o={},i=0;if(\"off\"===t)i=0;else if(\"slow_only\"===t)i=1;else{if(\"all\"!==t)return r(new Error(\"Error: illegal profiling level value \"+t));i=2}o.profile=i,e.command(o,n,function(e,n){return null==e&&1===n.ok?r(null,t):r(null!=e?e:new Error(\"Error with profile command\"),null)})};T.classMethod(\"setProfilingLevel\",{callback:!0,promise:!0}),I.prototype.profilingInfo=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},O(this.s.topology,$,[this,e,t])};var $=function(e,t,n){try{e.collection(\"system.profile\").find({},null,t).toArray(n)}catch(e){return n(e,null)}};T.classMethod(\"profilingInfo\",{callback:!0,promise:!0}),I.prototype.profilingLevel=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},O(this.s.topology,W,[this,e,t])};var W=function(e,t,n){e.command({profile:-1},t,function(e,t){if(null==e&&1===t.ok){var r=t.was;return 0===r?n(null,\"off\"):1===r?n(null,\"slow_only\"):2===r?n(null,\"all\"):n(new Error(\"Error: illegal profiling level value \"+r),null)}n(null!=e?e:new Error(\"Error with profile command\"),null)})};T.classMethod(\"profilingLevel\",{callback:!0,promise:!0}),I.prototype.indexInformation=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{},O(this.s.topology,K,[this,e,t,n])};var K=function(e,t,n,r){var o=null!=n.full&&n.full;if(e.serverConfig&&e.serverConfig.isDestroyed())return r(new y(\"topology was destroyed\"));e.collection(t).listIndexes(n).toArray(function(e,t){return e?r(d(e)):Array.isArray(t)?o?u(r,null,t):void u(r,null,function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];for(var o in t[r.name]=[],r.key)t[r.name].push([o,r.key[o]])}return t}(t)):u(r,null,[])})};T.classMethod(\"indexInformation\",{callback:!0,promise:!0});var Y=function(e,t,n,r){var o=a(n),i=o.fieldHash,s=\"string\"==typeof r.name?r.name:o.name,c={ns:e.databaseName+\".\"+t,key:i,name:s},l=null!=r&&\"object\"!=typeof r&&r;r=null==r||\"boolean\"==typeof r?{}:r;var u=Object.keys(c);for(var p in r)-1===u.indexOf(p)&&(c[p]=r[p]);null==c.unique&&(c.unique=l);for(var d=[\"w\",\"wtimeout\",\"j\",\"fsync\",\"readPreference\"],f=0;f<d.length;f++)delete c[d[f]];return c},G=function(e,t,n,r,o){var i=a(n),s=\"string\"==typeof r.name?r.name:i.name,c=[{name:s,key:i.fieldHash}],l=Object.keys(c[0]).concat([\"w\",\"wtimeout\",\"j\",\"fsync\",\"readPreference\",\"session\"]);for(var p in r)-1===l.indexOf(p)&&(c[0][p]=r[p]);var m=e.s.topology.capabilities();if(c[0].collation&&m&&!m.commandsTakeCollation){var g=new y(h(\"server/primary/mongos does not support collation\"));return g.code=67,o(g)}var v=Z({createIndexes:t,indexes:c},e,r);B(v,e,r),r.readPreference=f.PRIMARY,e.command(v,r,function(e,t){return e?u(o,e,null):0===t.ok?u(o,d(t),null):void u(o,null,s)})},J=function(e){if(\"string\"!=typeof e)throw y.create({message:\"database name must be a string\",driver:!0});if(0===e.length)throw y.create({message:\"database name cannot be the empty string\",driver:!0});if(\"$external\"!==e)for(var t=[\" \",\".\",\"$\",\"/\",\"\\\\\"],n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))throw y.create({message:\"database names cannot contain the character '\"+t[n]+\"'\",driver:!0})},Z=function(e,t,n){if(null!=n.w||null!=n.j||null!=n.fsync){var r={};n.w&&(r.w=n.w),n.wtimeout&&(r.wtimeout=n.wtimeout),n.j&&(r.j=n.j),n.fsync&&(r.fsync=n.fsync),e.writeConcern=r}else null==t.writeConcern.w&&null==t.writeConcern.j&&null==t.writeConcern.fsync||(e.writeConcern=t.writeConcern);return e},X=function(e,t,n){return function(r){if(n.listeners(t).length>0){n.emit(t,r,e);for(var o=0;o<e.s.children.length;o++)e.s.children[o].emit(t,r,e.s.children[o])}}};I.prototype.unref=function(){this.s.topology.unref()},I.SYSTEM_NAMESPACE_COLLECTION=\"system.namespaces\",I.SYSTEM_INDEX_COLLECTION=\"system.indexes\",I.SYSTEM_PROFILE_COLLECTION=\"system.profile\",I.SYSTEM_USER_COLLECTION=\"system.users\",I.SYSTEM_COMMAND_COLLECTION=\"$cmd\",I.SYSTEM_JS_COLLECTION=\"system.js\",e.exports=I},function(e,t,n){\"use strict\";var r=n(3).BSON.Long,o=n(3).MongoError,i=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:function(){return n}})},s=function(e){if(!(this instanceof s))return new s(e);i(this,\"code\",e.code),i(this,\"errmsg\",e.errmsg),this.toJSON=function(){return{code:e.code,errmsg:e.errmsg}},this.toString=function(){return\"WriteConcernError(\"+e.errmsg+\")\"}},a=function(e){if(!(this instanceof a))return new a(e);i(this,\"code\",e.code),i(this,\"index\",e.index),i(this,\"errmsg\",e.errmsg),this.getOperation=function(){return e.op},this.toJSON=function(){return{code:e.code,index:e.index,errmsg:e.errmsg,op:e.op}},this.toString=function(){return\"WriteError(\"+JSON.stringify(this.toJSON())+\")\"}};const c=function(e,t){var n=e.err||e.errmsg||e.errMessage||e;o.call(this,n);for(var r=\"object\"==typeof e?Object.keys(e):[],i=0;i<r.length;i++)this[r[i]]=e[r[i]];this.name=\"BulkWriteError\",this.result=t};n(0).inherits(c,o),t.BulkWriteError=c,t.BulkWriteResult=function(e){i(this,\"ok\",e.ok),i(this,\"nInserted\",e.nInserted),i(this,\"nUpserted\",e.nUpserted),i(this,\"nMatched\",e.nMatched),i(this,\"nModified\",e.nModified),i(this,\"nRemoved\",e.nRemoved),this.getInsertedIds=function(){return e.insertedIds},this.getUpsertedIds=function(){return e.upserted},this.getUpsertedIdAt=function(t){return e.upserted[t]},this.getRawResponse=function(){return e},this.hasWriteErrors=function(){return e.writeErrors.length>0},this.getWriteErrorCount=function(){return e.writeErrors.length},this.getWriteErrorAt=function(t){return t<e.writeErrors.length?e.writeErrors[t]:null},this.getWriteErrors=function(){return e.writeErrors},this.getLastOp=function(){return e.lastOp},this.getWriteConcernError=function(){if(0===e.writeConcernErrors.length)return null;if(1===e.writeConcernErrors.length)return e.writeConcernErrors[0];for(var t=\"\",n=0;n<e.writeConcernErrors.length;n++)t+=e.writeConcernErrors[n].errmsg,0===n&&(t+=\" and \");return new s({errmsg:t,code:64})},this.toJSON=function(){return e},this.toString=function(){return\"BulkWriteResult(\"+this.toJSON(e)+\")\"},this.isOk=function(){return 1===e.ok}},t.WriteError=a,t.Batch=function(e,t){this.originalZeroIndex=t,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0},t.LegacyOp=function(e,t,n){this.batchType=e,this.index=n,this.operation=t},t.mergeBatchResults=function(e,t,n,o,i){if(o)i=o;else if(i&&i.result)i=i.result;else if(null==i)return;if(0!==i.ok||1!==n.ok){if(0!==i.ok||0!==n.ok){if(i.opTime||i.lastOp){var c=i.lastOp||i.opTime,l=null,u=null;if(c&&\"Timestamp\"===c._bsontype)null==n.lastOp?n.lastOp=c:c.greaterThan(n.lastOp)&&(n.lastOp=c);else{n.lastOp&&(l=\"number\"==typeof n.lastOp.ts?r.fromNumber(n.lastOp.ts):n.lastOp.ts,u=\"number\"==typeof n.lastOp.t?r.fromNumber(n.lastOp.t):n.lastOp.t);var p=\"number\"==typeof c.ts?r.fromNumber(c.ts):c.ts,d=\"number\"==typeof c.t?r.fromNumber(c.t):c.t;null==n.lastOp?n.lastOp=c:p.greaterThan(l)?n.lastOp=c:p.equals(l)&&d.greaterThan(u)&&(n.lastOp=c)}}1===t.batchType&&i.n&&(n.nInserted=n.nInserted+i.n),3===t.batchType&&i.n&&(n.nRemoved=n.nRemoved+i.n);var f=0;if(Array.isArray(i.upserted)){f=i.upserted.length;for(var h=0;h<i.upserted.length;h++)n.upserted.push({index:i.upserted[h].index+t.originalZeroIndex,_id:i.upserted[h]._id})}else i.upserted&&(f=1,n.upserted.push({index:t.originalZeroIndex,_id:i.upserted}));if(2===t.batchType&&i.n){var m=i.nModified;n.nUpserted=n.nUpserted+f,n.nMatched=n.nMatched+(i.n-f),n.nModified=\"number\"==typeof m?n.nModified+m:null}if(Array.isArray(i.writeErrors))for(h=0;h<i.writeErrors.length;h++)g={index:t.originalZeroIndex+i.writeErrors[h].index,code:i.writeErrors[h].code,errmsg:i.writeErrors[h].errmsg,op:t.operations[i.writeErrors[h].index]},n.writeErrors.push(new a(g));i.writeConcernError&&n.writeConcernErrors.push(new s(i.writeConcernError))}}else{n.ok=0;var g={index:0,code:i.code||0,errmsg:i.message,op:t.operations[0]};n.writeErrors.push(new a(g))}},t.cloneOptions=function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r++)t[n[r]]=e[n[r]];return t},t.writeConcern=function(e,t,n){var r={};return t.writeConcern&&null!=t.writeConcern.w&&(r.w=t.writeConcern.w),t.writeConcern&&null!=t.writeConcern.j&&(r.j=t.writeConcern.j),t.writeConcern&&null!=t.writeConcern.fsync&&(r.fsync=t.writeConcern.fsync),t.writeConcern&&null!=t.writeConcern.wtimeout&&(r.wtimeout=t.writeConcern.wtimeout),n&&null!=n.w&&(r.w=n.w),n&&null!=n.wtimeout&&(r.wtimeout=n.wtimeout),n&&null!=n.j&&(r.j=n.j),n&&null!=n.fsync&&(r.fsync=n.fsync),r},t.INVALID_BSON_ERROR=22,t.WRITE_CONCERN_ERROR=64,t.MULTIPLE_ERROR=65,t.UNKNOWN_ERROR=8,t.INSERT=1,t.UPDATE=2,t.REMOVE=3},function(e,t,n){\"use strict\";var r=n(28),o=n(13).retrieveBSON,i=n(6).MongoError,s=n(6).MongoNetworkError,a=n(0).format,c=o().Long,l=function(e,t,n,o,i,s){o=o||{},this.pool=null,this.server=null,this.disconnectHandler=o.disconnectHandler,this.bson=e,this.ns=t,this.cmd=n,this.options=o,this.topology=i,this.cursorState={cursorId:null,cmd:n,documents:o.documents||[],cursorIndex:0,dead:!1,killed:!1,init:!1,notified:!1,limit:o.limit||n.limit||0,skip:o.skip||n.skip||0,batchSize:o.batchSize||n.batchSize||1e3,currentLimit:0,transforms:o.transforms},\"boolean\"==typeof s.promoteLongs?this.cursorState.promoteLongs=s.promoteLongs:\"boolean\"==typeof o.promoteLongs?this.cursorState.promoteLongs=o.promoteLongs:\"object\"==typeof o.session&&(this.cursorState.session=o.session),\"boolean\"==typeof s.promoteValues?this.cursorState.promoteValues=s.promoteValues:\"boolean\"==typeof o.promoteValues&&(this.cursorState.promoteValues=o.promoteValues),\"boolean\"==typeof s.promoteBuffers?this.cursorState.promoteBuffers=s.promoteBuffers:\"boolean\"==typeof o.promoteBuffers&&(this.cursorState.promoteBuffers=o.promoteBuffers),s.reconnect&&(this.cursorState.reconnect=s.reconnect),this.logger=r(\"Cursor\",s),\"number\"==typeof n?(this.cursorState.cursorId=c.fromNumber(n),this.cursorState.lastCursorId=this.cursorState.cursorId):n instanceof c&&(this.cursorState.cursorId=n,this.cursorState.lastCursorId=n)};l.prototype.setCursorBatchSize=function(e){this.cursorState.batchSize=e},l.prototype.cursorBatchSize=function(){return this.cursorState.batchSize},l.prototype.setCursorLimit=function(e){this.cursorState.limit=e},l.prototype.cursorLimit=function(){return this.cursorState.limit},l.prototype.setCursorSkip=function(e){this.cursorState.skip=e},l.prototype.cursorSkip=function(){return this.cursorState.skip};var u=function(e,t,n){try{e(t,n)}catch(t){process.nextTick(function(){throw t})}};l.prototype._find=function(e){var t=this;t.logger.isDebug()&&t.logger.debug(a(\"issue initial query [%s] with flags [%s]\",JSON.stringify(t.cmd),JSON.stringify(t.query)));var n={};(t.options.raw||t.cmd.raw)&&(n.raw=t.options.raw||t.cmd.raw),\"string\"==typeof t.query.documentsReturnedIn&&(n.documentsReturnedIn=t.query.documentsReturnedIn),\"boolean\"==typeof t.cursorState.promoteLongs&&(n.promoteLongs=t.cursorState.promoteLongs),\"boolean\"==typeof t.cursorState.promoteValues&&(n.promoteValues=t.cursorState.promoteValues),\"boolean\"==typeof t.cursorState.promoteBuffers&&(n.promoteBuffers=t.cursorState.promoteBuffers),\"object\"==typeof t.cursorState.session&&(n.session=t.cursorState.session),t.server.s.pool.write(t.query,n,function(n,r){if(n)return e(n);var o=r.message;if(o.queryFailure)return e(new i(o.documents[0]),null);if(Array.isArray(o.documents)&&1===o.documents.length&&(!t.cmd.find||t.cmd.find&&!1===t.cmd.virtual)&&(\"string\"!==o.documents[0].cursor||o.documents[0].$err||o.documents[0].errmsg||Array.isArray(o.documents[0].result))){if(o.documents[0].$err||o.documents[0].errmsg)return e(new i(o.documents[0]),null);if(null!=o.documents[0].cursor&&\"string\"!=typeof o.documents[0].cursor){var s=o.documents[0].cursor.id;return o.documents[0].cursor.ns&&(t.ns=o.documents[0].cursor.ns),t.cursorState.cursorId=\"number\"==typeof s?c.fromNumber(s):s,t.cursorState.lastCursorId=t.cursorState.cursorId,Array.isArray(o.documents[0].cursor.firstBatch)&&(t.cursorState.documents=o.documents[0].cursor.firstBatch),e(null,o)}if(Array.isArray(o.documents[0].result))return t.cursorState.documents=o.documents[0].result,t.cursorState.cursorId=c.ZERO,e(null,o)}t.cursorState.cursorId=o.cursorId,t.cursorState.documents=o.documents,t.cursorState.lastCursorId=o.cursorId,t.cursorState.transforms&&\"function\"==typeof t.cursorState.transforms.query&&(t.cursorState.documents=t.cursorState.transforms.query(o)),e(null,o)})},l.prototype._getmore=function(e){this.logger.isDebug()&&this.logger.debug(a(\"schedule getMore call for query [%s]\",JSON.stringify(this.query)));var t=this.options.raw||this.cmd.raw,n=this.cursorState.batchSize;this.cursorState.limit>0&&this.cursorState.currentLimit+n>this.cursorState.limit&&(n=this.cursorState.limit-this.cursorState.currentLimit);var r=this.server.s.pool;this.server.wireProtocolHandler.getMore(this.bson,this.ns,this.cursorState,n,t,r,this.options,e)},l.prototype._killcursor=function(e){if(this.cursorState.dead=!0,this.cursorState.killed=!0,this.cursorState.documents=[],null==this.cursorState.cursorId||this.cursorState.cursorId.isZero()||!1===this.cursorState.init)e&&e(null,null);else{var t=this.server.s.pool;this.server.wireProtocolHandler.killCursor(this.bson,this.ns,this.cursorState,t,e)}},l.prototype.clone=function(){return this.topology.cursor(this.ns,this.cmd,this.options)},l.prototype.isDead=function(){return!0===this.cursorState.dead},l.prototype.isKilled=function(){return!0===this.cursorState.killed},l.prototype.isNotified=function(){return!0===this.cursorState.notified},l.prototype.bufferedCount=function(){return this.cursorState.documents.length-this.cursorState.cursorIndex},l.prototype.readBufferedDocuments=function(e){var t=this.cursorState.documents.length-this.cursorState.cursorIndex,n=e<t?e:t,r=this.cursorState.documents.slice(this.cursorState.cursorIndex,this.cursorState.cursorIndex+n);if(this.cursorState.transforms&&\"function\"==typeof this.cursorState.transforms.doc)for(var o=0;o<r.length;o++)r[o]=this.cursorState.transforms.doc(r[o]);return this.cursorState.limit>0&&this.cursorState.currentLimit+r.length>this.cursorState.limit&&(r=r.slice(0,this.cursorState.limit-this.cursorState.currentLimit),this.kill()),this.cursorState.currentLimit=this.cursorState.currentLimit+r.length,this.cursorState.cursorIndex=this.cursorState.cursorIndex+r.length,r},l.prototype.kill=function(e){this._killcursor(e)},l.prototype.rewind=function(){this.cursorState.init&&(this.cursorState.dead||this.kill(),this.cursorState.currentLimit=0,this.cursorState.init=!1,this.cursorState.dead=!1,this.cursorState.killed=!1,this.cursorState.notified=!1,this.cursorState.documents=[],this.cursorState.cursorId=null,this.cursorState.cursorIndex=0)};var p=function(e,t){return!(!e.pool||!e.pool.isDestroyed())&&(e.cursorState.notified=!0,e.cursorState.killed=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,t(new s(a(\"connection to host %s:%s was destroyed\",e.pool.host,e.pool.port))),!0)},d=function(e,t){e.cursorState.dead=!0,e.cursorState.notified=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,u(t,null,null)},f=function(e,t){if(e.cursorState.notified)return t(new Error(\"cursor is exhausted\"));if(!function(e,t){return!!e.cursorState.killed&&(e.cursorState.notified=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,u(t,null,null),!0)}(e,t)&&!function(e,t){return!(!e.cursorState.dead||e.cursorState.killed||(e.cursorState.notified=!0,e.cursorState.killed=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,u(t,null,null),0))}(e,t)&&!function(e,t){return!(!e.cursorState.dead||!e.cursorState.killed||(u(t,new i(\"cursor is dead\")),0))}(e,t)){if(!e.cursorState.init){if(!e.topology.isConnected(e.options)){if(\"server\"===e.topology._type&&!e.topology.s.options.reconnect)return t(new i(\"no connection available\"));if(null!=e.disconnectHandler)return e.topology.isDestroyed()?t(new i(\"Topology was destroyed\")):e.disconnectHandler.addObjectAndMethod(\"cursor\",e,\"next\",[t],t)}try{e.server=e.topology.getServer(e.options)}catch(n){return null!=e.disconnectHandler?e.disconnectHandler.addObjectAndMethod(\"cursor\",e,\"next\",[t],t):t(n)}if(e.cursorState.init=!0,e.cmd&&e.cmd.collation&&e.server.ismaster.maxWireVersion<5)return t(new i(a(\"server %s does not support collation\",e.server.name)));try{e.query=e.server.wireProtocolHandler.command(e.bson,e.ns,e.cmd,e.cursorState,e.topology,e.options)}catch(e){return t(e)}}if(null==e.cursorState.cursorId){if(p(e,t))return;if(e.topology.isDestroyed())return t(new s(\"connection destroyed, not possible to instantiate cursor\"));e._find(function(n){return n?u(t,n,null):0===e.cursorState.documents.length&&e.cursorState.cursorId&&e.cursorState.cursorId.isZero()&&!e.cmd.tailable&&!e.cmd.awaitData?function(e,t){e.cursorState.notified=!0,e.cursorState.documents=[],e.cursorState.cursorIndex=0,u(t,null,null)}(e,t):void f(e,t)})}else{if(e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit)return e.kill(),d(e,t);if(e.cursorState.cursorIndex!==e.cursorState.documents.length||c.ZERO.equals(e.cursorState.cursorId)){if(e.cursorState.documents.length===e.cursorState.cursorIndex&&e.cmd.tailable&&c.ZERO.equals(e.cursorState.cursorId))return u(t,new i({message:\"No more documents in tailed cursor\",tailable:e.cmd.tailable,awaitData:e.cmd.awaitData}));if(e.cursorState.documents.length===e.cursorState.cursorIndex&&c.ZERO.equals(e.cursorState.cursorId))d(e,t);else{if(e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit)return e.kill(),d(e,t);e.cursorState.currentLimit+=1;var n=e.cursorState.documents[e.cursorState.cursorIndex++];if(!n||n.$err)return e.kill(),d(e,function(){u(t,new i(n?n.$err:void 0))});e.cursorState.transforms&&\"function\"==typeof e.cursorState.transforms.doc&&(n=e.cursorState.transforms.doc(n)),u(t,null,n)}}else{if(e.cursorState.documents=[],e.cursorState.cursorIndex=0,e.topology.isDestroyed())return t(new s(\"connection destroyed, not possible to instantiate cursor\"));if(p(e,t))return;e._getmore(function(n,r,o){return n?u(t,n):(e.connection=o,0===e.cursorState.documents.length&&e.cmd.tailable&&c.ZERO.equals(e.cursorState.cursorId)?u(t,new i({message:\"No more documents in tailed cursor\",tailable:e.cmd.tailable,awaitData:e.cmd.awaitData})):0===e.cursorState.documents.length&&e.cmd.tailable&&!c.ZERO.equals(e.cursorState.cursorId)?f(e,t):e.cursorState.limit>0&&e.cursorState.currentLimit>=e.cursorState.limit?d(e,t):void f(e,t))})}}}};l.prototype.next=function(e){f(this,e)},e.exports=l},function(e,t,n){\"use strict\";var r=n(0).format,o=n(18),i=n(13).retrieveBSON,s=n(15).Query,a=n(6).MongoError,c=i().Binary,l=function(e,t,n){this.db=e,this.username=t,this.password=n};l.prototype.equal=function(e){return e.db===this.db&&e.username===this.username&&e.password===this.password};var u=0,p=function(e){this.bson=e,this.authStore=[],this.id=u++},d={},f=0,h=function(e,t,n){var r=[e,t.toString(\"base64\"),n].join(\"_\");if(void 0!==d[r])return d[r];var i=o.pbkdf2Sync(e,t,n,20,\"sha1\");return f>=200&&(d={},f=0),d[r]=i,f+=1,i};p.prototype.auth=function(e,t,n,i,u,p){var d=this,f=t.length;if(0===f)return p(null,null);for(var g=0,y=null,v=function(t){i=i.replace(\"=\",\"=3D\").replace(\",\",\"=2C\");var v=o.randomBytes(24).toString(\"base64\"),b=r(\"n=%s,r=%s\",i,v),x={saslStart:1,mechanism:\"SCRAM-SHA-1\",payload:new c(r(\"n,,%s\",b)),autoAuthorize:1},w=function(e,t){return e?(g-=1,y=e,!1):t.result.$err?(y=t.result,!1):t.result.errmsg?(y=t.result,!1):(g+=1,!0)},S=function(e,t){var o;w(e,t),0===(o=f-=1)&&g>0?(m(d.authStore,new l(n,i,u)),p(null,!0)):0===o&&(null==y&&(y=new a(r(\"failed to authenticate using scram\"))),p(y,!1))};e(t,new s(d.bson,r(\"%s.$cmd\",n),x,{numberToSkip:0,numberToReturn:1}),function(v,x){if(!1===w(v,x))return 0===(f-=1)&&g>0?(m(d.authStore,new l(n,i,u)),p(null,!0)):0===f?(null==y&&(y=new a(r(\"failed to authenticate using scram\"))),p(y,!1)):void 0;var k=function(e){for(var t={},n=e.split(\",\"),r=0;r<n.length;r++){var o=n[r].split(\"=\");t[o[0]]=o[1]}return t}(x.result.payload.value()),O=parseInt(k.i,10),C=k.s,_=k.r,E=r(\"c=biws,r=%s\",_),I=function(e,t){if(\"string\"!=typeof e)throw new a(\"username must be a string\");if(\"string\"!=typeof t)throw new a(\"password must be a string\");if(0===t.length)throw new a(\"password cannot be empty\");var n=o.createHash(\"md5\");return n.update(e+\":mongo:\"+t,\"utf8\"),n.digest(\"hex\")}(i,u),T=h(I,new Buffer(C,\"base64\"),O),M=o.createHmac(\"sha1\",T);M.update(new Buffer(\"Client Key\"));var N=new Buffer(M.digest(\"base64\"),\"base64\"),A=o.createHash(\"sha1\");A.update(N);var B=new Buffer(A.digest(\"base64\"),\"base64\"),j=[b,x.result.payload.value().toString(\"base64\"),E].join(\",\");(M=o.createHmac(\"sha1\",B)).update(new Buffer(j));var P=new Buffer(M.digest(\"base64\"),\"base64\"),D=[E,r(\"p=%s\",new Buffer(function(e,t){Buffer.isBuffer(e)||(e=new Buffer(e)),Buffer.isBuffer(t)||(t=new Buffer(t));var n=[];if(e.length>t.length)for(var r=0;r<t.length;r++)n.push(e[r]^t[r]);else for(r=0;r<e.length;r++)n.push(e[r]^t[r]);return new Buffer(n)}(N,P)).toString(\"base64\"))].join(\",\"),L={saslContinue:1,conversationId:x.result.conversationId,payload:new c(new Buffer(D))};e(t,new s(d.bson,r(\"%s.$cmd\",n),L,{numberToSkip:0,numberToReturn:1}),function(o,i){if(i&&!1===i.result.done){var a={saslContinue:1,conversationId:i.result.conversationId,payload:new Buffer(0)};e(t,new s(d.bson,r(\"%s.$cmd\",n),a,{numberToSkip:0,numberToReturn:1}),function(e,t){S(e,t)})}else S(o,i)})})},b=function(e){process.nextTick(function(){v(e)})};t.length>0;)b(t.shift())};var m=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};p.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!==e})},p.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0===o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,function(e){0===(o-=1)&&n(e,null)})},e.exports=p},function(e,t,n){\"use strict\";var r=n(0).format,o=n(30),i=n(15).Query,s=n(6).MongoError,a=function(e,t,n,r){this.db=e,this.username=t,this.password=n,this.options=r};a.prototype.equal=function(e){return e.db===this.db&&e.username===this.username&&e.password===this.password};var c=null,l=null;try{c=o(\"kerberos\").Kerberos,l=o(\"kerberos\").processes.MongoAuthProcess}catch(e){}var u=function(e){this.bson=e,this.authStore=[]};u.prototype.auth=function(e,t,n,o,i,l,u){var d=this;if(null==c)return u(new Error(\"Kerberos library is not installed\"));var f=l.gssapiServiceName||\"mongodb\",h=t.length;if(0===h)return u(null,null);for(var g=0,y=null;t.length>0;){!function(t){process.nextTick(function(){p(d,n,o,i,n,f,e,t,l,function(e,t){h-=1,e?y=e:t.result.$err?y=t.result:t.result.errmsg?y=t.result:g+=1,0===h&&g>0?(m(d.authStore,new a(n,o,i,l)),u(null,!0)):0===h&&(null==y&&(y=new s(r(\"failed to authenticate using mongocr\"))),u(y,!1))})})}(t.shift())}};var p=function(e,t,n,r,o,i,s,a,c,u){var p=new l(a.host,a.port,i,c);p.init(n,r,function(i){if(i)return u(i,!1);p.transition(\"\",function(i,c){if(i)return u(i,!1);d(e,p,c,t,n,r,o,s,a,u)})})},d=function(e,t,n,r,o,s,a,c,l,u){var p={saslStart:1,mechanism:\"GSSAPI\",payload:n,autoAuthorize:1};c(l,new i(e.bson,\"$external.$cmd\",p,{numberToSkip:0,numberToReturn:1}),function(n,i){if(n)return u(n,!1);var p=i.result;t.transition(i.result.payload,function(n,i){if(n)return u(n,!1);f(e,t,i,p,r,o,s,a,c,l,u)})})},f=function(e,t,n,r,o,s,a,c,l,u,p){var d={saslContinue:1,conversationId:r.conversationId,payload:n};l(u,new i(e.bson,\"$external.$cmd\",d,{numberToSkip:0,numberToReturn:1}),function(n,r){if(n)return p(n,!1);var i=r.result;t.transition(i.payload,function(n,r){if(n)return p(n,!1);h(e,t,r,i,o,s,a,c,l,u,p)})})},h=function(e,t,n,r,o,s,a,c,l,u,p){var d={saslContinue:1,conversationId:r.conversationId,payload:n};l(u,new i(e.bson,\"$external.$cmd\",d,{numberToSkip:0,numberToReturn:1}),function(e,n){if(e)return p(e,!1);t.transition(null,function(e){if(e)return p(e,null);p(null,n)})})},m=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};u.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!==e})},u.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0===o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,r[i].options,function(e){0===(o-=1)&&n(e,null)})},e.exports=u},function(e,t,n){\"use strict\";var r=n(0).format,o=n(13).retrieveBSON,i=n(15).Query,s=n(6).MongoError,a=o().Binary,c=function(e,t,n){this.db=e,this.username=t,this.password=n};c.prototype.equal=function(e){return e.db===this.db&&e.username===this.username&&e.password===this.password};var l=function(e){this.bson=e,this.authStore=[]};l.prototype.auth=function(e,t,n,o,l,p){var d=this,f=t.length;if(0===f)return p(null,null);for(var h=0,m=null;t.length>0;){!function(t){process.nextTick(function(){var g,y;g=t,y={saslStart:1,mechanism:\"PLAIN\",payload:new a(r(\"\\0%s\\0%s\",o,l)),autoAuthorize:1},e(g,new i(d.bson,\"$external.$cmd\",y,{numberToSkip:0,numberToReturn:1}),function(e,t){f-=1,e?m=e:t.result.$err?m=t.result:t.result.errmsg?m=t.result:h+=1,0===f&&h>0?(u(d.authStore,new c(n,o,l)),p(null,!0)):0===f&&(null==m&&(m=new s(r(\"failed to authenticate using mongocr\"))),p(m,!1))})})}(t.shift())}};var u=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};l.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!==e})},l.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0===o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,function(e){0===(o-=1)&&n(e,null)})},e.exports=l},function(e,t,n){\"use strict\";var r=n(0).format,o=n(15).Query,i=n(6).MongoError,s=function(e,t,n){this.db=e,this.username=t,this.password=n};s.prototype.equal=function(e){return e.db===this.db&&e.username===this.username&&e.password===this.password};var a=function(e){this.bson=e,this.authStore=[]};a.prototype.auth=function(e,t,n,a,l,u){var p=this,d=t.length;if(0===d)return u(null,null);for(var f=0,h=null;t.length>0;){!function(t){process.nextTick(function(){var m,g;m=t,g={authenticate:1,mechanism:\"MONGODB-X509\"},a&&(g.user=a),e(m,new o(p.bson,\"$external.$cmd\",g,{numberToSkip:0,numberToReturn:1}),function(e,t){d-=1,e?h=e:t.result.$err?h=t.result:t.result.errmsg?h=t.result:f+=1,0===d&&f>0?(c(p.authStore,new s(n,a,l)),u(null,!0)):0===d&&(null==h&&(h=new i(r(\"failed to authenticate using mongocr\"))),u(h,!1))})})}(t.shift())}};var c=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};a.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!==e})},a.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0===o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,function(e){0===(o-=1)&&n(e,null)})},e.exports=a},function(e,t,n){\"use strict\";var r=n(0).format,o=n(18),i=n(15).Query,s=n(6).MongoError,a=function(e,t,n){this.db=e,this.username=t,this.password=n};a.prototype.equal=function(e){return e.db===this.db&&e.username===this.username&&e.password===this.password};var c=function(e){this.bson=e,this.authStore=[]},l=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};c.prototype.auth=function(e,t,n,c,u,p){var d=this,f=t.length;if(0===f)return p(null,null);for(var h=0,m=null;t.length>0;){!function(t){process.nextTick(function(){var g;e(g=t,new i(d.bson,r(\"%s.$cmd\",n),{getnonce:1},{numberToSkip:0,numberToReturn:1}),function(t,y){var v=null,b=null;if(null==t){v=y.result.nonce;var x=o.createHash(\"md5\");x.update(c+\":mongo:\"+u,\"utf8\");var w=x.digest(\"hex\");(x=o.createHash(\"md5\")).update(v+c+w,\"utf8\"),b=x.digest(\"hex\")}e(g,new i(d.bson,r(\"%s.$cmd\",n),{authenticate:1,user:c,nonce:v,key:b},{numberToSkip:0,numberToReturn:1}),function(e,t){f-=1,e?m=e:t.result.$err?m=t.result:t.result.errmsg?m=t.result:h+=1,0===f&&h>0?(l(d.authStore,new a(n,c,u)),p(null,!0)):0===f&&(null==m&&(m=new s(r(\"failed to authenticate using mongocr\"))),p(m,!1))})})})}(t.shift())}},c.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!==e})},c.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0===o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,function(e){0===(o-=1)&&n(e,null)})},e.exports=c},function(e,t,n){\"use strict\";var r=n(13).retrieveSnappy(),o=n(157),i={snappy:1,zlib:2};e.exports={compressorIDs:i,uncompressibleCommands:[\"ismaster\",\"saslStart\",\"saslContinue\",\"getnonce\",\"authenticate\",\"createUser\",\"updateUser\",\"copydbSaslStart\",\"copydbgetnonce\",\"copydb\"],compress:function(e,t,n){switch(e.options.agreedCompressor){case\"snappy\":r.compress(t,n);break;case\"zlib\":var i={};e.options.zlibCompressionLevel&&(i.level=e.options.zlibCompressionLevel),o.deflate(t,i,n);break;default:throw new Error('Attempt to compress message using unknown compressor \"'+e.options.agreedCompressor+'\".')}},decompress:function(e,t,n){if(e<0||e>i.length)throw new Error(\"Server sent message compressed using an unsupported compressor. (Received compressor ID \"+e+\")\");switch(e){case i.snappy:r.uncompress(t,n);break;case i.zlib:o.inflate(t,n);break;default:n(null,t)}}}},function(e,t){var n=function(e){if(!(this instanceof n))return new n(e);this._bsontype=\"Int32\",this.value=e};n.prototype.valueOf=function(){return this.value},n.prototype.toJSON=function(){return this.value},e.exports=n,e.exports.Int32=n},function(e,t,n){var r=n(220),o=n(47),i=n(52),s=n(48),a=n(51),c=n(57),l=n(83),u=n(42),p=n(113),d=n(49),f=n(50),h=n(55),m=n(54),g=n(53),y=n(56);r.BSON_INT32_MAX=2147483647,r.BSON_INT32_MIN=-2147483648,r.BSON_INT64_MAX=Math.pow(2,63)-1,r.BSON_INT64_MIN=-Math.pow(2,63),r.JS_INT_MAX=9007199254740992,r.JS_INT_MIN=-9007199254740992,r.Binary=o,r.Code=i,r.DBRef=s,r.Decimal128=a,r.Double=c,r.Int32=l,r.Long=u,r.Map=p,r.MaxKey=d,r.MinKey=f,r.ObjectId=h,r.ObjectID=h,r.BSONRegExp=m,r.Symbol=g,r.Timestamp=y,e.exports=r},function(e,t){e.exports=function(e,t){if(e&&t)for(var n in t)e[n]=t[n];return e}},function(e,t){e.exports=require(\"http\")},function(e,t,n){\"use strict\";e.exports=function(e,t){if(null==t)return function e(t,n){for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?e(o,n):n.push(o)}return n}(e,[]);return function e(t,n,r){for(var o=0;o<t.length;o++){var i=t[o];r>0&&Array.isArray(i)?e(i,n,r-1):n.push(i)}return n}(e,[],t)}},function(e,t,n){\"use strict\";var r=/[\"'&<>]/;e.exports=function(e){var t,n=\"\"+e,o=r.exec(n);if(!o)return n;var i=\"\",s=0,a=0;for(s=o.index;s<n.length;s++){switch(n.charCodeAt(s)){case 34:t=\"&quot;\";break;case 38:t=\"&amp;\";break;case 39:t=\"&#39;\";break;case 60:t=\"&lt;\";break;case 62:t=\"&gt;\";break;default:continue}a!==s&&(i+=n.substring(a,s)),a=s+1,i+=t}return a!==s?i+n.substring(a,s):i}},function(e,t,n){\"use strict\";e.exports=function(e){return String(e).replace(o,i).replace(r,encodeURI)};var r=/(?:[^\\x21\\x25\\x26-\\x3B\\x3D\\x3F-\\x5B\\x5D\\x5F\\x61-\\x7A\\x7E]|%(?:[^0-9A-Fa-f]|[0-9A-Fa-f][^0-9A-Fa-f]|$))+/g,o=/(^|[^\\uD800-\\uDBFF])[\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF]([^\\uDC00-\\uDFFF]|$)/g,i=\"$1$2\"},function(e,t,n){\"use strict\";e.exports=function(e,t){if(!1!==i(e))return o(t,null,e),e;return function(e,t){var n=e.__onFinished;n&&n.queue||(n=e.__onFinished=function(e){function t(n){if(e.__onFinished===t&&(e.__onFinished=null),t.queue){var r=t.queue;t.queue=null;for(var o=0;o<r.length;o++)r[o](n,e)}}return t.queue=[],t}(e),function(e,t){var n,o,i=!1;function s(e){n.cancel(),o.cancel(),i=!0,t(e)}function a(t){e.removeListener(\"socket\",a),i||n===o&&(o=r([[t,\"error\",\"close\"]],s))}n=o=r([[e,\"end\",\"finish\"]],s),e.socket?a(e.socket):(e.on(\"socket\",a),void 0===e.socket&&function(e,t){var n=e.assignSocket;\"function\"==typeof n&&(e.assignSocket=function(e){n.call(this,e),t(e)})}(e,a))}(e,n)),n.queue.push(t)}(e,t),e},e.exports.isFinished=i;var r=n(254),o=\"function\"==typeof setImmediate?setImmediate:function(e){process.nextTick(e.bind.apply(e,arguments))};function i(e){var t=e.socket;return\"boolean\"==typeof e.finished?Boolean(e.finished||t&&!t.writable):\"boolean\"==typeof e.complete?Boolean(e.upgrade||!t||!t.readable||e.complete&&!e.readable):void 0}},function(e,t,n){\"use strict\";var r=n(61),o=n(273),i=n(161),s=n(90),a=n(157);e.exports=function(e,t,n,c,l,u){var p,d,f=u;e._body=!0;var h=null!==f.encoding?f.encoding:null,m=f.verify;try{d=function(e,t,n){var o,i=(e.headers[\"content-encoding\"]||\"identity\").toLowerCase(),s=e.headers[\"content-length\"];if(t('content-encoding \"%s\"',i),!1===n&&\"identity\"!==i)throw r(415,\"content encoding unsupported\",{encoding:i,type:\"encoding.unsupported\"});switch(i){case\"deflate\":o=a.createInflate(),t(\"inflate body\"),e.pipe(o);break;case\"gzip\":o=a.createGunzip(),t(\"gunzip body\"),e.pipe(o);break;case\"identity\":(o=e).length=s;break;default:throw r(415,'unsupported content encoding \"'+i+'\"',{encoding:i,type:\"encoding.unsupported\"})}return o}(e,l,f.inflate),p=d.length,d.length=void 0}catch(e){return n(e)}if(f.length=p,f.encoding=m?null:h,null===f.encoding&&null!==h&&!i.encodingExists(h))return n(r(415,'unsupported charset \"'+h.toUpperCase()+'\"',{charset:h.toLowerCase(),type:\"charset.unsupported\"}));l(\"read body\"),o(d,f,function(o,a){var u;if(o)return u=\"encoding.unsupported\"===o.type?r(415,'unsupported charset \"'+h.toUpperCase()+'\"',{charset:h.toLowerCase(),type:\"charset.unsupported\"}):r(400,o),d.resume(),void s(e,function(){n(r(400,u))});if(m)try{l(\"verify body\"),m(e,t,a,h)}catch(e){return void n(r(403,e,{body:a,type:e.type||\"entity.verify.failed\"}))}var p=a;try{l(\"parse body\"),p=\"string\"!=typeof a&&null!==h?i.decode(a,h):a,e.body=c(p)}catch(e){return void n(r(400,e,{body:p,type:e.type||\"entity.parse.failed\"}))}n()})}},function(e,t){e.exports=require(\"net\")},function(e,t,n){\"use strict\";var r=n(278);function o(e){if(\"number\"==typeof e){if(!o[e])throw new Error(\"invalid status code: \"+e);return e}if(\"string\"!=typeof e)throw new TypeError(\"code must be a number or string\");var t=parseInt(e,10);if(!isNaN(t)){if(!o[t])throw new Error(\"invalid status code: \"+t);return t}if(!(t=o[e.toLowerCase()]))throw new Error('invalid status message: \"'+e+'\"');return t}e.exports=o,o.codes=function(e,t){var n=[];return Object.keys(t).forEach(function(r){var o=t[r],i=Number(r);e[i]=o,e[o]=i,e[o.toLowerCase()]=i,n.push(i)}),n}(o,r),o.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},o.empty={204:!0,205:!0,304:!0},o.retry={502:!0,503:!0,504:!0}},function(e,t,n){\"use strict\";var r=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *(\"(?:[\\u000b\\u0020\\u0021\\u0023-\\u005b\\u005d-\\u007e\\u0080-\\u00ff]|\\\\[\\u000b\\u0020-\\u00ff])*\"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,o=/^[\\u000b\\u0020-\\u007e\\u0080-\\u00ff]+$/,i=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,s=/\\\\([\\u000b\\u0020-\\u00ff])/g,a=/([\\\\\"])/g,c=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;function l(e){var t=String(e);if(i.test(t))return t;if(t.length>0&&!o.test(t))throw new TypeError(\"invalid parameter value\");return'\"'+t.replace(a,\"\\\\$1\")+'\"'}t.format=function(e){if(!e||\"object\"!=typeof e)throw new TypeError(\"argument obj is required\");var t=e.parameters,n=e.type;if(!n||!c.test(n))throw new TypeError(\"invalid type\");var r=n;if(t&&\"object\"==typeof t)for(var o,s=Object.keys(t).sort(),a=0;a<s.length;a++){if(o=s[a],!i.test(o))throw new TypeError(\"invalid parameter name\");r+=\"; \"+o+\"=\"+l(t[o])}return r},t.parse=function(e){if(!e)throw new TypeError(\"argument string is required\");var t=\"object\"==typeof e?function(e){var t;\"function\"==typeof e.getHeader?t=e.getHeader(\"content-type\"):\"object\"==typeof e.headers&&(t=e.headers&&e.headers[\"content-type\"]);if(\"string\"!=typeof t)throw new TypeError(\"content-type header is missing from object\");return t}(e):e;if(\"string\"!=typeof t)throw new TypeError(\"argument string is required to be a string\");var n=t.indexOf(\";\"),o=-1!==n?t.substr(0,n).trim():t.trim();if(!c.test(o))throw new TypeError(\"invalid media type\");var i=new function(e){this.parameters=Object.create(null),this.type=e}(o.toLowerCase());if(-1!==n){var a,l,u;for(r.lastIndex=n;l=r.exec(t);){if(l.index!==n)throw new TypeError(\"invalid parameter format\");n+=l[0].length,a=l[1].toLowerCase(),'\"'===(u=l[2])[0]&&(u=u.substr(1,u.length-2).replace(s,\"$1\")),i.parameters[a]=u}if(n!==t.length)throw new TypeError(\"invalid parameter format\")}return i}},function(e,t,n){var r=n(135).ObjectID;t.id=function(e){return null==e?r():\"string\"==typeof e?r.createFromHexString(e):e},t.cast=function e(n){return Array.isArray(n)?n.map(e):(n&&\"object\"==typeof n&&Object.keys(n).forEach(function(r){\"_id\"===r&&n._id?n._id.$in?n._id.$in=n._id.$in.map(t.id):n._id.$nin?n._id.$nin=n._id.$nin.map(t.id):n._id.$ne?n._id.$ne=t.id(n._id.$ne):n._id=t.id(n._id):n[r]=e(n[r])}),n)}},function(e){e.exports={_from:\"mongodb@^2.1.18\",_id:\"mongodb@2.2.35\",_inBundle:!1,_integrity:\"sha512-3HGLucDg/8EeYMin3k+nFWChTA85hcYDCw1lPsWR6yV9A6RgKb24BkLiZ9ySZR+S0nfBjWoIUS7cyV6ceGx5Gg==\",_location:\"/monk/mongodb\",_phantomChildren:{},_requested:{type:\"range\",registry:!0,raw:\"mongodb@^2.1.18\",name:\"mongodb\",escapedName:\"mongodb\",rawSpec:\"^2.1.18\",saveSpec:null,fetchSpec:\"^2.1.18\"},_requiredBy:[\"/monk\"],_resolved:\"https://registry.npmjs.org/mongodb/-/mongodb-2.2.35.tgz\",_shasum:\"cd1b5af8a9463e3f9a787fa5b3d05565579730f9\",_spec:\"mongodb@^2.1.18\",_where:\"/Users/darkua/code/Jodel-Backend-Challenge/node_modules/monk\",author:{name:\"Christian Kvalheim\"},bugs:{url:\"https://github.com/mongodb/node-mongodb-native/issues\"},bundleDependencies:!1,dependencies:{\"es6-promise\":\"3.2.1\",\"mongodb-core\":\"2.1.19\",\"readable-stream\":\"2.2.7\"},deprecated:!1,description:\"The official MongoDB driver for Node.js\",devDependencies:{JSONStream:\"^1.0.7\",betterbenchmarks:\"^0.1.0\",bluebird:\"3.4.6\",bson:\"latest\",\"cli-table\":\"^0.3.1\",co:\"4.6.0\",colors:\"^1.1.2\",\"conventional-changelog-cli\":\"^1.3.5\",coveralls:\"^2.11.6\",eslint:\"^3.8.1\",\"event-stream\":\"^3.3.2\",gleak:\"0.5.0\",integra:\"0.1.8\",jsdoc:\"3.4.0\",\"ldjson-stream\":\"^1.2.1\",\"mongodb-extended-json\":\"1.7.1\",\"mongodb-topology-manager\":\"1.0.x\",\"mongodb-version-manager\":\"github:christkv/mongodb-version-manager#master\",nyc:\"^8.1.0\",optimist:\"0.6.1\",rimraf:\"2.5.4\",semver:\"5.3.0\",\"worker-farm\":\"^1.3.1\"},engines:{node:\">=0.10.3\"},homepage:\"https://github.com/mongodb/node-mongodb-native\",keywords:[\"mongodb\",\"driver\",\"official\"],license:\"Apache-2.0\",main:\"index.js\",name:\"mongodb\",nyc:{include:[\"lib/**/*.js\"]},repository:{type:\"git\",url:\"git+ssh://git@github.com/mongodb/node-mongodb-native.git\"},scripts:{changelog:\"conventional-changelog -p angular -i HISTORY.md -s\",coverage:\"nyc node test/runner.js -t functional && node_modules/.bin/nyc report --reporter=text-lcov | node_modules/.bin/coveralls\",lint:\"eslint lib\",test:\"node test/runner.js -t functional\"},version:\"2.2.35\"}},function(e,t,n){var r=n(2).shallowClone,o=n(2).handleCallback,i=n(4).MongoError,s=n(0).format,a=function(e,t,n,r,a){if(e.serverConfig&&e.serverConfig.isDestroyed())return a(new i(\"topology was destroyed\"));var c=r.dbName?r.dbName:e.databaseName;c=e.authSource?e.authSource:c,c=r.authdb?r.authdb:c,c=r.authSource?r.authSource:c;var l=function(t,n){e.listeners(\"authenticated\").length>0&&e.emit(\"authenticated\",t,n),o(a,t,n)},u=r.authMechanism||\"\";\"MONGODB-CR\"==(u=u.toUpperCase())?e.s.topology.auth(\"mongocr\",c,t,n,function(e){if(e)return o(a,e,!1);l(null,!0)}):\"PLAIN\"==u?e.s.topology.auth(\"plain\",c,t,n,function(e){if(e)return o(a,e,!1);l(null,!0)}):\"MONGODB-X509\"==u?e.s.topology.auth(\"x509\",c,t,n,function(e){if(e)return o(a,e,!1);l(null,!0)}):\"SCRAM-SHA-1\"==u?e.s.topology.auth(\"scram-sha-1\",c,t,n,function(e){if(e)return o(a,e,!1);l(null,!0)}):\"GSSAPI\"==u?\"win32\"==process.platform?e.s.topology.auth(\"sspi\",c,t,n,r,function(e){if(e)return o(a,e,!1);l(null,!0)}):e.s.topology.auth(\"gssapi\",c,t,n,r,function(e){if(e)return o(a,e,!1);l(null,!0)}):\"DEFAULT\"==u?e.s.topology.auth(\"default\",c,t,n,function(e){if(e)return o(a,e,!1);l(null,!0)}):o(a,i.create({message:s(\"authentication mechanism %s not supported\",r.authMechanism),driver:!0}))};e.exports=function(e,t,n,s,c){if(\"function\"==typeof s&&(c=s,s={}),(s=r(s)).authMechanism){if(\"GSSAPI\"!=s.authMechanism&&\"DEFAULT\"!=s.authMechanism&&\"MONGODB-CR\"!=s.authMechanism&&\"MONGODB-X509\"!=s.authMechanism&&\"SCRAM-SHA-1\"!=s.authMechanism&&\"PLAIN\"!=s.authMechanism)return o(c,i.create({message:\"only DEFAULT, GSSAPI, PLAIN, MONGODB-X509, SCRAM-SHA-1 or MONGODB-CR is supported by authMechanism\",driver:!0}))}else s.authMechanism=\"DEFAULT\";return\"function\"==typeof c?a(e,t,n,s,function(e,t){if(e&&e.message&&-1!=e.message.indexOf(\"saslStart\")&&(e.code=59),e)return c(e,t);c(null,t)}):new e.s.promiseLibrary(function(r,o){a(e,t,n,s,function(e,t){if(e&&e.message&&-1!=e.message.indexOf(\"saslStart\")&&(e.code=59),e)return o(e);r(t)})})}},function(e,t,n){\"use strict\";var r=n(5).EventEmitter,o=n(97),i=n(0).inherits,s=n(2).getSingleProperty,a=n(2).shallowClone,c=n(2).parseIndexOptions,l=n(2).debugOptions,u=n(32),p=n(2).handleCallback,d=n(2).filterOptions,f=n(2).toError,h=n(22),m=n(0).format,g=n(125),y=n(4).BSON.Code,v=n(4).ReadPreference,b=n(4).MongoError,x=n(4).ObjectID,w=n(16),S=n(4).Logger,k=n(64),O=n(18),C=n(2).mergeOptionsAndWriteConcern,_=n(2).assign,E=[\"authSource\",\"w\",\"wtimeout\",\"j\",\"native_parser\",\"forceServerObjectId\",\"serializeFunctions\",\"raw\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"bufferMaxEntries\",\"numberOfRetries\",\"retryMiliSeconds\",\"readPreference\",\"pkFactory\",\"parentDb\",\"promiseLibrary\",\"noListener\"],I=[\"w\",\"wtimeout\",\"j\",\"fsync\",\"autoIndexId\",\"strict\",\"serializeFunctions\",\"pkFactory\",\"raw\",\"readPreference\"],T=[\"w\",\"wtimeout\",\"fsync\",\"j\",\"readPreference\",\"readPreferenceTags\",\"native_parser\",\"forceServerObjectId\",\"pkFactory\",\"serializeFunctions\",\"raw\",\"bufferMaxEntries\",\"authSource\",\"ignoreUndefined\",\"promoteLongs\",\"promiseLibrary\",\"readConcern\",\"retryMiliSeconds\",\"numberOfRetries\",\"parentDb\",\"noListener\",\"loggerLevel\",\"logger\",\"promoteBuffers\",\"promoteLongs\",\"promoteValues\"],M=function(e,t,o){if(o=o||{},!(this instanceof M))return new M(e,t,o);r.call(this);var i=o.promiseLibrary;i||(i=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),(o=d(o,T)).promiseLibrary=i,this.s={databaseName:e,dbCache:{},children:[],topology:t,options:o,logger:S(\"Db\",o),bson:t?t.bson:null,authSource:o.authSource,readPreference:o.readPreference,bufferMaxEntries:\"number\"==typeof o.bufferMaxEntries?o.bufferMaxEntries:-1,parentDb:o.parentDb||null,pkFactory:o.pkFactory||x,nativeParser:o.nativeParser||o.native_parser,promiseLibrary:i,noListener:\"boolean\"==typeof o.noListener&&o.noListener,readConcern:o.readConcern},K(this.s.databaseName),s(this,\"serverConfig\",this.s.topology),s(this,\"bufferMaxEntries\",this.s.bufferMaxEntries),s(this,\"databaseName\",this.s.databaseName),o.parentDb||this.s.noListener||(t.on(\"error\",G(this,\"error\",this)),t.on(\"timeout\",G(this,\"timeout\",this)),t.on(\"close\",G(this,\"close\",this)),t.on(\"parseError\",G(this,\"parseError\",this)),t.once(\"open\",G(this,\"open\",this)),t.once(\"fullsetup\",G(this,\"fullsetup\",this)),t.once(\"all\",G(this,\"all\",this)),t.on(\"reconnect\",G(this,\"reconnect\",this)),t.on(\"reconnectFailed\",G(this,\"reconnectFailed\",this)))};i(M,r);var N=M.define=new w(\"Db\",M,!1);Object.defineProperty(M.prototype,\"topology\",{enumerable:!0,get:function(){return this.s.topology}}),Object.defineProperty(M.prototype,\"options\",{enumerable:!0,get:function(){return this.s.options}}),Object.defineProperty(M.prototype,\"slaveOk\",{enumerable:!0,get:function(){return null!=this.s.options.readPreference&&(\"primary\"!=this.s.options.readPreference||\"primary\"!=this.s.options.readPreference.mode)}}),Object.defineProperty(M.prototype,\"writeConcern\",{enumerable:!0,get:function(){var e={};return null!=this.s.options.w&&(e.w=this.s.options.w),null!=this.s.options.j&&(e.j=this.s.options.j),null!=this.s.options.fsync&&(e.fsync=this.s.options.fsync),null!=this.s.options.wtimeout&&(e.wtimeout=this.s.options.wtimeout),e}});var A=function(e,t){e.s.topology.connect(e,e.s.options,function(n){if(null!=t){var r=t;if(n)return e.close(),r(n);r(null,e)}})};M.prototype.open=function(e){var t=this;return\"function\"==typeof e?A(t,e):new t.s.promiseLibrary(function(e,n){A(t,function(t,r){if(t)return n(t);e(r)})})},N.classMethod(\"open\",{callback:!0,promise:!0});var B=function(e){if(e&&\"string\"==typeof e)return new v(e);if(e instanceof h)return new v(e.mode,e.tags,{maxStalenessSeconds:e.maxStalenessSeconds});if(e&&\"object\"==typeof e){var t=e.mode||e.preference;t&&\"string\"==typeof t&&(e=new v(t,e.tags,{maxStalenessSeconds:e.maxStalenessSeconds}))}return e},j=function(e,t,n,r){if(e.serverConfig&&e.serverConfig.isDestroyed())return r(new b(\"topology was destroyed\"));var o=n.dbName||n.authdb||e.s.databaseName;null==n.readPreference&&e.s.readPreference&&(n.readPreference=e.s.readPreference),n.readPreference?n.readPreference=B(n.readPreference):n.readPreference=v.primary,e.s.logger.isDebug()&&e.s.logger.debug(m(\"executing command %s against %s with options [%s]\",JSON.stringify(t),m(\"%s.$cmd\",o),JSON.stringify(l(E,n)))),e.s.topology.command(m(\"%s.$cmd\",o),t,n,function(e,t){return e?p(r,e):n.full?p(r,null,t):void p(r,null,t.result)})};M.prototype.command=function(e,t,n){var r=this;return\"function\"==typeof t&&(n=t,t={}),t=a(t),\"function\"==typeof n?j(r,e,t,n):new this.s.promiseLibrary(function(n,o){j(r,e,t,function(e,t){if(e)return o(e);n(t)})})},N.classMethod(\"command\",{callback:!0,promise:!0}),M.prototype.close=function(e,t){\"function\"==typeof e&&(t=e,e=!1),this.s.topology.close(e);if(this.listeners(\"close\").length>0){if(this.emit(\"close\"),null==this.parentDb)for(var n=0;n<this.s.children.length;n++)this.s.children[n].emit(\"close\");this.removeAllListeners(\"close\")}return this.s.parentDb&&this.s.parentDb.close(),\"function\"==typeof t?process.nextTick(function(){p(t,null)}):new this.s.promiseLibrary(function(e){e()})},N.classMethod(\"close\",{callback:!0,promise:!0}),M.prototype.admin=function(){return new g(this,this.s.topology,this.s.promiseLibrary)},N.classMethod(\"admin\",{callback:!1,promise:!1,returns:[g]});var P=[\"pkFactory\",\"readPreference\",\"serializeFunctions\",\"strict\",\"readConcern\",\"ignoreUndefined\",\"promoteValues\",\"promoteBuffers\",\"promoteLongs\"];function D(e,t,n){if(t.s.topology.capabilities().commandsTakeWriteConcern){var r=Y(a(n),t,n);r.writeConcern&&(e.writeConcern=r.writeConcern)}}M.prototype.collection=function(e,t,n){var r=this;if(\"function\"==typeof t&&(n=t,t={}),(t=a(t=t||{})).promiseLibrary=this.s.promiseLibrary,t.readConcern=t.readConcern||this.s.readConcern,this.s.options.ignoreUndefined&&(t.ignoreUndefined=this.s.options.ignoreUndefined),null==(t=C(t,this.s.options,P,!0))||!t.strict)try{var o=new k(this,this.s.topology,this.s.databaseName,e,this.s.pkFactory,t);return n&&n(null,o),o}catch(e){if(n)return n(e);throw e}if(\"function\"!=typeof n)throw f(m(\"A callback is required in strict mode. While getting collection %s.\",e));if(r.serverConfig&&r.serverConfig.isDestroyed())return n(new b(\"topology was destroyed\"));this.listCollections({name:e},t).toArray(function(o,i){if(null!=o)return p(n,o,null);if(0==i.length)return p(n,f(m(\"Collection %s does not exist. Currently in strict mode.\",e)),null);try{return p(n,null,new k(r,r.s.topology,r.s.databaseName,e,r.s.pkFactory,t))}catch(o){return p(n,o,null)}})},N.classMethod(\"collection\",{callback:!0,promise:!1,returns:[k]});var L=function(e,t,n,r){var o=Y(a(n),e,n);if(e.serverConfig&&e.serverConfig.isDestroyed())return r(new b(\"topology was destroyed\"));e.listCollections({name:t}).setReadPreference(h.PRIMARY).toArray(function(i,s){if(null!=i)return p(r,i,null);if(s.length>0&&o.strict)return p(r,b.create({message:m(\"Collection %s already exists. Currently in strict mode.\",t),driver:!0}),null);if(s.length>0)try{return p(r,null,new k(e,e.s.topology,e.s.databaseName,t,e.s.pkFactory,n))}catch(i){return p(r,i)}var a={create:t};for(var c in D(a,e,n),n)null!=n[c]&&\"function\"!=typeof n[c]&&-1==I.indexOf(c)&&(a[c]=n[c]);o.readPreference=h.PRIMARY,e.command(a,o,function(o){if(o)return p(r,o);p(r,null,new k(e,e.s.topology,e.s.databaseName,t,e.s.pkFactory,n))})})};M.prototype.createCollection=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,0);return\"function\"!=typeof(n=o.pop())&&o.push(n),e=o.length?o.shift():null,(t=o.length&&o.shift()||{}).promiseLibrary=t.promiseLibrary||this.s.promiseLibrary,\"string\"==typeof n&&(e=n),\"function\"==typeof n?L(r,e,t,n):new this.s.promiseLibrary(function(n,o){L(r,e,t,function(e,t){if(e)return o(e);n(t)})})},N.classMethod(\"createCollection\",{callback:!0,promise:!0}),M.prototype.stats=function(e,t){\"function\"==typeof e&&(t=e,e={});var n={dbStats:!0};return null!=(e=e||{}).scale&&(n.scale=e.scale),null==e.readPreference&&this.s.readPreference&&(e.readPreference=this.s.readPreference),this.command(n,e,t)},N.classMethod(\"stats\",{callback:!0,promise:!0});M.prototype.listCollections=function(e,t){if(e=e||{},(t=a(t=t||{})).promiseLibrary=this.s.promiseLibrary,t.readPreference?t.readPreference=B(t.readPreference):t.readPreference=this.s.readPreference||v.primary,this.serverConfig.capabilities().hasListCollectionsCommand){var n=t.batchSize?{batchSize:t.batchSize}:{},r={listCollections:!0,filter:e,cursor:n};return t.cursorFactory=u,n=this.s.topology.cursor(m(\"%s.$cmd\",this.s.databaseName),r,t),t.readPreference&&n.setReadPreference(t.readPreference),n}this.serverConfig.capabilities().hasListCollectionsCommand||\"string\"!=typeof e.name||new RegExp(\"^\"+this.databaseName+\"\\\\.\").test(e.name)||((e=a(e)).name=m(\"%s.%s\",this.s.databaseName,e.name)),null==e&&(e.name=m(\"/%s/\",this.s.databaseName)),e=e.name?{$and:[{name:e.name},{name:/^((?!\\$).)*$/}]}:{name:/^((?!\\$).)*$/};var o,i,s={transforms:(o=this.s.databaseName,i=m(\"%s.\",o),{doc:function(e){var t=e.name.indexOf(i);return e.name&&0==t&&(e.name=e.name.substr(t+i.length)),e}})};return n=this.collection(M.SYSTEM_NAMESPACE_COLLECTION).find(e,s),t.readPreference&&n.setReadPreference(t.readPreference),t.batchSize&&(n=n.batchSize(t.batchSize)),n},N.classMethod(\"listCollections\",{callback:!1,promise:!1,returns:[u]});var R=function(e,t,n,r,o){var i=t,s=[];if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new b(\"topology was destroyed\"));i&&\"Code\"==i._bsontype||(i=new y(i)),null==n||Array.isArray(n)||\"function\"==typeof n?null!=n&&Array.isArray(n)&&\"function\"!=typeof n&&(s=n):s=[n];var a={$eval:i,args:s};r.nolock&&(a.nolock=r.nolock),r.readPreference=new v(h.PRIMARY),e.command(a,r,function(e,t){return e?p(o,e,null):t&&1==t.ok?p(o,null,t.retval):t?p(o,b.create({message:m(\"eval failed: %s\",t.errmsg),driver:!0}),null):void p(o,e,t)})};M.prototype.eval=function(e,t,n,r){var o=this,i=Array.prototype.slice.call(arguments,1);return\"function\"!=typeof(r=i.pop())&&i.push(r),t=i.length?i.shift():t,n=i.length&&i.shift()||{},\"function\"==typeof r?R(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){R(o,e,t,n,function(e,t){if(e)return i(e);r(t)})})},N.classMethod(\"eval\",{callback:!0,promise:!0}),M.prototype.renameCollection=function(e,t,n,r){var o=this;return\"function\"==typeof n&&(r=n,n={}),(n=n||{}).new_collection=!0,\"function\"==typeof r?this.collection(e).rename(t,n,r):new this.s.promiseLibrary(function(r,i){o.collection(e).rename(t,n,function(e,t){if(e)return i(e);r(t)})})},N.classMethod(\"renameCollection\",{callback:!0,promise:!0}),M.prototype.dropCollection=function(e,t,n){var r=this;\"function\"==typeof t&&(n=t,t={});var o={drop:e};return D(o,r,t=t||{}),t=_({},this.s.options,{readPreference:h.PRIMARY}),\"function\"==typeof n?this.command(o,t,function(e,t){return r.serverConfig&&r.serverConfig.isDestroyed()?n(new b(\"topology was destroyed\")):e?p(n,e):t.ok?p(n,null,!0):void p(n,null,!1)}):((t=a(r.s.options)).readPreference=h.PRIMARY,new this.s.promiseLibrary(function(e,n){r.command(o,t,function(t,o){return r.serverConfig&&r.serverConfig.isDestroyed()?n(new b(\"topology was destroyed\")):t?n(t):o.ok?e(!0):void e(!1)})}))},N.classMethod(\"dropCollection\",{callback:!0,promise:!0}),M.prototype.dropDatabase=function(e,t){var n=this;\"function\"==typeof e&&(t=e,e={});var r={dropDatabase:1};return D(r,n,e=e||{}),e=_({},this.s.options,{readPreference:h.PRIMARY}),\"function\"==typeof t?this.command(r,e,function(e,r){return n.serverConfig&&n.serverConfig.isDestroyed()?t(new b(\"topology was destroyed\")):null!=t?e?p(t,e,null):void p(t,null,!!r.ok):void 0}):new this.s.promiseLibrary(function(t,o){n.command(r,e,function(e,r){return n.serverConfig&&n.serverConfig.isDestroyed()?o(new b(\"topology was destroyed\")):e?o(e):r.ok?t(!0):void t(!1)})})},N.classMethod(\"dropDatabase\",{callback:!0,promise:!0});var z=function(e,t){e.listCollections().toArray(function(n,r){if(null!=n)return p(t,n,null);r=r.filter(function(e){return-1==e.name.indexOf(\"$\")}),p(t,null,r.map(function(t){return new k(e,e.s.topology,e.s.databaseName,t.name,e.s.pkFactory,e.s.options)}))})};M.prototype.collections=function(e){var t=this;return\"function\"==typeof e?z(t,e):new t.s.promiseLibrary(function(e,n){z(t,function(t,r){if(t)return n(t);e(r)})})},N.classMethod(\"collections\",{callback:!0,promise:!0}),M.prototype.executeDbAdminCommand=function(e,t,n){var r=this;return\"function\"==typeof t&&(n=t,t={}),t=t||{},\"function\"==typeof n?(t.readPreference&&(t.readPreference=B(t.readPreference)),r.s.topology.command(\"admin.$cmd\",e,t,function(e,t){return r.serverConfig&&r.serverConfig.isDestroyed()?n(new b(\"topology was destroyed\")):e?p(n,e):void p(n,null,t.result)})):new r.s.promiseLibrary(function(n,o){r.s.topology.command(\"admin.$cmd\",e,t,function(e,t){return r.serverConfig&&r.serverConfig.isDestroyed()?o(new b(\"topology was destroyed\")):e?o(e):void n(t.result)})})},N.classMethod(\"executeDbAdminCommand\",{callback:!0,promise:!0}),M.prototype.createIndex=function(e,t,n,r){var o=this,i=Array.prototype.slice.call(arguments,2);return\"function\"!=typeof(r=i.pop())&&i.push(r),n=i.length&&i.shift()||{},n=a(n=null==(n=\"function\"==typeof r?n:r)?{}:n),\"function\"==typeof r?q(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){q(o,e,t,n,function(e,t){if(e)return i(e);r(t)})})};var q=function(e,t,n,r,o){var i=Y({},e,r,{readPreference:h.PRIMARY});if(i.writeConcern&&\"function\"!=typeof o)throw b.create({message:\"Cannot use a writeConcern without a provided callback\",driver:!0});if(r.readPreference=h.PRIMARY,e.serverConfig&&e.serverConfig.isDestroyed())return o(new b(\"topology was destroyed\"));W(e,t,n,r,function(s,a){if(null==s)return p(o,s,a);if(67===s.code||11e3==s.code||85===s.code||11600==s.code)return p(o,s,a);var c=$(e,t,n,r);i.checkKeys=!1,e.s.topology.insert(m(\"%s.%s\",e.s.databaseName,M.SYSTEM_INDEX_COLLECTION),c,i,function(e,t){if(null!=o)return e?p(o,e):null==t?p(o,null,null):t.result.writeErrors?p(o,b.create(t.result.writeErrors[0]),null):void p(o,null,c.name)})})};N.classMethod(\"createIndex\",{callback:!0,promise:!0}),M.prototype.ensureIndex=function(e,t,n,r){var o=this;return\"function\"==typeof n&&(r=n,n={}),n=n||{},\"function\"==typeof r?U(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){U(o,e,t,n,function(e,t){if(e)return i(e);r(t)})})};var U=function(e,t,n,r,o){var i=Y({},e,r),s=$(e,t,n,r).name;if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new b(\"topology was destroyed\"));i.readPreference=h.PRIMARY,e.indexInformation(t,i,function(i,a){if(null!=i&&26!=i.code)return p(o,i,null);if(null!=a&&a[s]){if(\"function\"==typeof o)return p(o,null,s)}else e.createIndex(t,n,r,o)})};N.classMethod(\"ensureIndex\",{callback:!0,promise:!0}),M.prototype.addChild=function(e){if(this.s.parentDb)return this.s.parentDb.addChild(e);this.s.children.push(e)},M.prototype.db=function(e,t){t=t||{};var n=_({},this.options,t);if(this.s.dbCache[e]&&!0!==n.returnNonCachedInstance)return this.s.dbCache[e];null!=n.noListener&&0!=n.noListener||(n.parentDb=this),n.promiseLibrary=this.s.promiseLibrary;var r=new M(e,this.s.topology,n);return null!=n.noListener&&0!=n.noListener||this.addChild(r),this.s.dbCache[e]=r,r},N.classMethod(\"db\",{callback:!1,promise:!1,returns:[M]});var F=function(e,t,n,r,o){if(e.serverConfig&&e.serverConfig.isDestroyed())return o(new b(\"topology was destroyed\"));!function(e,t,n,r,o){if(\"string\"==typeof t&&null!=n&&\"object\"==typeof n&&(r=n,n=null),\"function\"==typeof r&&(o=r,r={}),null!=r.digestPassword)throw f(\"The digestPassword option is not supported via add_user. Please use db.command('createUser', ...) instead for this option.\");var i=null!=r.customData?r.customData:{},s=Array.isArray(r.roles)?r.roles:[],a=\"number\"==typeof r.maxTimeMS?r.maxTimeMS:null;0==s.length&&console.log(\"Creating a user without roles is deprecated in MongoDB >= 2.6\");var c={writeCommand:!0};r.dbName&&(c.dbName=r.dbName),null!=a&&(c.maxTimeMS=a),\"admin\"!=e.databaseName.toLowerCase()&&\"admin\"!=r.dbName||Array.isArray(r.roles)?Array.isArray(r.roles)||(s=[\"dbOwner\"]):s=[\"root\"];var l={createUser:t,customData:i,roles:s,digestPassword:!1};l=Y(l,e,r);var u=O.createHash(\"md5\");u.update(t+\":mongo:\"+n);var d=u.digest(\"hex\");\"string\"==typeof n&&(l.pwd=d),c.readPreference=h.primary,e.command(l,c,function(e,n){return e&&0==e.ok&&void 0==e.code?p(o,{code:-5e3},null):e?p(o,e,null):void p(o,n.ok?null:f(n),n.ok?[{user:t,pwd:\"\"}]:null)})}(e,t,n,r,function(i,s){if(i&&-5e3==i.code){var c=Y(a(r),e,r),l=O.createHash(\"md5\");l.update(t+\":mongo:\"+n);var u=l.digest(\"hex\"),d=(r.dbName?e.db(r.dbName):e).collection(M.SYSTEM_USER_COLLECTION);d.count({},function(e,n){if(null!=e)return p(o,e,null);d.find({user:t},{dbName:r.dbName}).toArray(function(e){if(null!=e)return p(o,e,null);c.upsert=!0,d.update({user:t},{$set:{user:t,pwd:u}},c,function(e){return 0==n&&e?p(o,null,[{user:t,pwd:u}]):e?p(o,e,null):void p(o,null,[{user:t,pwd:u}])})})})}else{if(i)return p(o,i);p(o,i,s)}})};M.prototype.addUser=function(e,t,n,r){var o=this,i=Array.prototype.slice.call(arguments,2);return\"function\"!=typeof(r=i.pop())&&i.push(r),n=i.length&&i.shift()||{},\"function\"==typeof r?F(o,e,t,n,r):new this.s.promiseLibrary(function(r,i){F(o,e,t,n,function(e,t){if(e)return i(e);r(t)})})},N.classMethod(\"addUser\",{callback:!0,promise:!0});var H=function(e,t,n,r){!function(e,t,n,r){if(\"function\"==typeof n&&(r=n,n={}),e.serverConfig&&e.serverConfig.isDestroyed())return r(new b(\"topology was destroyed\"));var o={writeCommand:!0};n.dbName&&(o.dbName=n.dbName);var i=\"number\"==typeof n.maxTimeMS?n.maxTimeMS:null;null!=i&&(o.maxTimeMS=i);var s={dropUser:t};s=Y(s,e,n),o.readPreference=h.primary,e.command(s,o,function(e,t){return e&&!e.ok&&void 0==e.code?p(r,{code:-5e3}):e?p(r,e,null):void p(r,null,!!t.ok)})}(e,t,n,function(o,i){if(o&&-5e3==o.code){var s=Y(a(n),e,n),c=(n.dbName?e.db(n.dbName):e).collection(M.SYSTEM_USER_COLLECTION);c.findOne({user:t},{},function(e,n){if(null==n)return p(r,e,!1);c.remove({user:t},s,function(e){p(r,e,!0)})})}else{if(o)return p(r,o);p(r,o,i)}})};N.classMethod(\"removeUser\",{callback:!0,promise:!0}),M.prototype.removeUser=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,1);return\"function\"!=typeof(n=o.pop())&&o.push(n),t=o.length&&o.shift()||{},\"function\"==typeof n?H(r,e,t,n):new this.s.promiseLibrary(function(n,o){H(r,e,t,function(e,t){if(e)return o(e);n(t)})})},M.prototype.authenticate=function(e,t,n,r){return console.warn(\"Db.prototype.authenticate method will no longer be available in the next major release 3.x as MongoDB 3.6 will only allow auth against users in the admin db and will no longer allow multiple credentials on a socket. Please authenticate using MongoClient.connect with auth credentials.\"),o.apply(this,[this].concat(Array.prototype.slice.call(arguments)))},N.classMethod(\"authenticate\",{callback:!0,promise:!0}),M.prototype.logout=function(e,t){var n=this;\"function\"==typeof e&&(t=e,e={}),e=e||{};var r=this.s.authSource?this.s.authSource:this.s.databaseName;return r=e.dbName?e.dbName:r,\"function\"==typeof t?n.s.topology.logout(r,function(e){if(e)return t(e);t(null,!0)}):new this.s.promiseLibrary(function(e,t){n.s.topology.logout(r,function(n){if(n)return t(n);e(!0)})})},N.classMethod(\"logout\",{callback:!0,promise:!0}),M.prototype.indexInformation=function(e,t,n){var r=this;return\"function\"==typeof t&&(n=t,t={}),t=t||{},\"function\"==typeof n?V(r,e,t,n):new this.s.promiseLibrary(function(n,o){V(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var V=function(e,t,n,r){var o=null!=n.full&&n.full;if(e.serverConfig&&e.serverConfig.isDestroyed())return r(new b(\"topology was destroyed\"));e.collection(t).listIndexes(n).toArray(function(e,t){return e?r(f(e)):Array.isArray(t)?o?p(r,null,t):void p(r,null,function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];for(var o in t[r.name]=[],r.key)t[r.name].push([o,r.key[o]])}return t}(t)):p(r,null,[])})};N.classMethod(\"indexInformation\",{callback:!0,promise:!0});var $=function(e,t,n,r){var o=c(n),i=o.fieldHash,s=\"string\"==typeof r.name?r.name:o.name,a={ns:e.databaseName+\".\"+t,key:i,name:s},l=null!=r&&\"object\"!=typeof r&&r;r=null==r||\"boolean\"==typeof r?{}:r;var u=Object.keys(a);for(var p in r)-1==u.indexOf(p)&&(a[p]=r[p]);null==a.unique&&(a.unique=l);for(var d=[\"w\",\"wtimeout\",\"j\",\"fsync\",\"readPreference\"],f=0;f<d.length;f++)delete a[d[f]];return a},W=function(e,t,n,r,o){var i=c(n),s=\"string\"==typeof r.name?r.name:i.name,a=[{name:s,key:i.fieldHash}],l=Object.keys(a[0]);for(var u in r){-1==l.indexOf(u)&&(a[0][u]=r[u]);for(var d=[\"w\",\"wtimeout\",\"j\",\"fsync\",\"readPreference\"],g=0;g<d.length;g++)delete a[0][d[g]]}var y=e.s.topology.capabilities();if(a[0].collation&&y&&!y.commandsTakeCollation){var v=new b(m(\"server/primary/mongos does not support collation\"));return v.code=67,o(v)}var x=Y({createIndexes:t,indexes:a},e,r);D(x,e,r),r.readPreference=h.PRIMARY,e.command(x,r,function(e,t){return e?p(o,e,null):0==t.ok?p(o,f(t),null):void p(o,null,s)})},K=function(e){if(\"string\"!=typeof e)throw b.create({message:\"database name must be a string\",driver:!0});if(0===e.length)throw b.create({message:\"database name cannot be the empty string\",driver:!0});if(\"$external\"!=e)for(var t=[\" \",\".\",\"$\",\"/\",\"\\\\\"],n=0;n<t.length;n++)if(-1!=e.indexOf(t[n]))throw b.create({message:\"database names cannot contain the character '\"+t[n]+\"'\",driver:!0})},Y=function(e,t,n){if(null!=n.w||null!=n.j||null!=n.fsync){var r={};n.w&&(r.w=n.w),n.wtimeout&&(r.wtimeout=n.wtimeout),n.j&&(r.j=n.j),n.fsync&&(r.fsync=n.fsync),e.writeConcern=r}else null==t.writeConcern.w&&null==t.writeConcern.j&&null==t.writeConcern.fsync||(e.writeConcern=t.writeConcern);return e},G=function(e,t,n){return function(r){if(n.listeners(t).length>0){n.emit(t,r,e);for(var o=0;o<e.s.children.length;o++)e.s.children[o].emit(t,r,e.s.children[o])}}};M.prototype.unref=function(){this.s.topology.unref()},M.SYSTEM_NAMESPACE_COLLECTION=\"system.namespaces\",M.SYSTEM_INDEX_COLLECTION=\"system.indexes\",M.SYSTEM_PROFILE_COLLECTION=\"system.profile\",M.SYSTEM_USER_COLLECTION=\"system.users\",M.SYSTEM_COMMAND_COLLECTION=\"$cmd\",M.SYSTEM_JS_COLLECTION=\"system.js\",e.exports=M},function(e,t,n){\"use strict\";var r=n(128),o=n(2),i=n(2).toError,s=n(2).handleCallback,a=o.shallowClone,c=r.BulkWriteResult,l=n(4).BSON.ObjectID,u=n(4).BSON,p=n(16),d=r.Batch,f=r.mergeBatchResults,h=new u([u.Binary,u.Code,u.DBRef,u.Decimal128,u.Double,u.Int32,u.Long,u.Map,u.MaxKey,u.MinKey,u.ObjectId,u.BSONRegExp,u.Symbol,u.Timestamp]),m=function(e){this.s=e.s};m.prototype.update=function(e){var t=\"boolean\"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,n={q:this.s.currentOp.selector,u:e,multi:!0,upsert:t};return this.s.currentOp=null,g(this,r.UPDATE,n)},m.prototype.updateOne=function(e){var t=\"boolean\"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,n={q:this.s.currentOp.selector,u:e,multi:!1,upsert:t};return this.s.currentOp=null,g(this,r.UPDATE,n)},m.prototype.replaceOne=function(e){this.updateOne(e)},m.prototype.upsert=function(){return this.s.currentOp.upsert=!0,this},m.prototype.removeOne=function(){var e={q:this.s.currentOp.selector,limit:1};return this.s.currentOp=null,g(this,r.REMOVE,e)},m.prototype.remove=function(){var e={q:this.s.currentOp.selector,limit:0};return this.s.currentOp=null,g(this,r.REMOVE,e)};var g=function(e,t,n){var o=h.calculateObjectSize(n,{checkKeys:!1});if(o>=e.s.maxBatchSizeBytes)throw i(\"document is larger than the maximum size \"+e.s.maxBatchSizeBytes);if(e.s.currentBatch=null,t==r.INSERT?e.s.currentBatch=e.s.currentInsertBatch:t==r.UPDATE?e.s.currentBatch=e.s.currentUpdateBatch:t==r.REMOVE&&(e.s.currentBatch=e.s.currentRemoveBatch),null==e.s.currentBatch&&(e.s.currentBatch=new d(t,e.s.currentIndex)),(e.s.currentBatch.size+1>=e.s.maxWriteBatchSize||e.s.currentBatch.sizeBytes+o>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!=t)&&(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new d(t,e.s.currentIndex)),Array.isArray(n))throw i(\"operation passed in cannot be an Array\");return e.s.currentBatch.operations.push(n),e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentIndex=e.s.currentIndex+1,t==r.INSERT?(e.s.currentInsertBatch=e.s.currentBatch,e.s.bulkResult.insertedIds.push({index:e.s.bulkResult.insertedIds.length,_id:n._id})):t==r.UPDATE?e.s.currentUpdateBatch=e.s.currentBatch:t==r.REMOVE&&(e.s.currentRemoveBatch=e.s.currentBatch),e.s.currentBatch.size=e.s.currentBatch.size+1,e.s.currentBatch.sizeBytes=e.s.currentBatch.sizeBytes+o,e},y=function(e,t,o){o=null==o?{}:o;var i=t.collectionName,s=e.bson,c=e.isMasterDoc&&e.isMasterDoc.maxBsonObjectSize?e.isMasterDoc.maxBsonObjectSize:16793600,l=e.isMasterDoc&&e.isMasterDoc.maxWriteBatchSize?e.isMasterDoc.maxWriteBatchSize:1e3,u=r.writeConcern(a(o),t,o),p=o.promiseLibrary;p||(p=\"function\"==typeof global.Promise?global.Promise:n(12).Promise);this.s={bulkResult:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},currentInsertBatch:null,currentUpdateBatch:null,currentRemoveBatch:null,currentBatch:null,currentIndex:0,batches:[],writeConcern:u,maxBatchSizeBytes:c,maxWriteBatchSize:l,namespace:i,bson:s,topology:e,options:o,currentOp:null,executed:!1,collection:t,promiseLibrary:p,bypassDocumentValidation:\"boolean\"==typeof o.bypassDocumentValidation&&o.bypassDocumentValidation}},v=y.define=new p(\"UnorderedBulkOperation\",y,!1);y.prototype.insert=function(e){return!0!==this.s.collection.s.db.options.forceServerObjectId&&null==e._id&&(e._id=new l),g(this,r.INSERT,e)},y.prototype.find=function(e){if(!e)throw i(\"Bulk find operation must specify a selector\");return this.s.currentOp={selector:e},new m(this)},Object.defineProperty(y.prototype,\"length\",{enumerable:!0,get:function(){return this.s.currentIndex}}),y.prototype.raw=function(e){var t=Object.keys(e)[0],n=\"boolean\"==typeof this.s.options.forceServerObjectId?this.s.options.forceServerObjectId:this.s.collection.s.db.options.forceServerObjectId;if(e.updateOne&&e.updateOne.q||e.updateMany&&e.updateMany.q||e.replaceOne&&e.replaceOne.q)return e[t].multi=!e.updateOne&&!e.replaceOne,g(this,r.UPDATE,e[t]);if(e.updateOne||e.updateMany||e.replaceOne){var o=!e.updateOne&&!e.replaceOne,s={q:e[t].filter,u:e[t].update||e[t].replacement,multi:o};return e[t].upsert&&(s.upsert=!0),g(this,r.UPDATE,s)}if(e.removeOne||e.removeMany||e.deleteOne&&e.deleteOne.q||e.deleteMany&&e.deleteMany.q)return e[t].limit=e.removeOne?1:0,g(this,r.REMOVE,e[t]);if(e.deleteOne||e.deleteMany){var a=e.deleteOne?1:0;return s={q:e[t].filter,limit:a},g(this,r.REMOVE,s)}if(e.insertOne&&null==e.insertOne.document)return!0!==n&&null==e.insertOne._id&&(e.insertOne._id=new l),g(this,r.INSERT,e.insertOne);if(e.insertOne&&e.insertOne.document)return!0!==n&&null==e.insertOne.document._id&&(e.insertOne.document._id=new l),g(this,r.INSERT,e.insertOne.document);if(!e.insertMany)throw i(\"bulkWrite only supports insertOne, insertMany, updateOne, updateMany, removeOne, removeMany, deleteOne, deleteMany\");for(var c=0;c<e.insertMany.length;c++)!0!==n&&null==e.insertMany[c]._id&&(e.insertMany[c]._id=new l),g(this,r.INSERT,e.insertMany[c])};var b=function(e,t,n){var o={ordered:!1};null!=e.s.writeConcern&&(o.writeConcern=e.s.writeConcern);var i=function(r,o){if(r&&r.driver||r&&r.message)return s(n,r);r&&(r.ok=0),s(n,null,f(!1,t,e.s.bulkResult,r,o))};e.operationId&&(i.operationId=e.operationId),e.s.options.serializeFunctions&&(o.serializeFunctions=!0),1==e.s.bypassDocumentValidation&&(o.bypassDocumentValidation=!0);try{t.batchType==r.INSERT?e.s.topology.insert(e.s.collection.namespace,t.operations,o,i):t.batchType==r.UPDATE?e.s.topology.update(e.s.collection.namespace,t.operations,o,i):t.batchType==r.REMOVE&&e.s.topology.remove(e.s.collection.namespace,t.operations,o,i)}catch(r){r.ok=0,s(n,null,f(!1,t,e.s.bulkResult,r,null))}},x=function(e,t){for(var n=e.s.batches.length,r=0;r<e.s.batches.length;r++)b(e,e.s.batches[r],function(r){if(r&&(o=r),0==(n-=1)){if(o)return s(t,o);var o=e.s.bulkResult.writeErrors.length>0?i(e.s.bulkResult.writeErrors[0]):null;s(t,o,new c(e.s.bulkResult))}})};y.prototype.execute=function(e,t){var n=this;if(this.s.executed){var r=i(\"batch cannot be re-executed\");return\"function\"==typeof t?t(r,null):this.s.promiseLibrary.reject(r)}if(\"function\"==typeof e?t=e:e&&\"object\"==typeof e&&(this.s.writeConcern=e),this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch),0==this.s.batches.length){var o=i(\"Invalid Operation, no operations specified\");return\"function\"==typeof t?t(o,null):this.s.promiseLibrary.reject(o)}return\"function\"==typeof t?x(this,t):new this.s.promiseLibrary(function(e,t){x(n,function(n,r){if(n)return t(n);e(r)})})},v.classMethod(\"execute\",{callback:!0,promise:!1});var w=function(e,t,n){return new y(e,t,n)};w.UnorderedBulkOperation=y,e.exports=w,e.exports.Bulk=y},function(e,t,n){\"use strict\";var r=n(128),o=n(2),i=n(2).toError,s=n(2).handleCallback,a=o.shallowClone,c=r.BulkWriteResult,l=n(4).BSON.ObjectID,u=n(16),p=n(4).BSON,d=r.Batch,f=r.mergeBatchResults,h=new p([p.Binary,p.Code,p.DBRef,p.Decimal128,p.Double,p.Int32,p.Long,p.Map,p.MaxKey,p.MinKey,p.ObjectId,p.BSONRegExp,p.Symbol,p.Timestamp]),m=function(e){this.s=e.s};m.prototype.update=function(e){var t=\"boolean\"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,n={q:this.s.currentOp.selector,u:e,multi:!0,upsert:t};return this.s.currentOp=null,g(this,r.UPDATE,n)},m.prototype.updateOne=function(e){var t=\"boolean\"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,n={q:this.s.currentOp.selector,u:e,multi:!1,upsert:t};return this.s.currentOp=null,g(this,r.UPDATE,n)},m.prototype.replaceOne=function(e){this.updateOne(e)},m.prototype.upsert=function(){return this.s.currentOp.upsert=!0,this},m.prototype.deleteOne=function(){var e={q:this.s.currentOp.selector,limit:1};return this.s.currentOp=null,g(this,r.REMOVE,e)},m.prototype.removeOne=m.prototype.deleteOne,m.prototype.delete=function(){var e={q:this.s.currentOp.selector,limit:0};return this.s.currentOp=null,g(this,r.REMOVE,e)},m.prototype.remove=m.prototype.delete;var g=function(e,t,n){var o=h.calculateObjectSize(n,{checkKeys:!1});if(o>=e.s.maxBatchSizeBytes)throw i(\"document is larger than the maximum size \"+e.s.maxBatchSizeBytes);if(null==e.s.currentBatch&&(e.s.currentBatch=new d(t,e.s.currentIndex)),e.s.currentBatchSize+1>=e.s.maxWriteBatchSize||e.s.currentBatchSizeBytes+e.s.currentBatchSizeBytes>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!=t?(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new d(t,e.s.currentIndex),e.s.currentBatchSize=0,e.s.currentBatchSizeBytes=0):(e.s.currentBatchSize=e.s.currentBatchSize+1,e.s.currentBatchSizeBytes=e.s.currentBatchSizeBytes+o),t==r.INSERT&&e.s.bulkResult.insertedIds.push({index:e.s.currentIndex,_id:n._id}),Array.isArray(n))throw i(\"operation passed in cannot be an Array\");return e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentBatch.operations.push(n),e.s.currentBatchSizeBytes=e.s.currentBatchSizeBytes+o,e.s.currentIndex=e.s.currentIndex+1,e};function y(e,t,o){o=null==o?{}:o;var i=e.bson,s=t.collectionName,c=e.isMasterDoc&&e.isMasterDoc.maxBsonObjectSize?e.isMasterDoc.maxBsonObjectSize:16793600,l=e.isMasterDoc&&e.isMasterDoc.maxWriteBatchSize?e.isMasterDoc.maxWriteBatchSize:1e3,u=r.writeConcern(a(o),t,o),p=o.promiseLibrary;p||(p=\"function\"==typeof global.Promise?global.Promise:n(12).Promise);this.s={bulkResult:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},currentBatch:null,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,batches:[],writeConcern:u,maxBatchSizeBytes:c,maxWriteBatchSize:l,namespace:s,bson:i,topology:e,options:o,currentOp:null,executed:!1,collection:t,promiseLibrary:p,err:null,bypassDocumentValidation:\"boolean\"==typeof o.bypassDocumentValidation&&o.bypassDocumentValidation}}var v=y.define=new u(\"OrderedBulkOperation\",y,!1);y.prototype.raw=function(e){var t=Object.keys(e)[0],n=\"boolean\"==typeof this.s.options.forceServerObjectId?this.s.options.forceServerObjectId:this.s.collection.s.db.options.forceServerObjectId;if(e.updateOne&&e.updateOne.q||e.updateMany&&e.updateMany.q||e.replaceOne&&e.replaceOne.q)return e[t].multi=!e.updateOne&&!e.replaceOne,g(this,r.UPDATE,e[t]);if(e.updateOne||e.updateMany||e.replaceOne){var o=!e.updateOne&&!e.replaceOne,s={q:e[t].filter,u:e[t].update||e[t].replacement,multi:o};return s.upsert=!!e[t].upsert,e.collation&&(s.collation=e.collation),g(this,r.UPDATE,s)}if(e.removeOne||e.removeMany||e.deleteOne&&e.deleteOne.q||e.deleteMany&&e.deleteMany.q)return e[t].limit=e.removeOne?1:0,g(this,r.REMOVE,e[t]);if(e.deleteOne||e.deleteMany){var a=e.deleteOne?1:0;return s={q:e[t].filter,limit:a},e.collation&&(s.collation=e.collation),g(this,r.REMOVE,s)}if(e.insertOne&&null==e.insertOne.document)return!0!==n&&null==e.insertOne._id&&(e.insertOne._id=new l),g(this,r.INSERT,e.insertOne);if(e.insertOne&&e.insertOne.document)return!0!==n&&null==e.insertOne.document._id&&(e.insertOne.document._id=new l),g(this,r.INSERT,e.insertOne.document);if(!e.insertMany)throw i(\"bulkWrite only supports insertOne, insertMany, updateOne, updateMany, removeOne, removeMany, deleteOne, deleteMany\");for(var c=0;c<e.insertMany.length;c++)!0!==n&&null==e.insertMany[c]._id&&(e.insertMany[c]._id=new l),g(this,r.INSERT,e.insertMany[c])},y.prototype.insert=function(e){return!0!==this.s.collection.s.db.options.forceServerObjectId&&null==e._id&&(e._id=new l),g(this,r.INSERT,e)},y.prototype.find=function(e){if(!e)throw i(\"Bulk find operation must specify a selector\");return this.s.currentOp={selector:e},new m(this)},Object.defineProperty(y.prototype,\"length\",{enumerable:!0,get:function(){return this.s.currentIndex}});var b=function(e,t){if(0==e.s.batches.length)return s(t,null,new c(e.s.bulkResult));var n=e.s.batches.shift(),o=function(r,o){return r&&r.driver||r&&r.message?s(t,r):(r&&(r.ok=0),null!=f(!0,n,e.s.bulkResult,r,o)?s(t,null,new c(e.s.bulkResult)):e.s.bulkResult.writeErrors.length>0?s(t,i(e.s.bulkResult.writeErrors[0]),new c(e.s.bulkResult)):void b(e,t))},a={ordered:!0};null!=e.s.writeConcern&&(a.writeConcern=e.s.writeConcern),e.operationId&&(o.operationId=e.operationId),e.s.options.serializeFunctions&&(a.serializeFunctions=!0),e.s.options.ignoreUndefined&&(a.ignoreUndefined=!0),1==e.s.bypassDocumentValidation&&(a.bypassDocumentValidation=!0);try{n.batchType==r.INSERT?e.s.topology.insert(e.s.collection.namespace,n.operations,a,o):n.batchType==r.UPDATE?e.s.topology.update(e.s.collection.namespace,n.operations,a,o):n.batchType==r.REMOVE&&e.s.topology.remove(e.s.collection.namespace,n.operations,a,o)}catch(r){r.ok=0,s(t,null,f(!1,n,e.s.bulkResult,r,null))}};y.prototype.execute=function(e,t){var n=this;if(this.s.executed){var r=i(\"batch cannot be re-executed\");return\"function\"==typeof t?t(r,null):this.s.promiseLibrary.reject(r)}if(\"function\"==typeof e?t=e:e&&\"object\"==typeof e&&(this.s.writeConcern=e),this.s.currentBatch&&this.s.batches.push(this.s.currentBatch),0==this.s.batches.length){var o=i(\"Invalid Operation, no operations specified\");return\"function\"==typeof t?t(o,null):this.s.promiseLibrary.reject(o)}return\"function\"==typeof t?b(this,t):new this.s.promiseLibrary(function(e,t){b(n,function(n,r){if(n)return t(n);e(r)})})},v.classMethod(\"execute\",{callback:!0,promise:!1});var x=function(e,t,n){return new y(e,t,n)};x.OrderedBulkOperation=y,e.exports=x,e.exports.Bulk=y},function(e,t,n){\"use strict\";var r=n(10),o=r.Buffer,i=r.SlowBuffer,s=r.kMaxLength||2147483647;t.alloc=function(e,t,n){if(\"function\"==typeof o.alloc)return o.alloc(e,t,n);if(\"number\"==typeof n)throw new TypeError(\"encoding must not be number\");if(\"number\"!=typeof e)throw new TypeError(\"size must be a number\");if(e>s)throw new RangeError(\"size is too large\");var r=n,i=t;void 0===i&&(r=void 0,i=0);var a=new o(e);if(\"string\"==typeof i)for(var c=new o(i,r),l=c.length,u=-1;++u<e;)a[u]=c[u%l];else a.fill(i);return a},t.allocUnsafe=function(e){if(\"function\"==typeof o.allocUnsafe)return o.allocUnsafe(e);if(\"number\"!=typeof e)throw new TypeError(\"size must be a number\");if(e>s)throw new RangeError(\"size is too large\");return new o(e)},t.from=function(e,t,n){if(\"function\"==typeof o.from&&(!global.Uint8Array||Uint8Array.from!==o.from))return o.from(e,t,n);if(\"number\"==typeof e)throw new TypeError('\"value\" argument must not be a number');if(\"string\"==typeof e)return new o(e,t);if(\"undefined\"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var r=t;if(1===arguments.length)return new o(e);void 0===r&&(r=0);var i=n;if(void 0===i&&(i=e.byteLength-r),r>=e.byteLength)throw new RangeError(\"'offset' is out of bounds\");if(i>e.byteLength-r)throw new RangeError(\"'length' is out of bounds\");return new o(e.slice(r,r+i))}if(o.isBuffer(e)){var s=new o(e.length);return e.copy(s,0,0,e.length),s}if(e){if(Array.isArray(e)||\"undefined\"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||\"length\"in e)return new o(e);if(\"Buffer\"===e.type&&Array.isArray(e.data))return new o(e.data)}throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")},t.allocUnsafeSlow=function(e){if(\"function\"==typeof o.allocUnsafeSlow)return o.allocUnsafeSlow(e);if(\"number\"!=typeof e)throw new TypeError(\"size must be a number\");if(e>=s)throw new RangeError(\"size is too large\");return new i(e)}},function(e,t,n){\"use strict\";!process.version||0===process.version.indexOf(\"v0.\")||0===process.version.indexOf(\"v1.\")&&0!==process.version.indexOf(\"v1.8.\")?e.exports=function(e,t,n,r){if(\"function\"!=typeof e)throw new TypeError('\"callback\" argument must be a function');var o,i,s=arguments.length;switch(s){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,n)});case 4:return process.nextTick(function(){e.call(null,t,n,r)});default:for(o=new Array(s-1),i=0;i<o.length;)o[i++]=arguments[i];return process.nextTick(function(){e.apply(null,o)})}}:e.exports=process.nextTick},function(e,t,n){\"use strict\";var r=n(45),o=n(8);e.exports={getReadPreference:function(e,t){var n=e.readPreference||new r(\"primary\");if(t.readPreference&&(n=t.readPreference),\"string\"==typeof n&&(n=new r(n)),!(n instanceof r))throw new o(\"readPreference must be a ReadPreference instance\");return n}}},function(e,t,n){\"use strict\";var r=n(8),o=function(e,t,n,o,i,s){if(null==o)throw new r(\"ns must be specified for query\");if(!Array.isArray(i)||0==i.length)throw new r(\"documents array must contain at least one document to insert\");if(~o.indexOf(\"\\0\"))throw new r(\"namespace cannot contain a null character\");this.requestId=e,this.bson=n,this.ns=o,this.documents=i,this.ismaster=t,s=s||{},this.serializeFunctions=\"boolean\"==typeof s.serializeFunctions&&s.serializeFunctions,this.ignoreUndefined=\"boolean\"==typeof s.ignoreUndefined&&s.ignoreUndefined,this.checkKeys=\"boolean\"!=typeof s.checkKeys||s.checkKeys,this.continueOnError=\"boolean\"==typeof s.continueOnError&&s.continueOnError,this.flags=this.continueOnError?1:0};o.prototype.toBin=function(){var e=[],t=new Buffer(20+Buffer.byteLength(this.ns)+1);e.push(t);for(var n=t.length,o=0;o<this.documents.length;o++){var i=this.bson.serialize(this.documents[o],{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});if(i.length>this.ismaster.maxBsonObjectSize)throw new r(\"Document exceeds maximum allowed bson size of \"+this.ismaster.maxBsonObjectSize+\" bytes\");n+=i.length,e.push(i)}if(n>this.ismaster.maxMessageSizeBytes)throw new r(\"Command exceeds maximum message size of \"+this.ismaster.maxMessageSizeBytes+\" bytes\");var s=0;return t[s+3]=n>>24&255,t[s+2]=n>>16&255,t[s+1]=n>>8&255,t[s]=255&n,t[(s+=4)+3]=this.requestId>>24&255,t[s+2]=this.requestId>>16&255,t[s+1]=this.requestId>>8&255,t[s]=255&this.requestId,t[(s+=4)+3]=0,t[s+2]=0,t[s+1]=0,t[s]=0,t[(s+=4)+3]=0,t[s+2]=0,t[s+1]=7,t[s]=210,t[(s+=4)+3]=this.flags>>24&255,t[s+2]=this.flags>>16&255,t[s+1]=this.flags>>8&255,t[s]=255&this.flags,t[(s=(s+=4)+t.write(this.ns,s,\"utf8\")+1)-1]=0,e};var i=function(e,t,n,o,i,s){if(null==o)throw new r(\"ns must be specified for query\");s=s||{},this.requestId=e,this.bson=n,this.ns=o,this.ismaster=t,this.serializeFunctions=\"boolean\"==typeof s.serializeFunctions&&s.serializeFunctions,this.ignoreUndefined=\"boolean\"==typeof s.ignoreUndefined&&s.ignoreUndefined,this.checkKeys=\"boolean\"==typeof s.checkKeys&&s.checkKeys,this.upsert=\"boolean\"==typeof i[0].upsert&&i[0].upsert,this.multi=\"boolean\"==typeof i[0].multi&&i[0].multi,this.q=i[0].q,this.u=i[0].u,this.flags=this.upsert?1:0,this.flags=this.multi?2|this.flags:this.flags};i.prototype.toBin=function(){var e=[],t=new Buffer(20+Buffer.byteLength(this.ns)+1+4);e.push(t);var n=t.length,r=this.bson.serialize(this.q,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(r),n+=r.length;var o=this.bson.serialize(this.u,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(o),n+=o.length;var i=0;return t[i+3]=n>>24&255,t[i+2]=n>>16&255,t[i+1]=n>>8&255,t[i]=255&n,t[(i+=4)+3]=this.requestId>>24&255,t[i+2]=this.requestId>>16&255,t[i+1]=this.requestId>>8&255,t[i]=255&this.requestId,t[(i+=4)+3]=0,t[i+2]=0,t[i+1]=0,t[i]=0,t[(i+=4)+3]=0,t[i+2]=0,t[i+1]=7,t[i]=209,t[(i+=4)+3]=0,t[i+2]=0,t[i+1]=0,t[i]=0,t[(i=(i+=4)+t.write(this.ns,i,\"utf8\")+1)-1]=0,t[i+3]=this.flags>>24&255,t[i+2]=this.flags>>16&255,t[i+1]=this.flags>>8&255,t[i]=255&this.flags,i+=4,e};var s=function(e,t,n,o,i,s){if(null==o)throw new r(\"ns must be specified for query\");s=s||{},this.requestId=e,this.bson=n,this.ns=o,this.ismaster=t,this.serializeFunctions=\"boolean\"==typeof s.serializeFunctions&&s.serializeFunctions,this.ignoreUndefined=\"boolean\"==typeof s.ignoreUndefined&&s.ignoreUndefined,this.checkKeys=\"boolean\"==typeof s.checkKeys&&s.checkKeys,this.limit=\"number\"==typeof i[0].limit?i[0].limit:1,this.q=i[0].q,this.flags=1==this.limit?1:0};s.prototype.toBin=function(){var e=[],t=new Buffer(20+Buffer.byteLength(this.ns)+1+4);e.push(t);var n=t.length,r=this.bson.serialize(this.q,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(r),n+=r.length;var o=0;return t[o+3]=n>>24&255,t[o+2]=n>>16&255,t[o+1]=n>>8&255,t[o]=255&n,t[(o+=4)+3]=this.requestId>>24&255,t[o+2]=this.requestId>>16&255,t[o+1]=this.requestId>>8&255,t[o]=255&this.requestId,t[(o+=4)+3]=0,t[o+2]=0,t[o+1]=0,t[o]=0,t[(o+=4)+3]=0,t[o+2]=0,t[o+1]=7,t[o]=214,t[(o+=4)+3]=0,t[o+2]=0,t[o+1]=0,t[o]=0,t[(o=(o+=4)+t.write(this.ns,o,\"utf8\")+1)-1]=0,t[o+3]=this.flags>>24&255,t[o+2]=this.flags>>16&255,t[o+1]=this.flags>>8&255,t[o]=255&this.flags,o+=4,e},e.exports={Insert:o,Update:i,Remove:s}},function(e,t,n){\"use strict\";var r=n(0).format,o=n(30),i=n(11).Query,s=n(8),a=function(e,t,n,r){this.db=e,this.username=t,this.password=n,this.options=r};a.prototype.equal=function(e){return e.db==this.db&&e.username==this.username&&e.password==this.password};var c=null,l=null;try{c=o(\"kerberos\").Kerberos,l=o(\"kerberos\").processes.MongoAuthProcess}catch(e){}var u=function(e){this.bson=e,this.authStore=[]};u.prototype.auth=function(e,t,n,o,i,l,u){var f=this;if(null==c)return u(new Error(\"Kerberos library is not installed\"));var h=l.gssapiServiceName||\"mongodb\",m=t.length;if(0==m)return u(null,null);for(var g=0,y=null;t.length>0;){!function(t){process.nextTick(function(){p(f,o,i,h,e,t,l,function(e,t){m-=1,e?y=e:t&&\"object\"==typeof t&&t.result.$err?y=t.result:t&&\"object\"==typeof t&&t.result.errmsg?y=t.result:g+=1,0==m&&g>0?(d(f.authStore,new a(n,o,i,l)),u(null,!0)):0==m&&(null==y&&(y=new s(r(\"failed to authenticate using mongocr\"))),u(y,!1))})})}(t.shift())}};var p=function(e,t,n,r,o,s,a,c){var u=new l(s.host,s.port,r,a);o(s,new i(e.bson,\"$external.$cmd\",{saslStart:1,mechanism:\"GSSAPI\",payload:\"\",autoAuthorize:1},{numberToSkip:0,numberToReturn:1}),function(r,a){if(r)return c(r,!1);var l=a.result;u.init(t,n,function(t){if(t)return c(t);u.transition(l.payload,function(t,n){if(t)return c(t);var r={saslContinue:1,conversationId:l.conversationId,payload:n};o(s,new i(e.bson,\"$external.$cmd\",r,{numberToSkip:0,numberToReturn:1}),function(t,n){if(t)return c(t,!1);var r=n.result;u.transition(r.payload,function(t,n){if(t)return c(t);var a={saslContinue:1,conversationId:r.conversationId,payload:n};o(s,new i(e.bson,\"$external.$cmd\",a,{numberToSkip:0,numberToReturn:1}),function(t,n){if(t)return c(t,!1);var r=n.result;u.transition(r.payload,function(t,n){var a={saslContinue:1,conversationId:r.conversationId,payload:n};o(s,new i(e.bson,\"$external.$cmd\",a,{numberToSkip:0,numberToReturn:1}),function(e,t){return e?c(e,!1):t.result.done?c(null,!0):void c(new Error(\"Authentication failed\"),!1)})})})})})})})})},d=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};u.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!=e})},u.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0==o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,r[i].options,function(e){0==(o-=1)&&n(e,null)})},e.exports=u},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(0).format,i=n(5).EventEmitter,s=n(45),a=n(27),c=n(14).debugOptions,l=n(14).retrieveBSON,u=n(192),p=n(11).Query,d=n(8),f=n(191),h=n(190),m=n(189),g=n(66),y=n(19),v=n(72).assign,b=n(19).createClientInfo,x=[\"reconnect\",\"reconnectTries\",\"reconnectInterval\",\"emitError\",\"cursorFactory\",\"host\",\"port\",\"size\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectionTimeout\",\"checkServerIdentity\",\"socketTimeout\",\"singleBufferSerializtion\",\"ssl\",\"ca\",\"crl\",\"cert\",\"key\",\"rejectUnauthorized\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"servername\"],w=0,S=!1,k={},O=l(),C=function(e){e=e||{},i.call(this),this.id=w++,this.s={options:e,logger:a(\"Server\",e),Cursor:e.cursorFactory||g,bson:e.bson||new O([O.Binary,O.Code,O.DBRef,O.Decimal128,O.Double,O.Int32,O.Long,O.Map,O.MaxKey,O.MinKey,O.ObjectId,O.BSONRegExp,O.Symbol,O.Timestamp]),pool:null,disconnectHandler:e.disconnectHandler,monitoring:\"boolean\"!=typeof e.monitoring||e.monitoring,inTopology:\"boolean\"==typeof e.inTopology&&e.inTopology,monitoringInterval:\"number\"==typeof e.monitoringInterval?e.monitoringInterval:5e3,topologyId:-1},this.ismaster=null,this.lastIsMasterMS=-1,this.monitoringProcessId=null,this.initalConnect=!0,this.wireProtocolHandler=new f,this._type=\"server\",this.clientInfo=b(e),this.lastUpdateTime=0,this.lastWriteDate=0,this.staleness=0};function _(e,t,n,r,i,s){return e.s.pool.isConnected()||!e.s.options.reconnect||null==e.s.disconnectHandler||i.monitoring?e.s.pool.isConnected()?void 0:(s(d.create(o(\"no connection available to server %s\",e.name))),!0):(e.s.disconnectHandler.add(t,n,r,i,s),!0)}r(C,i),Object.defineProperty(C.prototype,\"type\",{enumerable:!0,get:function(){return this._type}}),Object.defineProperty(C.prototype,\"parserType\",{enumerable:!0,get:function(){return O.native?\"c++\":\"js\"}}),C.enableServerAccounting=function(){S=!0,k={}},C.disableServerAccounting=function(){S=!1},C.servers=function(){return k},Object.defineProperty(C.prototype,\"name\",{enumerable:!0,get:function(){return this.s.options.host+\":\"+this.s.options.port}});var E=function(e,t){return function(n){if(e.s.logger.isInfo()){var r=n instanceof d?JSON.stringify(n):{};e.s.logger.info(o(\"server %s fired event %s out with message %s\",e.name,t,r))}if(\"connect\"==t){var i=new p(e.s.bson,\"admin.$cmd\",{ismaster:!0,client:e.clientInfo},{numberToSkip:0,numberToReturn:-1,checkKeys:!1,slaveOk:!0}),s=(new Date).getTime();e.s.pool.write(i,{socketTimeout:e.s.options.connectionTimeout||2e3},function(t,n){if(e.lastIsMasterMS=(new Date).getTime()-s,t)return e.destroy(),void(e.listeners(\"error\").length>0&&e.emit(\"error\",t));var r;e.initalConnect=!1,e.ismaster=n.result,\"isdbgrid\"==e.ismaster.msg&&(e._type=\"mongos\"),e.wireProtocolHandler=(r=e.ismaster).maxWireVersion>=4?new m(new h):r.maxWireVersion>=2?new h:new f,e.s.monitoring&&(e.monitoringProcessId=setTimeout(function e(t){return function(){if(!t.s.pool.isDestroyed()){t.emit(\"monitoring\",t);var n=new p(t.s.bson,\"admin.$cmd\",{ismaster:!0},{numberToSkip:0,numberToReturn:-1,checkKeys:!1,slaveOk:!0}),r=(new Date).getTime();t.s.pool.write(n,{socketTimeout:\"number\"!=typeof t.s.options.connectionTimeout?2e3:t.s.options.connectionTimeout,monitoring:!0},function(n,o){t.lastIsMasterMS=(new Date).getTime()-r,t.s.pool.isDestroyed()||(o&&(t.ismaster=o.result),t.monitoringProcessId=setTimeout(e(t),t.s.monitoringInterval))})}}}(e),e.s.monitoringInterval)),y.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:y.getTopologyType(e)}),e.s.inTopology||y.emitTopologyDescriptionChanged(e,{topologyType:\"Single\",servers:[{address:e.name,arbiters:[],hosts:[],passives:[],type:y.getTopologyType(e)}]}),e.s.logger.isInfo()&&e.s.logger.info(o(\"server %s connected with ismaster [%s]\",e.name,JSON.stringify(e.ismaster))),e.emit(\"connect\",e)})}else{if(S&&-1!=[\"close\",\"timeout\",\"error\",\"parseError\",\"reconnectFailed\"].indexOf(t)&&(e.s.inTopology||e.emit(\"topologyOpening\",{topologyId:e.id}),delete k[e.id]),\"close\"===t&&y.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:\"Unknown\"}),\"reconnectFailed\"==t)return e.emit(\"reconnectFailed\",n),void(e.listeners(\"error\").length>0&&e.emit(\"error\",n));if(\"disconnected\"==e.s.pool.state&&e.initalConnect&&-1!=[\"close\",\"timeout\",\"error\",\"parseError\"].indexOf(t))return e.initalConnect=!1,e.emit(\"error\",new d(o(\"failed to connect to server [%s] on first connect [%s]\",e.name,n)));if(\"reconnect\"==t)return y.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:y.getTopologyType(e)}),e.emit(t,e);e.emit(t,n)}}};function I(e){return e.s.pool?e.s.pool.isDestroyed()?d.create(\"server instance pool was destroyed\"):void 0:d.create(\"server instance is not connected\")}C.prototype.connect=function(e){if(e=e||{},S&&(k[this.id]=this),this.s.pool&&!this.s.pool.isDisconnected()&&!this.s.pool.isDestroyed())throw d.create(o(\"server instance in invalid state %s\",this.s.pool.state));this.s.pool=new u(v(this.s.options,e,{bson:this.s.bson})),this.s.pool.on(\"close\",E(this,\"close\")),this.s.pool.on(\"error\",E(this,\"error\")),this.s.pool.on(\"timeout\",E(this,\"timeout\")),this.s.pool.on(\"parseError\",E(this,\"parseError\")),this.s.pool.on(\"connect\",E(this,\"connect\")),this.s.pool.on(\"reconnect\",E(this,\"reconnect\")),this.s.pool.on(\"reconnectFailed\",E(this,\"reconnectFailed\")),this.s.inTopology||this.emit(\"topologyOpening\",{topologyId:this.id}),this.emit(\"serverOpening\",{topologyId:-1!=this.s.topologyId?this.s.topologyId:this.id,address:this.name}),e.auth?this.s.pool.connect.apply(this.s.pool,e.auth):this.s.pool.connect()},C.prototype.getDescription=function(){var e=this.ismaster||{},t={type:y.getTopologyType(this),address:this.name};return e.hosts&&(t.hosts=e.hosts),e.arbiters&&(t.arbiters=e.arbiters),e.passives&&(t.passives=e.passives),e.setName&&(t.setName=e.setName),t},C.prototype.lastIsMaster=function(){return this.ismaster},C.prototype.unref=function(){this.s.pool.unref()},C.prototype.isConnected=function(){return!!this.s.pool&&this.s.pool.isConnected()},C.prototype.isDestroyed=function(){return!!this.s.pool&&this.s.pool.isDestroyed()},C.prototype.command=function(e,t,n,r){\"function\"==typeof n&&(r=n,n=(n={})||{});var i=function(e,t){if(I(e),t.readPreference&&!(t.readPreference instanceof s))throw new Error(\"readPreference must be an instance of ReadPreference\")}(this,n);if(i)return r(i);if(n=v({},n,{wireProtocolCommand:!1}),this.s.logger.isDebug()&&this.s.logger.debug(o(\"executing command [%s] against %s\",JSON.stringify({ns:e,cmd:t,options:c(x,n)}),this.name)),!_(this,\"command\",e,t,n,r)){if(this.ismaster&&this.ismaster.maxWireVersion<5&&t.collation)return r(new d(o(\"server %s does not support collation\",this.name)));\"boolean\"==typeof n.checkKeys&&n.checkKeys,\"boolean\"==typeof n.serializeFunctions&&n.serializeFunctions,\"boolean\"==typeof n.ignoreUndefined&&n.ignoreUndefined;var a=n.topology||{},l=this.wireProtocolHandler.command(this.s.bson,e,t,{},a,n);l.slaveOk=!!n.readPreference&&n.readPreference.slaveOk();var u={raw:\"boolean\"==typeof n.raw&&n.raw,promoteLongs:\"boolean\"!=typeof n.promoteLongs||n.promoteLongs,promoteValues:\"boolean\"!=typeof n.promoteValues||n.promoteValues,promoteBuffers:\"boolean\"==typeof n.promoteBuffers&&n.promoteBuffers,command:!0,monitoring:\"boolean\"==typeof n.monitoring&&n.monitoring,fullResult:\"boolean\"==typeof n.fullResult&&n.fullResult,requestId:l.requestId,socketTimeout:\"number\"==typeof n.socketTimeout?n.socketTimeout:null};this.s.pool.write(l,u,r)}},C.prototype.insert=function(e,t,n,r){\"function\"==typeof n&&(r=n,n=(n={})||{});var o=I(this);return o?r(o):_(this,\"insert\",e,t,n,r)?void 0:(t=Array.isArray(t)?t:[t],this.wireProtocolHandler.insert(this.s.pool,this.ismaster,e,this.s.bson,t,n,r))},C.prototype.update=function(e,t,n,r){\"function\"==typeof n&&(r=n,n=(n={})||{});var i=I(this);return i?r(i):_(this,\"update\",e,t,n,r)?void 0:this.ismaster&&this.ismaster.maxWireVersion<5&&n.collation?r(new d(o(\"server %s does not support collation\",this.name))):(t=Array.isArray(t)?t:[t],this.wireProtocolHandler.update(this.s.pool,this.ismaster,e,this.s.bson,t,n,r))},C.prototype.remove=function(e,t,n,r){\"function\"==typeof n&&(r=n,n=(n={})||{});var i=I(this);return i?r(i):_(this,\"remove\",e,t,n,r)?void 0:this.ismaster&&this.ismaster.maxWireVersion<5&&n.collation?r(new d(o(\"server %s does not support collation\",this.name))):(t=Array.isArray(t)?t:[t],this.wireProtocolHandler.remove(this.s.pool,this.ismaster,e,this.s.bson,t,n,r))},C.prototype.cursor=function(e,t,n){var r=this.s;return new((n=n||{}).cursorFactory||r.Cursor)(r.bson,e,t,n,this,r.options)},C.prototype.logout=function(e,t){this.s.pool.logout(e,t)},C.prototype.auth=function(e,t){\"default\"==e&&this.ismaster&&this.ismaster.maxWireVersion>=3?e=\"scram-sha-1\":\"default\"==e&&(e=\"mongocr\");var n=Array.prototype.slice.call(arguments,0);n[0]=e;var r=n[n.length-1];if(!_(this,\"auth\",t,n,{},r))return this.lastIsMaster()&&this.lastIsMaster().arbiterOnly?r(null,!0):void this.s.pool.auth.apply(this.s.pool,n)},C.prototype.equals=function(e){return\"string\"==typeof e?this.name.toLowerCase()==e.toLowerCase():!!e.name&&this.name.toLowerCase()==e.name.toLowerCase()},C.prototype.connections=function(){return this.s.pool.allConnections()},C.prototype.getServer=function(){return this},C.prototype.getConnection=function(){return this.s.pool.get()};var T=[\"close\",\"error\",\"timeout\",\"parseError\",\"connect\"];C.prototype.destroy=function(e){e=e||{};var t=this;S&&delete k[this.id],this.monitoringProcessId&&clearTimeout(this.monitoringProcessId),t.s.pool&&(e.emitClose&&t.emit(\"close\",t),e.emitDestroy&&t.emit(\"destroy\",t),T.forEach(function(e){t.s.pool.removeAllListeners(e)}),t.listeners(\"serverClosed\").length>0&&t.emit(\"serverClosed\",{topologyId:-1!=t.s.topologyId?t.s.topologyId:t.id,address:t.name}),t.listeners(\"topologyClosed\").length>0&&!t.s.inTopology&&t.emit(\"topologyClosed\",{topologyId:t.id}),t.s.logger.isDebug()&&t.s.logger.debug(o(\"destroy called on server %s\",t.name)),this.s.pool.destroy(e.force))},e.exports=C},function(e,t,n){\"use strict\";var r=n(75),o=n(1),i=n(1).toError,s=n(1).handleCallback,a=o.shallowClone,c=r.BulkWriteResult,l=n(3).BSON.ObjectID,u=n(3).BSON,p=n(17),d=r.Batch,f=r.mergeBatchResults,h=n(1).executeOperation,m=n(75).BulkWriteError,g=new u([u.Binary,u.Code,u.DBRef,u.Decimal128,u.Double,u.Int32,u.Long,u.Map,u.MaxKey,u.MinKey,u.ObjectId,u.BSONRegExp,u.Symbol,u.Timestamp]),y=function(e){this.s=e.s};y.prototype.update=function(e){var t=\"boolean\"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,n={q:this.s.currentOp.selector,u:e,multi:!0,upsert:t};return this.s.currentOp=null,v(this,r.UPDATE,n)},y.prototype.updateOne=function(e){var t=\"boolean\"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,n={q:this.s.currentOp.selector,u:e,multi:!1,upsert:t};return this.s.currentOp=null,v(this,r.UPDATE,n)},y.prototype.replaceOne=function(e){this.updateOne(e)},y.prototype.upsert=function(){return this.s.currentOp.upsert=!0,this},y.prototype.removeOne=function(){var e={q:this.s.currentOp.selector,limit:1};return this.s.currentOp=null,v(this,r.REMOVE,e)},y.prototype.remove=function(){var e={q:this.s.currentOp.selector,limit:0};return this.s.currentOp=null,v(this,r.REMOVE,e)};var v=function(e,t,n){var o=g.calculateObjectSize(n,{checkKeys:!1});if(o>=e.s.maxBatchSizeBytes)throw i(\"document is larger than the maximum size \"+e.s.maxBatchSizeBytes);if(e.s.currentBatch=null,t===r.INSERT?e.s.currentBatch=e.s.currentInsertBatch:t===r.UPDATE?e.s.currentBatch=e.s.currentUpdateBatch:t===r.REMOVE&&(e.s.currentBatch=e.s.currentRemoveBatch),null==e.s.currentBatch&&(e.s.currentBatch=new d(t,e.s.currentIndex)),(e.s.currentBatch.size+1>=e.s.maxWriteBatchSize||e.s.currentBatch.sizeBytes+o>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!==t)&&(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new d(t,e.s.currentIndex)),Array.isArray(n))throw i(\"operation passed in cannot be an Array\");return e.s.currentBatch.operations.push(n),e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentIndex=e.s.currentIndex+1,t===r.INSERT?(e.s.currentInsertBatch=e.s.currentBatch,e.s.bulkResult.insertedIds.push({index:e.s.bulkResult.insertedIds.length,_id:n._id})):t===r.UPDATE?e.s.currentUpdateBatch=e.s.currentBatch:t===r.REMOVE&&(e.s.currentRemoveBatch=e.s.currentBatch),e.s.currentBatch.size=e.s.currentBatch.size+1,e.s.currentBatch.sizeBytes=e.s.currentBatch.sizeBytes+o,e},b=function(e,t,n){n=null==n?{}:n;var o=t.collectionName,i=e.bson,s=e.isMasterDoc&&e.isMasterDoc.maxBsonObjectSize?e.isMasterDoc.maxBsonObjectSize:16793600,c=e.isMasterDoc&&e.isMasterDoc.maxWriteBatchSize?e.isMasterDoc.maxWriteBatchSize:1e3,l=r.writeConcern(a(n),t,n),u=n.promiseLibrary||Promise;this.s={bulkResult:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},currentInsertBatch:null,currentUpdateBatch:null,currentRemoveBatch:null,currentBatch:null,currentIndex:0,batches:[],writeConcern:l,maxBatchSizeBytes:s,maxWriteBatchSize:c,namespace:o,bson:i,topology:e,options:n,currentOp:null,executed:!1,collection:t,promiseLibrary:u,bypassDocumentValidation:\"boolean\"==typeof n.bypassDocumentValidation&&n.bypassDocumentValidation,checkKeys:\"boolean\"!=typeof n.checkKeys||n.checkKeys}},x=b.define=new p(\"UnorderedBulkOperation\",b,!1);b.prototype.insert=function(e){return!0!==this.s.collection.s.db.options.forceServerObjectId&&null==e._id&&(e._id=new l),v(this,r.INSERT,e)},b.prototype.find=function(e){if(!e)throw i(\"Bulk find operation must specify a selector\");return this.s.currentOp={selector:e},new y(this)},Object.defineProperty(b.prototype,\"length\",{enumerable:!0,get:function(){return this.s.currentIndex}}),b.prototype.raw=function(e){var t=Object.keys(e)[0],n=\"boolean\"==typeof this.s.options.forceServerObjectId?this.s.options.forceServerObjectId:this.s.collection.s.db.options.forceServerObjectId;if(e.updateOne&&e.updateOne.q||e.updateMany&&e.updateMany.q||e.replaceOne&&e.replaceOne.q)return e[t].multi=!e.updateOne&&!e.replaceOne,v(this,r.UPDATE,e[t]);if(e.updateOne||e.updateMany||e.replaceOne){var o=!e.updateOne&&!e.replaceOne,s={q:e[t].filter,u:e[t].update||e[t].replacement,multi:o};return e[t].upsert&&(s.upsert=!0),e[t].arrayFilters&&(s.arrayFilters=e[t].arrayFilters),v(this,r.UPDATE,s)}if(e.removeOne||e.removeMany||e.deleteOne&&e.deleteOne.q||e.deleteMany&&e.deleteMany.q)return e[t].limit=e.removeOne?1:0,v(this,r.REMOVE,e[t]);if(e.deleteOne||e.deleteMany){var a=e.deleteOne?1:0;return s={q:e[t].filter,limit:a},v(this,r.REMOVE,s)}if(e.insertOne&&null==e.insertOne.document)return!0!==n&&null==e.insertOne._id&&(e.insertOne._id=new l),v(this,r.INSERT,e.insertOne);if(e.insertOne&&e.insertOne.document)return!0!==n&&null==e.insertOne.document._id&&(e.insertOne.document._id=new l),v(this,r.INSERT,e.insertOne.document);if(!e.insertMany)throw i(\"bulkWrite only supports insertOne, insertMany, updateOne, updateMany, removeOne, removeMany, deleteOne, deleteMany\");for(var c=0;c<e.insertMany.length;c++)!0!==n&&null==e.insertMany[c]._id&&(e.insertMany[c]._id=new l),v(this,r.INSERT,e.insertMany[c])};var w=function(e,t,n,o){var i=Object.assign({ordered:!1},n);null!=e.s.writeConcern&&(i.writeConcern=e.s.writeConcern);var a=function(n,r){if(n&&n.driver||n&&n.message)return s(o,n);n&&(n.ok=0),s(o,null,f(!1,t,e.s.bulkResult,n,r))};e.operationId&&(a.operationId=e.operationId),e.s.options.serializeFunctions&&(i.serializeFunctions=!0),e.s.options.ignoreUndefined&&(i.ignoreUndefined=!0),!0===e.s.bypassDocumentValidation&&(i.bypassDocumentValidation=!0),!1===e.s.checkKeys&&(i.checkKeys=!1);try{t.batchType===r.INSERT?e.s.topology.insert(e.s.collection.namespace,t.operations,i,a):t.batchType===r.UPDATE?e.s.topology.update(e.s.collection.namespace,t.operations,i,a):t.batchType===r.REMOVE&&e.s.topology.remove(e.s.collection.namespace,t.operations,i,a)}catch(n){n.ok=0,s(o,null,f(!1,t,e.s.bulkResult,n,null))}},S=function(e,t,n){for(var r=e.s.batches.length,o=0;o<e.s.batches.length;o++)w(e,e.s.batches[o],t,function(t){if(0===(r-=1)){if(t)return s(n,t);const r=new c(e.s.bulkResult);return e.s.bulkResult.writeErrors.length>0?1===e.s.bulkResult.writeErrors.length?s(n,new m(i(e.s.bulkResult.writeErrors[0]),r),null):s(n,new m(i({message:\"write operation failed\",code:e.s.bulkResult.writeErrors[0].code,writeErrors:e.s.bulkResult.writeErrors}),r),null):r.getWriteConcernError()?s(n,new m(i(r.getWriteConcernError()),r),null):s(n,null,r)}})};b.prototype.execute=function(e,t,n){if(\"function\"==typeof t&&(n=t,t={}),t=t||{},this.s.executed){var r=i(\"batch cannot be re-executed\");return\"function\"==typeof n?n(r,null):this.s.promiseLibrary.reject(r)}if(\"function\"==typeof e?n=e:e&&\"object\"==typeof e&&(this.s.writeConcern=e),this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch),0===this.s.batches.length){var o=i(\"Invalid Operation, no operations specified\");return\"function\"==typeof n?n(o,null):this.s.promiseLibrary.reject(o)}return h(this.s.topology,S,[this,t,n])},x.classMethod(\"execute\",{callback:!0,promise:!1});var k=function(e,t,n){return new b(e,t,n)};k.UnorderedBulkOperation=b,e.exports=k,e.exports.Bulk=b},function(e,t,n){\"use strict\";var r=n(75),o=n(1),i=n(1).toError,s=n(1).handleCallback,a=o.shallowClone,c=r.BulkWriteResult,l=n(3).BSON.ObjectID,u=n(17),p=n(3).BSON,d=r.Batch,f=r.mergeBatchResults,h=n(1).executeOperation,m=n(75).BulkWriteError,g=new p([p.Binary,p.Code,p.DBRef,p.Decimal128,p.Double,p.Int32,p.Long,p.Map,p.MaxKey,p.MinKey,p.ObjectId,p.BSONRegExp,p.Symbol,p.Timestamp]),y=function(e){this.s=e.s};y.prototype.update=function(e){var t=\"boolean\"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,n={q:this.s.currentOp.selector,u:e,multi:!0,upsert:t};return this.s.currentOp=null,v(this,r.UPDATE,n)},y.prototype.updateOne=function(e){var t=\"boolean\"==typeof this.s.currentOp.upsert&&this.s.currentOp.upsert,n={q:this.s.currentOp.selector,u:e,multi:!1,upsert:t};return this.s.currentOp=null,v(this,r.UPDATE,n)},y.prototype.replaceOne=function(e){this.updateOne(e)},y.prototype.upsert=function(){return this.s.currentOp.upsert=!0,this},y.prototype.deleteOne=function(){var e={q:this.s.currentOp.selector,limit:1};return this.s.currentOp=null,v(this,r.REMOVE,e)},y.prototype.removeOne=y.prototype.deleteOne,y.prototype.delete=function(){var e={q:this.s.currentOp.selector,limit:0};return this.s.currentOp=null,v(this,r.REMOVE,e)},y.prototype.remove=y.prototype.delete;var v=function(e,t,n){var o=g.calculateObjectSize(n,{checkKeys:!1});if(o>=e.s.maxBatchSizeBytes)throw i(\"document is larger than the maximum size \"+e.s.maxBatchSizeBytes);if(null==e.s.currentBatch&&(e.s.currentBatch=new d(t,e.s.currentIndex)),e.s.currentBatchSize+1>=e.s.maxWriteBatchSize||e.s.currentBatchSizeBytes+e.s.currentBatchSizeBytes>=e.s.maxBatchSizeBytes||e.s.currentBatch.batchType!==t?(e.s.batches.push(e.s.currentBatch),e.s.currentBatch=new d(t,e.s.currentIndex),e.s.currentBatchSize=0,e.s.currentBatchSizeBytes=0):(e.s.currentBatchSize=e.s.currentBatchSize+1,e.s.currentBatchSizeBytes=e.s.currentBatchSizeBytes+o),t===r.INSERT&&e.s.bulkResult.insertedIds.push({index:e.s.currentIndex,_id:n._id}),Array.isArray(n))throw i(\"operation passed in cannot be an Array\");return e.s.currentBatch.originalIndexes.push(e.s.currentIndex),e.s.currentBatch.operations.push(n),e.s.currentBatchSizeBytes=e.s.currentBatchSizeBytes+o,e.s.currentIndex=e.s.currentIndex+1,e};function b(e,t,n){n=null==n?{}:n;var o=e.bson,i=t.collectionName,s=e.isMasterDoc&&e.isMasterDoc.maxBsonObjectSize?e.isMasterDoc.maxBsonObjectSize:16793600,c=e.isMasterDoc&&e.isMasterDoc.maxWriteBatchSize?e.isMasterDoc.maxWriteBatchSize:1e3,l=r.writeConcern(a(n),t,n),u=n.promiseLibrary||Promise;this.s={bulkResult:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},currentBatch:null,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,batches:[],writeConcern:l,maxBatchSizeBytes:s,maxWriteBatchSize:c,namespace:i,bson:o,topology:e,options:n,currentOp:null,executed:!1,collection:t,promiseLibrary:u,err:null,bypassDocumentValidation:\"boolean\"==typeof n.bypassDocumentValidation&&n.bypassDocumentValidation,checkKeys:\"boolean\"!=typeof n.checkKeys||n.checkKeys}}var x=b.define=new u(\"OrderedBulkOperation\",b,!1);b.prototype.raw=function(e){var t=Object.keys(e)[0],n=\"boolean\"==typeof this.s.options.forceServerObjectId?this.s.options.forceServerObjectId:this.s.collection.s.db.options.forceServerObjectId;if(e.updateOne&&e.updateOne.q||e.updateMany&&e.updateMany.q||e.replaceOne&&e.replaceOne.q)return e[t].multi=!e.updateOne&&!e.replaceOne,v(this,r.UPDATE,e[t]);if(e.updateOne||e.updateMany||e.replaceOne){var o=!e.updateOne&&!e.replaceOne,s={q:e[t].filter,u:e[t].update||e[t].replacement,multi:o};return s.upsert=!!e[t].upsert,e.collation&&(s.collation=e.collation),e[t].arrayFilters&&(s.arrayFilters=e[t].arrayFilters),v(this,r.UPDATE,s)}if(e.removeOne||e.removeMany||e.deleteOne&&e.deleteOne.q||e.deleteMany&&e.deleteMany.q)return e[t].limit=e.removeOne?1:0,v(this,r.REMOVE,e[t]);if(e.deleteOne||e.deleteMany){var a=e.deleteOne?1:0;return s={q:e[t].filter,limit:a},e.collation&&(s.collation=e.collation),v(this,r.REMOVE,s)}if(e.insertOne&&null==e.insertOne.document)return!0!==n&&null==e.insertOne._id&&(e.insertOne._id=new l),v(this,r.INSERT,e.insertOne);if(e.insertOne&&e.insertOne.document)return!0!==n&&null==e.insertOne.document._id&&(e.insertOne.document._id=new l),v(this,r.INSERT,e.insertOne.document);if(!e.insertMany)throw i(\"bulkWrite only supports insertOne, insertMany, updateOne, updateMany, removeOne, removeMany, deleteOne, deleteMany\");for(var c=0;c<e.insertMany.length;c++)!0!==n&&null==e.insertMany[c]._id&&(e.insertMany[c]._id=new l),v(this,r.INSERT,e.insertMany[c])},b.prototype.insert=function(e){return!0!==this.s.collection.s.db.options.forceServerObjectId&&null==e._id&&(e._id=new l),v(this,r.INSERT,e)},b.prototype.find=function(e){if(!e)throw i(\"Bulk find operation must specify a selector\");return this.s.currentOp={selector:e},new y(this)},Object.defineProperty(b.prototype,\"length\",{enumerable:!0,get:function(){return this.s.currentIndex}});var w=function(e,t,n){if(0===e.s.batches.length)return s(n,null,new c(e.s.bulkResult));var o=e.s.batches.shift(),a=function(r,a){if(r&&r.driver||r&&r.message)return s(n,r);r&&(r.ok=0);var l=f(!0,o,e.s.bulkResult,r,a);const u=new c(e.s.bulkResult);return null!=l?s(n,null,u):e.s.bulkResult.writeErrors.length>0?1===e.s.bulkResult.writeErrors.length?s(n,new m(i(e.s.bulkResult.writeErrors[0]),u),null):s(n,new m(i({message:\"write operation failed\",code:e.s.bulkResult.writeErrors[0].code,writeErrors:e.s.bulkResult.writeErrors}),u),null):u.getWriteConcernError()?s(n,new m(i(u.getWriteConcernError()),u),null):void w(e,t,n)},l=Object.assign({ordered:!0},t);null!=e.s.writeConcern&&(l.writeConcern=e.s.writeConcern),e.operationId&&(a.operationId=e.operationId),e.s.options.serializeFunctions&&(l.serializeFunctions=!0),e.s.options.ignoreUndefined&&(l.ignoreUndefined=!0),!0===e.s.bypassDocumentValidation&&(l.bypassDocumentValidation=!0),!1===e.s.checkKeys&&(l.checkKeys=!1);try{o.batchType===r.INSERT?e.s.topology.insert(e.s.collection.namespace,o.operations,l,a):o.batchType===r.UPDATE?e.s.topology.update(e.s.collection.namespace,o.operations,l,a):o.batchType===r.REMOVE&&e.s.topology.remove(e.s.collection.namespace,o.operations,l,a)}catch(t){t.ok=0,s(n,null,f(!1,o,e.s.bulkResult,t,null))}};b.prototype.execute=function(e,t,n){if(\"function\"==typeof t&&(n=t,t={}),t=t||{},this.s.executed){var r=i(\"batch cannot be re-executed\");return\"function\"==typeof n?n(r,null):this.s.promiseLibrary.reject(r)}if(\"function\"==typeof e?n=e:e&&\"object\"==typeof e&&(this.s.writeConcern=e),this.s.currentBatch&&this.s.batches.push(this.s.currentBatch),0===this.s.batches.length){var o=i(\"Invalid Operation, no operations specified\");return\"function\"==typeof n?n(o,null):this.s.promiseLibrary.reject(o)}return h(this.s.topology,w,[this,t,n])},x.classMethod(\"execute\",{callback:!0,promise:!1});var S=function(e,t,n){return new b(e,t,n)};S.OrderedBulkOperation=b,e.exports=S,e.exports.Bulk=b},function(e,t){e.exports=require(\"dns\")},function(e,t,n){\"use strict\";var r=n(0).format,o=n(30),i=n(15).Query,s=n(6).MongoError,a=function(e,t,n,r){this.db=e,this.username=t,this.password=n,this.options=r};a.prototype.equal=function(e){return e.db===this.db&&e.username===this.username&&e.password===this.password};var c=null,l=null;try{c=o(\"kerberos\").Kerberos,l=o(\"kerberos\").processes.MongoAuthProcess}catch(e){}var u=function(e){this.bson=e,this.authStore=[]};u.prototype.auth=function(e,t,n,o,i,l,u){var f=this;if(null==c)return u(new Error(\"Kerberos library is not installed\"));var h=l.gssapiServiceName||\"mongodb\",m=t.length;if(0===m)return u(null,null);for(var g=0,y=null;t.length>0;){!function(t){process.nextTick(function(){p(f,o,i,h,e,t,l,function(e,t){m-=1,e?y=e:t&&\"object\"==typeof t&&t.result.$err?y=t.result:t&&\"object\"==typeof t&&t.result.errmsg?y=t.result:g+=1,0===m&&g>0?(d(f.authStore,new a(n,o,i,l)),u(null,!0)):0===m&&(null==y&&(y=new s(r(\"failed to authenticate using mongocr\"))),u(y,!1))})})}(t.shift())}};var p=function(e,t,n,r,o,s,a,c){var u=new l(s.host,s.port,r,a);o(s,new i(e.bson,\"$external.$cmd\",{saslStart:1,mechanism:\"GSSAPI\",payload:\"\",autoAuthorize:1},{numberToSkip:0,numberToReturn:1}),function(r,a){if(r)return c(r,!1);var l=a.result;u.init(t,n,function(t){if(t)return c(t);u.transition(l.payload,function(t,n){if(t)return c(t);var r={saslContinue:1,conversationId:l.conversationId,payload:n};o(s,new i(e.bson,\"$external.$cmd\",r,{numberToSkip:0,numberToReturn:1}),function(t,n){if(t)return c(t,!1);var r=n.result;u.transition(r.payload,function(t,n){if(t)return c(t);var a={saslContinue:1,conversationId:r.conversationId,payload:n};o(s,new i(e.bson,\"$external.$cmd\",a,{numberToSkip:0,numberToReturn:1}),function(t,n){if(t)return c(t,!1);var r=n.result;u.transition(r.payload,function(t,n){var a={saslContinue:1,conversationId:r.conversationId,payload:n};o(s,new i(e.bson,\"$external.$cmd\",a,{numberToSkip:0,numberToReturn:1}),function(e,t){return e?c(e,!1):t.result.done?c(null,!0):void c(new Error(\"Authentication failed\"),!1)})})})})})})})})},d=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(e[r].equal(t)){n=!0;break}n||e.push(t)};u.prototype.logout=function(e){this.authStore=this.authStore.filter(function(t){return t.db!==e})},u.prototype.reauthenticate=function(e,t,n){var r=this.authStore.slice(0),o=r.length;if(0===o)return n(null,null);for(var i=0;i<r.length;i++)this.auth(e,t,r[i].db,r[i].username,r[i].password,r[i].options,function(e){0===(o-=1)&&n(e,null)})},e.exports=u},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(0).format,i=n(5).EventEmitter,s=n(41),a=n(28),c=n(13).debugOptions,l=n(13).retrieveBSON,u=n(213),p=n(15).Query,d=n(6).MongoError,f=n(6).MongoNetworkError,h=n(210),m=n(209),g=n(76),y=n(7),v=n(7).createClientInfo,b=n(7).createCompressionInfo,x=n(7).resolveClusterTime,w=n(7).SessionMixins,S=[\"reconnect\",\"reconnectTries\",\"reconnectInterval\",\"emitError\",\"cursorFactory\",\"host\",\"port\",\"size\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectionTimeout\",\"checkServerIdentity\",\"socketTimeout\",\"singleBufferSerializtion\",\"ssl\",\"ca\",\"crl\",\"cert\",\"key\",\"rejectUnauthorized\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"servername\"],k=0,O=!1,C={},_=l(),E=function(e){e=e||{},i.call(this),this.id=k++,this.s={options:e,logger:a(\"Server\",e),Cursor:e.cursorFactory||g,bson:e.bson||new _([_.Binary,_.Code,_.DBRef,_.Decimal128,_.Double,_.Int32,_.Long,_.Map,_.MaxKey,_.MinKey,_.ObjectId,_.BSONRegExp,_.Symbol,_.Timestamp]),pool:null,disconnectHandler:e.disconnectHandler,monitoring:\"boolean\"!=typeof e.monitoring||e.monitoring,inTopology:!!e.parent,monitoringInterval:\"number\"==typeof e.monitoringInterval?e.monitoringInterval:5e3,topologyId:-1,compression:{compressors:b(e)},parent:e.parent},this.s.parent||(this.s.clusterTime=null),this.ismaster=null,this.lastIsMasterMS=-1,this.monitoringProcessId=null,this.initialConnect=!0,this.wireProtocolHandler=new h,this._type=\"server\",this.clientInfo=v(e),this.lastUpdateTime=0,this.lastWriteDate=0,this.staleness=0};function I(e,t,n,r,i,s){return e.s.pool.isConnected()||!e.s.options.reconnect||null==e.s.disconnectHandler||i.monitoring?e.s.pool.isConnected()?void 0:(s(new d(o(\"no connection available to server %s\",e.name))),!0):(e.s.disconnectHandler.add(t,n,r,i,s),!0)}r(E,i),Object.assign(E.prototype,w),Object.defineProperty(E.prototype,\"type\",{enumerable:!0,get:function(){return this._type}}),Object.defineProperty(E.prototype,\"parserType\",{enumerable:!0,get:function(){return _.native?\"c++\":\"js\"}}),Object.defineProperty(E.prototype,\"logicalSessionTimeoutMinutes\",{enumerable:!0,get:function(){return this.ismaster&&this.ismaster.logicalSessionTimeoutMinutes||null}}),Object.defineProperty(E.prototype,\"clusterTime\",{enumerable:!0,set:function(e){const t=this.s.parent?this.s.parent:this.s;x(t,e)},get:function(){return(this.s.parent?this.s.parent:this.s).clusterTime||null}}),E.enableServerAccounting=function(){O=!0,C={}},E.disableServerAccounting=function(){O=!1},E.servers=function(){return C},Object.defineProperty(E.prototype,\"name\",{enumerable:!0,get:function(){return this.s.options.host+\":\"+this.s.options.port}});var T=function(e,t){return function(n){if(e.s.logger.isInfo()){var r=n instanceof d?JSON.stringify(n):{};e.s.logger.info(o(\"server %s fired event %s out with message %s\",e.name,t,r))}if(\"connect\"===t){var i=e.s.compression&&e.s.compression.compressors?e.s.compression.compressors:[],s=new p(e.s.bson,\"admin.$cmd\",{ismaster:!0,client:e.clientInfo,compression:i},{numberToSkip:0,numberToReturn:-1,checkKeys:!1,slaveOk:!0}),a=(new Date).getTime();e.s.pool.write(s,{socketTimeout:e.s.options.connectionTimeout||2e3},function(t,n){if(e.lastIsMasterMS=(new Date).getTime()-a,t)return e.destroy(),e.emit(\"error\",t);if(!((r=n.result)&&\"number\"==typeof r.maxWireVersion&&r.maxWireVersion>=2)){e.destroy();const t=\"2.6\",r=\"Server at \"+e.s.options.host+\":\"+e.s.options.port+\" reports wire version \"+(n.result.maxWireVersion||0)+\", but this version of Node.js Driver requires at least 2 (MongoDB\"+t+\").\";return e.emit(\"error\",new d(r),e)}var r;if(n.result&&n.result.compression){for(var i=0;i<e.s.compression.compressors.length;i++)if(n.result.compression.indexOf(e.s.compression.compressors[i])>-1){e.s.pool.options.agreedCompressor=e.s.compression.compressors[i];break}e.s.compression.zlibCompressionLevel&&(e.s.pool.options.zlibCompressionLevel=e.s.compression.zlibCompressionLevel)}e.initialConnect=!1,e.ismaster=n.result,\"isdbgrid\"===e.ismaster.msg&&(e._type=\"mongos\"),e.wireProtocolHandler=e.ismaster.maxWireVersion>=4?new m(new h):new h,e.s.monitoring&&(e.monitoringProcessId=setTimeout(function e(t){return function(){if(!t.s.pool.isDestroyed()){t.emit(\"monitoring\",t);var n=new p(t.s.bson,\"admin.$cmd\",{ismaster:!0},{numberToSkip:0,numberToReturn:-1,checkKeys:!1,slaveOk:!0}),r=(new Date).getTime();t.s.pool.write(n,{socketTimeout:\"number\"!=typeof t.s.options.connectionTimeout?2e3:t.s.options.connectionTimeout,monitoring:!0},function(n,o){t.lastIsMasterMS=(new Date).getTime()-r,t.s.pool.isDestroyed()||(o&&(t.ismaster=o.result),t.monitoringProcessId=setTimeout(e(t),t.s.monitoringInterval))})}}}(e),e.s.monitoringInterval)),y.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:y.getTopologyType(e)}),e.s.inTopology||y.emitTopologyDescriptionChanged(e,{topologyType:\"Single\",servers:[{address:e.name,arbiters:[],hosts:[],passives:[],type:y.getTopologyType(e)}]}),e.s.logger.isInfo()&&e.s.logger.info(o(\"server %s connected with ismaster [%s]\",e.name,JSON.stringify(e.ismaster))),e.emit(\"connect\",e)})}else{if(O&&-1!==[\"close\",\"timeout\",\"error\",\"parseError\",\"reconnectFailed\"].indexOf(t)&&(e.s.inTopology||e.emit(\"topologyOpening\",{topologyId:e.id}),delete C[e.id]),\"close\"===t&&y.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:\"Unknown\"}),\"reconnectFailed\"===t)return e.emit(\"reconnectFailed\",n),void(e.listeners(\"error\").length>0&&e.emit(\"error\",n));if(\"disconnected\"===e.s.pool.state&&e.initialConnect&&-1!==[\"close\",\"timeout\",\"error\",\"parseError\"].indexOf(t))return e.initialConnect=!1,e.emit(\"error\",new f(o(\"failed to connect to server [%s] on first connect [%s]\",e.name,n)));if(\"reconnect\"===t)return y.emitServerDescriptionChanged(e,{address:e.name,arbiters:[],hosts:[],passives:[],type:y.getTopologyType(e)}),e.emit(t,e);e.emit(t,n)}}};function M(e){return e.s.pool?e.s.pool.isDestroyed()?new d(\"server instance pool was destroyed\"):void 0:new d(\"server instance is not connected\")}E.prototype.connect=function(e){if(e=e||{},O&&(C[this.id]=this),this.s.pool&&!this.s.pool.isDisconnected()&&!this.s.pool.isDestroyed())throw new d(o(\"server instance in invalid state %s\",this.s.pool.state));this.s.pool=new u(this,Object.assign(this.s.options,e,{bson:this.s.bson})),this.s.pool.on(\"close\",T(this,\"close\")),this.s.pool.on(\"error\",T(this,\"error\")),this.s.pool.on(\"timeout\",T(this,\"timeout\")),this.s.pool.on(\"parseError\",T(this,\"parseError\")),this.s.pool.on(\"connect\",T(this,\"connect\")),this.s.pool.on(\"reconnect\",T(this,\"reconnect\")),this.s.pool.on(\"reconnectFailed\",T(this,\"reconnectFailed\")),this.s.inTopology||this.emit(\"topologyOpening\",{topologyId:this.id}),this.emit(\"serverOpening\",{topologyId:-1!==this.s.topologyId?this.s.topologyId:this.id,address:this.name}),e.auth?this.s.pool.connect.apply(this.s.pool,e.auth):this.s.pool.connect()},E.prototype.getDescription=function(){var e=this.ismaster||{},t={type:y.getTopologyType(this),address:this.name};return e.hosts&&(t.hosts=e.hosts),e.arbiters&&(t.arbiters=e.arbiters),e.passives&&(t.passives=e.passives),e.setName&&(t.setName=e.setName),t},E.prototype.lastIsMaster=function(){return this.ismaster},E.prototype.unref=function(){this.s.pool.unref()},E.prototype.isConnected=function(){return!!this.s.pool&&this.s.pool.isConnected()},E.prototype.isDestroyed=function(){return!!this.s.pool&&this.s.pool.isDestroyed()},E.prototype.command=function(e,t,n,r){\"function\"==typeof n&&(r=n,n=(n={})||{});var i=function(e,t){if(M(e),t.readPreference&&!(t.readPreference instanceof s))throw new Error(\"readPreference must be an instance of ReadPreference\")}(this,n);if(i)return r(i);if(n=Object.assign({},n,{wireProtocolCommand:!1}),this.s.logger.isDebug()&&this.s.logger.debug(o(\"executing command [%s] against %s\",JSON.stringify({ns:e,cmd:t,options:c(S,n)}),this.name)),!I(this,\"command\",e,t,n,r)){if(this.ismaster&&this.ismaster.maxWireVersion<5&&t.collation)return r(new d(o(\"server %s does not support collation\",this.name)));var a=n.topology||{},l=this.wireProtocolHandler.command(this.s.bson,e,t,{},a,n);l.slaveOk=!!n.readPreference&&n.readPreference.slaveOk();var u={raw:\"boolean\"==typeof n.raw&&n.raw,promoteLongs:\"boolean\"!=typeof n.promoteLongs||n.promoteLongs,promoteValues:\"boolean\"!=typeof n.promoteValues||n.promoteValues,promoteBuffers:\"boolean\"==typeof n.promoteBuffers&&n.promoteBuffers,command:!0,monitoring:\"boolean\"==typeof n.monitoring&&n.monitoring,fullResult:\"boolean\"==typeof n.fullResult&&n.fullResult,requestId:l.requestId,socketTimeout:\"number\"==typeof n.socketTimeout?n.socketTimeout:null,session:n.session||null};this.s.pool.write(l,u,r)}},E.prototype.insert=function(e,t,n,r){\"function\"==typeof n&&(r=n,n=(n={})||{});var o=M(this);return o?r(o):I(this,\"insert\",e,t,n,r)?void 0:(t=Array.isArray(t)?t:[t],this.wireProtocolHandler.insert(this.s.pool,this.ismaster,e,this.s.bson,t,n,r))},E.prototype.update=function(e,t,n,r){\"function\"==typeof n&&(r=n,n=(n={})||{});var i=M(this);return i?r(i):I(this,\"update\",e,t,n,r)?void 0:this.ismaster&&this.ismaster.maxWireVersion<5&&n.collation?r(new d(o(\"server %s does not support collation\",this.name))):(t=Array.isArray(t)?t:[t],this.wireProtocolHandler.update(this.s.pool,this.ismaster,e,this.s.bson,t,n,r))},E.prototype.remove=function(e,t,n,r){\"function\"==typeof n&&(r=n,n=(n={})||{});var i=M(this);return i?r(i):I(this,\"remove\",e,t,n,r)?void 0:this.ismaster&&this.ismaster.maxWireVersion<5&&n.collation?r(new d(o(\"server %s does not support collation\",this.name))):(t=Array.isArray(t)?t:[t],this.wireProtocolHandler.remove(this.s.pool,this.ismaster,e,this.s.bson,t,n,r))},E.prototype.cursor=function(e,t,n){const r=(n=n||{}).topology||this;return new(n.cursorFactory||this.s.Cursor)(this.s.bson,e,t,n,r,this.s.options)},E.prototype.logout=function(e,t){this.s.pool.logout(e,t)},E.prototype.auth=function(e,t){\"default\"===e&&this.ismaster&&this.ismaster.maxWireVersion>=3?e=\"scram-sha-1\":\"default\"===e&&(e=\"mongocr\");var n=Array.prototype.slice.call(arguments,0);n[0]=e;var r=n[n.length-1];if(!I(this,\"auth\",t,n,{},r))return this.lastIsMaster()&&this.lastIsMaster().arbiterOnly?r(null,!0):void this.s.pool.auth.apply(this.s.pool,n)},E.prototype.equals=function(e){return\"string\"==typeof e?this.name.toLowerCase()===e.toLowerCase():!!e.name&&this.name.toLowerCase()===e.name.toLowerCase()},E.prototype.connections=function(){return this.s.pool.allConnections()},E.prototype.getServer=function(){return this},E.prototype.getConnection=function(){return this.s.pool.get()};var N=[\"close\",\"error\",\"timeout\",\"parseError\",\"connect\"];E.prototype.destroy=function(e){e=e||{};var t=this;O&&delete C[this.id],this.monitoringProcessId&&clearTimeout(this.monitoringProcessId),t.s.pool&&(e.emitClose&&t.emit(\"close\",t),e.emitDestroy&&t.emit(\"destroy\",t),N.forEach(function(e){t.s.pool.removeAllListeners(e)}),t.listeners(\"serverClosed\").length>0&&t.emit(\"serverClosed\",{topologyId:-1!==t.s.topologyId?t.s.topologyId:t.id,address:t.name}),t.listeners(\"topologyClosed\").length>0&&!t.s.inTopology&&t.emit(\"topologyClosed\",{topologyId:t.id}),t.s.logger.isDebug()&&t.s.logger.debug(o(\"destroy called on server %s\",t.name)),this.s.pool.destroy(e.force))},e.exports=E},function(e,t){function n(e){var t=new Error('Cannot find module \"'+e+'\".');throw t.code=\"MODULE_NOT_FOUND\",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=112},function(e,t,n){\"use strict\";if(void 0!==global.Map)e.exports=global.Map,e.exports.Map=global.Map;else{var r=function(e){this._keys=[],this._values={};for(var t=0;t<e.length;t++)if(null!=e[t]){var n=e[t],r=n[0],o=n[1];this._keys.push(r),this._values[r]={v:o,i:this._keys.length-1}}};r.prototype.clear=function(){this._keys=[],this._values={}},r.prototype.delete=function(e){var t=this._values[e];return null!=t&&(delete this._values[e],this._keys.splice(t.i,1),!0)},r.prototype.entries=function(){var e=this,t=0;return{next:function(){var n=e._keys[t++];return{value:void 0!==n?[n,e._values[n].v]:void 0,done:void 0===n}}}},r.prototype.forEach=function(e,t){t=t||this;for(var n=0;n<this._keys.length;n++){var r=this._keys[n];e.call(t,this._values[r].v,r,t)}},r.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},r.prototype.has=function(e){return null!=this._values[e]},r.prototype.keys=function(e){var t=this,n=0;return{next:function(){var e=t._keys[n++];return{value:void 0!==e?e:void 0,done:void 0===e}}}},r.prototype.set=function(e,t){return this._values[e]?(this._values[e].v=t,this):(this._keys.push(e),this._values[e]={v:t,i:this._keys.length-1},this)},r.prototype.values=function(e,t){var n=this,r=0;return{next:function(){var e=n._keys[r++];return{value:void 0!==e?n._values[e].v:void 0,done:void 0===e}}}},Object.defineProperty(r.prototype,\"size\",{enumerable:!0,get:function(){return this._keys.length}}),e.exports=r,e.exports.Map=r}},function(e,t,n){\"use strict\";var r=n(61),o=n(20)(\"send\"),i=n(31)(\"send\"),s=n(238),a=n(89),c=n(88),l=n(148),u=n(147),p=n(26),d=n(237),f=n(162),h=n(90),m=n(146),g=n(21),y=n(93),v=n(9),b=n(0),x=g.extname,w=g.join,S=g.normalize,k=g.resolve,O=g.sep,C=/^ *bytes=/,_=31536e6,E=/(?:^|[\\\\/])\\.\\.(?:[\\\\/]|$)/;function I(e,t,n){v.call(this);var r=n||{};if(this.options=r,this.path=t,this.req=e,this._acceptRanges=void 0===r.acceptRanges||Boolean(r.acceptRanges),this._cacheControl=void 0===r.cacheControl||Boolean(r.cacheControl),this._etag=void 0===r.etag||Boolean(r.etag),this._dotfiles=void 0!==r.dotfiles?r.dotfiles:\"ignore\",\"ignore\"!==this._dotfiles&&\"allow\"!==this._dotfiles&&\"deny\"!==this._dotfiles)throw new TypeError('dotfiles option must be \"allow\", \"deny\", or \"ignore\"');this._hidden=Boolean(r.hidden),void 0!==r.hidden&&i(\"hidden: use dotfiles: '\"+(this._hidden?\"allow\":\"ignore\")+\"' instead\"),void 0===r.dotfiles&&(this._dotfiles=void 0),this._extensions=void 0!==r.extensions?B(r.extensions,\"extensions option\"):[],this._immutable=void 0!==r.immutable&&Boolean(r.immutable),this._index=void 0!==r.index?B(r.index,\"index option\"):[\"index.html\"],this._lastModified=void 0===r.lastModified||Boolean(r.lastModified),this._maxage=r.maxAge||r.maxage,this._maxage=\"string\"==typeof this._maxage?f(this._maxage):Number(this._maxage),this._maxage=isNaN(this._maxage)?0:Math.min(Math.max(0,this._maxage),_),this._root=r.root?k(r.root):null,!this._root&&r.from&&this.from(r.from)}function T(e,t,n){return e+\" \"+(n?n.start+\"-\"+n.end:\"*\")+\"/\"+t}function M(e,t){return'<!DOCTYPE html>\\n<html lang=\"en\">\\n<head>\\n<meta charset=\"utf-8\">\\n<title>'+e+\"</title>\\n</head>\\n<body>\\n<pre>\"+t+\"</pre>\\n</body>\\n<html>\\n\"}function N(e){return\"function\"!=typeof e.getHeaderNames?Object.keys(e._headers||{}):e.getHeaderNames()}function A(e,t){return(\"function\"!=typeof e.listenerCount?e.listeners(t).length:e.listenerCount(t))>0}function B(e,t){for(var n=[].concat(e||[]),r=0;r<n.length;r++)if(\"string\"!=typeof n[r])throw new TypeError(t+\" must be array of strings or false\");return n}function j(e){var t=e&&Date.parse(e);return\"number\"==typeof t?t:NaN}e.exports=function(e,t,n){return new I(e,t,n)},e.exports.mime=d,b.inherits(I,v),I.prototype.etag=i.function(function(e){return this._etag=Boolean(e),o(\"etag %s\",this._etag),this},\"send.etag: pass etag as option\"),I.prototype.hidden=i.function(function(e){return this._hidden=Boolean(e),this._dotfiles=void 0,o(\"hidden %s\",this._hidden),this},\"send.hidden: use dotfiles option\"),I.prototype.index=i.function(function(e){var t=e?B(e,\"paths argument\"):[];return o(\"index %o\",e),this._index=t,this},\"send.index: pass index as option\"),I.prototype.root=function(e){return this._root=k(String(e)),o(\"root %s\",this._root),this},I.prototype.from=i.function(I.prototype.root,\"send.from: pass root as option\"),I.prototype.root=i.function(I.prototype.root,\"send.root: pass root as option\"),I.prototype.maxage=i.function(function(e){return this._maxage=\"string\"==typeof e?f(e):Number(e),this._maxage=isNaN(this._maxage)?0:Math.min(Math.max(0,this._maxage),_),o(\"max-age %d\",this._maxage),this},\"send.maxage: pass maxAge as option\"),I.prototype.error=function(e,t){if(A(this,\"error\"))return this.emit(\"error\",r(e,t,{expose:!1}));var n=this.res,o=y[e]||String(e),i=M(\"Error\",c(o));!function(e){for(var t=N(e),n=0;n<t.length;n++)e.removeHeader(t[n])}(n),t&&t.headers&&function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var o=n[r];e.setHeader(o,t[o])}}(n,t.headers),n.statusCode=e,n.setHeader(\"Content-Type\",\"text/html; charset=UTF-8\"),n.setHeader(\"Content-Length\",Buffer.byteLength(i)),n.setHeader(\"Content-Security-Policy\",\"default-src 'self'\"),n.setHeader(\"X-Content-Type-Options\",\"nosniff\"),n.end(i)},I.prototype.hasTrailingSlash=function(){return\"/\"===this.path[this.path.length-1]},I.prototype.isConditionalGET=function(){return this.req.headers[\"if-match\"]||this.req.headers[\"if-unmodified-since\"]||this.req.headers[\"if-none-match\"]||this.req.headers[\"if-modified-since\"]},I.prototype.isPreconditionFailure=function(){var e=this.req,t=this.res,n=e.headers[\"if-match\"];if(n){var r=t.getHeader(\"ETag\");return!r||\"*\"!==n&&function(e){for(var t=0,n=[],r=0,o=0,i=e.length;o<i;o++)switch(e.charCodeAt(o)){case 32:r===t&&(r=t=o+1);break;case 44:n.push(e.substring(r,t)),r=t=o+1;break;default:t=o+1}return n.push(e.substring(r,t)),n}(n).every(function(e){return e!==r&&e!==\"W/\"+r&&\"W/\"+e!==r})}var o=j(e.headers[\"if-unmodified-since\"]);if(!isNaN(o)){var i=j(t.getHeader(\"Last-Modified\"));return isNaN(i)||i>o}return!1},I.prototype.removeContentHeaderFields=function(){for(var e=this.res,t=N(e),n=0;n<t.length;n++){var r=t[n];\"content-\"===r.substr(0,8)&&\"content-location\"!==r&&e.removeHeader(r)}},I.prototype.notModified=function(){var e=this.res;o(\"not modified\"),this.removeContentHeaderFields(),e.statusCode=304,e.end()},I.prototype.headersAlreadySent=function(){var e=new Error(\"Can't set headers after they are sent.\");o(\"headers already sent\"),this.error(500,e)},I.prototype.isCachable=function(){var e=this.res.statusCode;return e>=200&&e<300||304===e},I.prototype.onStatError=function(e){switch(e.code){case\"ENAMETOOLONG\":case\"ENOENT\":case\"ENOTDIR\":this.error(404,e);break;default:this.error(500,e)}},I.prototype.isFresh=function(){return u(this.req.headers,{etag:this.res.getHeader(\"ETag\"),\"last-modified\":this.res.getHeader(\"Last-Modified\")})},I.prototype.isRangeFresh=function(){var e=this.req.headers[\"if-range\"];if(!e)return!0;if(-1!==e.indexOf('\"')){var t=this.res.getHeader(\"ETag\");return Boolean(t&&-1!==e.indexOf(t))}return j(this.res.getHeader(\"Last-Modified\"))<=j(e)},I.prototype.redirect=function(e){var t=this.res;if(A(this,\"directory\"))this.emit(\"directory\",t,e);else if(this.hasTrailingSlash())this.error(403);else{var n=a(function(e){for(var t=0;t<e.length&&\"/\"===e[t];t++);return t>1?\"/\"+e.substr(t):e}(this.path+\"/\")),r=M(\"Redirecting\",'Redirecting to <a href=\"'+c(n)+'\">'+c(n)+\"</a>\");t.statusCode=301,t.setHeader(\"Content-Type\",\"text/html; charset=UTF-8\"),t.setHeader(\"Content-Length\",Buffer.byteLength(r)),t.setHeader(\"Content-Security-Policy\",\"default-src 'self'\"),t.setHeader(\"X-Content-Type-Options\",\"nosniff\"),t.setHeader(\"Location\",n),t.end(r)}},I.prototype.pipe=function(e){var t=this._root;this.res=e;var n,r=function(e){try{return decodeURIComponent(e)}catch(e){return-1}}(this.path);if(-1===r)return this.error(400),e;if(~r.indexOf(\"\\0\"))return this.error(400),e;if(null!==t){if(r&&(r=S(\".\"+O+r)),E.test(r))return o('malicious path \"%s\"',r),this.error(403),e;n=r.split(O),r=S(w(t,r)),t=S(t+O)}else{if(E.test(r))return o('malicious path \"%s\"',r),this.error(403),e;n=S(r).split(O),r=k(r)}if(function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.length>1&&\".\"===n[0])return!0}return!1}(n)){var i=this._dotfiles;switch(void 0===i&&(i=\".\"===n[n.length-1][0]?this._hidden?\"allow\":\"ignore\":\"allow\"),o('%s dotfile \"%s\"',i,r),i){case\"allow\":break;case\"deny\":return this.error(403),e;case\"ignore\":default:return this.error(404),e}}return this._index.length&&this.hasTrailingSlash()?(this.sendIndex(r),e):(this.sendFile(r),e)},I.prototype.send=function(e,t){var n=t.size,r=this.options,i={},s=this.res,a=this.req,c=a.headers.range,l=r.start||0;if(function(e){return\"boolean\"!=typeof e.headersSent?Boolean(e._header):e.headersSent}(s))this.headersAlreadySent();else{if(o('pipe \"%s\"',e),this.setHeader(e,t),this.type(e),this.isConditionalGET()){if(this.isPreconditionFailure())return void this.error(412);if(this.isCachable()&&this.isFresh())return void this.notModified()}if(n=Math.max(0,n-l),void 0!==r.end){var u=r.end-l+1;n>u&&(n=u)}if(this._acceptRanges&&C.test(c)){if(c=m(n,c,{combine:!0}),this.isRangeFresh()||(o(\"range stale\"),c=-2),-1===c)return o(\"range unsatisfiable\"),s.setHeader(\"Content-Range\",T(\"bytes\",n)),this.error(416,{headers:{\"Content-Range\":s.getHeader(\"Content-Range\")}});-2!==c&&1===c.length&&(o(\"range %j\",c),s.statusCode=206,s.setHeader(\"Content-Range\",T(\"bytes\",n,c[0])),l+=c[0].start,n=c[0].end-c[0].start+1)}for(var p in r)i[p]=r[p];i.start=l,i.end=Math.max(l,l+n-1),s.setHeader(\"Content-Length\",n),\"HEAD\"!==a.method?this.stream(e,i):s.end()}},I.prototype.sendFile=function(e){var t=0,n=this;o('stat \"%s\"',e),p.stat(e,function(r,i){return r&&\"ENOENT\"===r.code&&!x(e)&&e[e.length-1]!==O?function r(i){if(n._extensions.length<=t)return i?n.onStatError(i):n.error(404);var s=e+\".\"+n._extensions[t++];o('stat \"%s\"',s);p.stat(s,function(e,t){return e?r(e):t.isDirectory()?r():(n.emit(\"file\",s,t),void n.send(s,t))})}(r):r?n.onStatError(r):i.isDirectory()?n.redirect(e):(n.emit(\"file\",e,i),void n.send(e,i))})},I.prototype.sendIndex=function(e){var t=-1,n=this;!function r(i){if(++t>=n._index.length)return i?n.onStatError(i):n.error(404);var s=w(e,n._index[t]);o('stat \"%s\"',s),p.stat(s,function(e,t){return e?r(e):t.isDirectory()?r():(n.emit(\"file\",s,t),void n.send(s,t))})}()},I.prototype.stream=function(e,t){var n=!1,r=this,o=this.res,i=p.createReadStream(e,t);this.emit(\"stream\",i),i.pipe(o),h(o,function(){n=!0,s(i)}),i.on(\"error\",function(e){n||(n=!0,s(i),r.onStatError(e))}),i.on(\"end\",function(){r.emit(\"end\")})},I.prototype.type=function(e){var t=this.res;if(!t.getHeader(\"Content-Type\")){var n=d.lookup(e);if(n){var r=d.charsets.lookup(n);o(\"content-type %s\",n),t.setHeader(\"Content-Type\",n+(r?\"; charset=\"+r:\"\"))}else o(\"no content-type\")}},I.prototype.setHeader=function(e,t){var n=this.res;if(this.emit(\"headers\",n,e,t),this._acceptRanges&&!n.getHeader(\"Accept-Ranges\")&&(o(\"accept ranges\"),n.setHeader(\"Accept-Ranges\",\"bytes\")),this._cacheControl&&!n.getHeader(\"Cache-Control\")){var r=\"public, max-age=\"+Math.floor(this._maxage/1e3);this._immutable&&(r+=\", immutable\"),o(\"cache-control %s\",r),n.setHeader(\"Cache-Control\",r)}if(this._lastModified&&!n.getHeader(\"Last-Modified\")){var i=t.mtime.toUTCString();o(\"modified %s\",i),n.setHeader(\"Last-Modified\",i)}if(this._etag&&!n.getHeader(\"ETag\")){var s=l(t);o(\"etag %s\",s),n.setHeader(\"ETag\",s)}}},function(e,t,n){var r=n(10),o=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s),i(o,s),s.from=function(e,t,n){if(\"number\"==typeof e)throw new TypeError(\"Argument must not be a number\");return o(e,t,n)},s.alloc=function(e,t,n){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");var r=o(e);return void 0!==t?\"string\"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");return o(e)},s.allocUnsafeSlow=function(e){if(\"number\"!=typeof e)throw new TypeError(\"Argument must be a number\");return r.SlowBuffer(e)}},function(e,t){e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e})},function(e,t,n){\"use strict\";var r=n(86);e.exports=r.METHODS&&r.METHODS.map(function(e){return e.toLowerCase()})||[\"get\",\"post\",\"put\",\"head\",\"delete\",\"options\",\"trace\",\"copy\",\"lock\",\"mkcol\",\"move\",\"purge\",\"propfind\",\"proppatch\",\"unlock\",\"report\",\"mkactivity\",\"checkout\",\"merge\",\"m-search\",\"notify\",\"subscribe\",\"unsubscribe\",\"patch\",\"search\",\"connect\"]},function(e,t){e.exports=require(\"querystring\")},function(e,t,n){\"use strict\";var r=n(247),o=n(246),i=n(154);e.exports={formats:i,parse:o,stringify:r}},function(e){e.exports=[[\"0\",\"\\0\",127,\"\"],[\"8140\",\"\",5,\"\",9,\"\",6,\"\"],[\"8180\",\"\",6,\"\",4,\"\",4,\"\",5,\"\"],[\"8240\",\"\",4,\"\",8,\"\",4,\"\",11],[\"8280\",\"\",10,\"\",4,\"\",7,\"\",5,\"\",8,\"\",20,\"\",4,\"\",6,\"\"],[\"8340\",\"\",17,\"\",5,\"\",10,\"\",4,\"\",9,\"\"],[\"8380\",\"\",5,\"\",13,\"\",28,\"\",4,\"\",4,\"\",5],[\"8440\",\"\",5,\"\",5,\"\"],[\"8480\",\"\",9,\"\",4,\"\",6,\"\",6,\"\",9,\"\",5,\"\",10,\"\",7,\"\"],[\"8540\",\"\",9,\"\"],[\"8580\",\"\",4,\"\",6,\"\",4,\"\",4,\"\",7,\"\"],[\"8640\",\"\",4,\"\",5,\"\",4,\"\",5,\"\"],[\"8680\",\"\",4,\"\",4,\"\",5,\"\",6,\"\",8,\"\",4,\"\",4,\"\",4,\"\"],[\"8740\",\"\",7,\"\",11,\"\",4,\"\",4],[\"8780\",\"\",7,\"\",6,\"\",14,\"\",10,\"\",6,\"\",12,\"\",8,\"\",5,\"\",6],[\"8840\",\"\",9,\"\",4,\"\",4,\"\"],[\"8880\",\"\",4,\"\",6,\"\",8,\"\",6,\"\",7,\"\",4,\"\",4,\"\",7],[\"8940\",\"\",5,\"\",6,\"\",4,\"\",5,\"\",4,\"\",16,\"\"],[\"8980\",\"\",4,\"\",4,\"\",7,\"\",17,\"\",10,\"\",13,\"\",5,\"\",7,\"\",4,\"\"],[\"8a40\",\"\",4,\"\",12,\"\"],[\"8a80\",\"\",5,\"\",6,\"\",4,\"\",11,\"\",6,\"\",4,\"\",4,\"\",9,\"\",5],[\"8b40\",\"\",8,\"\",17,\"\",6,\"\",13,\"\"],[\"8b80\",\"\",4,\"\",4,\"\",5,\"\",4,\"\",4,\"\",22,\"\",11,\"\",25,\"\",7,\"\",6],[\"8c40\",\"\",7,\"\"],[\"8c80\",\"\",8,\"\",4,\"\",6,\"\",6,\"\",6,\"\",4,\"\",4,\"\",4],[\"8d40\",\"\",5,\"\",5,\"\",5,\"\",6,\"\",9,\"\",4],[\"8d80\",\"\",5,\"\",4,\"\",4,\"\",4,\"\",7,\"\",7,\"\",10,\"\",10,\"\",12,\"\",21,\"\"],[\"8e40\",\"\",21,\"\",12,\"\",6,\"\",12,\"\"],[\"8e80\",\"\",4,\"\",7,\"\",4,\"\",4,\"\",5,\"\",6,\"\",4,\"\",14,\"\",4,\"\",4,\"\",6],[\"8f40\",\"\",5,\"\",11,\"\",8,\"\"],[\"8f80\",\"\",6,\"\",14,\"\",5,\"\",5,\"\",4,\"\"],[\"9040\",\"\",4,\"\",4,\"\",6,\"\"],[\"9080\",\"\",7,\"\",4,\"\",4,\"\",4,\"\",4,\"\",18,\"\",6],[\"9140\",\"\",6,\"\",6,\"\",18,\"\",4,\"\"],[\"9180\",\"\",6,\"\",8,\"\",9,\"\",5,\"\",4,\"\",4,\"\",16,\"\",13,\"\",8,\"\",5,\"\",4,\"\"],[\"9240\",\"\",6,\"\",5,\"\"],[\"9280\",\"\",5,\"\",7,\"\",6,\"\"],[\"9340\",\"\",6,\"\",4,\"\",4,\"\",5,\"\"],[\"9380\",\"\",5,\"\",4,\"\",6,\"\",4,\"\",7,\"\",9,\"\",6,\"\",8,\"\",4,\"\",6,\"\"],[\"9440\",\"\",24,\"\",7,\"\",7,\"\",4,\"\",8],[\"9480\",\"\",4,\"\",4,\"\",14,\"\",7,\"\",7,\"\"],[\"9540\",\"\",4,\"\",4,\"\",6,\"\"],[\"9580\",\"\",4,\"\",4,\"\",8,\"\",4,\"\",4,\"\",25,\"\",7,\"\",5,\"\"],[\"9640\",\"\",5,\"\",4,\"\"],[\"9680\",\"\",7,\"\",9,\"\",7,\"\",4,\"\",6,\"\",6,\"\",5],[\"9740\",\"\",7,\"\",8,\"\",7,\"\",9,\"\"],[\"9780\",\"\",6,\"\",5,\"\",4,\"\",9,\"\",4,\"\",11,\"\",7,\"\",16,\"\"],[\"9840\",\"\",4,\"\",5,\"\",9,\"\"],[\"9880\",\"\",7,\"\",5,\"\",11,\"\",9,\"\",9,\"\",11,\"\",5,\"\",5,\"\",6,\"\",4,\"\",7,\"\",6,\"\"],[\"9940\",\"\",4,\"\",10,\"\",6,\"\",8,\"\",4,\"\",7,\"\",5],[\"9980\",\"\",114,\"\",6],[\"9a40\",\"\",11,\"\",7,\"\",13,\"\"],[\"9a80\",\"\",4,\"\",7,\"\",7,\"\",6,\"\",4,\"\",4,\"\",7,\"\",6,\"\",4,\"\",4,\"\"],[\"9b40\",\"\",4,\"\"],[\"9b80\",\"\",5,\"\",4,\"\",4,\"\",5,\"\"],[\"9c40\",\"\",7,\"\"],[\"9c80\",\"\",7,\"\",7,\"\",10,\"\",14,\"\",4,\"\",6,\"\",5],[\"9d40\",\"\",7,\"\",4,\"\",9,\"\",6,\"\"],[\"9d80\",\"\",9,\"\",5,\"\",6,\"\",12,\"\",4,\"\",10,\"\",5,\"\",5,\"\",6,\"\",10,\"\"],[\"9e40\",\"\",7,\"\",32,\"\",7,\"\",6,\"\",6],[\"9e80\",\"\",9,\"\",17,\"\",13,\"\",11,\"\",12,\"\",12,\"\"],[\"9f40\",\"\",6,\"\",10,\"\",4,\"\",10,\"\",7,\"\"],[\"9f80\",\"\",13,\"\",12,\"\",4,\"\",4,\"\",5,\"\",4,\"\",4,\"\",6,\"\",5,\"\",8,\"\",9,\"\",4],[\"a040\",\"\",9,\"\",5,\"\",9,\"\",11,\"\",19],[\"a080\",\"\",9,\"\",6,\"\",4,\"\",11,\"\",11,\"\",6,\"\"],[\"a1a1\",\"\",7,\"\"],[\"a2a1\",\"\",9],[\"a2b1\",\"\",19,\"\",19,\"\",9],[\"a2e5\",\"\",9],[\"a2f1\",\"\",11],[\"a3a1\",\"\",88,\"\"],[\"a4a1\",\"\",82],[\"a5a1\",\"\",85],[\"a6a1\",\"\",16,\"\",6],[\"a6c1\",\"\",16,\"\",6],[\"a6e0\",\"\"],[\"a6ee\",\"\"],[\"a6f4\",\"\"],[\"a7a1\",\"\",5,\"\",25],[\"a7d1\",\"\",5,\"\",25],[\"a840\",\"\",35,\"\",6],[\"a880\",\"\",7,\"\"],[\"a8a1\",\"\"],[\"a8bd\",\"\"],[\"a8c0\",\"\"],[\"a8c5\",\"\",36],[\"a940\",\"\",8,\"\"],[\"a959\",\"\"],[\"a95c\",\"\"],[\"a960\",\"\",9,\"\",8],[\"a980\",\"\",4,\"\"],[\"a996\",\"\"],[\"a9a4\",\"\",75],[\"aa40\",\"\",5,\"\",5,\"\",8],[\"aa80\",\"\",7,\"\",10,\"\"],[\"ab40\",\"\",11,\"\",4,\"\",5,\"\",4],[\"ab80\",\"\",6,\"\",4],[\"ac40\",\"\",10,\"\",8,\"\",5,\"\",4,\"\",11],[\"ac80\",\"\",6,\"\",12,\"\",4,\"\"],[\"ad40\",\"\",10,\"\",7,\"\",15,\"\",12],[\"ad80\",\"\",9,\"\",8,\"\",6,\"\"],[\"ae40\",\"\",6,\"\",7,\"\",4,\"\"],[\"ae80\",\"\",7,\"\",6,\"\",4,\"\"],[\"af40\",\"\",4,\"\"],[\"af80\",\"\"],[\"b040\",\"\",6,\"\",5,\"\",4,\"\",6,\"\",7,\"\"],[\"b080\",\"\",7,\"\",8,\"\",9,\"\"],[\"b140\",\"\",4,\"\",7,\"\",10,\"\"],[\"b180\",\"\",4,\"\",7,\"\",7,\"\"],[\"b240\",\"\",11,\"\",5,\"\",11,\"\",4],[\"b280\",\"\",12,\"\",8,\"\",4,\"\"],[\"b340\",\"\",5,\"\"],[\"b380\",\"\",11,\"\",7,\"\",6,\"\"],[\"b440\",\"\",7,\"\",9],[\"b480\",\"\",4,\"\",5,\"\",6,\"\"],[\"b540\",\"\",5,\"\",9,\"\",4,\"\",14,\"\",4,\"\",8,\"\"],[\"b580\",\"\",6,\"\",4,\"\"],[\"b640\",\"\",6,\"\",11,\"\",10,\"\",4,\"\",5,\"\"],[\"b680\",\"\",6,\"\",4,\"\"],[\"b740\",\"\",14,\"\",5,\"\",9,\"\",4,\"\",16],[\"b780\",\"\",6,\"\"],[\"b840\",\"\",4,\"\",10,\"\",10,\"\",9,\"\",5,\"\"],[\"b880\",\"\",4,\"\"],[\"b940\",\"\",5,\"\",10,\"\",6,\"\"],[\"b980\",\"\",7,\"\"],[\"ba40\",\"\",4,\"\",4,\"\",7,\"\",5,\"\"],[\"ba80\",\"\",4,\"\",5,\"\",12,\"\",5,\"\"],[\"bb40\",\"\",9,\"\",36,\"\",5,\"\",9],[\"bb80\",\"\",6,\"\",4,\"\"],[\"bc40\",\"\",6,\"\",6,\"\",5,\"\",7,\"\",13,\"\",5],[\"bc80\",\"\",14,\"\",6,\"\"],[\"bd40\",\"\",54,\"\",7],[\"bd80\",\"\",32,\"\"],[\"be40\",\"\",12,\"\",6,\"\",42],[\"be80\",\"\",32,\"\"],[\"bf40\",\"\",62],[\"bf80\",\"\",4,\"\",4,\"\",21,\"\"],[\"c040\",\"\",35,\"\",23,\"\"],[\"c080\",\"\",6,\"\",9,\"\"],[\"c140\",\"\",4,\"\",7,\"\",4,\"\",4,\"\",6,\"\"],[\"c180\",\"\",4,\"\",4,\"\",5,\"\"],[\"c240\",\"\",6,\"\",5,\"\"],[\"c280\",\"\",13,\"\",5,\"\",11,\"\"],[\"c340\",\"\",5,\"\",4,\"\",6,\"\"],[\"c380\",\"\",12,\"\",4,\"\"],[\"c440\",\"\",5,\"\",4,\"\",4,\"\",5,\"\",4,\"\"],[\"c480\",\"\",7,\"\",5,\"\",6,\"\"],[\"c540\",\"\",14,\"\",4,\"\",5,\"\",4,\"\",5,\"\"],[\"c580\",\"\",7,\"\",7,\"\"],[\"c640\",\"\"],[\"c680\",\"\",4,\"\",9,\"\"],[\"c740\",\"\",4,\"\",4,\"\",6,\"\",6,\"\",6,\"\"],[\"c780\",\"\"],[\"c840\",\"\",4,\"\",5,\"\",5,\"\",7,\"\",5,\"\",7,\"\"],[\"c880\",\"\",6,\"\",4,\"\",4,\"\"],[\"c940\",\"\",4,\"\",7,\"\",12,\"\"],[\"c980\",\"\",4,\"\",4,\"\",10,\"\"],[\"ca40\",\"\",8,\"\",8,\"\",9,\"\",4,\"\",10],[\"ca80\",\"\",4,\"\",8,\"\"],[\"cb40\",\"\",6,\"\",10,\"\",6,\"\",5,\"\",6,\"\",6,\"\",4,\"\"],[\"cb80\",\"\",5,\"\",6,\"\",14,\"\"],[\"cc40\",\"\",4,\"\",10,\"\",15,\"\",13,\"\"],[\"cc80\",\"\",11,\"\",4,\"\",7,\"\"],[\"cd40\",\"\",6,\"\",6,\"\",4,\"\",5,\"\",4,\"\",4,\"\"],[\"cd80\",\"\"],[\"ce40\",\"\",6,\"\",5,\"\",7,\"\"],[\"ce80\",\"\",4,\"\",6,\"\",4,\"\"],[\"cf40\",\"\",4,\"\",4,\"\",6,\"\",9],[\"cf80\",\"\",5,\"\",7,\"\",4,\"\"],[\"d040\",\"\",13,\"\",5,\"\",5,\"\",5,\"\",6,\"\"],[\"d080\",\"\",4,\"\",4,\"\",5,\"\"],[\"d140\",\"\",4,\"\",4,\"\",6,\"\",5],[\"d180\",\"\",4,\"\",4,\"\",4,\"\"],[\"d240\",\"\",8,\"\",24,\"\",5,\"\",19,\"\"],[\"d280\",\"\",26,\"\"],[\"d340\",\"\",30,\"\",6],[\"d380\",\"\",4,\"\",5,\"\",21,\"\"],[\"d440\",\"\",31,\"\",8,\"\",21],[\"d480\",\"\",25,\"\",6,\"\"],[\"d540\",\"\",7,\"\",7,\"\",46],[\"d580\",\"\",32,\"\"],[\"d640\",\"\",34,\"\",27],[\"d680\",\"\",30,\"\"],[\"d740\",\"\",31,\"\",4,\"\",25],[\"d780\",\"\",24,\"\"],[\"d840\",\"\",8,\"\",7,\"\",5,\"\",6,\"\",6,\"\",6,\"\"],[\"d880\",\"\",6,\"\",20,\"\"],[\"d940\",\"\",62],[\"d980\",\"\",32,\"\"],[\"da40\",\"\",14,\"\",8,\"\",4,\"\",9,\"\"],[\"da80\",\"\",12,\"\"],[\"db40\",\"\",6,\"\",7,\"\",4,\"\"],[\"db80\",\"\",4,\"\",5,\"\",11,\"\"],[\"dc40\",\"\",4,\"\",6,\"\",6,\"\",11,\"\",6,\"\",7],[\"dc80\",\"\",10,\"\",21,\"\"],[\"dd40\",\"\",62],[\"dd80\",\"\",32,\"\"],[\"de40\",\"\",32,\"\"],[\"de80\",\"\",4,\"\"],[\"df40\",\"\",5,\"\",4,\"\",4,\"\",5,\"\",4,\"\",6,\"\"],[\"df80\",\"\",4,\"\"],[\"e040\",\"\",19,\"\"],[\"e080\",\"\",10,\"\",6,\"\",8,\"\"],[\"e140\",\"\",4,\"\",6,\"\",5,\"\",5,\"\"],[\"e180\",\"\",10,\"\",9,\"\",8,\"\"],[\"e240\",\"\",62],[\"e280\",\"\",32,\"\",5,\"\"],[\"e340\",\"\",45,\"\",16],[\"e380\",\"\",7,\"\",24,\"\"],[\"e440\",\"\",5,\"\",24,\"\",31],[\"e480\",\"\",32,\"\"],[\"e540\",\"\",51,\"\",10],[\"e580\",\"\",31,\"\"],[\"e640\",\"\",34,\"\",27],[\"e680\",\"\",29,\"\"],[\"e740\",\"\",7,\"\",54],[\"e780\",\"\",32,\"\",6,\"\",4,\"\"],[\"e840\",\"\",14,\"\",43,\"\"],[\"e880\",\"\",20,\"\"],[\"e940\",\"\",7,\"\",42],[\"e980\",\"\",32,\"\"],[\"ea40\",\"\",27,\"\",6,\"\"],[\"ea80\",\"\",4,\"\",12,\"\"],[\"eb40\",\"\",9,\"\",7,\"\",9,\"\",6,\"\"],[\"eb80\",\"\",4,\"\"],[\"ec40\",\"\",8,\"\",4,\"\",18,\"\",7],[\"ec80\",\"\",4,\"\",7,\"\",4,\"\",4,\"\"],[\"ed40\",\"\",6,\"\",46],[\"ed80\",\"\",4,\"\",23,\"\"],[\"ee40\",\"\",62],[\"ee80\",\"\",32,\"\",4,\"\",6,\"\"],[\"ef40\",\"\",5,\"\",37,\"\",4],[\"ef80\",\"\",30,\"\",4,\"\",8,\"\"],[\"f040\",\"\",4,\"\",28,\"\",26],[\"f080\",\"\",9,\"\",12,\"\",4,\"\",6,\"\"],[\"f140\",\"\",10,\"\",47],[\"f180\",\"\",32,\"\"],[\"f240\",\"\",62],[\"f280\",\"\",32,\"\"],[\"f340\",\"\",17,\"\",6,\"\",4,\"\"],[\"f380\",\"\",8,\"\",6,\"\"],[\"f440\",\"\",5,\"\",10,\"\",10,\"\",7,\"\",5],[\"f480\",\"\",32,\"\"],[\"f540\",\"\",62],[\"f580\",\"\",32,\"\"],[\"f640\",\"\",62],[\"f680\",\"\",32,\"\",5,\"\",5,\"\",4,\"\",7,\"\"],[\"f740\",\"\",62],[\"f780\",\"\",4,\"\",4,\"\"],[\"f840\",\"\",62],[\"f880\",\"\",32],[\"f940\",\"\",62],[\"f980\",\"\",32],[\"fa40\",\"\",62],[\"fa80\",\"\",32],[\"fb40\",\"\",27,\"\",9,\"\"],[\"fb80\",\"\",5,\"\",8,\"\",5,\"\"],[\"fc40\",\"\",8,\"\",4,\"\",8,\"\",6],[\"fc80\",\"\",4,\"\",5,\"\",8,\"\"],[\"fd40\",\"\",4,\"\",4,\"\",10,\"\",38],[\"fd80\",\"\",5,\"\",11,\"\",4,\"\"],[\"fe40\",\"\"]]},function(e,t,n){var r=n(174);function o(e,t,n){this.manager=e,this.name=t,this.options=n,this.middlewares=this.options.middlewares||[],delete this.options.middlewares,this.createIndex=this.createIndex.bind(this),this.index=this.ensureIndex=this.ensureIndex.bind(this),this.dropIndex=this.dropIndex.bind(this),this.indexes=this.indexes.bind(this),this.dropIndexes=this.dropIndexes.bind(this),this.update=this.update.bind(this),this.remove=this.remove.bind(this),this.findOneAndUpdate=this.findOneAndUpdate.bind(this),this.findOneAndDelete=this.findOneAndDelete.bind(this),this.insert=this.insert.bind(this),this.find=this.find.bind(this),this.distinct=this.distinct.bind(this),this.count=this.count.bind(this),this.findOne=this.findOne.bind(this),this.aggregate=this.aggregate.bind(this),this.drop=this.drop.bind(this),this._dispatch=r(this.middlewares)(e,this)}e.exports=o,o.prototype.aggregate=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),this._dispatch(function(e){return e.col.aggregate(e.stages,e.options).toArray()})({options:t,stages:e,callback:n},\"aggregate\")},o.prototype.bulkWrite=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),this._dispatch(function(e){return e.col.bulkWrite(e.operations,e.options)})({options:t,operations:e,callback:n},\"bulkWrite\")},o.prototype.count=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),this._dispatch(function(e){return e.col.count(e.query,e.options)})({options:t,query:e,callback:n},\"count\")},o.prototype.createIndex=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),this._dispatch(function(e){return e.col.createIndex(e.fields,e.options)})({options:t,fields:e,callback:n},\"createIndex\")},o.prototype.distinct=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n={}),\"function\"==typeof t&&(r=t,t={}),this._dispatch(function(e){return e.col.distinct(e.field,e.query,e.options)})({options:n,query:t,field:e,callback:r},\"distinct\")},o.prototype.drop=function(e){return this._dispatch(function(e){return e.col.drop().catch(function(e){if(e&&\"ns not found\"===e.message)return\"ns not found\";throw e})})({callback:e},\"drop\")},o.prototype.dropIndex=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),this._dispatch(function(e){return e.col.dropIndex(e.fields,e.options)})({options:t,fields:e,callback:n},\"dropIndex\")},o.prototype.dropIndexes=function(e){return this._dispatch(function(e){return e.col.dropIndexes()})({callback:e},\"dropIndexes\")},o.prototype.ensureIndex=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),console.warn(\"DEPRECATED (collection.ensureIndex): use collection.createIndex instead (see https://Automattic.github.io/monk/docs/collection/createIndex.html)\"),this._dispatch(function(e){return e.col.ensureIndex(e.fields,e.options)})({options:t,fields:e,callback:n},\"ensureIndex\")},o.prototype.find=function(e,t,n){if(\"function\"==typeof t&&(n=t,t={}),(t||{}).rawCursor)return delete t.rawCursor,this._dispatch(function(e){return Promise.resolve(e.col.find(e.query,e.options))})({options:t,query:e,callback:n},\"find\");var r=this._dispatch(function(e){var o=e.col.find(e.query,e.options);if(!(t||{}).stream&&!r.eachListener)return o.toArray();\"function\"==typeof(t||{}).stream&&(r.eachListener=(t||{}).stream);var i=!1,s=!1,a=0;function c(){i=!0,a-=1,o.close()}function l(){a+=1,o.pause()}return new Promise(function(e,t){function u(){a-=1,o.resume(),0===a&&s&&p()}function p(){s=!0,a<=0&&(n&&n(),e())}o.on(\"data\",function(e){i||r.eachListener(e,{close:c,pause:l,resume:u})}),o.on(\"close\",p),o.on(\"end\",p),o.on(\"error\",function(e){n&&n(e),t(e)})})})({options:t,query:e,callback:n},\"find\");return r.each=function(e){return r.eachListener=e,r},r},o.prototype.findOne=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),this._dispatch(function(e){return e.col.find(e.query,e.options).limit(1).toArray().then(function(e){return e&&e[0]||null})})({options:t,query:e,callback:n},\"findOne\")},o.prototype.findOneAndDelete=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),this._dispatch(function(e){return e.col.findOneAndDelete(e.query,e.options).then(function(e){return e&&void 0!==e.value?e.value:e.ok&&e.lastErrorObject&&0===e.lastErrorObject.n?null:e})})({options:t,query:e,callback:n},\"findOneAndDelete\")},o.prototype.findOneAndUpdate=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n={}),this._dispatch(function(e){return void 0===(e.options||{}).returnOriginal&&(e.options.returnOriginal=!1),e.col.findOneAndUpdate(e.query,e.update,e.options).then(function(e){return e&&void 0!==e.value?e.value:e.ok&&e.lastErrorObject&&0===e.lastErrorObject.n?null:e})})({options:n,query:e,update:t,callback:r},\"findOneAndUpdate\")},o.prototype.geoHaystackSearch=function(e,t,n,r){return this._dispatch(function(e){return e.col.geoHaystackSearch(e.x,e.y,e.options).then(function(e){return e&&e.results||e})})({x:e,y:t,options:n,callback:r},\"geoHaystackSearch\")},o.prototype.geoNear=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n={}),this._dispatch(function(e){return e.col.geoNear(e.x,e.y,e.options).then(function(e){return e&&e.results||e})})({x:e,y:t,options:n,callback:r},\"geoNear\")},o.prototype.group=function(e,t,n,r,o,i,s,a){return\"function\"==typeof s&&(a=s,s={}),this._dispatch(function(e){return e.col.group(e.keys,e.condition,e.initial,e.reduce,e.finalize,e.command,e.options)})({options:s,keys:e,condition:t,initial:n,reduce:r,finalize:o,command:i,callback:a},\"group\")},o.prototype.indexes=function(e){return this._dispatch(function(e){return e.col.indexInformation()})({callback:e},\"indexes\")},o.prototype.insert=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),this._dispatch(function(e){var t=Array.isArray(e.data);return t&&0===e.data.length?Promise.resolve([]):e.col.insert(e.data,e.options).then(function(e){var n=(e||{}).ops;return n&&!t&&(n=e.ops[0]),n})})({data:e,options:t,callback:n},\"insert\")},o.prototype.mapReduce=function(e,t,n,r){return this._dispatch(function(e){return e.col.mapReduce(e.map,e.reduce,e.options)})({map:e,reduce:t,options:n,callback:r},\"mapReduce\")},o.prototype.remove=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),this._dispatch(function(e){var t=e.options||{},n=t.single||!1===t.multi?\"deleteOne\":\"deleteMany\";return e.col[n](e.query,e.options)})({query:e,options:t,callback:n},\"remove\")},o.prototype.stats=function(e,t){return\"function\"==typeof e&&(t=e,e={}),this._dispatch(function(e){return e.col.stats(e.options)})({options:e,callback:t},\"stats\")},o.prototype.update=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n={}),this._dispatch(function(e){var t=e.options||{},n=t.multi||!1===t.single?\"updateMany\":\"updateOne\";return e.col[n](e.query,e.update,e.options).then(function(e){return e&&e.result||e})})({update:t,query:e,options:n,callback:r},\"update\")}},function(e,t,n){\"use strict\";var r=n(5).EventEmitter,o=n(0).inherits,i=n(0).format,s=n(63),a=n(23),c=n(38),l=n(32),u=n(22),p=n(4).MongoError,d=n(36).ServerCapabilities,f=n(36).Store,h=n(16),m=n(4).ReplSet,g=n(4).ReadPreference,y=n(2).MAX_JS_INT,v=n(2).translateOptions,b=n(2).filterOptions,x=n(2).getReadPreference,w=n(2).mergeOptions,S=n(40),k=[\"ha\",\"haInterval\",\"replicaSet\",\"rs_name\",\"secondaryAcceptableLatencyMS\",\"connectWithNoPrimary\",\"poolSize\",\"ssl\",\"checkServerIdentity\",\"sslValidate\",\"sslCA\",\"sslCert\",\"sslCRL\",\"sslKey\",\"sslPass\",\"socketOptions\",\"bufferMaxEntries\",\"store\",\"auto_reconnect\",\"autoReconnect\",\"emitError\",\"keepAlive\",\"noDelay\",\"connectTimeoutMS\",\"socketTimeoutMS\",\"strategy\",\"debug\",\"family\",\"loggerLevel\",\"logger\",\"reconnectTries\",\"appname\",\"domainsEnabled\",\"servername\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"maxStalenessSeconds\"],O=n(96).version,C=i(\"Node.js %s, %s\",process.version,S.endianness()),_=S.type(),E=process.platform,I=process.arch,T=S.release(),M=function(e,t){if(!(this instanceof M))return new M(e,t);t=t||{};var n=this;r.call(this),t=b(t,k);for(var o=0;o<e.length;o++)if(!(e[o]instanceof s))throw p.create({message:\"all seed list instances must be of the Server type\",driver:!0});var i={force:!1,bufferMaxEntries:\"number\"==typeof t.bufferMaxEntries?t.bufferMaxEntries:y},c=t.store||new f(n,i),l=e.map(function(e){return{host:e.host,port:e.port}}),u=w({},{disconnectHandler:c,cursorFactory:a,reconnect:!1,emitError:\"boolean\"!=typeof t.emitError||t.emitError,size:\"number\"==typeof t.poolSize?t.poolSize:5});u=v(u,t);var d=t.socketOptions&&Object.keys(t.socketOptions).length>0?t.socketOptions:t;\"number\"==typeof(u=v(u,d)).keepAlive&&(u.keepAliveInitialDelay=u.keepAlive,u.keepAlive=u.keepAlive>0),this.clientInfo={driver:{name:\"nodejs\",version:O},os:{type:_,name:E,architecture:I,version:T},platform:C},u.clientInfo=this.clientInfo,t.appname&&(u.clientInfo.application={name:t.appname});var h=new m(l,u);h.on(\"reconnect\",function(){n.emit(\"reconnect\"),c.execute()}),this.s={replset:h,sCapabilities:null,tag:t.tag,storeOptions:i,clonedOptions:u,store:c,options:t},u.debug&&Object.defineProperty(this,\"replset\",{enumerable:!0,get:function(){return h}})};o(M,r),Object.defineProperty(M.prototype,\"isMasterDoc\",{enumerable:!0,get:function(){return this.s.replset.lastIsMaster()}}),Object.defineProperty(M.prototype,\"parserType\",{enumerable:!0,get:function(){return this.s.replset.parserType}}),Object.defineProperty(M.prototype,\"bson\",{enumerable:!0,get:function(){return this.s.replset.s.bson}}),Object.defineProperty(M.prototype,\"haInterval\",{enumerable:!0,get:function(){return this.s.replset.s.haInterval}});var N=M.define=new h(\"ReplSet\",M,!1),A=function(e){return\"string\"==typeof e.readPreference?e.readPreference=new g(e.readPreference):e.readPreference instanceof u&&(e.readPreference=new g(e.readPreference.mode,e.readPreference.tags,{maxStalenessSeconds:e.readPreference.maxStalenessSeconds})),e};M.prototype.connect=function(e,t,n){var r=this;\"function\"==typeof t&&(n=t,t={}),null==t&&(t={}),\"function\"!=typeof n&&(n=null),r.s.options=t,r.s.storeOptions.bufferMaxEntries=e.bufferMaxEntries;var o=function(e){return function(t){\"error\"!=e&&r.emit(e,t)}};[\"timeout\",\"error\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\",\"joined\",\"left\",\"ping\",\"ha\"].forEach(function(e){r.s.replset.removeAllListeners(e)});var i,s=function(e){return function(t,n){r.emit(e,t,n)}};r.s.replset.on(\"joined\",(i=\"joined\",function(e,t){r.emit(i,e,t.lastIsMaster(),t)})),r.s.replset.on(\"left\",s(\"left\")),r.s.replset.on(\"ping\",s(\"ping\")),r.s.replset.on(\"ha\",function(e,t){r.emit(\"ha\",e,t),\"start\"==e?r.emit(\"ha_connect\",e,t):\"end\"==e&&r.emit(\"ha_ismaster\",e,t)}),r.s.replset.on(\"serverDescriptionChanged\",s(\"serverDescriptionChanged\")),r.s.replset.on(\"serverHeartbeatStarted\",s(\"serverHeartbeatStarted\")),r.s.replset.on(\"serverHeartbeatSucceeded\",s(\"serverHeartbeatSucceeded\")),r.s.replset.on(\"serverHeartbeatFailed\",s(\"serverHeartbeatFailed\")),r.s.replset.on(\"serverOpening\",s(\"serverOpening\")),r.s.replset.on(\"serverClosed\",s(\"serverClosed\")),r.s.replset.on(\"topologyOpening\",s(\"topologyOpening\")),r.s.replset.on(\"topologyClosed\",s(\"topologyClosed\")),r.s.replset.on(\"topologyDescriptionChanged\",s(\"topologyDescriptionChanged\")),r.s.replset.on(\"fullsetup\",function(){r.emit(\"fullsetup\",r,r)}),r.s.replset.on(\"all\",function(){r.emit(\"all\",null,r)});var a=function(){return function(e){[\"timeout\",\"error\",\"close\"].forEach(function(e){r.s.replset.removeListener(e,a)}),r.s.replset.removeListener(\"connect\",a),r.s.replset.destroy();try{n(e)}catch(e){r.s.replset.isConnected()||process.nextTick(function(){throw e})}}};r.s.replset.once(\"timeout\",a(\"timeout\")),r.s.replset.once(\"error\",a(\"error\")),r.s.replset.once(\"close\",a(\"close\")),r.s.replset.once(\"connect\",function(){r.s.replset.once(\"timeout\",o(\"timeout\")),r.s.replset.once(\"error\",o(\"error\")),r.s.replset.once(\"close\",o(\"close\")),r.emit(\"open\",null,r);try{n(null,r)}catch(e){process.nextTick(function(){throw e})}}),r.s.replset.connect(t)},M.prototype.capabilities=function(){return this.s.sCapabilities?this.s.sCapabilities:null==this.s.replset.lastIsMaster()?null:(this.s.sCapabilities=new d(this.s.replset.lastIsMaster()),this.s.sCapabilities)},N.classMethod(\"capabilities\",{callback:!1,promise:!1,returns:[d]}),M.prototype.command=function(e,t,n,r){this.s.replset.command(e,t,x(n),r)},N.classMethod(\"command\",{callback:!0,promise:!1}),M.prototype.insert=function(e,t,n,r){this.s.replset.insert(e,t,n,r)},N.classMethod(\"insert\",{callback:!0,promise:!1}),M.prototype.update=function(e,t,n,r){this.s.replset.update(e,t,n,r)},N.classMethod(\"update\",{callback:!0,promise:!1}),M.prototype.remove=function(e,t,n,r){this.s.replset.remove(e,t,n,r)},N.classMethod(\"remove\",{callback:!0,promise:!1}),M.prototype.isDestroyed=function(){return this.s.replset.isDestroyed()},M.prototype.isConnected=function(e){return(e=e||{}).readPreference&&(e.readPreference=A(e.readPreference)),this.s.replset.isConnected(e)},N.classMethod(\"isConnected\",{callback:!1,promise:!1,returns:[Boolean]}),M.prototype.cursor=function(e,t,n){return(n=A(n)).disconnectHandler=this.s.store,this.s.replset.cursor(e,t,n)},N.classMethod(\"cursor\",{callback:!1,promise:!1,returns:[a,c,l]}),M.prototype.lastIsMaster=function(){return this.s.replset.lastIsMaster()},M.prototype.unref=function(){return this.s.replset.unref()},M.prototype.close=function(e){var t=this;this.s.replset.destroy({force:\"boolean\"==typeof e&&e}),1==e&&(this.s.storeOptions.force=e,this.s.store.flush());[\"timeout\",\"error\",\"close\",\"joined\",\"left\"].forEach(function(e){t.removeAllListeners(e)})},N.classMethod(\"close\",{callback:!1,promise:!1}),M.prototype.auth=function(){var e=Array.prototype.slice.call(arguments,0);this.s.replset.auth.apply(this.s.replset,e)},N.classMethod(\"auth\",{callback:!0,promise:!1}),M.prototype.logout=function(){var e=Array.prototype.slice.call(arguments,0);this.s.replset.logout.apply(this.s.replset,e)},N.classMethod(\"logout\",{callback:!0,promise:!1}),M.prototype.connections=function(){return this.s.replset.connections()},N.classMethod(\"connections\",{callback:!1,promise:!1,returns:[Array]}),e.exports=M},function(e,t,n){\"use strict\";var r=n(5).EventEmitter,o=n(0).inherits,i=n(0).format,s=n(36).ServerCapabilities,a=n(4).MongoError,c=n(4).Mongos,l=n(23),u=n(38),p=n(32),d=n(16),f=n(63),h=n(36).Store,m=n(2).MAX_JS_INT,g=n(2).translateOptions,y=n(2).filterOptions,v=n(2).mergeOptions,b=n(2).getReadPreference,x=n(40),w=n(96).version,S=i(\"Node.js %s, %s\",process.version,x.endianness()),k=x.type(),O=process.platform,C=process.arch,_=x.release(),E=[\"ha\",\"haInterval\",\"acceptableLatencyMS\",\"poolSize\",\"ssl\",\"checkServerIdentity\",\"sslValidate\",\"ciphers\",\"ecdhCurve\",\"sslCA\",\"sslCRL\",\"sslCert\",\"sslKey\",\"sslPass\",\"socketOptions\",\"bufferMaxEntries\",\"store\",\"auto_reconnect\",\"autoReconnect\",\"emitError\",\"keepAlive\",\"noDelay\",\"connectTimeoutMS\",\"socketTimeoutMS\",\"loggerLevel\",\"logger\",\"reconnectTries\",\"appname\",\"domainsEnabled\",\"servername\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\"],I=function(e,t){if(!(this instanceof I))return new I(e,t);t=y(t=t||{},E);for(var n=0;n<e.length;n++)if(!(e[n]instanceof f))throw a.create({message:\"all seed list instances must be of the Server type\",driver:!0});var o={force:!1,bufferMaxEntries:\"number\"==typeof t.bufferMaxEntries?t.bufferMaxEntries:m},i=t.store||new h(this,o);r.call(this);var s=e.map(function(e){return{host:e.host,port:e.port}}),u=\"boolean\"!=typeof t.auto_reconnect||t.auto_reconnect;u=\"boolean\"==typeof t.autoReconnect?t.autoReconnect:u;var p=v({},{disconnectHandler:i,cursorFactory:l,reconnect:u,emitError:\"boolean\"!=typeof t.emitError||t.emitError,size:\"number\"==typeof t.poolSize?t.poolSize:5});p=g(p,t);var d=t.socketOptions&&Object.keys(t.socketOptions).length>0?t.socketOptions:t;\"number\"==typeof(p=g(p,d)).keepAlive&&(p.keepAliveInitialDelay=p.keepAlive,p.keepAlive=p.keepAlive>0),this.clientInfo={driver:{name:\"nodejs\",version:w},os:{type:k,name:O,architecture:C,version:_},platform:S},p.clientInfo=this.clientInfo,t.appname&&(p.clientInfo.application={name:t.appname});var b=new c(s,p);this.s={mongos:b,sCapabilities:null,debug:p.debug,storeOptions:o,clonedOptions:p,store:i,options:t}},T=I.define=new d(\"Mongos\",I,!1);o(I,r),Object.defineProperty(I.prototype,\"isMasterDoc\",{enumerable:!0,get:function(){return this.s.mongos.lastIsMaster()}}),Object.defineProperty(I.prototype,\"parserType\",{enumerable:!0,get:function(){return this.s.mongos.parserType}}),Object.defineProperty(I.prototype,\"bson\",{enumerable:!0,get:function(){return this.s.mongos.s.bson}}),Object.defineProperty(I.prototype,\"haInterval\",{enumerable:!0,get:function(){return this.s.mongos.s.haInterval}}),I.prototype.connect=function(e,t,n){var r=this;\"function\"==typeof t&&(n=t,t={}),null==t&&(t={}),\"function\"!=typeof n&&(n=null),r.s.options=t,r.s.storeOptions.bufferMaxEntries=e.bufferMaxEntries;var o=function(){return function(e){[\"timeout\",\"error\",\"close\"].forEach(function(e){r.removeListener(e,o)}),r.s.mongos.removeListener(\"connect\",o);try{n(e)}catch(e){process.nextTick(function(){throw e})}}},i=function(e){return function(t){\"error\"!=e&&r.emit(e,t)}},s=function(e){return function(t,n){r.emit(e,t,n)}};[\"timeout\",\"error\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\"].forEach(function(e){r.s.mongos.removeAllListeners(e)}),r.s.mongos.on(\"serverDescriptionChanged\",s(\"serverDescriptionChanged\")),r.s.mongos.on(\"serverHeartbeatStarted\",s(\"serverHeartbeatStarted\")),r.s.mongos.on(\"serverHeartbeatSucceeded\",s(\"serverHeartbeatSucceeded\")),r.s.mongos.on(\"serverHeartbeatFailed\",s(\"serverHeartbeatFailed\")),r.s.mongos.on(\"serverOpening\",s(\"serverOpening\")),r.s.mongos.on(\"serverClosed\",s(\"serverClosed\")),r.s.mongos.on(\"topologyOpening\",s(\"topologyOpening\")),r.s.mongos.on(\"topologyClosed\",s(\"topologyClosed\")),r.s.mongos.on(\"topologyDescriptionChanged\",s(\"topologyDescriptionChanged\")),r.s.mongos.once(\"timeout\",o(\"timeout\")),r.s.mongos.once(\"error\",o(\"error\")),r.s.mongos.once(\"close\",o(\"close\")),r.s.mongos.once(\"connect\",function(){[\"timeout\",\"error\",\"close\",\"fullsetup\"].forEach(function(e){r.s.mongos.removeAllListeners(e)}),r.s.mongos.once(\"timeout\",i(\"timeout\")),r.s.mongos.once(\"error\",i(\"error\")),r.s.mongos.once(\"close\",i(\"close\")),r.s.mongos.on(\"fullsetup\",function(){r.emit(\"fullsetup\",r)}),r.emit(\"open\",null,r);try{n(null,r)}catch(e){process.nextTick(function(){throw e})}}),r.s.mongos.on(\"joined\",s(\"joined\")),r.s.mongos.on(\"left\",s(\"left\")),r.s.mongos.on(\"reconnect\",function(){r.emit(\"reconnect\"),r.s.store.execute()}),r.s.mongos.connect(t)},I.prototype.capabilities=function(){return this.s.sCapabilities?this.s.sCapabilities:null==this.s.mongos.lastIsMaster()?null:(this.s.sCapabilities=new s(this.s.mongos.lastIsMaster()),this.s.sCapabilities)},T.classMethod(\"capabilities\",{callback:!1,promise:!1,returns:[s]}),I.prototype.command=function(e,t,n,r){this.s.mongos.command(e,t,b(n),r)},T.classMethod(\"command\",{callback:!0,promise:!1}),I.prototype.insert=function(e,t,n,r){this.s.mongos.insert(e,t,n,function(e,t){r(e,t)})},T.classMethod(\"insert\",{callback:!0,promise:!1}),I.prototype.update=function(e,t,n,r){this.s.mongos.update(e,t,n,r)},T.classMethod(\"update\",{callback:!0,promise:!1}),I.prototype.remove=function(e,t,n,r){this.s.mongos.remove(e,t,n,r)},T.classMethod(\"remove\",{callback:!0,promise:!1}),I.prototype.isDestroyed=function(){return this.s.mongos.isDestroyed()},I.prototype.isConnected=function(){return this.s.mongos.isConnected()},T.classMethod(\"isConnected\",{callback:!1,promise:!1,returns:[Boolean]}),I.prototype.cursor=function(e,t,n){return n.disconnectHandler=this.s.store,this.s.mongos.cursor(e,t,n)},T.classMethod(\"cursor\",{callback:!1,promise:!1,returns:[l,u,p]}),I.prototype.lastIsMaster=function(){return this.s.mongos.lastIsMaster()},I.prototype.unref=function(){return this.s.mongos.unref()},I.prototype.close=function(e){this.s.mongos.destroy({force:\"boolean\"==typeof e&&e}),1==e&&(this.s.storeOptions.force=e,this.s.store.flush())},T.classMethod(\"close\",{callback:!1,promise:!1}),I.prototype.auth=function(){var e=Array.prototype.slice.call(arguments,0);this.s.mongos.auth.apply(this.s.mongos,e)},T.classMethod(\"auth\",{callback:!0,promise:!1}),I.prototype.logout=function(){var e=Array.prototype.slice.call(arguments,0);this.s.mongos.logout.apply(this.s.mongos,e)},T.classMethod(\"logout\",{callback:!0,promise:!1}),I.prototype.connections=function(){return this.s.mongos.connections()},T.classMethod(\"connections\",{callback:!1,promise:!1,returns:[Array]}),e.exports=I},function(e,t,n){\"use strict\";var r=n(179),o=n(63),i=n(123),s=n(122),a=n(5).EventEmitter,c=n(0).inherits,l=n(16),u=n(22),p=n(4).Logger,d=n(4).MongoError,f=n(98),h=n(0).format,m=(n(2).assign,n(2).shallowClone),g=n(97),y=[\"poolSize\",\"ssl\",\"sslValidate\",\"sslCA\",\"sslCert\",\"ciphers\",\"ecdhCurve\",\"sslKey\",\"sslPass\",\"sslCRL\",\"autoReconnect\",\"noDelay\",\"keepAlive\",\"connectTimeoutMS\",\"family\",\"socketTimeoutMS\",\"reconnectTries\",\"reconnectInterval\",\"ha\",\"haInterval\",\"replicaSet\",\"secondaryAcceptableLatencyMS\",\"acceptableLatencyMS\",\"connectWithNoPrimary\",\"authSource\",\"w\",\"wtimeout\",\"j\",\"forceServerObjectId\",\"serializeFunctions\",\"ignoreUndefined\",\"raw\",\"bufferMaxEntries\",\"readPreference\",\"pkFactory\",\"promiseLibrary\",\"readConcern\",\"maxStalenessSeconds\",\"loggerLevel\",\"logger\",\"promoteValues\",\"promoteBuffers\",\"promoteLongs\",\"domainsEnabled\",\"keepAliveInitialDelay\",\"checkServerIdentity\",\"validateOptions\",\"appname\",\"auth\"],v=[\"native_parser\"],b=[\"server\",\"replset\",\"replSet\",\"mongos\",\"db\"];function x(){if(!(this instanceof x))return new x;a.call(this),this.connect=x.connect}c(x,a);var w=x.define=new l(\"MongoClient\",x,!1);x.connect=function(e,t,r){var o=Array.prototype.slice.call(arguments,1);r=\"function\"==typeof o[o.length-1]?o.pop():null;var i=this,s=function(e){var t=y.concat(b);for(var n in e)if(-1==v.indexOf(n)){if(-1==t.indexOf(n)&&e.validateOptions)return new d(h(\"option %s is not supported\",n));-1==t.indexOf(n)&&console.warn(h(\"the options [%s] is not supported\",n)),-1!=b.indexOf(n)&&console.warn(h(\"the server/replset/mongos options are deprecated, all their options are supported at the top level of the options object [%s]\",y))}}(t=(t=o.length?o.shift():null)||{}),a=t.promiseLibrary;return a||(a=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),\"function\"!=typeof r?new a(function(n,r){if(s)return r(s);T(i,e,t,function(e,t){if(e)return r(e);n(t)})}):s?r(s):void T(i,e,t,r)},w.staticMethod(\"connect\",{callback:!0,promise:!0});var S=function(e,t,n){for(var r in t)t[r]&&\"object\"==typeof t[r]&&n?e=S(e,t[r],n):e[r]=t[r];return e},k=function(e,t){var n=[\"mongos\",\"server\",\"db\",\"replset\",\"db_options\",\"server_options\",\"rs_options\",\"mongos_options\"],r=[\"readconcern\"];for(var o in t)-1!=r.indexOf(o.toLowerCase())?e[o]=t[o]:-1!=n.indexOf(o.toLowerCase())?e=S(e,t[o],!1):!t[o]||\"object\"!=typeof t[o]||Buffer.isBuffer(t[o])||Array.isArray(t[o])?e[o]=t[o]:e=S(e,t[o],!0);return e};function O(e){return\"string\"!=typeof e.readPreference&&\"string\"!=typeof e.read_preference||(e.readPreference=new u(e.readPreference||e.read_preference)),e.readPreference&&(e.readPreferenceTags||e.read_preference_tags)&&(e.readPreference.tags=e.readPreferenceTags||e.read_preference_tags),e.maxStalenessSeconds&&(e.readPreference.maxStalenessSeconds=e.maxStalenessSeconds),null==e.socketTimeoutMS&&(e.socketTimeoutMS=36e4),null==e.connectTimeoutMS&&(e.connectTimeoutMS=3e4),e.servers.map(function(t){return t.domain_socket?new o(t.domain_socket,27017,e):new o(t.host,t.port,e)})}function C(e,t){if(e instanceof x){[\"timeout\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\",\"joined\",\"left\",\"ping\",\"ha\",\"all\",\"fullsetup\"].forEach(function(n){t.serverConfig.on(n,function(t,r){e.emit(n,t,r)})})}}function _(e,t,n){var r=O(t),o=new f(t.dbName,new i(r,t),t);C(e,o),o.open(n)}function E(e,t,n){var r=O(t),o=new f(t.dbName,r[0],t),i=function(e,t){var n=[];e instanceof x&&[\"timeout\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\",\"joined\",\"left\",\"ping\",\"ha\",\"all\",\"fullsetup\"].forEach(function(e){t.serverConfig.on(e,function(t,r){n.push({event:e,object1:t,object2:r})})});return n}(e,o);o.open(function(r,o){if(r)return n(r);var s=o.serverConfig.lastIsMaster();if(s&&\"isdbgrid\"==s.msg)return o.close(),_(e,t,n);!function(e,t){for(var n=0;n<t.length;n++)e.emit(t[n].event,t[n].object1,t[n].object2)}(e,i),C(e,o),n(r,o)})}function I(e,t){return function(n,r){if(n)return process.nextTick(function(){try{t(n,null)}catch(e){throw r&&r.close(),e}});if(!e.auth)return process.nextTick(function(){try{t(n,r)}catch(e){throw r&&r.close(),e}});var o=r;e.authSource&&(o=r.db(e.authSource)),g(o,e.user,e.password,e,function(n,o){o?process.nextTick(function(){try{t(null,r)}catch(e){throw r&&r.close(),e}}):(r&&r.close(),process.nextTick(function(){try{t(n||new Error(\"Could not authenticate user \"+e.auth[0]),null)}catch(e){throw r&&r.close(),e}}))})}}var T=function(e,t,n,o){if(n=m(n=n||{}),null==o)throw new Error(\"no callback function provided\");var i=p(\"MongoClient\",n);function a(e,t){if(e&&\"no mongos proxies found in seed list\"==e.message)return i.isWarn()&&i.warn(h(\"seed list contains no mongos proxies, replicaset connections requires the parameter replicaSet to be supplied in the URI or options object, mongodb://server:port/db?replicaSet=name\")),o(new d(\"seed list contains no mongos proxies, replicaset connections requires the parameter replicaSet to be supplied in the URI or options object, mongodb://server:port/db?replicaSet=name\"));o(e,t)}r(t,n,function(t,r){if(t)return o(t);var i=k({},r);if(i=S(i,r,!1),null==(i=k(i,n)).socketTimeoutMS&&(i.socketTimeoutMS=36e4),null==i.connectTimeoutMS&&(i.connectTimeoutMS=3e4),i.db_options&&i.db_options.auth&&delete i.db_options.auth,0==r.servers.length)throw new Error(\"connection string must contain at least one seed host\");return i.replicaSet||i.rs_name?function(e,t,n){var r=O(t),o=new f(t.dbName,new s(r,t),t);C(e,o),o.open(n)}(e,i,I(i,a)):r.servers.length>1?_(e,i,I(i,a)):E(e,i,I(i,a))})};e.exports=x},function(e,t,n){\"use strict\";var r=n(2).toError,o=n(16),i=n(2).shallowClone,s=n(2).assign,a=n(97),c=function(e,t,n){if(!(this instanceof c))return new c(e,t);this.s={db:e,topology:t,promiseLibrary:n}},l=c.define=new o(\"Admin\",c,!1);c.prototype.command=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,1);return\"function\"!=typeof(n=o.pop())&&o.push(n),t=o.length?o.shift():{},\"function\"==typeof n?this.s.db.executeDbAdminCommand(e,t,function(e,t){return null!=n?n(e,t):null}):new this.s.promiseLibrary(function(n,o){r.s.db.executeDbAdminCommand(e,t,function(e,t){if(e)return o(e);n(t)})})},l.classMethod(\"command\",{callback:!0,promise:!0}),c.prototype.buildInfo=function(e){var t=this;return\"function\"==typeof e?this.serverInfo(e):new this.s.promiseLibrary(function(e,n){t.serverInfo(function(t,r){if(t)return n(t);e(r)})})},l.classMethod(\"buildInfo\",{callback:!0,promise:!0}),c.prototype.serverInfo=function(e){var t=this;return\"function\"==typeof e?this.s.db.executeDbAdminCommand({buildinfo:1},function(t,n){if(null!=t)return e(t,null);e(null,n)}):new this.s.promiseLibrary(function(e,n){t.s.db.executeDbAdminCommand({buildinfo:1},function(t,r){if(t)return n(t);e(r)})})},l.classMethod(\"serverInfo\",{callback:!0,promise:!0}),c.prototype.serverStatus=function(e){var t=this;return\"function\"==typeof e?u(t,e):new this.s.promiseLibrary(function(e,n){u(t,function(t,r){if(t)return n(t);e(r)})})};var u=function(e,t){e.s.db.executeDbAdminCommand({serverStatus:1},function(e,n){if(null!=e||1!==n.ok)return t(e||r(n),!1);t(null,n)})};l.classMethod(\"serverStatus\",{callback:!0,promise:!0}),c.prototype.profilingLevel=function(e){var t=this;return\"function\"==typeof e?p(t,e):new this.s.promiseLibrary(function(e,n){p(t,function(t,r){if(t)return n(t);e(r)})})};var p=function(e,t){e.s.db.executeDbAdminCommand({profile:-1},function(e,n){if(null==e&&1===n.ok){var r=n.was;return 0==r?t(null,\"off\"):1==r?t(null,\"slow_only\"):2==r?t(null,\"all\"):t(new Error(\"Error: illegal profiling level value \"+r),null)}t(null!=e?e:new Error(\"Error with profile command\"),null)})};l.classMethod(\"profilingLevel\",{callback:!0,promise:!0}),c.prototype.ping=function(e,t){var n=this,r=Array.prototype.slice.call(arguments,0);return\"function\"!=typeof(t=r.pop())&&r.push(t),\"function\"==typeof t?this.s.db.executeDbAdminCommand({ping:1},t):new this.s.promiseLibrary(function(e,t){n.s.db.executeDbAdminCommand({ping:1},function(n,r){if(n)return t(n);e(r)})})},l.classMethod(\"ping\",{callback:!0,promise:!0}),c.prototype.authenticate=function(e,t,n,r){console.warn(\"Admin.prototype.authenticate method will no longer be available in the next major release 3.x as MongoDB 3.6 will only allow auth against users in the admin db and will no longer allow multiple credentials on a socket. Please authenticate using MongoClient.connect with auth credentials.\");var o=[this.s.db];return\"string\"==typeof e&&o.push(e),\"string\"==typeof t&&o.push(t),\"function\"==typeof n?(o.push({authdb:\"admin\"}),o.push(n)):o.push(s({},n,{authdb:\"admin\"})),\"function\"==typeof r&&o.push(r),a.apply(this.s.db,o)},l.classMethod(\"authenticate\",{callback:!0,promise:!0}),c.prototype.logout=function(e){var t=this;return\"function\"==typeof e?this.s.db.logout({dbName:\"admin\"},e):new this.s.promiseLibrary(function(e,n){t.s.db.logout({dbName:\"admin\"},function(t){if(t)return n(t);e(!0)})})},l.classMethod(\"logout\",{callback:!0,promise:!0});var d=function(e,t){return(e=i(e)).w||e.wtimeout||e.j||e.fsync?e:(t.writeConcern&&(e.w&&(e.w=t.writeConcern.w),e.wtimeout&&(e.wtimeout=t.writeConcern.wtimeout),e.j&&(e.j=t.writeConcern.j),e.fsync&&(e.fsync=t.writeConcern.fsync)),e)};c.prototype.addUser=function(e,t,n,r){var o=this,i=Array.prototype.slice.call(arguments,2);return\"function\"!=typeof(r=i.pop())&&i.push(r),n=i.length?i.shift():{},(n=d(n=n||{},o.s.db)).dbName=\"admin\",\"function\"==typeof r?o.s.db.addUser(e,t,n,r):new this.s.promiseLibrary(function(r,i){o.s.db.addUser(e,t,n,function(e,t){if(e)return i(e);r(t)})})},l.classMethod(\"addUser\",{callback:!0,promise:!0}),c.prototype.removeUser=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,1);return\"function\"!=typeof(n=o.pop())&&o.push(n),t=o.length?o.shift():{},(t=d(t=t||{},r.s.db)).dbName=\"admin\",\"function\"==typeof n?r.s.db.removeUser(e,t,n):new this.s.promiseLibrary(function(n,o){r.s.db.removeUser(e,t,function(e,t){if(e)return o(e);n(t)})})},l.classMethod(\"removeUser\",{callback:!0,promise:!0}),c.prototype.setProfilingLevel=function(e,t){var n=this;return\"function\"==typeof t?f(n,e,t):new this.s.promiseLibrary(function(t,r){f(n,e,function(e,n){if(e)return r(e);t(n)})})};var f=function(e,t,n){var r={},o=0;if(\"off\"==t)o=0;else if(\"slow_only\"==t)o=1;else{if(\"all\"!=t)return n(new Error(\"Error: illegal profiling level value \"+t));o=2}r.profile=o,e.s.db.executeDbAdminCommand(r,function(e,r){return null==e&&1===r.ok?n(null,t):n(null!=e?e:new Error(\"Error with profile command\"),null)})};l.classMethod(\"setProfilingLevel\",{callback:!0,promise:!0}),c.prototype.profilingInfo=function(e){var t=this;return\"function\"==typeof e?h(t,e):new this.s.promiseLibrary(function(e,n){h(t,function(t,r){if(t)return n(t);e(r)})})};var h=function(e,t){try{e.s.topology.cursor(\"admin.system.profile\",{find:\"system.profile\",query:{}},{}).toArray(t)}catch(e){return t(e,null)}};l.classMethod(\"profilingLevel\",{callback:!0,promise:!0}),c.prototype.validateCollection=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,1);return\"function\"!=typeof(n=o.pop())&&o.push(n),t=(t=o.length?o.shift():{})||{},\"function\"==typeof n?m(r,e,t,n):new this.s.promiseLibrary(function(n,o){m(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var m=function(e,t,n,r){for(var o={validate:t},i=Object.keys(n),s=0;s<i.length;s++)n.hasOwnProperty(i[s])&&(o[i[s]]=n[i[s]]);e.s.db.command(o,function(e,n){return null!=e?r(e,null):0===n.ok?r(new Error(\"Error with validate command\"),null):null!=n.result&&n.result.constructor!=String?r(new Error(\"Error with validation data\"),null):null!=n.result&&null!=n.result.match(/exception|corrupt/)?r(new Error(\"Error: invalid collection \"+t),null):null==n.valid||n.valid?r(null,n):r(new Error(\"Error: invalid collection \"+t),null)})};l.classMethod(\"validateCollection\",{callback:!0,promise:!0}),c.prototype.listDatabases=function(e){var t=this;return\"function\"==typeof e?t.s.db.executeDbAdminCommand({listDatabases:1},{},e):new this.s.promiseLibrary(function(e,n){t.s.db.executeDbAdminCommand({listDatabases:1},{},function(t,r){if(t)return n(t);e(r)})})},l.classMethod(\"listDatabases\",{callback:!0,promise:!0}),c.prototype.replSetGetStatus=function(e){var t=this;return\"function\"==typeof e?g(t,e):new this.s.promiseLibrary(function(e,n){g(t,function(t,r){if(t)return n(t);e(r)})})};var g=function(e,t){e.s.db.executeDbAdminCommand({replSetGetStatus:1},function(e,n){return null==e&&1===n.ok?t(null,n):e?t(e,!1):void t(r(n),!1)})};l.classMethod(\"replSetGetStatus\",{callback:!0,promise:!0}),e.exports=c},function(e,t,n){\"use strict\";var r=n(4).BSON.Binary,o=n(4).BSON.ObjectID,i=function(e,t,n){if(!(this instanceof i))return new i(e,t);this.file=e;var s=null==t?{}:t;if(this.writeConcern=n||{w:1},this.objectId=null==s._id?new o:s._id,this.chunkNumber=null==s.n?0:s.n,this.data=new r,\"string\"==typeof s.data){var a=new Buffer(s.data.length);a.write(s.data,0,s.data.length,\"binary\"),this.data=new r(a)}else if(Array.isArray(s.data)){a=new Buffer(s.data.length);var c=s.data.join(\"\");a.write(c,0,c.length,\"binary\"),this.data=new r(a)}else if(s.data&&\"Binary\"===s.data._bsontype)this.data=s.data;else if(!Buffer.isBuffer(s.data)&&null!=s.data)throw Error(\"Illegal chunk format\");this.internalPosition=0};i.prototype.write=function(e,t){return this.data.write(e,this.internalPosition,e.length,\"binary\"),this.internalPosition=this.data.length(),null!=t?t(null,this):this},i.prototype.read=function(e){if(e=null==e||0==e?this.length():e,this.length()-this.internalPosition+1>=e){var t=this.data.read(this.internalPosition,e);return this.internalPosition=this.internalPosition+e,t}return\"\"},i.prototype.readSlice=function(e){if(this.length()-this.internalPosition>=e){var t=null;return null!=this.data.buffer?t=this.data.buffer.slice(this.internalPosition,this.internalPosition+e):(t=new Buffer(e),e=this.data.readInto(t,this.internalPosition)),this.internalPosition=this.internalPosition+e,t}return null},i.prototype.eof=function(){return this.internalPosition==this.length()},i.prototype.getc=function(){return this.read(1)},i.prototype.rewind=function(){this.internalPosition=0,this.data=new r},i.prototype.save=function(e,t){var n=this;\"function\"==typeof e&&(t=e,e={}),n.file.chunkCollection(function(r,o){if(r)return t(r);var i={upsert:!0};for(var s in e)i[s]=e[s];for(s in n.writeConcern)i[s]=n.writeConcern[s];n.data.length()>0?n.buildMongoObject(function(e){var r={forceServerObjectId:!0};for(var s in n.writeConcern)r[s]=n.writeConcern[s];o.replaceOne({_id:n.objectId},e,i,function(e){t(e,n)})}):t(null,n)})},i.prototype.buildMongoObject=function(e){var t={files_id:this.file.fileId,n:this.chunkNumber,data:this.data};null!=this.objectId&&(t._id=this.objectId),e(t)},i.prototype.length=function(){return this.data.length()},Object.defineProperty(i.prototype,\"position\",{enumerable:!0,get:function(){return this.internalPosition},set:function(e){this.internalPosition=e}}),i.DEFAULT_CHUNK_SIZE=261120,e.exports=i},function(e,t,n){\"use strict\";var r=n(126),o=n(4).BSON.ObjectID,i=n(22),s=n(10).Buffer,a=n(64),c=n(26),l=n(0).format,u=n(0),p=n(16),d=n(4).MongoError,f=u.inherits,h=n(9).Duplex||n(65).Duplex,m=n(2).shallowClone,g=function e(t,s,a,c,l){if(!(this instanceof e))return new e(t,s,a,c,l);this.db=t,void 0===l&&(l={}),void 0===c?(c=a,a=void 0):\"object\"==typeof c&&(l=c,c=a,a=void 0),s&&\"ObjectID\"==s._bsontype?(this.referenceBy=1,this.fileId=s,this.filename=a):void 0===a?(this.referenceBy=0,this.filename=s,null!=c.indexOf(\"w\")&&(this.fileId=new o)):(this.referenceBy=1,this.fileId=s,this.filename=a),this.mode=null==c?\"r\":c,this.options=l||{},this.isOpen=!1,this.root=null==this.options.root?e.DEFAULT_ROOT_COLLECTION:this.options.root,this.position=0,this.readPreference=this.options.readPreference||t.options.readPreference||i.PRIMARY,this.writeConcern=q(t,this.options),this.internalChunkSize=null==this.options.chunkSize?r.DEFAULT_CHUNK_SIZE:this.options.chunkSize;var u=this.options.promiseLibrary;u||(u=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),this.promiseLibrary=u,Object.defineProperty(this,\"chunkSize\",{enumerable:!0,get:function(){return this.internalChunkSize},set:function(e){\"w\"!=this.mode[0]||0!=this.position||null!=this.uploadDate?this.internalChunkSize=this.internalChunkSize:this.internalChunkSize=e}}),Object.defineProperty(this,\"md5\",{enumerable:!0,get:function(){return this.internalMd5}}),Object.defineProperty(this,\"chunkNumber\",{enumerable:!0,get:function(){return this.currentChunk&&this.currentChunk.chunkNumber?this.currentChunk.chunkNumber:null}})},y=g.define=new p(\"Gridstore\",g,!0);g.prototype.open=function(e){var t=this;if(\"w\"!=this.mode&&\"w+\"!=this.mode&&\"r\"!=this.mode)throw d.create({message:\"Illegal mode \"+this.mode,driver:!0});return\"function\"==typeof e?v(t,e):new t.promiseLibrary(function(e,n){v(t,function(t,r){if(t)return n(t);e(r)})})};var v=function(e,t){var n=q(e.db,e.options);\"w\"==e.mode||\"w+\"==e.mode?e.collection().ensureIndex([[\"filename\",1]],n,function(){var r=e.chunkCollection(),o=m(n);o.unique=!0,r.ensureIndex([[\"files_id\",1],[\"n\",1]],o,function(){E(e,n,function(n,r){if(n)return t(n);e.isOpen=!0,t(n,r)})})}):E(e,n,function(n,r){if(n)return t(n);e.isOpen=!0,t(n,r)})};y.classMethod(\"open\",{callback:!0,promise:!0}),g.prototype.eof=function(){return this.position==this.length},y.classMethod(\"eof\",{callback:!1,promise:!1,returns:[Boolean]}),g.prototype.getc=function(e){var t=this;return\"function\"==typeof e?b(t,e):new t.promiseLibrary(function(e,n){b(t,function(t,r){if(t)return n(t);e(r)})})};var b=function(e,t){e.eof()?t(null,null):e.currentChunk.eof()?M(e,e.currentChunk.chunkNumber+1,function(n,r){e.currentChunk=r,e.position=e.position+1,t(n,e.currentChunk.getc())}):(e.position=e.position+1,t(null,e.currentChunk.getc()))};y.classMethod(\"getc\",{callback:!0,promise:!0}),g.prototype.puts=function(e,t){var n=this,r=null==e.match(/\\n$/)?e+\"\\n\":e;return\"function\"==typeof t?this.write(r,t):new n.promiseLibrary(function(e,t){n.write(r,function(n,r){if(n)return t(n);e(r)})})},y.classMethod(\"puts\",{callback:!0,promise:!0}),g.prototype.stream=function(){return new U(this)},y.classMethod(\"stream\",{callback:!1,promise:!1,returns:[U]}),g.prototype.write=function(e,t,n){var r=this;return\"function\"==typeof n?R(this,e,t,n):new r.promiseLibrary(function(n,o){R(r,e,t,function(e,t){if(e)return o(e);n(t)})})},y.classMethod(\"write\",{callback:!0,promise:!0}),g.prototype.destroy=function(){this.writable&&(this.readable=!1,this.writable&&(this.writable=!1,this._q.length=0,this.emit(\"close\")))},y.classMethod(\"destroy\",{callback:!1,promise:!1}),g.prototype.writeFile=function(e,t){var n=this;return\"function\"==typeof t?x(n,e,t):new n.promiseLibrary(function(t,r){x(n,e,function(e,n){if(e)return r(e);t(n)})})};var x=function(e,t,n){\"string\"!=typeof t?e.open(function(e,o){if(e)return n(e,o);c.fstat(t,function(e,i){if(e)return n(e,o);var a=0,l=0,u=function(){var e=new s(o.chunkSize);c.read(t,e,0,e.length,a,function(e,s,p){if(e)return n(e,o);a+=s,new r(o,{n:l++},o.writeConcern).write(p.slice(0,s),function(e,r){if(e)return n(e,o);r.save({},function(e){return e?n(e,o):(o.position=o.position+s,o.currentChunk=r,a>=i.size?(c.close(t),void o.close(function(e){return n(e||null,o)})):process.nextTick(u))})})})};process.nextTick(u)})}):c.open(t,\"r\",function(t,r){if(t)return n(t);e.writeFile(r,n)})};y.classMethod(\"writeFile\",{callback:!0,promise:!0}),g.prototype.close=function(e){var t=this;return\"function\"==typeof e?w(t,e):new t.promiseLibrary(function(e,n){w(t,function(t,r){if(t)return n(t);e(r)})})};var w=function(e,t){if(\"w\"==e.mode[0]){var n=e.writeConcern;null!=e.currentChunk&&e.currentChunk.position>0?e.currentChunk.save({},function(r){if(r&&\"function\"==typeof t)return t(r);e.collection(function(r,o){if(r&&\"function\"==typeof t)return t(r);null!=e.uploadDate?T(e,function(e,r){if(e){if(\"function\"==typeof t)return t(e);throw e}o.save(r,n,function(e){\"function\"==typeof t&&t(e,r)})}):(e.uploadDate=new Date,T(e,function(e,r){if(e){if(\"function\"==typeof t)return t(e);throw e}o.save(r,n,function(e){\"function\"==typeof t&&t(e,r)})}))})}):e.collection(function(r,o){if(r&&\"function\"==typeof t)return t(r);e.uploadDate=new Date,T(e,function(e,r){if(e){if(\"function\"==typeof t)return t(e);throw e}o.save(r,n,function(e){\"function\"==typeof t&&t(e,r)})})})}else\"r\"==e.mode[0]?\"function\"==typeof t&&t(null,null):\"function\"==typeof t&&t(d.create({message:l(\"Illegal mode %s\",e.mode),driver:!0}))};y.classMethod(\"close\",{callback:!0,promise:!0}),g.prototype.chunkCollection=function(e){return\"function\"==typeof e?this.db.collection(this.root+\".chunks\",e):this.db.collection(this.root+\".chunks\")},y.classMethod(\"chunkCollection\",{callback:!0,promise:!1,returns:[a]}),g.prototype.unlink=function(e){var t=this;return\"function\"==typeof e?S(t,e):new t.promiseLibrary(function(e,n){S(t,function(t,r){if(t)return n(t);e(r)})})};var S=function(e,t){A(e,function(n){if(null!==n)return n.message=\"at deleteChunks: \"+n.message,t(n);e.collection(function(n,r){if(null!==n)return n.message=\"at collection: \"+n.message,t(n);r.remove({_id:e.fileId},e.writeConcern,function(n){t(n,e)})})})};y.classMethod(\"unlink\",{callback:!0,promise:!0}),g.prototype.collection=function(e){return\"function\"==typeof e&&this.db.collection(this.root+\".files\",e),this.db.collection(this.root+\".files\")},y.classMethod(\"collection\",{callback:!0,promise:!1,returns:[a]}),g.prototype.readlines=function(e,t){var n=this,r=Array.prototype.slice.call(arguments,0);return\"function\"!=typeof(t=r.pop())&&r.push(t),e=(e=r.length?r.shift():\"\\n\")||\"\\n\",\"function\"==typeof t?k(n,e,t):new n.promiseLibrary(function(t,r){k(n,e,function(e,n){if(e)return r(e);t(n)})})};var k=function(e,t,n){e.read(function(e,r){if(e)return n(e);var o=r.toString().split(t);o=o.length>0?o.splice(0,o.length-1):[];for(var i=0;i<o.length;i++)o[i]=o[i]+t;n(null,o)})};y.classMethod(\"readlines\",{callback:!0,promise:!0}),g.prototype.rewind=function(e){var t=this;return\"function\"==typeof e?O(t,e):new t.promiseLibrary(function(e,n){O(t,function(t,r){if(t)return n(t);e(r)})})};var O=function(e,t){0!=e.currentChunk.chunkNumber?\"w\"==e.mode[0]?A(e,function(n){if(n)return t(n);e.currentChunk=new r(e,{n:0},e.writeConcern),e.position=0,t(null,e)}):e.currentChunk(0,function(n,r){if(n)return t(n);e.currentChunk=r,e.currentChunk.rewind(),e.position=0,t(null,e)}):(e.currentChunk.rewind(),e.position=0,t(null,e))};y.classMethod(\"rewind\",{callback:!0,promise:!0}),g.prototype.read=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,0);return\"function\"!=typeof(n=o.pop())&&o.push(n),e=o.length?o.shift():null,t=o.length?o.shift():null,\"function\"==typeof n?C(r,e,t,n):new r.promiseLibrary(function(n,o){C(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var C=function(e,t,n,r){var o=null==t?e.length-e.position:t,i=null==n?new s(o):n;if(i._index=null!=n&&null!=n._index?n._index:0,e.currentChunk.length()-e.currentChunk.position+i._index>=o){var a=e.currentChunk.readSlice(o-i._index);return a.copy(i,i._index),e.position=e.position+i.length,0==o&&0==i.length?r(d.create({message:\"File does not exist\",driver:!0}),null):r(null,i)}(a=e.currentChunk.readSlice(e.currentChunk.length()-e.currentChunk.position)).copy(i,i._index),i._index+=a.length,M(e,e.currentChunk.chunkNumber+1,function(n,o){if(n)return r(n);o.length()>0?(e.currentChunk=o,e.read(t,i,r)):i._index>0?r(null,i):r(d.create({message:\"no chunks found for file, possibly corrupt\",driver:!0}),null)})};y.classMethod(\"read\",{callback:!0,promise:!0}),g.prototype.tell=function(e){var t=this;return\"function\"==typeof e?e(null,this.position):new t.promiseLibrary(function(e){e(t.position)})},y.classMethod(\"tell\",{callback:!0,promise:!0}),g.prototype.seek=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,1);return\"function\"!=typeof(n=o.pop())&&o.push(n),t=o.length?o.shift():null,\"function\"==typeof n?_(r,e,t,n):new r.promiseLibrary(function(n,o){_(r,e,t,function(e,t){if(e)return o(e);n(t)})})};var _=function(e,t,n,r){if(\"r\"!=e.mode)return r(d.create({message:\"seek is only supported for mode r\",driver:!0}));var o=null==n?g.IO_SEEK_SET:n,i=t,s=0;s=o==g.IO_SEEK_CUR?e.position+i:o==g.IO_SEEK_END?e.length+i:i;var a=Math.floor(s/e.chunkSize);M(e,a,function(t,n){return t?r(t,null):null==n?r(new Error(\"no chunk found\")):(e.currentChunk=n,e.position=s,e.currentChunk.position=e.position%e.chunkSize,void r(t,e))})};y.classMethod(\"seek\",{callback:!0,promise:!0});var E=function(e,t,n){var i=e.collection(),s=1==e.referenceBy?{_id:e.fileId}:{filename:e.filename};function a(e){a.err||n(a.err=e)}s=null==e.fileId&&null==e.filename?null:s,t.readPreference=e.readPreference,null!=s?i.findOne(s,t,function(i,s){if(i)return a(i);if(null!=s)e.fileId=s._id,e.filename=\"r\"==e.mode||void 0==e.filename?s.filename:e.filename,e.contentType=s.contentType,e.internalChunkSize=s.chunkSize,e.uploadDate=s.uploadDate,e.aliases=s.aliases,e.length=s.length,e.metadata=s.metadata,e.internalMd5=s.md5;else{if(\"r\"==e.mode){e.length=0;var c=\"ObjectID\"==e.fileId._bsontype?e.fileId.toHexString():e.fileId;return a(d.create({message:l(\"file with id %s not opened for writing\",1==e.referenceBy?c:e.filename),driver:!0}))}e.fileId=null==e.fileId?new o:e.fileId,e.contentType=g.DEFAULT_CONTENT_TYPE,e.internalChunkSize=null==e.internalChunkSize?r.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0}\"r\"==e.mode?M(e,0,t,function(t,r){if(t)return a(t);e.currentChunk=r,e.position=0,n(null,e)}):\"w\"==e.mode&&s?A(e,t,function(t){if(t)return a(t);e.currentChunk=new r(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,n(null,e)}):\"w\"==e.mode?(e.currentChunk=new r(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,n(null,e)):\"w+\"==e.mode&&M(e,N(e),t,function(t,o){if(t)return a(t);e.currentChunk=null==o?new r(e,{n:0},e.writeConcern):o,e.currentChunk.position=e.currentChunk.data.length(),e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=e.length,n(null,e)})}):(e.fileId=null==e.fileId?new o:e.fileId,e.contentType=g.DEFAULT_CONTENT_TYPE,e.internalChunkSize=null==e.internalChunkSize?r.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0,\"w\"==e.mode?A(e,t,function(t){if(t)return a(t);e.currentChunk=new r(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,n(null,e)}):\"w+\"==e.mode&&M(e,N(e),t,function(t,o){if(t)return a(t);e.currentChunk=null==o?new r(e,{n:0},e.writeConcern):o,e.currentChunk.position=e.currentChunk.data.length(),e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=e.length,n(null,e)}))},I=function(e,t,n,o){\"function\"==typeof n&&(o=n,n=null);var i=\"boolean\"==typeof n&&n;if(\"w\"!=e.mode)o(d.create({message:l(\"file with id %s not opened for writing\",1==e.referenceBy?e.referenceBy:e.filename),driver:!0}),null);else{if(!(e.currentChunk.position+t.length>=e.chunkSize))return e.position=e.position+t.length,e.currentChunk.write(t),i?e.close(function(t){o(t,e)}):o(null,e);for(var s=e.currentChunk.chunkNumber,a=e.chunkSize-e.currentChunk.position,c=t.slice(0,a),u=t.slice(a),p=[e.currentChunk.write(c)];u.length>=e.chunkSize;){var f=new r(e,{n:s+1},e.writeConcern);c=u.slice(0,e.chunkSize),u=u.slice(e.chunkSize),s+=1,f.write(c),p.push(f)}e.currentChunk=new r(e,{n:s+1},e.writeConcern),u.length>0&&e.currentChunk.write(u),e.position=e.position+t.length;for(var h=p.length,m=0;m<p.length;m++)p[m].save({},function(t){return t?o(t):(h-=1)<=0?i?e.close(function(t){o(t,e)}):o(null,e):void 0})}},T=function(e,t){var n={_id:e.fileId,filename:e.filename,contentType:e.contentType,length:e.position?e.position:0,chunkSize:e.chunkSize,uploadDate:e.uploadDate,aliases:e.aliases,metadata:e.metadata},r={filemd5:e.fileId,root:e.root};e.db.command(r,function(e,r){if(e)return t(e);n.md5=r.md5,t(null,n)})},M=function(e,t,n,o){\"function\"==typeof n&&(o=n,n={}),(n=n||e.writeConcern).readPreference=e.readPreference,e.chunkCollection().findOne({files_id:e.fileId,n:t},n,function(t,n){if(t)return o(t);o(null,new r(e,null==n?{}:n,e.writeConcern))})},N=function(e){return Math.floor((e.length?e.length-1:0)/e.chunkSize)},A=function(e,t,n){\"function\"==typeof t&&(n=t,t={}),t=t||e.writeConcern,null!=e.fileId?e.chunkCollection().remove({files_id:e.fileId},t,function(e){if(e)return n(e,!1);n(null,!0)}):n(null,!0)};g.DEFAULT_ROOT_COLLECTION=\"fs\",g.DEFAULT_CONTENT_TYPE=\"binary/octet-stream\",g.IO_SEEK_SET=0,g.IO_SEEK_CUR=1,g.IO_SEEK_END=2,g.exist=function(e,t,r,o,i){var s=Array.prototype.slice.call(arguments,2);\"function\"!=typeof(i=s.pop())&&s.push(i),r=s.length?s.shift():null;var a=(o=(o=s.length?s.shift():{})||{}).promiseLibrary;return a||(a=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),\"function\"==typeof i?B(e,t,r,o,i):new a(function(n,i){B(e,t,r,o,function(e,t){if(e)return i(e);n(t)})})};var B=function(e,t,n,r,o){var s=r.readPreference||i.PRIMARY,a=null!=n?n:g.DEFAULT_ROOT_COLLECTION;e.collection(a+\".files\",function(e,n){if(e)return o(e);var r=\"string\"==typeof t||\"[object RegExp]\"==Object.prototype.toString.call(t)?{filename:t}:{_id:t};null!=t&&\"object\"==typeof t&&\"[object RegExp]\"!=Object.prototype.toString.call(t)&&(r=t),n.findOne(r,{readPreference:s},function(e,t){if(e)return o(e);o(null,null!=t)})})};y.staticMethod(\"exist\",{callback:!0,promise:!0}),g.list=function(e,t,r,o){var i=Array.prototype.slice.call(arguments,1);\"function\"!=typeof(o=i.pop())&&i.push(o),t=i.length?i.shift():null;var s=(r=(r=i.length?i.shift():{})||{}).promiseLibrary;return s||(s=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),\"function\"==typeof o?j(e,t,r,o):new s(function(n,o){j(e,t,r,function(e,t){if(e)return o(e);n(t)})})};var j=function(e,t,n,r){null!=t&&\"object\"==typeof t&&(n=t,t=null);var o=n.readPreference||i.PRIMARY,s=null!=n.id&&n.id,a=null!=t?t:g.DEFAULT_ROOT_COLLECTION,c=[];e.collection(a+\".files\",function(e,t){if(e)return r(e);t.find({},{readPreference:o},function(e,t){if(e)return r(e);t.each(function(e,t){null!=t?c.push(s?t._id:t.filename):r(e,c)})})})};y.staticMethod(\"list\",{callback:!0,promise:!0}),g.read=function(e,t,r,o,i,s){var a=Array.prototype.slice.call(arguments,2);\"function\"!=typeof(s=a.pop())&&a.push(s),r=a.length?a.shift():null,o=a.length?a.shift():null;var c=(i=(i=a.length?a.shift():null)||{})?i.promiseLibrary:null;return c||(c=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),\"function\"==typeof s?P(e,t,r,o,i,s):new c(function(n,s){P(e,t,r,o,i,function(e,t){if(e)return s(e);n(t)})})};var P=function(e,t,n,r,o,i){new g(e,t,\"r\",o).open(function(e,t){return e?i(e):r&&r>=t.length?i(\"offset larger than size of file\",null):n&&n>t.length?i(\"length is larger than the size of the file\",null):r&&n&&r+n>t.length?i(\"offset and length is larger than the size of the file\",null):void(null!=r?t.seek(r,function(e,t){if(e)return i(e);t.read(n,i)}):t.read(n,i))})};y.staticMethod(\"read\",{callback:!0,promise:!0}),g.readlines=function(e,t,r,o,i){var s=Array.prototype.slice.call(arguments,2);\"function\"!=typeof(i=s.pop())&&s.push(i),r=s.length?s.shift():null;var a=(o=(o=s.length?s.shift():null)||{})?o.promiseLibrary:null;return a||(a=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),\"function\"==typeof i?D(e,t,r,o,i):new a(function(n,i){D(e,t,r,o,function(e,t){if(e)return i(e);n(t)})})};var D=function(e,t,n,r,o){var i=null==n?\"\\n\":n;new g(e,t,\"r\",r).open(function(e,t){if(e)return o(e);t.readlines(i,o)})};y.staticMethod(\"readlines\",{callback:!0,promise:!0}),g.unlink=function(e,t,r,o){var i=this,s=Array.prototype.slice.call(arguments,2);\"function\"!=typeof(o=s.pop())&&s.push(o);var a=(r=(r=s.length?s.shift():{})||{}).promiseLibrary;return a||(a=\"function\"==typeof global.Promise?global.Promise:n(12).Promise),\"function\"==typeof o?L(i,e,t,r,o):new a(function(n,o){L(i,e,t,r,function(e,t){if(e)return o(e);n(t)})})};var L=function(e,t,n,r,o){var i=q(t,r);if(n.constructor==Array)for(var s=0,a=0;a<n.length;a++)++s,g.unlink(t,n[a],r,function(){0==--s&&o(null,e)});else new g(t,n,\"w\",r).open(function(t,n){if(t)return o(t);A(n,function(t){if(t)return o(t);n.collection(function(t,r){if(t)return o(t);r.remove({_id:n.fileId},i,function(t){o(t,e)})})})})};y.staticMethod(\"unlink\",{callback:!0,promise:!0});var R=function(e,t,n,r){return s.isBuffer(t)?I(e,t,n,r):I(e,new s(t,\"binary\"),n,r)},z=function(e){var t={};return null!=e.w&&(t.w=e.w),1==e.journal&&(t.j=e.journal),1==e.j&&(t.j=e.j),1==e.fsync&&(t.fsync=e.fsync),null!=e.wtimeout&&(t.wtimeout=e.wtimeout),t},q=function(e,t){var n={w:1};if(null!=(t=t||{}).w||\"boolean\"==typeof t.j||\"boolean\"==typeof t.journal||\"boolean\"==typeof t.fsync?n=z(t):null!=t.safe&&\"object\"==typeof t.safe?n=z(t.safe):\"boolean\"==typeof t.safe?n={w:t.safe?1:0}:null!=e.options.w||\"boolean\"==typeof e.options.j||\"boolean\"==typeof e.options.journal||\"boolean\"==typeof e.options.fsync?n=z(e.options):!e.safe||null==e.safe.w&&\"boolean\"!=typeof e.safe.j&&\"boolean\"!=typeof e.safe.journal&&\"boolean\"!=typeof e.safe.fsync?\"boolean\"==typeof e.safe&&(n={w:e.safe?1:0}):n=z(e.safe),n.w<1&&(1==n.journal||1==n.j||1==n.fsync))throw d.create({message:\"No acknowledgement using w < 1 cannot be combined with journal:true or fsync:true\",driver:!0});return n},U=function(e){h.call(this),this.gs=e,this.endCalled=!1,this.totalBytesToRead=this.gs.length-this.gs.position,this.seekPosition=this.gs.position};f(U,h),U.prototype._pipe=U.prototype.pipe,U.prototype.pipe=function(e){var t=this;return t.gs.isOpen?(t.totalBytesToRead=t.gs.length-t.gs.position,t._pipe.apply(t,[e])):t.gs.open(function(n){if(n)return t.emit(\"error\",n);t.totalBytesToRead=t.gs.length-t.gs.position,t._pipe.apply(t,[e])}),e},U.prototype._read=function(){var e=this,t=function(){e.gs.read(n,function(t,n){return t&&!e.endCalled?e.emit(\"error\",t):e.endCalled||null==n?e.push(null):(n.length<=e.totalBytesToRead?(e.totalBytesToRead=e.totalBytesToRead-n.length,e.push(n)):n.length>e.totalBytesToRead&&(e.totalBytesToRead=e.totalBytesToRead-n._index,e.push(n.slice(0,n._index))),void(e.totalBytesToRead<=0&&(e.endCalled=!0)))})},n=e.gs.length<e.gs.chunkSize?e.gs.length-e.seekPosition:e.gs.chunkSize;e.gs.isOpen?t():e.gs.open(function(n){if(e.totalBytesToRead=e.gs.length-e.gs.position,n)return e.emit(\"error\",n);t()})},U.prototype.destroy=function(){this.pause(),this.endCalled=!0,this.gs.close(),this.emit(\"end\")},U.prototype.write=function(e){var t=this;return t.endCalled?t.emit(\"error\",d.create({message:\"attempting to write to stream after end called\",driver:!0})):t.gs.isOpen?(t.gs.write(e,function(){t.emit(\"drain\")}),!0):(t.gs.open(function(){t.gs.isOpen=!0,t.gs.write(e,function(){process.nextTick(function(){t.emit(\"drain\")})})}),!1)},U.prototype.end=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,0);\"function\"!=typeof(n=o.pop())&&o.push(n),e=o.length?o.shift():null,o.length&&o.shift(),r.endCalled=!0,e&&r.gs.write(e,function(){r.gs.close(function(){\"function\"==typeof n&&n(),r.emit(\"end\")})}),r.gs.close(function(){\"function\"==typeof n&&n(),r.emit(\"end\")})},e.exports=g},function(e,t,n){\"use strict\";var r=n(4).BSON.Long,o=(n(4).BSON.Timestamp,function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:function(){return n}})}),i=function(e){if(!(this instanceof i))return new i(e);o(this,\"code\",e.code),o(this,\"errmsg\",e.errmsg),this.toJSON=function(){return{code:e.code,errmsg:e.errmsg}},this.toString=function(){return\"WriteConcernError(\"+e.errmsg+\")\"}},s=function(e){if(!(this instanceof s))return new s(e);o(this,\"code\",e.code),o(this,\"index\",e.index),o(this,\"errmsg\",e.errmsg),this.getOperation=function(){return e.op},this.toJSON=function(){return{code:e.code,index:e.index,errmsg:e.errmsg,op:e.op}},this.toString=function(){return\"WriteError(\"+JSON.stringify(this.toJSON())+\")\"}};t.BulkWriteResult=function(e){o(this,\"ok\",e.ok),o(this,\"nInserted\",e.nInserted),o(this,\"nUpserted\",e.nUpserted),o(this,\"nMatched\",e.nMatched),o(this,\"nModified\",e.nModified),o(this,\"nRemoved\",e.nRemoved),this.getInsertedIds=function(){return e.insertedIds},this.getUpsertedIds=function(){return e.upserted},this.getUpsertedIdAt=function(t){return e.upserted[t]},this.getRawResponse=function(){return e},this.hasWriteErrors=function(){return e.writeErrors.length>0},this.getWriteErrorCount=function(){return e.writeErrors.length},this.getWriteErrorAt=function(t){return t<e.writeErrors.length?e.writeErrors[t]:null},this.getWriteErrors=function(){return e.writeErrors},this.getLastOp=function(){return e.lastOp},this.getWriteConcernError=function(){if(0==e.writeConcernErrors.length)return null;if(1==e.writeConcernErrors.length)return e.writeConcernErrors[0];for(var t=\"\",n=0;n<e.writeConcernErrors.length;n++)t+=e.writeConcernErrors[n].errmsg,0==n&&(t+=\" and \");return new i({errmsg:t,code:64})},this.toJSON=function(){return e},this.toString=function(){return\"BulkWriteResult(\"+this.toJSON(e)+\")\"},this.isOk=function(){return 1==e.ok}},t.WriteError=s,t.Batch=function(e,t){this.originalZeroIndex=t,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0},t.LegacyOp=function(e,t,n){this.batchType=e,this.index=n,this.operation=t},t.mergeBatchResults=function(e,t,n,o,a){if(o)a=o;else if(a&&a.result)a=a.result;else if(null==a)return;if(0!=a.ok||1!=n.ok){if(0!=a.ok||0!=n.ok){if(a.opTime||a.lastOp){var c=a.lastOp||a.opTime,l=null,u=null;if(c&&\"Timestamp\"==c._bsontype)null==n.lastOp?n.lastOp=c:c.greaterThan(n.lastOp)&&(n.lastOp=c);else{n.lastOp&&(l=\"number\"==typeof n.lastOp.ts?r.fromNumber(n.lastOp.ts):n.lastOp.ts,u=\"number\"==typeof n.lastOp.t?r.fromNumber(n.lastOp.t):n.lastOp.t);var p=\"number\"==typeof c.ts?r.fromNumber(c.ts):c.ts,d=\"number\"==typeof c.t?r.fromNumber(c.t):c.t;null==n.lastOp?n.lastOp=c:p.greaterThan(l)?n.lastOp=c:p.equals(l)&&d.greaterThan(u)&&(n.lastOp=c)}}1==t.batchType&&a.n&&(n.nInserted=n.nInserted+a.n),3==t.batchType&&a.n&&(n.nRemoved=n.nRemoved+a.n);var f=0;if(Array.isArray(a.upserted)){f=a.upserted.length;for(var h=0;h<a.upserted.length;h++)n.upserted.push({index:a.upserted[h].index+t.originalZeroIndex,_id:a.upserted[h]._id})}else a.upserted&&(f=1,n.upserted.push({index:t.originalZeroIndex,_id:a.upserted}));if(2==t.batchType&&a.n){var m=a.nModified;n.nUpserted=n.nUpserted+f,n.nMatched=n.nMatched+(a.n-f),n.nModified=\"number\"==typeof m?n.nModified+m:null}if(Array.isArray(a.writeErrors))for(h=0;h<a.writeErrors.length;h++)g={index:t.originalZeroIndex+a.writeErrors[h].index,code:a.writeErrors[h].code,errmsg:a.writeErrors[h].errmsg,op:t.operations[a.writeErrors[h].index]},n.writeErrors.push(new s(g));a.writeConcernError&&n.writeConcernErrors.push(new i(a.writeConcernError))}}else{n.ok=0;var g={index:0,code:a.code||0,errmsg:a.message,op:t.operations[0]};n.writeErrors.push(new s(g))}},t.cloneOptions=function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r++)t[n[r]]=e[n[r]];return t},t.writeConcern=function(e,t,n){var r={};return t.writeConcern&&null!=t.writeConcern.w&&(r.w=t.writeConcern.w),t.writeConcern&&null!=t.writeConcern.j&&(r.j=t.writeConcern.j),t.writeConcern&&null!=t.writeConcern.fsync&&(r.fsync=t.writeConcern.fsync),t.writeConcern&&null!=t.writeConcern.wtimeout&&(r.wtimeout=t.writeConcern.wtimeout),n&&null!=n.w&&(r.w=n.w),n&&null!=n.wtimeout&&(r.wtimeout=n.wtimeout),n&&null!=n.j&&(r.j=n.j),n&&null!=n.fsync&&(r.fsync=n.fsync),r},t.INVALID_BSON_ERROR=22,t.WRITE_CONCERN_ERROR=64,t.MULTIPLE_ERROR=65,t.UNKNOWN_ERROR=8,t.INSERT=1,t.UPDATE=2,t.REMOVE=3},function(e,t,n){\"use strict\";e.exports=s;var r=n(37),o=n(44);function i(e){this.afterTransform=function(t,n){return function(e,t,n){var r=e._transformState;r.transforming=!1;var o=r.writecb;if(!o)return e.emit(\"error\",new Error(\"no writecb in Transform class\"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n);o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function s(e){if(!(this instanceof s))return new s(e);r.call(this,e),this._transformState=new i(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(\"function\"==typeof e.transform&&(this._transform=e.transform),\"function\"==typeof e.flush&&(this._flush=e.flush)),this.once(\"prefinish\",function(){\"function\"==typeof this._flush?this._flush(function(e,n){a(t,e,n)}):a(t)})}function a(e,t,n){if(t)return e.emit(\"error\",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,o=e._transformState;if(r.length)throw new Error(\"Calling transform done when ws.length != 0\");if(o.transforming)throw new Error(\"Calling transform done when still transforming\");return e.push(null)}o.inherits=n(43),o.inherits(s,r),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error(\"_transform() is not implemented\")},s.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,n){\"use strict\";var r=n(115).Buffer,o=r.isEncoding||function(e){switch((e=\"\"+e)&&e.toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":case\"raw\":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return\"utf8\";for(var t;;)switch(e){case\"utf8\":case\"utf-8\":return\"utf8\";case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return\"utf16le\";case\"latin1\":case\"binary\":return\"latin1\";case\"base64\":case\"ascii\":case\"hex\":return e;default:if(t)return;e=(\"\"+e).toLowerCase(),t=!0}}(e);if(\"string\"!=typeof t&&(r.isEncoding===o||!o(e)))throw new Error(\"Unknown encoding: \"+e);return t||e}(e),this.encoding){case\"utf16le\":this.text=c,this.end=l,t=4;break;case\"utf8\":this.fillLast=a,t=4;break;case\"base64\":this.text=u,this.end=p,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,\"\".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,\"\".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,\"\".repeat(n+2)}}(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString(\"utf16le\",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString(\"utf16le\",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):\"\";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString(\"utf16le\",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString(\"base64\",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString(\"base64\",t,e.length-n))}function p(e){var t=e&&e.length?this.write(e):\"\";return this.lastNeed?t+this.lastChar.toString(\"base64\",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):\"\"}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return\"\";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return\"\";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||\"\"},i.prototype.end=function(e){var t=e&&e.length?this.write(e):\"\";return this.lastNeed?t+\"\".repeat(this.lastTotal-this.lastNeed):t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=s(t[r]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--r<n)return 0;if((o=s(t[r]))>=0)return o>0&&(e.lastNeed=o-2),o;if(--r<n)return 0;if((o=s(t[r]))>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString(\"utf8\",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString(\"utf8\",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){\"use strict\";e.exports=h;var r,o=n(102),i=!process.browser&&[\"v0.10\",\"v0.9.\"].indexOf(process.version.slice(0,5))>-1?setImmediate:o;h.WritableState=f;var s=n(44);s.inherits=n(43);var a,c={deprecate:n(181)};!function(){try{a=n(9)}catch(e){}finally{a||(a=n(5).EventEmitter)}}();var l,u=n(10).Buffer,p=n(101);function d(){}function f(e,t){r=r||n(37),e=e||{},this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var s=e.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:a,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||\"utf8\",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,s=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?o(i,r):i(r);e._writableState.errorEmitted=!0,e.emit(\"error\",r)}(e,n,r,t,s);else{var a=v(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||y(e,n),r?i(g,e,n,a,s):g(e,n,a,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this)}function h(e){if(r=r||n(37),!(l.call(h,this)||this instanceof r))return new h(e);this._writableState=new f(e,this),this.writable=!0,e&&(\"function\"==typeof e.write&&(this._write=e.write),\"function\"==typeof e.writev&&(this._writev=e.writev)),a.call(this)}function m(e,t,n,r,o,i,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function g(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit(\"drain\"))}(e,t),t.pendingcb--,r(),x(e,t)}function y(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var s=0;n;)o[s]=n,n=n.next,s+=1;m(e,t,!0,t.length,o,\"\",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new w(t)}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback;if(m(e,t,!1,t.objectMode?1:a.length,a,c,l),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit(\"prefinish\"))}function x(e,t){var n=v(t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit(\"finish\")):b(e,t)),n}function w(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var o=r.callback;e.pendingcb--,o(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}s.inherits(h,a),f.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(f.prototype,\"buffer\",{get:c.deprecate(function(){return this.getBuffer()},\"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.\")})}catch(e){}}(),\"function\"==typeof Symbol&&Symbol.hasInstance&&\"function\"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(h,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||e&&e._writableState instanceof f}})):l=function(e){return e instanceof this},h.prototype.pipe=function(){this.emit(\"error\",new Error(\"Cannot pipe, not readable\"))},h.prototype.write=function(e,t,n){var r=this._writableState,i=!1,s=u.isBuffer(e);return\"function\"==typeof t&&(n=t,t=null),s?t=\"buffer\":t||(t=r.defaultEncoding),\"function\"!=typeof n&&(n=d),r.ended?function(e,t){var n=new Error(\"write after end\");e.emit(\"error\",n),o(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,s=!1;return null===n?s=new TypeError(\"May not write null values to stream\"):\"string\"==typeof n||void 0===n||t.objectMode||(s=new TypeError(\"Invalid non-string/buffer chunk\")),s&&(e.emit(\"error\",s),o(r,s),i=!1),i}(this,r,e,n))&&(r.pendingcb++,i=function(e,t,n,r,o,i){n||(r=function(e,t,n){e.objectMode||!1===e.decodeStrings||\"string\"!=typeof t||(t=p.from(t,n));return t}(t,r,o),u.isBuffer(r)&&(o=\"buffer\"));var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;a||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest=new function(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}(r,o,i),c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,s,r,o,i);return a}(this,r,s,e,t,n)),i},h.prototype.cork=function(){this._writableState.corked++},h.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||y(this,e))},h.prototype.setDefaultEncoding=function(e){if(\"string\"==typeof e&&(e=e.toLowerCase()),!([\"hex\",\"utf8\",\"utf-8\",\"ascii\",\"binary\",\"base64\",\"ucs2\",\"ucs-2\",\"utf16le\",\"utf-16le\",\"raw\"].indexOf((e+\"\").toLowerCase())>-1))throw new TypeError(\"Unknown encoding: \"+e);return this._writableState.defaultEncoding=e,this},h.prototype._write=function(e,t,n){n(new Error(\"_write() is not implemented\"))},h.prototype._writev=null,h.prototype.end=function(e,t,n){var r=this._writableState;\"function\"==typeof e?(n=e,e=null,t=null):\"function\"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?o(n):e.once(\"finish\",n));t.ended=!0,e.writable=!1}(this,r,n)}},function(e,t,n){\"use strict\";e.exports=g;var r,o=n(102),i=n(183);g.ReadableState=m;n(5).EventEmitter;var s,a=function(e,t){return e.listeners(t).length};!function(){try{s=n(9)}catch(e){}finally{s||(s=n(5).EventEmitter)}}();var c=n(10).Buffer,l=n(101),u=n(44);u.inherits=n(43);var p=n(0),d=void 0;d=p&&p.debuglog?p.debuglog(\"stream\"):function(){};var f,h=n(182);function m(e,t){r=r||n(37),e=e||{},this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||\"utf8\",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=n(130).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function g(e){if(r=r||n(37),!(this instanceof g))return new g(e);this._readableState=new m(e,this),this.readable=!0,e&&\"function\"==typeof e.read&&(this._read=e.read),s.call(this)}function y(e,t,n,r,i){var s=function(e,t){var n=null;c.isBuffer(t)||\"string\"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError(\"Invalid non-string/buffer chunk\"));return n}(t,n);if(s)e.emit(\"error\",s);else if(null===n)t.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,x(e)}(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error(\"stream.push() after EOF\");e.emit(\"error\",a)}else if(t.endEmitted&&i){var l=new Error(\"stream.unshift() after end event\");e.emit(\"error\",l)}else{var u;!t.decoder||i||r||(n=t.decoder.write(n),u=!t.objectMode&&0===n.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit(\"data\",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e))),function(e,t){t.readingMore||(t.readingMore=!0,o(S,e,t))}(e,t)}else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}u.inherits(g,s),g.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||\"string\"!=typeof e||(t=t||n.defaultEncoding)!==n.encoding&&(e=l.from(e,t),t=\"\"),y(this,n,e,t,!1)},g.prototype.unshift=function(e){return y(this,this._readableState,e,\"\",!0)},g.prototype.isPaused=function(){return!1===this._readableState.flowing},g.prototype.setEncoding=function(e){return f||(f=n(130).StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};var v=8388608;function b(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=v?e=v:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d(\"emitReadable\",t.flowing),t.emittedReadable=!0,t.sync?o(w,e):w(e))}function w(e){d(\"emit readable\"),e.emit(\"readable\"),C(e)}function S(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d(\"maybeReadMore read 0\"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function k(e){d(\"readable nexttick read 0\"),e.read(0)}function O(e,t){t.reading||(d(\"resume read 0\"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit(\"resume\"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(d(\"flow\",t.flowing);t.flowing&&null!==e.read(););}function _(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(\"\"):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,o=n.data;e-=o.length;for(;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(s===i.length?o+=i:o+=i.slice(0,e),0===(e-=s)){s===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(s));break}++r}return t.length-=r,o}(e,t):function(e,t){var n=l.allocUnsafe(e),r=t.head,o=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,s),0===(e-=s)){s===i.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(s));break}++o}return t.length-=o,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function E(e){var t=e._readableState;if(t.length>0)throw new Error('\"endReadable()\" called on non-empty stream');t.endEmitted||(t.ended=!0,o(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit(\"end\"))}function T(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}g.prototype.read=function(e){d(\"read\",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return d(\"read: emitReadable\",t.length,t.ended),0===t.length&&t.ended?E(this):x(this),null;if(0===(e=b(e,t))&&t.ended)return 0===t.length&&E(this),null;var r,o=t.needReadable;return d(\"need readable\",o),(0===t.length||t.length-e<t.highWaterMark)&&d(\"length less than watermark\",o=!0),t.ended||t.reading?d(\"reading or ended\",o=!1):o&&(d(\"do read\"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=b(n,t))),null===(r=e>0?_(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&E(this)),null!==r&&this.emit(\"data\",r),r},g.prototype._read=function(e){this.emit(\"error\",new Error(\"_read() is not implemented\"))},g.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,d(\"pipe count=%d opts=%j\",r.pipesCount,t);var s=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?l:f;function c(e){d(\"onunpipe\"),e===n&&f()}function l(){d(\"onend\"),e.end()}r.endEmitted?o(s):n.once(\"end\",s),e.on(\"unpipe\",c);var u=function(e){return function(){var t=e._readableState;d(\"pipeOnDrain\",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,\"data\")&&(t.flowing=!0,C(e))}}(n);e.on(\"drain\",u);var p=!1;function f(){d(\"cleanup\"),e.removeListener(\"close\",y),e.removeListener(\"finish\",v),e.removeListener(\"drain\",u),e.removeListener(\"error\",g),e.removeListener(\"unpipe\",c),n.removeListener(\"end\",l),n.removeListener(\"end\",f),n.removeListener(\"data\",m),p=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||u()}var h=!1;function m(t){d(\"ondata\"),h=!1,!1!==e.write(t)||h||((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==T(r.pipes,e))&&!p&&(d(\"false write response, pause\",n._readableState.awaitDrain),n._readableState.awaitDrain++,h=!0),n.pause())}function g(t){d(\"onerror\",t),b(),e.removeListener(\"error\",g),0===a(e,\"error\")&&e.emit(\"error\",t)}function y(){e.removeListener(\"finish\",v),b()}function v(){d(\"onfinish\"),e.removeListener(\"close\",y),b()}function b(){d(\"unpipe\"),n.unpipe(e)}return n.on(\"data\",m),function(e,t,n){if(\"function\"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,\"error\",g),e.once(\"close\",y),e.once(\"finish\",v),e.emit(\"pipe\",n),r.flowing||(d(\"pipe resume\"),n.resume()),e},g.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit(\"unpipe\",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)n[o].emit(\"unpipe\",this);return this}var i=T(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit(\"unpipe\",this),this)},g.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t);if(\"data\"===e)!1!==this._readableState.flowing&&this.resume();else if(\"readable\"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&x(this):o(k,this))}return n},g.prototype.addListener=g.prototype.on,g.prototype.resume=function(){var e=this._readableState;return e.flowing||(d(\"resume\"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,o(O,e,t))}(this,e)),this},g.prototype.pause=function(){return d(\"call pause flowing=%j\",this._readableState.flowing),!1!==this._readableState.flowing&&(d(\"pause\"),this._readableState.flowing=!1,this.emit(\"pause\")),this},g.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var o in e.on(\"end\",function(){if(d(\"wrapped end\"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on(\"data\",function(o){(d(\"wrapped data\"),t.decoder&&(o=t.decoder.write(o)),!t.objectMode||null!==o&&void 0!==o)&&((t.objectMode||o&&o.length)&&(r.push(o)||(n=!0,e.pause())))}),e)void 0===this[o]&&\"function\"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));return function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}([\"error\",\"close\",\"destroy\",\"pause\",\"resume\"],function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){d(\"wrapped _read\",t),n&&(n=!1,e.resume())},r},g._fromList=_},function(e,t,n){\"use strict\";var r=function(e,t,n){this.result=e,this.connection=t,this.message=n};r.prototype.toJSON=function(){return this.result},r.prototype.toString=function(){return JSON.stringify(this.toJSON())},e.exports=r},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(5).EventEmitter,i=n(92),s=n(142),a=n(18),c=n(0).format,l=n(14).debugOptions,u=n(11).Response,p=n(8),d=n(27),f=0,h=[\"host\",\"port\",\"size\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectionTimeout\",\"socketTimeout\",\"singleBufferSerializtion\",\"ssl\",\"ca\",\"crl\",\"cert\",\"rejectUnauthorized\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"checkServerIdentity\"],m=!1,g={},y=function(e,t){if(o.call(this),this.options=t||{},this.id=f++,this.logger=d(\"Connection\",t),!t.bson)throw new Error(\"must pass in valid bson parser\");this.bson=t.bson,this.tag=t.tag,this.messageHandler=e,this.maxBsonMessageSize=t.maxBsonMessageSize||67108864,this.logger.isDebug()&&this.logger.debug(c(\"creating connection %s with options [%s]\",this.id,JSON.stringify(l(h,t)))),this.port=t.port||27017,this.host=t.host||\"localhost\",this.family=\"number\"==typeof t.family?t.family:void 0,this.keepAlive=\"boolean\"!=typeof t.keepAlive||t.keepAlive,this.keepAliveInitialDelay=\"number\"==typeof t.keepAliveInitialDelay?t.keepAliveInitialDelay:3e5,this.noDelay=\"boolean\"!=typeof t.noDelay||t.noDelay,this.connectionTimeout=\"number\"==typeof t.connectionTimeout?t.connectionTimeout:3e4,this.socketTimeout=\"number\"==typeof t.socketTimeout?t.socketTimeout:36e4,this.keepAliveInitialDelay>this.socketTimeout&&(this.keepAliveInitialDelay=Math.round(this.socketTimeout/2)),this.destroyed=!1,this.domainSocket=-1!=this.host.indexOf(\"/\"),this.singleBufferSerializtion=\"boolean\"!=typeof t.singleBufferSerializtion||t.singleBufferSerializtion,this.serializationFunction=this.singleBufferSerializtion?\"toBinUnified\":\"toBin\",this.ca=t.ca||null,this.crl=t.crl||null,this.cert=t.cert||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.ciphers=t.ciphers||null,this.ecdhCurve=t.ecdhCurve||null,this.ssl=\"boolean\"==typeof t.ssl&&t.ssl,this.rejectUnauthorized=\"boolean\"!=typeof t.rejectUnauthorized||t.rejectUnauthorized,this.checkServerIdentity=\"boolean\"!=typeof t.checkServerIdentity&&\"function\"!=typeof t.checkServerIdentity||t.checkServerIdentity,this.ssl||(this.rejectUnauthorized=!1),this.responseOptions={promoteLongs:\"boolean\"!=typeof t.promoteLongs||t.promoteLongs,promoteValues:\"boolean\"!=typeof t.promoteValues||t.promoteValues,promoteBuffers:\"boolean\"==typeof t.promoteBuffers&&t.promoteBuffers},this.flushing=!1,this.queue=[],this.connection=null,this.writeStream=null;var n=a.createHash(\"sha1\");n.update(c(\"%s:%s\",this.host,this.port)),this.hashedName=n.digest(\"hex\"),this.workItems=[]};function v(e){delete g[e]}r(y,o),y.prototype.setSocketTimeout=function(e){this.connection&&this.connection.setTimeout(e)},y.prototype.resetSocketTimeout=function(){this.connection&&this.connection.setTimeout(this.socketTimeout)},y.enableConnectionAccounting=function(){m=!0,g={}},y.disableConnectionAccounting=function(){m=!1},y.connections=function(){return g};var b=[\"pfx\",\"key\",\"passphrase\",\"cert\",\"ca\",\"ciphers\",\"NPNProtocols\",\"ALPNProtocols\",\"servername\",\"ecdhCurve\",\"secureProtocol\",\"secureContext\",\"session\",\"minDHSize\"];function x(e,t){for(var n in t)null!=t[n]&&-1!=b.indexOf(n)&&(e[n]=t[n])}y.prototype.connect=function(e){var t,n,r,o=this;if(e=e||{},m&&(t=this.id,n=this,g[t]=n),\"boolean\"==typeof e.promoteLongs&&(o.responseOptions.promoteLongs=e.promoteLongs,o.responseOptions.promoteValues=e.promoteValues,o.responseOptions.promoteBuffers=e.promoteBuffers),o.domainSocket?r={path:o.host}:(r={port:o.port,host:o.host},void 0!==o.family&&(r.family=o.family)),o.connection=i.createConnection(r),o.connection.setKeepAlive(o.keepAlive,o.keepAliveInitialDelay),o.connection.setTimeout(o.connectionTimeout),o.connection.setNoDelay(o.noDelay),o.ssl){var a={socket:o.connection,rejectUnauthorized:o.rejectUnauthorized};x(a,this.options),x(a,e),o.ca&&(a.ca=o.ca),o.crl&&(a.crl=o.crl),o.cert&&(a.cert=o.cert),o.key&&(a.key=o.key),o.passphrase&&(a.passphrase=o.passphrase),0==o.checkServerIdentity?a.checkServerIdentity=function(){}:\"function\"==typeof o.checkServerIdentity&&(a.checkServerIdentity=o.checkServerIdentity),null==a.servername&&(a.servername=o.host),o.connection=s.connect(o.port,o.host,a,function(){if(o.connection.authorizationError&&o.rejectUnauthorized)return o.emit(\"error\",o.connection.authorizationError,o,{ssl:!0});o.connection.setTimeout(o.socketTimeout),o.emit(\"connect\",o)}),o.connection.setTimeout(o.connectionTimeout)}else o.connection.once(\"connect\",function(){o.connection.setTimeout(o.socketTimeout),o.emit(\"connect\",o)});o.connection.once(\"error\",function(e){return function(t){m&&v(e.id),e.logger.isDebug()&&e.logger.debug(c(\"connection %s for [%s:%s] errored out with [%s]\",e.id,e.host,e.port,JSON.stringify(t))),e.listeners(\"error\").length>0&&e.emit(\"error\",p.create(t),e)}}(o)),o.connection.once(\"timeout\",function(e){return function(){m&&v(e.id),e.logger.isDebug()&&e.logger.debug(c(\"connection %s for [%s:%s] timed out\",e.id,e.host,e.port)),e.emit(\"timeout\",p.create(c(\"connection %s to %s:%s timed out\",e.id,e.host,e.port)),e)}}(o)),o.connection.once(\"close\",function(e){return function(t){m&&v(e.id),e.logger.isDebug()&&e.logger.debug(c(\"connection %s with for [%s:%s] closed\",e.id,e.host,e.port)),t||e.emit(\"close\",p.create(c(\"connection %s to %s:%s closed\",e.id,e.host,e.port)),e)}}(o)),o.connection.on(\"data\",function(e){return function(t){for(;t.length>0;)if(e.bytesRead>0&&e.sizeOfMessage>0){var n=e.sizeOfMessage-e.bytesRead;if(n>t.length)t.copy(e.buffer,e.bytesRead),e.bytesRead=e.bytesRead+t.length,t=new Buffer(0);else{t.copy(e.buffer,e.bytesRead,0,n),t=t.slice(n);try{var r=e.buffer;e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,e.messageHandler(new u(e.bson,r,e.responseOptions),e)}catch(t){var o={err:\"socketHandler\",trace:t,bin:e.buffer,parseState:{sizeOfMessage:e.sizeOfMessage,bytesRead:e.bytesRead,stubBuffer:e.stubBuffer}};e.emit(\"parseError\",o,e)}}}else if(null!=e.stubBuffer&&e.stubBuffer.length>0)if(e.stubBuffer.length+t.length>4){var i=new Buffer(e.stubBuffer.length+t.length);e.stubBuffer.copy(i,0),t.copy(i,e.stubBuffer.length),t=i,e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null}else{var s=new Buffer(e.stubBuffer.length+t.length);e.stubBuffer.copy(s,0),t.copy(s,e.stubBuffer.length),t=new Buffer(0)}else if(t.length>4){var a=t[0]|t[1]<<8|t[2]<<16|t[3]<<24;if(a<0||a>e.maxBsonMessageSize)return o={err:\"socketHandler\",trace:\"\",bin:e.buffer,parseState:{sizeOfMessage:a,bytesRead:e.bytesRead,stubBuffer:e.stubBuffer}},void e.emit(\"parseError\",o,e);if(a>4&&a<e.maxBsonMessageSize&&a>t.length)e.buffer=new Buffer(a),t.copy(e.buffer,0),e.bytesRead=t.length,e.sizeOfMessage=a,e.stubBuffer=null,t=new Buffer(0);else if(a>4&&a<e.maxBsonMessageSize&&a==t.length)try{r=t,e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=new Buffer(0),e.messageHandler(new u(e.bson,r,e.responseOptions),e)}catch(t){e.emit(\"parseError\",t,e)}else a<=4||a>e.maxBsonMessageSize?(o={err:\"socketHandler\",trace:null,bin:t,parseState:{sizeOfMessage:a,bytesRead:0,buffer:null,stubBuffer:null}},e.emit(\"parseError\",o,e),e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=new Buffer(0)):(r=t.slice(0,a),e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=t.slice(a),e.messageHandler(new u(e.bson,r,e.responseOptions),e))}else e.stubBuffer=new Buffer(t.length),t.copy(e.stubBuffer,0),t=new Buffer(0)}}(o))},y.prototype.unref=function(){if(this.connection)this.connection.unref();else{var e=this;this.once(\"connect\",function(){e.connection.unref()})}},y.prototype.destroy=function(){if(m&&v(this.id),this.connection){try{this.connection.end()}catch(e){}this.connection.destroy()}this.destroyed=!0},y.prototype.write=function(e){var t;if(this.logger.isDebug())if(Array.isArray(e))for(t=0;t<e.length;t++)this.logger.debug(c(\"writing buffer [%s] to %s:%s\",e[t].toString(\"hex\"),this.host,this.port));else this.logger.debug(c(\"writing buffer [%s] to %s:%s\",e.toString(\"hex\"),this.host,this.port));if(!1===this.connection.destroyed){if(!Array.isArray(e))return this.connection.write(e,\"binary\"),!0;for(t=0;t<e.length;t++)this.connection.write(e[t],\"binary\");return!0}return!1},y.prototype.toString=function(){return\"\"+this.id},y.prototype.toJSON=function(){return{id:this.id,host:this.host,port:this.port}},y.prototype.isConnected=function(){return!this.destroyed&&(!this.connection.destroyed&&this.connection.writable)},e.exports=y},function(e,t,n){var r=n(4),o=n(184),i=n(124).connect;i.MongoError=r.MongoError,i.Admin=n(125),i.MongoClient=n(124),i.Db=n(98),i.Collection=n(64),i.Server=n(63),i.ReplSet=n(122),i.Mongos=n(123),i.ReadPreference=n(22),i.GridStore=n(127),i.Chunk=n(126),i.Logger=r.Logger,i.Cursor=n(23),i.GridFSBucket=n(178),i.CoreServer=n(4).Server,i.CoreConnection=n(4).Connection,i.Binary=r.BSON.Binary,i.Code=r.BSON.Code,i.Map=r.BSON.Map,i.DBRef=r.BSON.DBRef,i.Double=r.BSON.Double,i.Int32=r.BSON.Int32,i.Long=r.BSON.Long,i.MinKey=r.BSON.MinKey,i.MaxKey=r.BSON.MaxKey,i.ObjectID=r.BSON.ObjectID,i.ObjectId=r.BSON.ObjectID,i.Symbol=r.BSON.Symbol,i.Timestamp=r.BSON.Timestamp,i.BSONRegExp=r.BSON.BSONRegExp,i.Decimal128=r.BSON.Decimal128,i.connect=i,i.instrument=function(e,t){return\"function\"==typeof e&&(t=e,e={}),new o(r,e,t)},e.exports=i},function(e,t,n){\"use strict\";var r=n(73),o=n(25),i=n(39),s=n(33),a=n(3).MongoError,c=n(24).ServerCapabilities,l=n(24).TopologyBase,u=n(24).Store,p=n(17),d=n(3).ReplSet,f=n(1).MAX_JS_INT,h=n(1).translateOptions,m=n(1).filterOptions,g=n(1).mergeOptions,y=[\"ha\",\"haInterval\",\"replicaSet\",\"rs_name\",\"secondaryAcceptableLatencyMS\",\"connectWithNoPrimary\",\"poolSize\",\"ssl\",\"checkServerIdentity\",\"sslValidate\",\"sslCA\",\"sslCert\",\"ciphers\",\"ecdhCurve\",\"sslCRL\",\"sslKey\",\"sslPass\",\"socketOptions\",\"bufferMaxEntries\",\"store\",\"auto_reconnect\",\"autoReconnect\",\"emitError\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectTimeoutMS\",\"socketTimeoutMS\",\"strategy\",\"debug\",\"family\",\"loggerLevel\",\"logger\",\"reconnectTries\",\"appname\",\"domainsEnabled\",\"servername\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"maxStalenessSeconds\",\"promiseLibrary\",\"minSize\"];class v extends l{constructor(e,t){super();var n=this;t=m(t=t||{},y);for(var i=0;i<e.length;i++)if(!(e[i]instanceof r))throw a.create({message:\"all seed list instances must be of the Server type\",driver:!0});var s={force:!1,bufferMaxEntries:\"number\"==typeof t.bufferMaxEntries?t.bufferMaxEntries:f},c=t.store||new u(n,s),l=e.map(function(e){return{host:e.host,port:e.port}}),p=g({},{disconnectHandler:c,cursorFactory:o,reconnect:!1,emitError:\"boolean\"!=typeof t.emitError||t.emitError,size:\"number\"==typeof t.poolSize?t.poolSize:5});p=h(p,t);var v=t.socketOptions&&Object.keys(t.socketOptions).length>0?t.socketOptions:t;(p=h(p,v)).clientInfo=this.clientInfo,t.appname&&(p.clientInfo.application={name:t.appname});var b=new d(l,p);b.on(\"reconnect\",function(){n.emit(\"reconnect\"),c.execute()}),this.s={coreTopology:b,sCapabilities:null,tag:t.tag,storeOptions:s,clonedOptions:p,store:c,options:t,sessionPool:null,sessions:[],promiseLibrary:t.promiseLibrary||Promise},p.debug&&Object.defineProperty(this,\"replset\",{enumerable:!0,get:function(){return b}})}connect(e,t){var n=this;\"function\"==typeof e&&(t=e,e={}),null==e&&(e={}),\"function\"!=typeof t&&(t=null),e=Object.assign({},this.s.clonedOptions,e),n.s.options=e,n.s.storeOptions.bufferMaxEntries=\"number\"==typeof e.bufferMaxEntries?e.bufferMaxEntries:-1;var r=function(e){return function(t){\"error\"!==e&&n.emit(e,t)}};[\"timeout\",\"error\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\",\"joined\",\"left\",\"ping\",\"ha\"].forEach(function(e){n.s.coreTopology.removeAllListeners(e)});var o,i=function(e){return function(t,r){n.emit(e,t,r)}};n.s.coreTopology.on(\"joined\",(o=\"joined\",function(e,t){n.emit(o,e,t.lastIsMaster(),t)})),n.s.coreTopology.on(\"left\",i(\"left\")),n.s.coreTopology.on(\"ping\",i(\"ping\")),n.s.coreTopology.on(\"ha\",function(e,t){n.emit(\"ha\",e,t),\"start\"===e?n.emit(\"ha_connect\",e,t):\"end\"===e&&n.emit(\"ha_ismaster\",e,t)}),n.s.coreTopology.on(\"serverDescriptionChanged\",i(\"serverDescriptionChanged\")),n.s.coreTopology.on(\"serverHeartbeatStarted\",i(\"serverHeartbeatStarted\")),n.s.coreTopology.on(\"serverHeartbeatSucceeded\",i(\"serverHeartbeatSucceeded\")),n.s.coreTopology.on(\"serverHeartbeatFailed\",i(\"serverHeartbeatFailed\")),n.s.coreTopology.on(\"serverOpening\",i(\"serverOpening\")),n.s.coreTopology.on(\"serverClosed\",i(\"serverClosed\")),n.s.coreTopology.on(\"topologyOpening\",i(\"topologyOpening\")),n.s.coreTopology.on(\"topologyClosed\",i(\"topologyClosed\")),n.s.coreTopology.on(\"topologyDescriptionChanged\",i(\"topologyDescriptionChanged\")),n.s.coreTopology.on(\"fullsetup\",function(){n.emit(\"fullsetup\",n,n)}),n.s.coreTopology.on(\"all\",function(){n.emit(\"all\",null,n)});var s=function(){return function(e){[\"timeout\",\"error\",\"close\"].forEach(function(e){n.s.coreTopology.removeListener(e,s)}),n.s.coreTopology.removeListener(\"connect\",s),n.s.coreTopology.destroy();try{t(e)}catch(e){n.s.coreTopology.isConnected()||process.nextTick(function(){throw e})}}};n.s.coreTopology.once(\"timeout\",s(\"timeout\")),n.s.coreTopology.once(\"error\",s(\"error\")),n.s.coreTopology.once(\"close\",s(\"close\")),n.s.coreTopology.once(\"connect\",function(){n.s.coreTopology.once(\"timeout\",r(\"timeout\")),n.s.coreTopology.once(\"error\",r(\"error\")),n.s.coreTopology.once(\"close\",r(\"close\")),n.emit(\"open\",null,n);try{t(null,n)}catch(e){process.nextTick(function(){throw e})}}),n.s.coreTopology.connect(e)}close(e){super.close(e),[\"timeout\",\"error\",\"close\",\"joined\",\"left\"].forEach(e=>this.removeAllListeners(e))}}Object.defineProperty(v.prototype,\"haInterval\",{enumerable:!0,get:function(){return this.s.coreTopology.s.haInterval}});const b=v.define=new p(\"ReplSet\",v,!1);b.classMethod(\"capabilities\",{callback:!1,promise:!1,returns:[c]}),b.classMethod(\"command\",{callback:!0,promise:!1}),b.classMethod(\"insert\",{callback:!0,promise:!1}),b.classMethod(\"update\",{callback:!0,promise:!1}),b.classMethod(\"remove\",{callback:!0,promise:!1}),b.classMethod(\"isConnected\",{callback:!1,promise:!1,returns:[Boolean]}),b.classMethod(\"cursor\",{callback:!1,promise:!1,returns:[o,i,s]}),b.classMethod(\"close\",{callback:!1,promise:!1}),b.classMethod(\"auth\",{callback:!0,promise:!1}),b.classMethod(\"logout\",{callback:!0,promise:!1}),b.classMethod(\"connections\",{callback:!1,promise:!1,returns:[Array]}),e.exports=v},function(e,t,n){\"use strict\";var r=n(24).ServerCapabilities,o=n(24).TopologyBase,i=n(3).MongoError,s=n(3).Mongos,a=n(25),c=n(39),l=n(33),u=n(17),p=n(73),d=n(24).Store,f=n(1).MAX_JS_INT,h=n(1).translateOptions,m=n(1).filterOptions,g=n(1).mergeOptions,y=[\"ha\",\"haInterval\",\"acceptableLatencyMS\",\"poolSize\",\"ssl\",\"checkServerIdentity\",\"sslValidate\",\"sslCA\",\"sslCRL\",\"sslCert\",\"ciphers\",\"ecdhCurve\",\"sslKey\",\"sslPass\",\"socketOptions\",\"bufferMaxEntries\",\"store\",\"auto_reconnect\",\"autoReconnect\",\"emitError\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectTimeoutMS\",\"socketTimeoutMS\",\"loggerLevel\",\"logger\",\"reconnectTries\",\"appname\",\"domainsEnabled\",\"servername\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"promiseLibrary\"];class v extends o{constructor(e,t){super();t=m(t=t||{},y);for(var n=0;n<e.length;n++)if(!(e[n]instanceof p))throw i.create({message:\"all seed list instances must be of the Server type\",driver:!0});var r={force:!1,bufferMaxEntries:\"number\"==typeof t.bufferMaxEntries?t.bufferMaxEntries:f},o=t.store||new d(this,r),c=e.map(function(e){return{host:e.host,port:e.port}}),l=\"boolean\"!=typeof t.auto_reconnect||t.auto_reconnect;l=\"boolean\"==typeof t.autoReconnect?t.autoReconnect:l;var u=g({},{disconnectHandler:o,cursorFactory:a,reconnect:l,emitError:\"boolean\"!=typeof t.emitError||t.emitError,size:\"number\"==typeof t.poolSize?t.poolSize:5});u=h(u,t);var v=t.socketOptions&&Object.keys(t.socketOptions).length>0?t.socketOptions:t;(u=h(u,v)).clientInfo=this.clientInfo,t.appname&&(u.clientInfo.application={name:t.appname}),this.s={coreTopology:new s(c,u),sCapabilities:null,debug:u.debug,storeOptions:r,clonedOptions:u,store:o,options:t,sessionPool:null,sessions:[],promiseLibrary:t.promiseLibrary||Promise}}connect(e,t){var n=this;\"function\"==typeof e&&(t=e,e={}),null==e&&(e={}),\"function\"!=typeof t&&(t=null),e=Object.assign({},this.s.clonedOptions,e),n.s.options=e,n.s.storeOptions.bufferMaxEntries=\"number\"==typeof e.bufferMaxEntries?e.bufferMaxEntries:-1;var r=function(){return function(e){[\"timeout\",\"error\",\"close\"].forEach(function(e){n.removeListener(e,r)}),n.s.coreTopology.removeListener(\"connect\",r),n.close(!0);try{t(e)}catch(e){process.nextTick(function(){throw e})}}},o=function(e){return function(t){\"error\"!==e&&n.emit(e,t)}},i=function(e){return function(t,r){n.emit(e,t,r)}};[\"timeout\",\"error\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\"].forEach(function(e){n.s.coreTopology.removeAllListeners(e)}),n.s.coreTopology.on(\"serverDescriptionChanged\",i(\"serverDescriptionChanged\")),n.s.coreTopology.on(\"serverHeartbeatStarted\",i(\"serverHeartbeatStarted\")),n.s.coreTopology.on(\"serverHeartbeatSucceeded\",i(\"serverHeartbeatSucceeded\")),n.s.coreTopology.on(\"serverHeartbeatFailed\",i(\"serverHeartbeatFailed\")),n.s.coreTopology.on(\"serverOpening\",i(\"serverOpening\")),n.s.coreTopology.on(\"serverClosed\",i(\"serverClosed\")),n.s.coreTopology.on(\"topologyOpening\",i(\"topologyOpening\")),n.s.coreTopology.on(\"topologyClosed\",i(\"topologyClosed\")),n.s.coreTopology.on(\"topologyDescriptionChanged\",i(\"topologyDescriptionChanged\")),n.s.coreTopology.once(\"timeout\",r(\"timeout\")),n.s.coreTopology.once(\"error\",r(\"error\")),n.s.coreTopology.once(\"close\",r(\"close\")),n.s.coreTopology.once(\"connect\",function(){[\"timeout\",\"error\",\"close\",\"fullsetup\"].forEach(function(e){n.s.coreTopology.removeAllListeners(e)}),n.s.coreTopology.once(\"timeout\",o(\"timeout\")),n.s.coreTopology.once(\"error\",o(\"error\")),n.s.coreTopology.once(\"close\",o(\"close\")),n.s.coreTopology.on(\"fullsetup\",function(){n.emit(\"fullsetup\",n)}),n.emit(\"open\",null,n);try{t(null,n)}catch(e){process.nextTick(function(){throw e})}}),n.s.coreTopology.on(\"joined\",i(\"joined\")),n.s.coreTopology.on(\"left\",i(\"left\")),n.s.coreTopology.on(\"reconnect\",function(){n.emit(\"reconnect\"),n.s.store.execute()}),n.s.coreTopology.connect(e)}}Object.defineProperty(v.prototype,\"haInterval\",{enumerable:!0,get:function(){return this.s.coreTopology.s.haInterval}});const b=v.define=new u(\"Mongos\",v,!1);b.classMethod(\"capabilities\",{callback:!1,promise:!1,returns:[r]}),b.classMethod(\"command\",{callback:!0,promise:!1}),b.classMethod(\"insert\",{callback:!0,promise:!1}),b.classMethod(\"update\",{callback:!0,promise:!1}),b.classMethod(\"remove\",{callback:!0,promise:!1}),b.classMethod(\"isConnected\",{callback:!1,promise:!1,returns:[Boolean]}),b.classMethod(\"isDestroyed\",{callback:!1,promise:!1,returns:[Boolean]}),b.classMethod(\"cursor\",{callback:!1,promise:!1,returns:[a,c,l]}),b.classMethod(\"close\",{callback:!1,promise:!1}),b.classMethod(\"auth\",{callback:!0,promise:!1}),b.classMethod(\"logout\",{callback:!0,promise:!1}),b.classMethod(\"connections\",{callback:!1,promise:!1,returns:[Array]}),e.exports=v},function(e,t,n){\"use strict\";var r=n(200),o=n(73),i=n(137),s=n(136),a=n(5).EventEmitter,c=n(0).inherits,l=n(17),u=n(3).ReadPreference,p=n(3).Logger,d=n(3).MongoError,f=n(1).handleCallback,h=n(74),m=n(0).format,g=n(1).shallowClone,y=n(198),v=n(3).Sessions.ServerSessionPool,b=n(1).executeOperation,x=[\"poolSize\",\"ssl\",\"sslValidate\",\"sslCA\",\"sslCert\",\"sslKey\",\"sslPass\",\"sslCRL\",\"autoReconnect\",\"noDelay\",\"keepAlive\",\"keepAliveInitialDelay\",\"connectTimeoutMS\",\"family\",\"socketTimeoutMS\",\"reconnectTries\",\"reconnectInterval\",\"ha\",\"haInterval\",\"replicaSet\",\"secondaryAcceptableLatencyMS\",\"acceptableLatencyMS\",\"connectWithNoPrimary\",\"authSource\",\"w\",\"wtimeout\",\"j\",\"forceServerObjectId\",\"serializeFunctions\",\"ignoreUndefined\",\"raw\",\"bufferMaxEntries\",\"readPreference\",\"pkFactory\",\"promiseLibrary\",\"readConcern\",\"maxStalenessSeconds\",\"loggerLevel\",\"logger\",\"promoteValues\",\"promoteBuffers\",\"promoteLongs\",\"domainsEnabled\",\"checkServerIdentity\",\"validateOptions\",\"appname\",\"auth\",\"user\",\"password\",\"authMechanism\",\"compression\",\"fsync\",\"readPreferenceTags\",\"numberOfRetries\",\"auto_reconnect\",\"minSize\"],w=[\"native_parser\"],S=[\"server\",\"replset\",\"replSet\",\"mongos\",\"db\"];function k(e,t){if(!(this instanceof k))return new k;a.call(this),this.s={url:e,options:t||{},promiseLibrary:null,dbCache:{},sessions:[]};var n=this.s.options.promiseLibrary||Promise;this.s.promiseLibrary=n}c(k,a);var O=k.define=new l(\"MongoClient\",k,!1);k.prototype.connect=function(e){var t=function(e){var t=x.concat(S);for(var n in e)if(-1===w.indexOf(n)){if(-1===t.indexOf(n)&&e.validateOptions)return new d(m(\"option %s is not supported\",n));-1===t.indexOf(n)&&console.warn(m(\"the options [%s] is not supported\",n)),-1!==S.indexOf(n)&&console.warn(m(\"the server/replset/mongos options are deprecated, all their options are supported at the top level of the options object [%s]\",x))}}(this.s.options);if(\"string\"==typeof e)throw new TypeError(\"`connect` only accepts a callback\");return b(this,C,[this,t,e],{skipSessions:!0})};const C=(e,t,n)=>{if(t)return n(t);R(e,e.s.url,e.s.options,function(t){if(t)return n(t);n(null,e)})};O.classMethod(\"close\",{callback:!0,promise:!0,returns:[k]}),k.prototype.logout=function(e,t){\"function\"==typeof e&&(t=e,e={}),e=e||{};var n=this.s.options.authSource?this.s.options.authSource:this.s.options.dbName;return b(this,_,[this,n,t],{skipSessions:!0})};const _=(e,t,n)=>{e.topology.logout(t,function(e){if(e)return n(e);n(null,!0)})};O.classMethod(\"logout\",{callback:!0,promise:!0}),k.prototype.close=function(e,t){for(var n in\"function\"==typeof e&&(t=e,e=!1),this.topology.close(e),this.emit(\"close\",this),this.s.dbCache)this.s.dbCache[n].emit(\"close\");return this.removeAllListeners(\"close\"),\"function\"==typeof t?process.nextTick(function(){f(t,null)}):new this.s.promiseLibrary(function(e){e()})},O.classMethod(\"close\",{callback:!0,promise:!0}),k.prototype.db=function(e,t){t=t||{};var n=Object.assign({},this.s.options,t);if(this.s.dbCache[e]&&!0!==n.returnNonCachedInstance)return this.s.dbCache[e];if(n.promiseLibrary=this.s.promiseLibrary,!this.topology)throw new d(\"MongoClient must be connected before calling MongoClient.prototype.db\");var r=new h(e,this.topology,n);return this.s.dbCache[e]=r,r},k.prototype.isConnected=function(e){return e=e||{},!!this.topology&&this.topology.isConnected(e)},k.connect=function(e,t,n){var r=Array.prototype.slice.call(arguments,1);return n=\"function\"==typeof r[r.length-1]?r.pop():void 0,new k(e,(r.length?r.shift():null)||{}).connect(n)},O.staticMethod(\"connect\",{callback:!0,promise:!0}),k.prototype.startSession=function(e){if(e=e||{},!this.topology)throw new d(\"Must connect to a server before calling this method\");if(!this.topology.hasSessionSupport())throw new d(\"Current topology does not support sessions\");return this.topology.startSession(e)};var E=function(e,t,n){for(var r in t)t[r]&&\"object\"==typeof t[r]&&n?e=E(e,t[r],n):e[r]=t[r];return e},I=function(e,t){var n=[\"mongos\",\"server\",\"db\",\"replset\",\"db_options\",\"server_options\",\"rs_options\",\"mongos_options\"],r=[\"readconcern\",\"compression\"];for(var o in t)-1!==r.indexOf(o.toLowerCase())?e[o]=t[o]:-1!==n.indexOf(o.toLowerCase())?e=E(e,t[o],!1):!t[o]||\"object\"!=typeof t[o]||Buffer.isBuffer(t[o])||Array.isArray(t[o])?e[o]=t[o]:e=E(e,t[o],!0);return e};function T(e){return\"string\"!=typeof e.readPreference&&\"string\"!=typeof e.read_preference||(e.readPreference=new u(e.readPreference||e.read_preference)),e.readPreference&&(e.readPreferenceTags||e.read_preference_tags)&&(e.readPreference.tags=e.readPreferenceTags||e.read_preference_tags),e.maxStalenessSeconds&&(e.readPreference.maxStalenessSeconds=e.maxStalenessSeconds),null==e.socketTimeoutMS&&(e.socketTimeoutMS=36e4),null==e.connectTimeoutMS&&(e.connectTimeoutMS=3e4),e.servers.map(function(t){return t.domain_socket?new o(t.domain_socket,27017,e):new o(t.host,t.port,e)})}var M=[\"timeout\",\"close\",\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\",\"joined\",\"left\",\"ping\",\"ha\",\"all\",\"fullsetup\"];function N(e,t){[\"serverOpening\",\"serverDescriptionChanged\",\"serverHeartbeatStarted\",\"serverHeartbeatSucceeded\",\"serverHeartbeatFailed\",\"serverClosed\",\"topologyOpening\",\"topologyClosed\",\"topologyDescriptionChanged\",\"joined\",\"left\",\"ping\",\"ha\"].forEach(function(n){t.on(n,function(t,r){e.emit(n,t,r)})})}function A(e,t){e.topology=t,t.s.sessionPool=new v(t.s.coreTopology)}function B(e,t,n){t.promiseLibrary=e.s.promiseLibrary;var r=T(t),o=function(e,t){var n=[];return e instanceof k&&M.forEach(function(e){t.on(e,function(t,r){n.push({event:e,object1:t,object2:r})})}),n}(e,r[0]);r[0].connect(function(i,s){if(i)return n(i);!function(e){M.forEach(function(t){e.removeAllListeners(t)})}(r[0]),N(e,r[0]),D(e,r[0]);var a=s.lastIsMaster();if(A(e,s),a&&\"isdbgrid\"===a.msg)return s.close(),j(e,t,n);!function(e,t){for(var n=0;n<t.length;n++)e.emit(t[n].event,t[n].object1,t[n].object2)}(e,o),n(i,s)})}function j(e,t,n){t.promiseLibrary=e.s.promiseLibrary;var r=T(t),o=new i(r,t);D(e,o),N(e,o),o.connect(t,function(t,r){if(t)return n(t);A(e,r),n(null,r)})}function P(e,t){return function(n,r){if(\"open\"===t||\"fullsetup\"===t||\"all\"===t||\"reconnect\"===t)return e.emit(t,e);e.emit(t,n,r)}}function D(e,t){t.on(\"authenticated\",P(e,\"authenticated\")),t.on(\"error\",P(e,\"error\")),t.on(\"timeout\",P(e,\"timeout\")),t.on(\"close\",P(e,\"close\")),t.on(\"parseError\",P(e,\"parseError\")),t.once(\"open\",P(e,\"open\")),t.once(\"fullsetup\",P(e,\"fullsetup\")),t.once(\"all\",P(e,\"all\")),t.on(\"reconnect\",P(e,\"reconnect\"))}function L(e,t,n){return function(r,o){return r?process.nextTick(function(){try{n(r,null)}catch(e){throw o&&o.close(),e}}):t.auth?void y(e,t.user,t.password,t,function(e,r){r?process.nextTick(function(){try{n(null,o)}catch(e){throw o&&o.close(),e}}):(o&&o.close(),process.nextTick(function(){try{n(e||new Error(\"Could not authenticate user \"+t.auth[0]),null)}catch(e){throw o&&o.close(),e}}))}):process.nextTick(function(){try{n(r,o)}catch(e){throw o&&o.close(),e}})}}var R=function(e,t,n,a){if(n=g(n=n||{}),null==a)throw new Error(\"no callback function provided\");var c=p(\"MongoClient\",n);if(t instanceof o||t instanceof s||t instanceof i)return A(e,t),D(e,t),t.connect(n,L(e,n,function(t,r){return t?l(t,r):n.user||n.password||n.authMechanism?y(e,n.user,n.password,n,function(e){if(e)return l(e,r);l(e,r)}):void l(t,r)}));function l(e,t){if(e&&\"no mongos proxies found in seed list\"===e.message)return c.isWarn()&&c.warn(m(\"seed list contains no mongos proxies, replicaset connections requires the parameter replicaSet to be supplied in the URI or options object, mongodb://server:port/db?replicaSet=name\")),a(new d(\"seed list contains no mongos proxies, replicaset connections requires the parameter replicaSet to be supplied in the URI or options object, mongodb://server:port/db?replicaSet=name\"));a(e,t)}r(t,n,function(t,r){if(t)return a(t);var o=I({},r);return o=E(o,r,!1),null==(o=I(o,n)).socketTimeoutMS&&(o.socketTimeoutMS=36e4),null==o.connectTimeoutMS&&(o.connectTimeoutMS=3e4),o.db_options&&o.db_options.auth&&delete o.db_options.auth,e.s.options=o,0===r.servers.length?a(new Error(\"connection string must contain at least one seed host\")):o.replicaSet||o.rs_name?function(e,t,n){t.promiseLibrary=e.s.promiseLibrary;var r=T(t),o=new s(r,t);D(e,o),N(e,o),o.connect(t,function(t,r){if(t)return n(t);A(e,r),n(null,r)})}(e,o,L(e,o,l)):r.servers.length>1?j(e,o,L(e,o,l)):B(e,o,L(e,o,l))})};e.exports=k},function(e,t,n){\"use strict\";var r=n(1).toError,o=n(17),i=n(1).shallowClone,s=n(1).executeOperation,a=function(e,t,n){if(!(this instanceof a))return new a(e,t);this.s={db:e,topology:t,promiseLibrary:n}},c=a.define=new o(\"Admin\",a,!1);a.prototype.command=function(e,t,n){var r=Array.prototype.slice.call(arguments,1);return n=\"function\"==typeof r[r.length-1]?r.pop():void 0,t=r.length?r.shift():{},s(this.s.db.s.topology,this.s.db.executeDbAdminCommand.bind(this.s.db),[e,t,n])},c.classMethod(\"command\",{callback:!0,promise:!0}),a.prototype.buildInfo=function(e,t){\"function\"==typeof e&&(t=e,e={}),e=e||{};return s(this.s.db.s.topology,this.s.db.executeDbAdminCommand.bind(this.s.db),[{buildinfo:1},e,t])},c.classMethod(\"buildInfo\",{callback:!0,promise:!0}),a.prototype.serverInfo=function(e,t){\"function\"==typeof e&&(t=e,e={}),e=e||{};return s(this.s.db.s.topology,this.s.db.executeDbAdminCommand.bind(this.s.db),[{buildinfo:1},e,t])},c.classMethod(\"serverInfo\",{callback:!0,promise:!0}),a.prototype.serverStatus=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},s(this.s.db.s.topology,l,[this,e,t])};var l=function(e,t,n){e.s.db.executeDbAdminCommand({serverStatus:1},t,function(e,t){if(null!=e||1!==t.ok)return n(e||r(t),!1);n(null,t)})};c.classMethod(\"serverStatus\",{callback:!0,promise:!0}),a.prototype.ping=function(e,t){\"function\"==typeof e&&(t=e,e={}),e=e||{};return s(this.s.db.s.topology,this.s.db.executeDbAdminCommand.bind(this.s.db),[{ping:1},e,t])},c.classMethod(\"ping\",{callback:!0,promise:!0});var u=function(e,t){return(e=i(e)).w||e.wtimeout||e.j||e.fsync?e:(t.writeConcern&&(e.w&&(e.w=t.writeConcern.w),e.wtimeout&&(e.wtimeout=t.writeConcern.wtimeout),e.j&&(e.j=t.writeConcern.j),e.fsync&&(e.fsync=t.writeConcern.fsync)),e)};a.prototype.addUser=function(e,t,n,r){var o=Array.prototype.slice.call(arguments,2);return r=\"function\"==typeof o[o.length-1]?o.pop():void 0,n=o.length?o.shift():{},(n=u(n=n||{},this.s.db)).dbName=\"admin\",s(this.s.db.s.topology,this.s.db.addUser.bind(this.s.db),[e,t,n,r])},c.classMethod(\"addUser\",{callback:!0,promise:!0}),a.prototype.removeUser=function(e,t,n){var r=Array.prototype.slice.call(arguments,1);return n=\"function\"==typeof r[r.length-1]?r.pop():void 0,t=r.length?r.shift():{},(t=u(t=t||{},this.s.db)).dbName=\"admin\",s(this.s.db.s.topology,this.s.db.removeUser.bind(this.s.db),[e,t,n])},c.classMethod(\"removeUser\",{callback:!0,promise:!0}),a.prototype.validateCollection=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{},s(this.s.db.s.topology,p,[this,e,t,n])};var p=function(e,t,n,r){for(var o={validate:t},i=Object.keys(n),s=0;s<i.length;s++)n.hasOwnProperty(i[s])&&\"session\"!==i[s]&&(o[i[s]]=n[i[s]]);e.s.db.command(o,n,function(e,n){return null!=e?r(e,null):0===n.ok?r(new Error(\"Error with validate command\"),null):null!=n.result&&n.result.constructor!==String?r(new Error(\"Error with validation data\"),null):null!=n.result&&null!=n.result.match(/exception|corrupt/)?r(new Error(\"Error: invalid collection \"+t),null):null==n.valid||n.valid?r(null,n):r(new Error(\"Error: invalid collection \"+t),null)})};c.classMethod(\"validateCollection\",{callback:!0,promise:!0}),a.prototype.listDatabases=function(e,t){\"function\"==typeof e&&(t=e,e={});var n={listDatabases:1};return(e=e||{}).nameOnly&&(n.nameOnly=Number(n.nameOnly)),s(this.s.db.s.topology,this.s.db.executeDbAdminCommand.bind(this.s.db),[n,e,t])},c.classMethod(\"listDatabases\",{callback:!0,promise:!0}),a.prototype.replSetGetStatus=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},s(this.s.db.s.topology,d,[this,e,t])};var d=function(e,t,n){e.s.db.executeDbAdminCommand({replSetGetStatus:1},t,function(e,t){return null==e&&1===t.ok?n(null,t):e?n(e,!1):void n(r(t),!1)})};c.classMethod(\"replSetGetStatus\",{callback:!0,promise:!0}),e.exports=a},function(e,t,n){\"use strict\";var r=n(3).BSON.Binary,o=n(3).BSON.ObjectID,i=function(e,t,n){if(!(this instanceof i))return new i(e,t);this.file=e;var s=null==t?{}:t;if(this.writeConcern=n||{w:1},this.objectId=null==s._id?new o:s._id,this.chunkNumber=null==s.n?0:s.n,this.data=new r,\"string\"==typeof s.data){var a=new Buffer(s.data.length);a.write(s.data,0,s.data.length,\"binary\"),this.data=new r(a)}else if(Array.isArray(s.data)){a=new Buffer(s.data.length);var c=s.data.join(\"\");a.write(c,0,c.length,\"binary\"),this.data=new r(a)}else if(s.data&&\"Binary\"===s.data._bsontype)this.data=s.data;else if(!Buffer.isBuffer(s.data)&&null!=s.data)throw Error(\"Illegal chunk format\");this.internalPosition=0};i.prototype.write=function(e,t){return this.data.write(e,this.internalPosition,e.length,\"binary\"),this.internalPosition=this.data.length(),null!=t?t(null,this):this},i.prototype.read=function(e){if(e=null==e||0===e?this.length():e,this.length()-this.internalPosition+1>=e){var t=this.data.read(this.internalPosition,e);return this.internalPosition=this.internalPosition+e,t}return\"\"},i.prototype.readSlice=function(e){if(this.length()-this.internalPosition>=e){var t=null;return null!=this.data.buffer?t=this.data.buffer.slice(this.internalPosition,this.internalPosition+e):(t=new Buffer(e),e=this.data.readInto(t,this.internalPosition)),this.internalPosition=this.internalPosition+e,t}return null},i.prototype.eof=function(){return this.internalPosition===this.length()},i.prototype.getc=function(){return this.read(1)},i.prototype.rewind=function(){this.internalPosition=0,this.data=new r},i.prototype.save=function(e,t){var n=this;\"function\"==typeof e&&(t=e,e={}),n.file.chunkCollection(function(r,o){if(r)return t(r);var i={upsert:!0};for(var s in e)i[s]=e[s];for(s in n.writeConcern)i[s]=n.writeConcern[s];n.data.length()>0?n.buildMongoObject(function(e){var r={forceServerObjectId:!0};for(var s in n.writeConcern)r[s]=n.writeConcern[s];o.replaceOne({_id:n.objectId},e,i,function(e){t(e,n)})}):t(null,n)})},i.prototype.buildMongoObject=function(e){var t={files_id:this.file.fileId,n:this.chunkNumber,data:this.data};null!=this.objectId&&(t._id=this.objectId),e(t)},i.prototype.length=function(){return this.data.length()},Object.defineProperty(i.prototype,\"position\",{enumerable:!0,get:function(){return this.internalPosition},set:function(e){this.internalPosition=e}}),i.DEFAULT_CHUNK_SIZE=261120,e.exports=i},function(e,t,n){\"use strict\";var r=n(140),o=n(3).BSON.ObjectID,i=n(3).ReadPreference,s=n(10).Buffer,a=n(46),c=n(26),l=n(0).format,u=n(0),p=n(17),d=n(3).MongoError,f=u.inherits,h=n(9).Duplex,m=n(1).shallowClone,g=n(1).executeOperation,y=function e(t,n,s,a,c){if(!(this instanceof e))return new e(t,n,s,a,c);this.db=t,void 0===c&&(c={}),void 0===a?(a=s,s=void 0):\"object\"==typeof a&&(c=a,a=s,s=void 0),n&&\"ObjectID\"===n._bsontype?(this.referenceBy=1,this.fileId=n,this.filename=s):void 0===s?(this.referenceBy=0,this.filename=n,null!=a.indexOf(\"w\")&&(this.fileId=new o)):(this.referenceBy=1,this.fileId=n,this.filename=s),this.mode=null==a?\"r\":a,this.options=c||{},this.isOpen=!1,this.root=null==this.options.root?e.DEFAULT_ROOT_COLLECTION:this.options.root,this.position=0,this.readPreference=this.options.readPreference||t.options.readPreference||i.primary,this.writeConcern=U(t,this.options),this.internalChunkSize=null==this.options.chunkSize?r.DEFAULT_CHUNK_SIZE:this.options.chunkSize;var l=this.options.promiseLibrary||Promise;this.promiseLibrary=l,Object.defineProperty(this,\"chunkSize\",{enumerable:!0,get:function(){return this.internalChunkSize},set:function(e){\"w\"!==this.mode[0]||0!==this.position||null!=this.uploadDate?this.internalChunkSize=this.internalChunkSize:this.internalChunkSize=e}}),Object.defineProperty(this,\"md5\",{enumerable:!0,get:function(){return this.internalMd5}}),Object.defineProperty(this,\"chunkNumber\",{enumerable:!0,get:function(){return this.currentChunk&&this.currentChunk.chunkNumber?this.currentChunk.chunkNumber:null}})},v=y.define=new p(\"Gridstore\",y,!0);y.prototype.open=function(e,t){if(\"function\"==typeof e&&(t=e,e={}),e=e||{},\"w\"!==this.mode&&\"w+\"!==this.mode&&\"r\"!==this.mode)throw d.create({message:\"Illegal mode \"+this.mode,driver:!0});return g(this.db.s.topology,b,[this,e,t],{skipSessions:!0})};var b=function(e,t,n){var r=U(e.db,e.options);\"w\"===e.mode||\"w+\"===e.mode?e.collection().ensureIndex([[\"filename\",1]],r,function(){var t=e.chunkCollection(),o=m(r);o.unique=!0,t.ensureIndex([[\"files_id\",1],[\"n\",1]],o,function(){I(e,r,function(t,r){if(t)return n(t);e.isOpen=!0,n(t,r)})})}):I(e,r,function(t,r){if(t)return n(t);e.isOpen=!0,n(t,r)})};v.classMethod(\"open\",{callback:!0,promise:!0}),y.prototype.eof=function(){return this.position===this.length},v.classMethod(\"eof\",{callback:!1,promise:!1,returns:[Boolean]}),y.prototype.getc=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},g(this.db.s.topology,x,[this,e,t],{skipSessions:!0})};var x=function(e,t,n){e.eof()?n(null,null):e.currentChunk.eof()?N(e,e.currentChunk.chunkNumber+1,function(t,r){e.currentChunk=r,e.position=e.position+1,n(t,e.currentChunk.getc())}):(e.position=e.position+1,n(null,e.currentChunk.getc()))};v.classMethod(\"getc\",{callback:!0,promise:!0}),y.prototype.puts=function(e,t,n){\"function\"==typeof t&&(n=t,t={}),t=t||{};var r=null==e.match(/\\n$/)?e+\"\\n\":e;return g(this.db.s.topology,this.write.bind(this),[r,t,n],{skipSessions:!0})},v.classMethod(\"puts\",{callback:!0,promise:!0}),y.prototype.stream=function(){return new F(this)},v.classMethod(\"stream\",{callback:!1,promise:!1,returns:[F]}),y.prototype.write=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n={}),n=n||{},g(this.db.s.topology,z,[this,e,t,n,r],{skipSessions:!0})},v.classMethod(\"write\",{callback:!0,promise:!0}),y.prototype.destroy=function(){this.writable&&(this.readable=!1,this.writable&&(this.writable=!1,this._q.length=0,this.emit(\"close\")))},v.classMethod(\"destroy\",{callback:!1,promise:!1}),y.prototype.writeFile=function(e,t,n){return\"function\"==typeof t&&(n=t,t={}),t=t||{},g(this.db.s.topology,w,[this,e,t,n],{skipSessions:!0})};var w=function(e,t,n,o){\"string\"!=typeof t?e.open(function(e,n){if(e)return o(e,n);c.fstat(t,function(e,i){if(e)return o(e,n);var a=0,l=0,u=function(){var e=new s(n.chunkSize);c.read(t,e,0,e.length,a,function(e,s,p){if(e)return o(e,n);a+=s,new r(n,{n:l++},n.writeConcern).write(p.slice(0,s),function(e,r){if(e)return o(e,n);r.save({},function(e){return e?o(e,n):(n.position=n.position+s,n.currentChunk=r,a>=i.size?void c.close(t,function(e){if(e)return o(e);n.close(function(e){return o(e||null,n)})}):process.nextTick(u))})})})};process.nextTick(u)})}):c.open(t,\"r\",function(t,n){if(t)return o(t);e.writeFile(n,o)})};v.classMethod(\"writeFile\",{callback:!0,promise:!0}),y.prototype.close=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},g(this.db.s.topology,S,[this,e,t],{skipSessions:!0})};var S=function(e,t,n){\"w\"===e.mode[0]?(t=Object.assign({},e.writeConcern,t),null!=e.currentChunk&&e.currentChunk.position>0?e.currentChunk.save({},function(r){if(r&&\"function\"==typeof n)return n(r);e.collection(function(r,o){if(r&&\"function\"==typeof n)return n(r);null!=e.uploadDate?M(e,function(e,r){if(e){if(\"function\"==typeof n)return n(e);throw e}o.save(r,t,function(e){\"function\"==typeof n&&n(e,r)})}):(e.uploadDate=new Date,M(e,function(e,r){if(e){if(\"function\"==typeof n)return n(e);throw e}o.save(r,t,function(e){\"function\"==typeof n&&n(e,r)})}))})}):e.collection(function(r,o){if(r&&\"function\"==typeof n)return n(r);e.uploadDate=new Date,M(e,function(e,r){if(e){if(\"function\"==typeof n)return n(e);throw e}o.save(r,t,function(e){\"function\"==typeof n&&n(e,r)})})})):\"r\"===e.mode[0]?\"function\"==typeof n&&n(null,null):\"function\"==typeof n&&n(d.create({message:l(\"Illegal mode %s\",e.mode),driver:!0}))};v.classMethod(\"close\",{callback:!0,promise:!0}),y.prototype.chunkCollection=function(e){return\"function\"==typeof e?this.db.collection(this.root+\".chunks\",e):this.db.collection(this.root+\".chunks\")},v.classMethod(\"chunkCollection\",{callback:!0,promise:!1,returns:[a]}),y.prototype.unlink=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},g(this.db.s.topology,k,[this,e,t],{skipSessions:!0})};var k=function(e,t,n){B(e,function(t){if(null!==t)return t.message=\"at deleteChunks: \"+t.message,n(t);e.collection(function(t,r){if(null!==t)return t.message=\"at collection: \"+t.message,n(t);r.remove({_id:e.fileId},e.writeConcern,function(t){n(t,e)})})})};v.classMethod(\"unlink\",{callback:!0,promise:!0}),y.prototype.collection=function(e){return\"function\"==typeof e&&this.db.collection(this.root+\".files\",e),this.db.collection(this.root+\".files\")},v.classMethod(\"collection\",{callback:!0,promise:!1,returns:[a]}),y.prototype.readlines=function(e,t,n){var r=Array.prototype.slice.call(arguments,0);return n=\"function\"==typeof r[r.length-1]?r.pop():void 0,e=(e=r.length?r.shift():\"\\n\")||\"\\n\",t=r.length?r.shift():{},g(this.db.s.topology,O,[this,e,t,n],{skipSessions:!0})};var O=function(e,t,n,r){e.read(function(e,n){if(e)return r(e);var o=n.toString().split(t);o=o.length>0?o.splice(0,o.length-1):[];for(var i=0;i<o.length;i++)o[i]=o[i]+t;r(null,o)})};v.classMethod(\"readlines\",{callback:!0,promise:!0}),y.prototype.rewind=function(e,t){return\"function\"==typeof e&&(t=e,e={}),e=e||{},g(this.db.s.topology,C,[this,e,t],{skipSessions:!0})};var C=function(e,t,n){0!==e.currentChunk.chunkNumber?\"w\"===e.mode[0]?B(e,function(t){if(t)return n(t);e.currentChunk=new r(e,{n:0},e.writeConcern),e.position=0,n(null,e)}):e.currentChunk(0,function(t,r){if(t)return n(t);e.currentChunk=r,e.currentChunk.rewind(),e.position=0,n(null,e)}):(e.currentChunk.rewind(),e.position=0,n(null,e))};v.classMethod(\"rewind\",{callback:!0,promise:!0}),y.prototype.read=function(e,t,n,r){var o=Array.prototype.slice.call(arguments,0);return r=\"function\"==typeof o[o.length-1]?o.pop():void 0,e=o.length?o.shift():null,t=o.length?o.shift():null,n=o.length?o.shift():{},g(this.db.s.topology,_,[this,e,t,n,r],{skipSessions:!0})};var _=function(e,t,n,r,o){var i=null==t?e.length-e.position:t,a=null==n?new s(i):n;if(a._index=null!=n&&null!=n._index?n._index:0,e.currentChunk.length()-e.currentChunk.position+a._index>=i){var c=e.currentChunk.readSlice(i-a._index);return c.copy(a,a._index),e.position=e.position+a.length,0===i&&0===a.length?o(d.create({message:\"File does not exist\",driver:!0}),null):o(null,a)}(c=e.currentChunk.readSlice(e.currentChunk.length()-e.currentChunk.position)).copy(a,a._index),a._index+=c.length,N(e,e.currentChunk.chunkNumber+1,function(n,r){if(n)return o(n);r.length()>0?(e.currentChunk=r,e.read(t,a,o)):a._index>0?o(null,a):o(d.create({message:\"no chunks found for file, possibly corrupt\",driver:!0}),null)})};v.classMethod(\"read\",{callback:!0,promise:!0}),y.prototype.tell=function(e){var t=this;return\"function\"==typeof e?e(null,this.position):new t.promiseLibrary(function(e){e(t.position)})},v.classMethod(\"tell\",{callback:!0,promise:!0}),y.prototype.seek=function(e,t,n,r){var o=Array.prototype.slice.call(arguments,1);return r=\"function\"==typeof o[o.length-1]?o.pop():void 0,t=o.length?o.shift():null,n=o.length?o.shift():{},g(this.db.s.topology,E,[this,e,t,n,r],{skipSessions:!0})};var E=function(e,t,n,r,o){if(\"r\"!==e.mode)return o(d.create({message:\"seek is only supported for mode r\",driver:!0}));var i=null==n?y.IO_SEEK_SET:n,s=t,a=0;a=i===y.IO_SEEK_CUR?e.position+s:i===y.IO_SEEK_END?e.length+s:s;var c=Math.floor(a/e.chunkSize);N(e,c,function(t,n){return t?o(t,null):null==n?o(new Error(\"no chunk found\")):(e.currentChunk=n,e.position=a,e.currentChunk.position=e.position%e.chunkSize,void o(t,e))})};v.classMethod(\"seek\",{callback:!0,promise:!0});var I=function(e,t,n){var i=e.collection(),s=1===e.referenceBy?{_id:e.fileId}:{filename:e.filename};function a(e){a.err||n(a.err=e)}s=null==e.fileId&&null==e.filename?null:s,t.readPreference=e.readPreference,null!=s?i.findOne(s,t,function(i,s){if(i)return a(i);if(null!=s)e.fileId=s._id,e.filename=\"r\"===e.mode||void 0===e.filename?s.filename:e.filename,e.contentType=s.contentType,e.internalChunkSize=s.chunkSize,e.uploadDate=s.uploadDate,e.aliases=s.aliases,e.length=s.length,e.metadata=s.metadata,e.internalMd5=s.md5;else{if(\"r\"===e.mode){e.length=0;var c=\"ObjectID\"===e.fileId._bsontype?e.fileId.toHexString():e.fileId;return a(d.create({message:l(\"file with id %s not opened for writing\",1===e.referenceBy?c:e.filename),driver:!0}))}e.fileId=null==e.fileId?new o:e.fileId,e.contentType=y.DEFAULT_CONTENT_TYPE,e.internalChunkSize=null==e.internalChunkSize?r.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0}\"r\"===e.mode?N(e,0,t,function(t,r){if(t)return a(t);e.currentChunk=r,e.position=0,n(null,e)}):\"w\"===e.mode&&s?B(e,t,function(t){if(t)return a(t);e.currentChunk=new r(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,n(null,e)}):\"w\"===e.mode?(e.currentChunk=new r(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,n(null,e)):\"w+\"===e.mode&&N(e,A(e),t,function(t,o){if(t)return a(t);e.currentChunk=null==o?new r(e,{n:0},e.writeConcern):o,e.currentChunk.position=e.currentChunk.data.length(),e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=e.length,n(null,e)})}):(e.fileId=null==e.fileId?new o:e.fileId,e.contentType=y.DEFAULT_CONTENT_TYPE,e.internalChunkSize=null==e.internalChunkSize?r.DEFAULT_CHUNK_SIZE:e.internalChunkSize,e.length=0,\"w\"===e.mode?B(e,t,function(t){if(t)return a(t);e.currentChunk=new r(e,{n:0},e.writeConcern),e.contentType=null==e.options.content_type?e.contentType:e.options.content_type,e.internalChunkSize=null==e.options.chunk_size?e.internalChunkSize:e.options.chunk_size,e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=0,n(null,e)}):\"w+\"===e.mode&&N(e,A(e),t,function(t,o){if(t)return a(t);e.currentChunk=null==o?new r(e,{n:0},e.writeConcern):o,e.currentChunk.position=e.currentChunk.data.length(),e.metadata=null==e.options.metadata?e.metadata:e.options.metadata,e.aliases=null==e.options.aliases?e.aliases:e.options.aliases,e.position=e.length,n(null,e)}))},T=function(e,t,n,o){\"function\"==typeof n&&(o=n,n=null);var i=\"boolean\"==typeof n&&n;if(\"w\"!==e.mode)o(d.create({message:l(\"file with id %s not opened for writing\",1===e.referenceBy?e.referenceBy:e.filename),driver:!0}),null);else{if(!(e.currentChunk.position+t.length>=e.chunkSize))return e.position=e.position+t.length,e.currentChunk.write(t),i?e.close(function(t){o(t,e)}):o(null,e);for(var s=e.currentChunk.chunkNumber,a=e.chunkSize-e.currentChunk.position,c=t.slice(0,a),u=t.slice(a),p=[e.currentChunk.write(c)];u.length>=e.chunkSize;){var f=new r(e,{n:s+1},e.writeConcern);c=u.slice(0,e.chunkSize),u=u.slice(e.chunkSize),s+=1,f.write(c),p.push(f)}e.currentChunk=new r(e,{n:s+1},e.writeConcern),u.length>0&&e.currentChunk.write(u),e.position=e.position+t.length;for(var h=p.length,m=0;m<p.length;m++)p[m].save({},function(t){return t?o(t):(h-=1)<=0?i?e.close(function(t){o(t,e)}):o(null,e):void 0})}},M=function(e,t){var n={_id:e.fileId,filename:e.filename,contentType:e.contentType,length:e.position?e.position:0,chunkSize:e.chunkSize,uploadDate:e.uploadDate,aliases:e.aliases,metadata:e.metadata},r={filemd5:e.fileId,root:e.root};e.db.command(r,function(e,r){if(e)return t(e);n.md5=r.md5,t(null,n)})},N=function(e,t,n,o){\"function\"==typeof n&&(o=n,n={}),(n=n||e.writeConcern).readPreference=e.readPreference,e.chunkCollection().findOne({files_id:e.fileId,n:t},n,function(t,n){if(t)return o(t);o(null,new r(e,null==n?{}:n,e.writeConcern))})},A=function(e){return Math.floor((e.length?e.length-1:0)/e.chunkSize)},B=function(e,t,n){\"function\"==typeof t&&(n=t,t={}),t=t||e.writeConcern,null!=e.fileId?e.chunkCollection().remove({files_id:e.fileId},t,function(e){if(e)return n(e,!1);n(null,!0)}):n(null,!0)};y.DEFAULT_ROOT_COLLECTION=\"fs\",y.DEFAULT_CONTENT_TYPE=\"binary/octet-stream\",y.IO_SEEK_SET=0,y.IO_SEEK_CUR=1,y.IO_SEEK_END=2,y.exist=function(e,t,n,r,o){var i=Array.prototype.slice.call(arguments,2);return o=\"function\"==typeof i[i.length-1]?i.pop():void 0,n=i.length?i.shift():null,r=(r=i.length?i.shift():{})||{},g(e.s.topology,j,[e,t,n,r,o],{skipSessions:!0})};var j=function(e,t,n,r,o){var s=r.readPreference||i.PRIMARY,a=null!=n?n:y.DEFAULT_ROOT_COLLECTION;e.collection(a+\".files\",function(e,n){if(e)return o(e);var r=\"string\"==typeof t||\"[object RegExp]\"===Object.prototype.toString.call(t)?{filename:t}:{_id:t};null!=t&&\"object\"==typeof t&&\"[object RegExp]\"!==Object.prototype.toString.call(t)&&(r=t),n.findOne(r,{readPreference:s},function(e,t){if(e)return o(e);o(null,null!=t)})})};v.staticMethod(\"exist\",{callback:!0,promise:!0}),y.list=function(e,t,n,r){var o=Array.prototype.slice.call(arguments,1);return r=\"function\"==typeof o[o.length-1]?o.pop():void 0,t=o.length?o.shift():null,n=(n=o.length?o.shift():{})||{},g(e.s.topology,P,[e,t,n,r],{skipSessions:!0})};var P=function(e,t,n,r){null!=t&&\"object\"==typeof t&&(n=t,t=null);var o=n.readPreference||i.primary,s=null!=n.id&&n.id,a=null!=t?t:y.DEFAULT_ROOT_COLLECTION,c=[];e.collection(a+\".files\",function(e,t){if(e)return r(e);t.find({},{readPreference:o},function(e,t){if(e)return r(e);t.each(function(e,t){null!=t?c.push(s?t._id:t.filename):r(e,c)})})})};v.staticMethod(\"list\",{callback:!0,promise:!0}),y.read=function(e,t,n,r,o,i){var s=Array.prototype.slice.call(arguments,2);return i=\"function\"==typeof s[s.length-1]?s.pop():void 0,n=s.length?s.shift():null,r=s.length?s.shift():null,o=(o=s.length?s.shift():null)||{},g(e.s.topology,D,[e,t,n,r,o,i],{skipSessions:!0})};var D=function(e,t,n,r,o,i){new y(e,t,\"r\",o).open(function(e,t){return e?i(e):r&&r>=t.length?i(\"offset larger than size of file\",null):n&&n>t.length?i(\"length is larger than the size of the file\",null):r&&n&&r+n>t.length?i(\"offset and length is larger than the size of the file\",null):void(null!=r?t.seek(r,function(e,t){if(e)return i(e);t.read(n,i)}):t.read(n,i))})};v.staticMethod(\"read\",{callback:!0,promise:!0}),y.readlines=function(e,t,n,r,o){var i=Array.prototype.slice.call(arguments,2);return o=\"function\"==typeof i[i.length-1]?i.pop():void 0,n=i.length?i.shift():null,r=(r=i.length?i.shift():null)||{},g(e.s.topology,L,[e,t,n,r,o],{skipSessions:!0})};var L=function(e,t,n,r,o){var i=null==n?\"\\n\":n;new y(e,t,\"r\",r).open(function(e,t){if(e)return o(e);t.readlines(i,o)})};v.staticMethod(\"readlines\",{callback:!0,promise:!0}),y.unlink=function(e,t,n,r){var o=Array.prototype.slice.call(arguments,2);return r=\"function\"==typeof o[o.length-1]?o.pop():void 0,n=(n=o.length?o.shift():{})||{},g(e.s.topology,R,[this,e,t,n,r],{skipSessions:!0})};var R=function(e,t,n,r,o){var i=U(t,r);if(n.constructor===Array)for(var s=0,a=0;a<n.length;a++)++s,y.unlink(t,n[a],r,function(){0==--s&&o(null,e)});else new y(t,n,\"w\",r).open(function(t,n){if(t)return o(t);B(n,function(t){if(t)return o(t);n.collection(function(t,r){if(t)return o(t);r.remove({_id:n.fileId},i,function(t){o(t,e)})})})})};v.staticMethod(\"unlink\",{callback:!0,promise:!0});var z=function(e,t,n,r,o){return s.isBuffer(t)?T(e,t,n,o):T(e,new s(t,\"binary\"),n,o)},q=function(e){var t={};return null!=e.w&&(t.w=e.w),!0===e.journal&&(t.j=e.journal),!0===e.j&&(t.j=e.j),!0===e.fsync&&(t.fsync=e.fsync),null!=e.wtimeout&&(t.wtimeout=e.wtimeout),t},U=function(e,t){var n={w:1};if(null!=(t=t||{}).w||\"boolean\"==typeof t.j||\"boolean\"==typeof t.journal||\"boolean\"==typeof t.fsync?n=q(t):null!=t.safe&&\"object\"==typeof t.safe?n=q(t.safe):\"boolean\"==typeof t.safe?n={w:t.safe?1:0}:null!=e.options.w||\"boolean\"==typeof e.options.j||\"boolean\"==typeof e.options.journal||\"boolean\"==typeof e.options.fsync?n=q(e.options):!e.safe||null==e.safe.w&&\"boolean\"!=typeof e.safe.j&&\"boolean\"!=typeof e.safe.journal&&\"boolean\"!=typeof e.safe.fsync?\"boolean\"==typeof e.safe&&(n={w:e.safe?1:0}):n=q(e.safe),n.w<1&&(!0===n.journal||!0===n.j||!0===n.fsync))throw d.create({message:\"No acknowledgement using w < 1 cannot be combined with journal:true or fsync:true\",driver:!0});return n},F=function(e){h.call(this),this.gs=e,this.endCalled=!1,this.totalBytesToRead=this.gs.length-this.gs.position,this.seekPosition=this.gs.position};f(F,h),F.prototype._pipe=F.prototype.pipe,F.prototype.pipe=function(e){var t=this;return t.gs.isOpen?(t.totalBytesToRead=t.gs.length-t.gs.position,t._pipe.apply(t,[e])):t.gs.open(function(n){if(n)return t.emit(\"error\",n);t.totalBytesToRead=t.gs.length-t.gs.position,t._pipe.apply(t,[e])}),e},F.prototype._read=function(){var e=this,t=function(){e.gs.read(n,function(t,n){return t&&!e.endCalled?e.emit(\"error\",t):e.endCalled||null==n?e.push(null):(n.length<=e.totalBytesToRead?(e.totalBytesToRead=e.totalBytesToRead-n.length,e.push(n)):n.length>e.totalBytesToRead&&(e.totalBytesToRead=e.totalBytesToRead-n._index,e.push(n.slice(0,n._index))),void(e.totalBytesToRead<=0&&(e.endCalled=!0)))})},n=e.gs.length<e.gs.chunkSize?e.gs.length-e.seekPosition:e.gs.chunkSize;e.gs.isOpen?t():e.gs.open(function(n){if(e.totalBytesToRead=e.gs.length-e.gs.position,n)return e.emit(\"error\",n);t()})},F.prototype.destroy=function(){this.pause(),this.endCalled=!0,this.gs.close(),this.emit(\"end\")},F.prototype.write=function(e){var t=this;return t.endCalled?t.emit(\"error\",d.create({message:\"attempting to write to stream after end called\",driver:!0})):t.gs.isOpen?(t.gs.write(e,function(){t.emit(\"drain\")}),!0):(t.gs.open(function(){t.gs.isOpen=!0,t.gs.write(e,function(){process.nextTick(function(){t.emit(\"drain\")})})}),!1)},F.prototype.end=function(e,t,n){var r=this,o=Array.prototype.slice.call(arguments,0);n=\"function\"==typeof o[o.length-1]?o.pop():void 0,e=o.length?o.shift():null,o.length&&o.shift(),r.endCalled=!0,e&&r.gs.write(e,function(){r.gs.close(function(){\"function\"==typeof n&&n(),r.emit(\"end\")})}),r.gs.close(function(){\"function\"==typeof n&&n(),r.emit(\"end\")})},e.exports=y},function(e,t){e.exports=require(\"tls\")},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(5).EventEmitter,i=n(92),s=n(142),a=n(18),c=n(0).format,l=n(13).debugOptions,u=n(29).parseHeader,p=n(82).decompress,d=n(15).Response,f=n(6).MongoNetworkError,h=n(28),m=n(29).opcodes.OP_COMPRESSED,g=n(29).MESSAGE_HEADER_SIZE,y=0,v=[\"host\",\"port\",\"size\",\"keepAlive\",\"keepAliveInitialDelay\",\"noDelay\",\"connectionTimeout\",\"socketTimeout\",\"singleBufferSerializtion\",\"ssl\",\"ca\",\"crl\",\"cert\",\"rejectUnauthorized\",\"promoteLongs\",\"promoteValues\",\"promoteBuffers\",\"checkServerIdentity\"],b=void 0,x=!1,w={},S=function(e,t){if(o.call(this),this.options=t||{},this.id=y++,this.logger=h(\"Connection\",t),!t.bson)throw new Error(\"must pass in valid bson parser\");this.bson=t.bson,this.tag=t.tag,this.messageHandler=e,this.maxBsonMessageSize=t.maxBsonMessageSize||67108864,this.logger.isDebug()&&this.logger.debug(c(\"creating connection %s with options [%s]\",this.id,JSON.stringify(l(v,t)))),this.port=t.port||27017,this.host=t.host||\"localhost\",this.family=\"number\"==typeof t.family?t.family:void 0,this.keepAlive=\"boolean\"!=typeof t.keepAlive||t.keepAlive,this.keepAliveInitialDelay=\"number\"==typeof t.keepAliveInitialDelay?t.keepAliveInitialDelay:3e5,this.noDelay=\"boolean\"!=typeof t.noDelay||t.noDelay,this.connectionTimeout=\"number\"==typeof t.connectionTimeout?t.connectionTimeout:3e4,this.socketTimeout=\"number\"==typeof t.socketTimeout?t.socketTimeout:36e4,this.keepAliveInitialDelay>this.socketTimeout&&(this.keepAliveInitialDelay=Math.round(this.socketTimeout/2)),this.destroyed=!1,this.domainSocket=-1!==this.host.indexOf(\"/\"),this.singleBufferSerializtion=\"boolean\"!=typeof t.singleBufferSerializtion||t.singleBufferSerializtion,this.serializationFunction=this.singleBufferSerializtion?\"toBinUnified\":\"toBin\",this.ca=t.ca||null,this.crl=t.crl||null,this.cert=t.cert||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.ciphers=t.ciphers||null,this.ecdhCurve=t.ecdhCurve||null,this.ssl=\"boolean\"==typeof t.ssl&&t.ssl,this.rejectUnauthorized=\"boolean\"!=typeof t.rejectUnauthorized||t.rejectUnauthorized,this.checkServerIdentity=\"boolean\"!=typeof t.checkServerIdentity&&\"function\"!=typeof t.checkServerIdentity||t.checkServerIdentity,this.ssl||(this.rejectUnauthorized=!1),this.responseOptions={promoteLongs:\"boolean\"!=typeof t.promoteLongs||t.promoteLongs,promoteValues:\"boolean\"!=typeof t.promoteValues||t.promoteValues,promoteBuffers:\"boolean\"==typeof t.promoteBuffers&&t.promoteBuffers},this.flushing=!1,this.queue=[],this.connection=null,this.writeStream=null;var n=a.createHash(\"sha1\");n.update(c(\"%s:%s\",this.host,this.port)),this.hashedName=n.digest(\"hex\"),this.workItems=[]};function k(e){delete w[e],b&&b.deleteConnection(e)}r(S,o),S.prototype.setSocketTimeout=function(e){this.connection&&this.connection.setTimeout(e)},S.prototype.resetSocketTimeout=function(){this.connection&&this.connection.setTimeout(this.socketTimeout)},S.enableConnectionAccounting=function(e){e&&(b=e),x=!0,w={}},S.disableConnectionAccounting=function(){x=!1,b=void 0},S.connections=function(){return w};var O=function(e){return function(){x&&k(e.id),e.logger.isDebug()&&e.logger.debug(c(\"connection %s for [%s:%s] timed out\",e.id,e.host,e.port)),e.emit(\"timeout\",new f(c(\"connection %s to %s:%s timed out\",e.id,e.host,e.port)),e)}},C=function(e){return function(t){x&&k(e.id),e.logger.isDebug()&&e.logger.debug(c(\"connection %s with for [%s:%s] closed\",e.id,e.host,e.port)),t||e.emit(\"close\",new f(c(\"connection %s to %s:%s closed\",e.id,e.host,e.port)),e)}},_=function(e,t){var n=u(t);if(n.opCode===m){n.fromCompressed=!0;var r=g;n.opCode=t.readInt32LE(r),r+=4,n.length=t.readInt32LE(r);var o=t[r+=4];r++,p(o,t.slice(r),function(r,o){if(r)throw r;if(o.length!==n.length)throw new Error(\"Decompressing a compressed message from the server failed. The message is corrupt.\");e.messageHandler(new d(e.bson,t,n,o,e.responseOptions),e)})}else e.messageHandler(new d(e.bson,t,n,t.slice(g),e.responseOptions),e)},E=function(e){return function(t){for(;t.length>0;)if(e.bytesRead>0&&e.sizeOfMessage>0){var n=e.sizeOfMessage-e.bytesRead;if(n>t.length)t.copy(e.buffer,e.bytesRead),e.bytesRead=e.bytesRead+t.length,t=new Buffer(0);else{t.copy(e.buffer,e.bytesRead,0,n),t=t.slice(n);try{var r=e.buffer;e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,_(e,r)}catch(t){var o={err:\"socketHandler\",trace:t,bin:e.buffer,parseState:{sizeOfMessage:e.sizeOfMessage,bytesRead:e.bytesRead,stubBuffer:e.stubBuffer}};e.emit(\"parseError\",o,e)}}}else if(null!=e.stubBuffer&&e.stubBuffer.length>0)if(e.stubBuffer.length+t.length>4){var i=new Buffer(e.stubBuffer.length+t.length);e.stubBuffer.copy(i,0),t.copy(i,e.stubBuffer.length),t=i,e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null}else{var s=new Buffer(e.stubBuffer.length+t.length);e.stubBuffer.copy(s,0),t.copy(s,e.stubBuffer.length),t=new Buffer(0)}else if(t.length>4){var a=t[0]|t[1]<<8|t[2]<<16|t[3]<<24;if(a<0||a>e.maxBsonMessageSize)return o={err:\"socketHandler\",trace:\"\",bin:e.buffer,parseState:{sizeOfMessage:a,bytesRead:e.bytesRead,stubBuffer:e.stubBuffer}},void e.emit(\"parseError\",o,e);if(a>4&&a<e.maxBsonMessageSize&&a>t.length)e.buffer=new Buffer(a),t.copy(e.buffer,0),e.bytesRead=t.length,e.sizeOfMessage=a,e.stubBuffer=null,t=new Buffer(0);else if(a>4&&a<e.maxBsonMessageSize&&a===t.length)try{r=t,e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=new Buffer(0),_(e,r)}catch(t){e.emit(\"parseError\",t,e)}else a<=4||a>e.maxBsonMessageSize?(o={err:\"socketHandler\",trace:null,bin:t,parseState:{sizeOfMessage:a,bytesRead:0,buffer:null,stubBuffer:null}},e.emit(\"parseError\",o,e),e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=new Buffer(0)):(r=t.slice(0,a),e.buffer=null,e.sizeOfMessage=0,e.bytesRead=0,e.stubBuffer=null,t=t.slice(a),_(e,r))}else e.stubBuffer=new Buffer(t.length),t.copy(e.stubBuffer,0),t=new Buffer(0)}},I=[\"pfx\",\"key\",\"passphrase\",\"cert\",\"ca\",\"ciphers\",\"NPNProtocols\",\"ALPNProtocols\",\"servername\",\"ecdhCurve\",\"secureProtocol\",\"secureContext\",\"session\",\"minDHSize\"];function T(e,t){for(var n in t)null!=t[n]&&-1!==I.indexOf(n)&&(e[n]=t[n])}function M(e,t,n,r){e.connection=e.ssl?function(e,t){let n={socket:e.connection,rejectUnauthorized:e.rejectUnauthorized};T(n,e.options),T(n,t),e.ca&&(n.ca=e.ca),e.crl&&(n.crl=e.crl),e.cert&&(n.cert=e.cert),e.key&&(n.key=e.key),e.passphrase&&(n.passphrase=e.passphrase),!1===e.checkServerIdentity?n.checkServerIdentity=function(){}:\"function\"==typeof e.checkServerIdentity&&(n.checkServerIdentity=e.checkServerIdentity),null==n.servername&&(n.servername=e.host);const r=s.connect(e.port,e.host,n,function(){if(r.authorizationError&&e.rejectUnauthorized)return e.emit(\"error\",r.authorizationError,e,{ssl:!0});r.setTimeout(e.socketTimeout),e.emit(\"connect\",e)});return r.setTimeout(e.connectionTimeout),r}(e,n):function(e,t){let n;e.domainSocket?n={path:e.host}:(n={port:e.port,host:e.host}).family=t;const r=i.createConnection(n);return r.setKeepAlive(e.keepAlive,e.keepAliveInitialDelay),r.setTimeout(e.connectionTimeout),r.setNoDelay(e.noDelay),r.once(\"connect\",function(){r.setTimeout(e.socketTimeout),e.emit(\"connect\",e)}),r}(e,t),e.connection.once(\"error\",r),e.connection.once(\"timeout\",O(e)),e.connection.once(\"close\",C(e)),e.connection.on(\"data\",E(e))}S.prototype.connect=function(e){var t,n;e=e||{},x&&(t=this.id,n=this,w[t]=n,b&&b.addConnection(t,n)),\"boolean\"==typeof e.promoteLongs&&(this.responseOptions.promoteLongs=e.promoteLongs,this.responseOptions.promoteValues=e.promoteValues,this.responseOptions.promoteBuffers=e.promoteBuffers);const r=(o=this,function(e){x&&k(o.id),o.logger.isDebug()&&o.logger.debug(c(\"connection %s for [%s:%s] errored out with [%s]\",o.id,o.host,o.port,JSON.stringify(e))),o.listeners(\"error\").length>0&&o.emit(\"error\",new f(e),o)});var o;return void 0!==this.family?M(this,this.family,e,r):M(this,6,e,t=>(this.logger.isDebug()&&this.logger.debug(c(\"connection %s for [%s:%s] errored out with [%s]\",this.id,this.host,this.port,JSON.stringify(t))),this.connection.removeAllListeners(\"error\"),this.connection.removeAllListeners(\"timeout\"),this.connection.removeAllListeners(\"close\"),this.connection.removeAllListeners(\"data\"),this.connection=void 0,M(this,4,e,r)))},S.prototype.unref=function(){if(this.connection)this.connection.unref();else{var e=this;this.once(\"connect\",function(){e.connection.unref()})}},S.prototype.destroy=function(){if(x&&k(this.id),this.connection){try{this.connection.end()}catch(e){}this.connection.destroy()}this.destroyed=!0},S.prototype.write=function(e){var t;if(this.logger.isDebug())if(Array.isArray(e))for(t=0;t<e.length;t++)this.logger.debug(c(\"writing buffer [%s] to %s:%s\",e[t].toString(\"hex\"),this.host,this.port));else this.logger.debug(c(\"writing buffer [%s] to %s:%s\",e.toString(\"hex\"),this.host,this.port));if(!1===this.connection.destroyed){if(!Array.isArray(e))return this.connection.write(e,\"binary\"),!0;for(t=0;t<e.length;t++)this.connection.write(e[t],\"binary\");return!0}return!1},S.prototype.toString=function(){return\"\"+this.id},S.prototype.toJSON=function(){return{id:this.id,host:this.host,port:this.port}},S.prototype.isConnected=function(){return!this.destroyed&&(!this.connection.destroyed&&this.connection.writable)},e.exports=S},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,\"loaded\",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,\"id\",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){\"use strict\";e.exports=function(e,t){if(!e)throw new TypeError(\"req argument is required\");if(!t)throw new TypeError(\"trust argument is required\");var n=l(e,t);return n[n.length-1]},e.exports.all=l,e.exports.compile=u;var r=n(235),o=n(234),i=/^[0-9]+$/,s=o.isValid,a=o.parse,c={linklocal:[\"169.254.0.0/16\",\"fe80::/10\"],loopback:[\"127.0.0.1/8\",\"::1/128\"],uniquelocal:[\"10.0.0.0/8\",\"172.16.0.0/12\",\"192.168.0.0/16\",\"fc00::/7\"]};function l(e,t){var n=r(e);if(!t)return n;\"function\"!=typeof t&&(t=u(t));for(var o=0;o<n.length-1;o++)t(n[o],o)||(n.length=o+1);return n}function u(e){if(!e)throw new TypeError(\"argument is required\");var t,n,r,o,i,l,u,f,h;if(\"string\"==typeof e)t=[e];else{if(!Array.isArray(e))throw new TypeError(\"unsupported trust argument\");t=e.slice()}for(var m=0;m<t.length;m++)e=t[m],c.hasOwnProperty(e)&&(e=c[e],t.splice.apply(t,[m,1].concat(e)),m+=e.length-1);return n=function(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=p(e[n]);return t}(t),0===(r=n.length)?d:1===r?(i=n[0],l=i[0],u=l.kind(),f=\"ipv4\"===u,h=i[1],function(e){if(!s(e))return!1;var t=a(e),n=t.kind();if(n!==u){if(f&&!t.isIPv4MappedAddress())return!1;t=f?t.toIPv4Address():t.toIPv4MappedAddress()}return t.match(l,h)}):(o=n,function(e){if(!s(e))return!1;for(var t,n=a(e),r=n.kind(),i=0;i<o.length;i++){var c=o[i],l=c[0],u=l.kind(),p=c[1],d=n;if(r!==u){if(\"ipv4\"===u&&!n.isIPv4MappedAddress())continue;t||(t=\"ipv4\"===u?n.toIPv4Address():n.toIPv4MappedAddress()),d=t}if(d.match(l,p))return!0}return!1})}function p(e){var t=e.lastIndexOf(\"/\"),n=-1!==t?e.substring(0,t):e;if(!s(n))throw new TypeError(\"invalid IP address: \"+n);var r=a(n);-1===t&&\"ipv6\"===r.kind()&&r.isIPv4MappedAddress()&&(r=r.toIPv4Address());var o=\"ipv6\"===r.kind()?128:32,c=-1!==t?e.substring(t+1,e.length):null;if((c=null===c?o:i.test(c)?parseInt(c,10):\"ipv4\"===r.kind()&&s(c)?function(e){var t=a(e);return\"ipv4\"===t.kind()?t.prefixLengthFromSubnetMask():null}(c):null)<=0||c>o)throw new TypeError(\"invalid range on address: \"+e);return[r,c]}function d(){return!1}},function(e,t,n){\"use strict\";function r(e,t){return{start:e.start,end:e.end,index:t}}function o(e){return{start:e.start,end:e.end}}function i(e,t){return e.index-t.index}function s(e,t){return e.start-t.start}e.exports=function(e,t,n){var a=t.indexOf(\"=\");if(-1===a)return-2;var c=t.slice(a+1).split(\",\"),l=[];l.type=t.slice(0,a);for(var u=0;u<c.length;u++){var p=c[u].split(\"-\"),d=parseInt(p[0],10),f=parseInt(p[1],10);isNaN(d)?(d=e-f,f=e-1):isNaN(f)&&(f=e-1),f>e-1&&(f=e-1),isNaN(d)||isNaN(f)||d>f||d<0||l.push({start:d,end:f})}if(l.length<1)return-1;return n&&n.combine?function(e){for(var t=e.map(r).sort(s),n=0,a=1;a<t.length;a++){var c=t[a],l=t[n];c.start>l.end+1?t[++n]=c:c.end>l.end&&(l.end=c.end,l.index=Math.min(l.index,c.index))}t.length=n+1;var u=t.sort(i).map(o);return u.type=e.type,u}(l):l}},function(e,t,n){\"use strict\";var r=/(?:^|,)\\s*?no-cache\\s*?(?:,|$)/;function o(e){var t=e&&Date.parse(e);return\"number\"==typeof t?t:NaN}e.exports=function(e,t){var n=e[\"if-modified-since\"],i=e[\"if-none-match\"];if(!n&&!i)return!1;var s=e[\"cache-control\"];if(s&&r.test(s))return!1;if(i&&\"*\"!==i){var a=t.etag;if(!a)return!1;for(var c=!0,l=function(e){for(var t=0,n=[],r=0,o=0,i=e.length;o<i;o++)switch(e.charCodeAt(o)){case 32:r===t&&(r=t=o+1);break;case 44:n.push(e.substring(r,t)),r=t=o+1;break;default:t=o+1}return n.push(e.substring(r,t)),n}(i),u=0;u<l.length;u++){var p=l[u];if(p===a||p===\"W/\"+a||\"W/\"+p===a){c=!1;break}}if(c)return!1}if(n){var d=t[\"last-modified\"],f=!(d&&o(d)<=o(n));if(f)return!1}return!0}},function(e,t,n){\"use strict\";e.exports=function(e,t){if(null==e)throw new TypeError(\"argument entity is required\");var n=function(e){if(\"function\"==typeof o&&e instanceof o)return!0;return e&&\"object\"==typeof e&&\"ctime\"in e&&\"[object Date]\"===i.call(e.ctime)&&\"mtime\"in e&&\"[object Date]\"===i.call(e.mtime)&&\"ino\"in e&&\"number\"==typeof e.ino&&\"size\"in e&&\"number\"==typeof e.size}(e),s=t&&\"boolean\"==typeof t.weak?t.weak:n;if(!n&&\"string\"!=typeof e&&!Buffer.isBuffer(e))throw new TypeError(\"argument entity must be string, Buffer, or fs.Stats\");var a=n?(c=e,l=c.mtime.getTime().toString(16),'\"'+c.size.toString(16)+\"-\"+l+'\"'):function(e){if(0===e.length)return'\"0-2jmj7l5rSw0yVb/vlWAYkK/YBwk\"';var t=r.createHash(\"sha1\").update(e,\"utf8\").digest(\"base64\").substring(0,27);return'\"'+(\"string\"==typeof e?Buffer.byteLength(e,\"utf8\"):e.length).toString(16)+\"-\"+t+'\"'}(e);var c,l;return s?\"W/\"+a:a};var r=n(18),o=n(26).Stats,i=Object.prototype.toString},function(e,t,n){\"use strict\";e.exports=function(e,t){var n=t||{},o=n.type||\"attachment\",s=function(e,t){if(void 0===e)return;var n={};if(\"string\"!=typeof e)throw new TypeError(\"filename must be a string\");void 0===t&&(t=!0);if(\"string\"!=typeof t&&\"boolean\"!=typeof t)throw new TypeError(\"fallback must be a string or boolean\");if(\"string\"==typeof t&&a.test(t))throw new TypeError(\"fallback must be ISO-8859-1 string\");var o=r(e),s=p.test(o),c=\"string\"!=typeof t?t&&g(o):r(t),l=\"string\"==typeof c&&c!==o;(l||!s||i.test(o))&&(n[\"filename*\"]=o);(s||l)&&(n.filename=l?c:o);return n}(e,n.fallback);return function(e){var t=e.parameters,n=e.type;if(!n||\"string\"!=typeof n||!d.test(n))throw new TypeError(\"invalid type\");var r=String(n).toLowerCase();if(t&&\"object\"==typeof t)for(var o,i=Object.keys(t).sort(),s=0;s<i.length;s++){var a=\"*\"===(o=i[s]).substr(-1)?x(t[o]):b(t[o]);r+=\"; \"+o+\"=\"+a}return r}(new w(o,s))},e.exports.parse=function(e){if(!e||\"string\"!=typeof e)throw new TypeError(\"argument string is required\");var t=h.exec(e);if(!t)throw new TypeError(\"invalid type format\");var n,r,o=t[0].length,i=t[1].toLowerCase(),s=[],a={};o=u.lastIndex=\";\"===t[0].substr(-1)?o-1:o;for(;t=u.exec(e);){if(t.index!==o)throw new TypeError(\"invalid parameter format\");if(o+=t[0].length,n=t[1].toLowerCase(),r=t[2],-1!==s.indexOf(n))throw new TypeError(\"invalid duplicate parameter\");s.push(n),n.indexOf(\"*\")+1!==n.length?\"string\"!=typeof a[n]&&('\"'===r[0]&&(r=r.substr(1,r.length-2).replace(c,\"$1\")),a[n]=r):(n=n.slice(0,-1),r=m(r),a[n]=r)}if(-1!==o&&o!==e.length)throw new TypeError(\"invalid parameter format\");return new w(i,a)};var r=n(21).basename,o=/[\\x00-\\x20\"'()*,/:;<=>?@[\\\\\\]{}\\x7f]/g,i=/%[0-9A-Fa-f]{2}/,s=/%([0-9A-Fa-f]{2})/g,a=/[^\\x20-\\x7e\\xa0-\\xff]/g,c=/\\\\([\\u0000-\\u007f])/g,l=/([\\\\\"])/g,u=/;[\\x09\\x20]*([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\\x09\\x20]*=[\\x09\\x20]*(\"(?:[\\x20!\\x23-\\x5b\\x5d-\\x7e\\x80-\\xff]|\\\\[\\x20-\\x7e])*\"|[!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\\x09\\x20]*/g,p=/^[\\x20-\\x7e\\x80-\\xff]+$/,d=/^[!#$%&'*+.0-9A-Z^_`a-z|~-]+$/,f=/^([A-Za-z0-9!#$%&+\\-^_`{}~]+)'(?:[A-Za-z]{2,3}(?:-[A-Za-z]{3}){0,3}|[A-Za-z]{4,8}|)'((?:%[0-9A-Fa-f]{2}|[A-Za-z0-9!#$&+.^_`|~-])+)$/,h=/^([!#$%&'*+.0-9A-Z^_`a-z|~-]+)[\\x09\\x20]*(?:$|;)/;function m(e){var t=f.exec(e);if(!t)throw new TypeError(\"invalid extended field value\");var n,r=t[1].toLowerCase(),o=t[2].replace(s,y);switch(r){case\"iso-8859-1\":n=g(o);break;case\"utf-8\":n=new Buffer(o,\"binary\").toString(\"utf8\");break;default:throw new TypeError(\"unsupported charset in extended field\")}return n}function g(e){return String(e).replace(a,\"?\")}function y(e,t){return String.fromCharCode(parseInt(t,16))}function v(e){var t=String(e).charCodeAt(0).toString(16).toUpperCase();return 1===t.length?\"%0\"+t:\"%\"+t}function b(e){return'\"'+String(e).replace(l,\"\\\\$1\")+'\"'}function x(e){var t=String(e);return\"UTF-8''\"+encodeURIComponent(t).replace(o,v)}function w(e,t){this.type=e,this.parameters=t}},function(e,t,n){\"use strict\";var r=n(85),o=n(59),i=n(119);e.exports=function(e){var t=r({},e),n=i.parse;return\"function\"==typeof e&&(n=e,t=void 0),void 0!==t&&void 0===t.allowPrototypes&&(t.allowPrototypes=!0),function(e,r,i){if(!e.query){var s=o(e).query;e.query=n(s,t)}i()}}},function(e,t,n){\"use strict\";var r=n(242),o=n(20)(\"express:router:layer\"),i=Object.prototype.hasOwnProperty;function s(e,t,n){if(!(this instanceof s))return new s(e,t,n);o(\"new %o\",e);var i=t||{};this.handle=n,this.name=n.name||\"<anonymous>\",this.params=void 0,this.path=void 0,this.regexp=r(e,this.keys=[],i),this.regexp.fast_star=\"*\"===e,this.regexp.fast_slash=\"/\"===e&&!1===i.end}function a(e){if(\"string\"!=typeof e||0===e.length)return e;try{return decodeURIComponent(e)}catch(t){throw t instanceof URIError&&(t.message=\"Failed to decode param '\"+e+\"'\",t.status=t.statusCode=400),t}}e.exports=s,s.prototype.handle_error=function(e,t,n,r){var o=this.handle;if(4!==o.length)return r(e);try{o(e,t,n,r)}catch(e){r(e)}},s.prototype.handle_request=function(e,t,n){var r=this.handle;if(r.length>3)return n();try{r(e,t,n)}catch(e){n(e)}},s.prototype.match=function(e){var t;if(null!=e){if(this.regexp.fast_slash)return this.params={},this.path=\"\",!0;if(this.regexp.fast_star)return this.params={0:a(e)},this.path=e,!0;t=this.regexp.exec(e)}if(!t)return this.params=void 0,this.path=void 0,!1;this.params={},this.path=t[0];for(var n=this.keys,r=this.params,o=1;o<t.length;o++){var s=n[o-1].name,c=a(t[o]);void 0===c&&i.call(r,s)||(r[s]=c)}return!0}},function(e,t,n){\"use strict\";var r=n(20)(\"express:router:route\"),o=n(87),i=n(151),s=n(117),a=Array.prototype.slice,c=Object.prototype.toString;function l(e){this.path=e,this.stack=[],r(\"new %o\",e),this.methods={}}e.exports=l,l.prototype._handles_method=function(e){if(this.methods._all)return!0;var t=e.toLowerCase();return\"head\"!==t||this.methods.head||(t=\"get\"),Boolean(this.methods[t])},l.prototype._options=function(){var e=Object.keys(this.methods);this.methods.get&&!this.methods.head&&e.push(\"head\");for(var t=0;t<e.length;t++)e[t]=e[t].toUpperCase();return e},l.prototype.dispatch=function(e,t,n){var r=0,o=this.stack;if(0===o.length)return n();var i=e.method.toLowerCase();\"head\"!==i||this.methods.head||(i=\"get\"),e.route=this,function s(a){if(a&&\"route\"===a)return n();if(a&&\"router\"===a)return n(a);var c=o[r++];if(!c)return n(a);if(c.method&&c.method!==i)return s(a);a?c.handle_error(a,e,t,s):c.handle_request(e,t,s)}()},l.prototype.all=function(){for(var e=o(a.call(arguments)),t=0;t<e.length;t++){var n=e[t];if(\"function\"!=typeof n){var r=c.call(n);throw new TypeError(\"Route.all() requires a callback function but got a \"+r)}var s=i(\"/\",{},n);s.method=void 0,this.methods._all=!0,this.stack.push(s)}return this},s.forEach(function(e){l.prototype[e]=function(){for(var t=o(a.call(arguments)),n=0;n<t.length;n++){var s=t[n];if(\"function\"!=typeof s){var l=c.call(s);throw new Error(\"Route.\"+e+\"() requires a callback function but got a \"+l)}r(\"%s %o\",e,this.path);var u=i(\"/\",{},s);u.method=e,this.methods[e]=!0,this.stack.push(u)}return this}})},function(e,t,n){\"use strict\";var r=n(152),o=n(151),i=n(117),s=n(85),a=n(20)(\"express:router\"),c=n(31)(\"express\"),l=n(87),u=n(59),p=n(116),d=/^\\[object (\\S+)\\]$/,f=Array.prototype.slice,h=Object.prototype.toString,m=e.exports=function(e){var t=e||{};function n(e,t,r){n.handle(e,t,r)}return p(n,m),n.params={},n._params=[],n.caseSensitive=t.caseSensitive,n.mergeParams=t.mergeParams,n.strict=t.strict,n.stack=[],n};function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}function y(e){var t=typeof e;return\"object\"!==t?t:h.call(e).replace(d,\"$1\")}function v(e,t){try{return e.match(t)}catch(e){return e}}m.param=function(e,t){if(\"function\"==typeof e)return c(\"router.param(fn): Refactor to use path params\"),void this._params.push(e);var n,r=this._params,o=r.length;\":\"===e[0]&&(c(\"router.param(\"+JSON.stringify(e)+\", fn): Use router.param(\"+JSON.stringify(e.substr(1))+\", fn) instead\"),e=e.substr(1));for(var i=0;i<o;++i)(n=r[i](e,t))&&(t=n);if(\"function\"!=typeof t)throw new Error(\"invalid param() call for \"+e+\", got \"+t);return(this.params[e]=this.params[e]||[]).push(t),this},m.handle=function(e,t,n){var r=this;a(\"dispatching %s %s\",e.method,e.url);var o,i,c=0,l=function(e){if(\"string\"!=typeof e||0===e.length||\"/\"===e[0])return;var t=e.indexOf(\"?\"),n=-1!==t?t:e.length,r=e.substr(0,n).indexOf(\"://\");return-1!==r?e.substr(0,e.indexOf(\"/\",3+r)):void 0}(e.url)||\"\",p=\"\",d=!1,f={},h=[],m=r.stack,y=e.params,b=e.baseUrl||\"\",x=function(e,t){for(var n=new Array(arguments.length-2),r=new Array(arguments.length-2),o=0;o<n.length;o++)n[o]=arguments[o+2],r[o]=t[n[o]];return function(){for(var o=0;o<n.length;o++)t[n[o]]=r[o];return e.apply(this,arguments)}}(n,e,\"baseUrl\",\"next\",\"params\");function w(n){var o=\"route\"===n?null:n;if(d&&(e.url=e.url.substr(1),d=!1),0!==p.length&&(e.baseUrl=b,e.url=l+p+e.url.substr(l.length),p=\"\"),\"router\"!==o)if(c>=m.length)setImmediate(x,o);else{var i,S,k,O=function(e){try{return u(e).pathname}catch(e){return}}(e);if(null==O)return x(o);for(;!0!==S&&c<m.length;)if(S=v(i=m[c++],O),k=i.route,\"boolean\"!=typeof S&&(o=o||S),!0===S&&k)if(o)S=!1;else{var C=e.method,_=k._handles_method(C);_||\"OPTIONS\"!==C||g(h,k._options()),_||\"HEAD\"===C||(S=!1)}if(!0!==S)return x(o);k&&(e.route=k),e.params=r.mergeParams?function(e,t){if(\"object\"!=typeof t||!t)return e;var n=s({},t);if(!(0 in e&&0 in t))return s(n,e);var r=0,o=0;for(;r in e;)r++;for(;o in t;)o++;for(r--;r>=0;r--)e[r+o]=e[r],r<o&&delete e[r];return s(n,e)}(i.params,y):i.params;var E=i.path;r.process_params(i,f,e,t,function(n){return n?w(o||n):k?i.handle_request(e,t,w):void function(n,r,o,i){if(0!==o.length){var s=i[o.length];if(s&&\"/\"!==s&&\".\"!==s)return w(r);a(\"trim prefix (%s) from url %s\",o,e.url),p=o,e.url=l+e.url.substr(l.length+p.length),l||\"/\"===e.url[0]||(e.url=\"/\"+e.url,d=!0),e.baseUrl=b+(\"/\"===p[p.length-1]?p.substring(0,p.length-1):p)}a(\"%s %s : %s\",n.name,o,e.originalUrl),r?n.handle_error(r,e,t,w):n.handle_request(e,t,w)}(i,o,E,O)})}else setImmediate(x,null)}e.next=w,\"OPTIONS\"===e.method&&(o=x,i=function(e,n){if(n||0===h.length)return e(n);!function(e,t,n){try{var r=t.join(\",\");e.set(\"Allow\",r),e.send(r)}catch(e){n(e)}}(t,h,e)},x=function(){var e=new Array(arguments.length+1);e[0]=o;for(var t=0,n=arguments.length;t<n;t++)e[t+1]=arguments[t];i.apply(this,e)}),e.baseUrl=b,e.originalUrl=e.originalUrl||e.url,w()},m.process_params=function(e,t,n,r,o){var i=this.params,s=e.keys;if(!s||0===s.length)return o();var a,c,l,u,p,d=0,f=0;function h(e){return e?o(e):d>=s.length?o():(f=0,c=s[d++],a=c.name,l=n.params[a],u=i[a],p=t[a],void 0!==l&&u?p&&(p.match===l||p.error&&\"route\"!==p.error)?(n.params[a]=p.value,h(p.error)):(t[a]=p={error:null,match:l,value:l},void m()):h())}function m(e){var t=u[f++];if(p.value=n.params[c.name],e)return p.error=e,void h(e);if(!t)return h();try{t(n,r,m,l,c.name)}catch(e){m(e)}}h()},m.use=function(e){var t=0,n=\"/\";if(\"function\"!=typeof e){for(var r=e;Array.isArray(r)&&0!==r.length;)r=r[0];\"function\"!=typeof r&&(t=1,n=e)}var i=l(f.call(arguments,t));if(0===i.length)throw new TypeError(\"Router.use() requires a middleware function\");for(var s=0;s<i.length;s++){if(\"function\"!=typeof(e=i[s]))throw new TypeError(\"Router.use() requires a middleware function but got a \"+y(e));a(\"use %o %s\",n,e.name||\"<anonymous>\");var c=new o(n,{sensitive:this.caseSensitive,strict:!1,end:!1},e);c.route=void 0,this.stack.push(c)}return this},m.route=function(e){var t=new r(e),n=new o(e,{sensitive:this.caseSensitive,strict:this.strict,end:!0},t.dispatch.bind(t));return n.route=t,this.stack.push(n),t},i.concat(\"all\").forEach(function(e){m[e]=function(t){var n=this.route(t);return n[e].apply(n,f.call(arguments,1)),this}})},function(e,t,n){\"use strict\";var r=String.prototype.replace,o=/%20/g;e.exports={default:\"RFC3986\",formatters:{RFC1738:function(e){return r.call(e,o,\"+\")},RFC3986:function(e){return e}},RFC1738:\"RFC1738\",RFC3986:\"RFC3986\"}},function(e,t,n){\"use strict\";var r=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push(\"%\"+((t<16?\"0\":\"\")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},t.merge=function(e,n,o){if(!n)return e;if(\"object\"!=typeof n){if(Array.isArray(e))e.push(n);else{if(\"object\"!=typeof e)return[e,n];(o.plainObjects||o.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if(\"object\"!=typeof e)return[e].concat(n);var i=e;return Array.isArray(e)&&!Array.isArray(n)&&(i=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,i){r.call(e,i)?e[i]&&\"object\"==typeof e[i]?e[i]=t.merge(e[i],n,o):e.push(n):e[i]=n}),e):Object.keys(n).reduce(function(e,i){var s=n[i];return r.call(e,i)?e[i]=t.merge(e[i],s,o):e[i]=s,e},i)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\\+/g,\" \"))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t=\"string\"==typeof e?e:String(e),n=\"\",r=0;r<t.length;++r){var i=t.charCodeAt(r);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=t.charAt(r):i<128?n+=o[i]:i<2048?n+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?n+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(r+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),n+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return n},t.compact=function(e){for(var t=[{obj:{o:e},prop:\"o\"}],n=[],r=0;r<t.length;++r)for(var o=t[r],i=o.obj[o.prop],s=Object.keys(i),a=0;a<s.length;++a){var c=s[a],l=i[c];\"object\"==typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:i,prop:c}),n.push(l))}return function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);n.obj[n.prop]=r}}return t}(t)},t.isRegExp=function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,n){\"use strict\";var r,o,i,s=n(252),a=n(21).extname,c=/^\\s*([^;\\s]*)(?:;|\\s|$)/,l=/^text\\//i;function u(e){if(!e||\"string\"!=typeof e)return!1;var t=c.exec(e),n=t&&s[t[1].toLowerCase()];return n&&n.charset?n.charset:!(!t||!l.test(t[1]))&&\"UTF-8\"}t.charset=u,t.charsets={lookup:u},t.contentType=function(e){if(!e||\"string\"!=typeof e)return!1;var n=-1===e.indexOf(\"/\")?t.lookup(e):e;if(!n)return!1;if(-1===n.indexOf(\"charset\")){var r=t.charset(n);r&&(n+=\"; charset=\"+r.toLowerCase())}return n},t.extension=function(e){if(!e||\"string\"!=typeof e)return!1;var n=c.exec(e),r=n&&t.extensions[n[1].toLowerCase()];if(!r||!r.length)return!1;return r[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||\"string\"!=typeof e)return!1;var n=a(\"x.\"+e).toLowerCase().substr(1);if(!n)return!1;return t.types[n]||!1},t.types=Object.create(null),r=t.extensions,o=t.types,i=[\"nginx\",\"apache\",void 0,\"iana\"],Object.keys(s).forEach(function(e){var t=s[e],n=t.extensions;if(n&&n.length){r[e]=n;for(var a=0;a<n.length;a++){var c=n[a];if(o[c]){var l=i.indexOf(s[o[c]].source),u=i.indexOf(t.source);if(\"application/octet-stream\"!==o[c]&&(l>u||l===u&&\"application/\"===o[c].substr(0,12)))continue}o[c]=e}}})},function(e,t){e.exports=require(\"zlib\")},function(e,t,n){\"use strict\";e.exports=function(e){if(!e)throw new TypeError(\"argument stream is required\");if(\"function\"==typeof e.unpipe)return void e.unpipe();if(!function(e){for(var t=e.listeners(\"data\"),n=0;n<t.length;n++)if(\"ondata\"===t[n].name)return!0;return!1}(e))return;for(var t,n=e.listeners(\"close\"),r=0;r<n.length;r++)\"cleanup\"!==(t=n[r]).name&&\"onclose\"!==t.name||t.call(e)}},function(e){e.exports=[[\"0\",\"\\0\",127],[\"a140\",\"\"],[\"a1a1\",\"\",4,\"\"],[\"a240\",\"\",7,\"\"],[\"a2a1\",\"\",9,\"\",9,\"\",8,\"\",25,\"\",21],[\"a340\",\"\",16,\"\",6,\"\",16,\"\",6,\"\",10],[\"a3a1\",\"\",25,\"\"],[\"a3e1\",\"\"],[\"a440\",\"\"],[\"a4a1\",\"\"],[\"a540\",\"\"],[\"a5a1\",\"\"],[\"a640\",\"\"],[\"a6a1\",\"\"],[\"a740\",\"\"],[\"a7a1\",\"\"],[\"a840\",\"\"],[\"a8a1\",\"\"],[\"a940\",\"\"],[\"a9a1\",\"\"],[\"aa40\",\"\"],[\"aaa1\",\"\"],[\"ab40\",\"\"],[\"aba1\",\"\"],[\"ac40\",\"\"],[\"aca1\",\"\"],[\"ad40\",\"\"],[\"ada1\",\"\"],[\"ae40\",\"\"],[\"aea1\",\"\"],[\"af40\",\"\"],[\"afa1\",\"\"],[\"b040\",\"\"],[\"b0a1\",\"\"],[\"b140\",\"\"],[\"b1a1\",\"\"],[\"b240\",\"\"],[\"b2a1\",\"\"],[\"b340\",\"\"],[\"b3a1\",\"\"],[\"b440\",\"\"],[\"b4a1\",\"\"],[\"b540\",\"\"],[\"b5a1\",\"\"],[\"b640\",\"\"],[\"b6a1\",\"\"],[\"b740\",\"\"],[\"b7a1\",\"\"],[\"b840\",\"\"],[\"b8a1\",\"\"],[\"b940\",\"\"],[\"b9a1\",\"\"],[\"ba40\",\"\"],[\"baa1\",\"\"],[\"bb40\",\"\"],[\"bba1\",\"\"],[\"bc40\",\"\"],[\"bca1\",\"\"],[\"bd40\",\"\"],[\"bda1\",\"\"],[\"be40\",\"\"],[\"bea1\",\"\"],[\"bf40\",\"\"],[\"bfa1\",\"\"],[\"c040\",\"\"],[\"c0a1\",\"\"],[\"c140\",\"\"],[\"c1a1\",\"\"],[\"c240\",\"\"],[\"c2a1\",\"\"],[\"c340\",\"\"],[\"c3a1\",\"\"],[\"c440\",\"\"],[\"c4a1\",\"\"],[\"c540\",\"\"],[\"c5a1\",\"\"],[\"c640\",\"\"],[\"c940\",\"\"],[\"c9a1\",\"\"],[\"ca40\",\"\"],[\"caa1\",\"\"],[\"cb40\",\"\"],[\"cba1\",\"\"],[\"cc40\",\"\"],[\"cca1\",\"\"],[\"cd40\",\"\"],[\"cda1\",\"\"],[\"ce40\",\"\"],[\"cea1\",\"\"],[\"cf40\",\"\"],[\"cfa1\",\"\"],[\"d040\",\"\"],[\"d0a1\",\"\"],[\"d140\",\"\"],[\"d1a1\",\"\"],[\"d240\",\"\"],[\"d2a1\",\"\"],[\"d340\",\"\"],[\"d3a1\",\"\"],[\"d440\",\"\"],[\"d4a1\",\"\"],[\"d540\",\"\"],[\"d5a1\",\"\"],[\"d640\",\"\"],[\"d6a1\",\"\"],[\"d740\",\"\"],[\"d7a1\",\"\"],[\"d840\",\"\"],[\"d8a1\",\"\"],[\"d940\",\"\"],[\"d9a1\",\"\"],[\"da40\",\"\"],[\"daa1\",\"\"],[\"db40\",\"\"],[\"dba1\",\"\"],[\"dc40\",\"\"],[\"dca1\",\"\"],[\"dd40\",\"\"],[\"dda1\",\"\"],[\"de40\",\"\"],[\"dea1\",\"\"],[\"df40\",\"\"],[\"dfa1\",\"\"],[\"e040\",\"\"],[\"e0a1\",\"\"],[\"e140\",\"\"],[\"e1a1\",\"\"],[\"e240\",\"\"],[\"e2a1\",\"\"],[\"e340\",\"\"],[\"e3a1\",\"\"],[\"e440\",\"\"],[\"e4a1\",\"\"],[\"e540\",\"\"],[\"e5a1\",\"\"],[\"e640\",\"\"],[\"e6a1\",\"\"],[\"e740\",\"\"],[\"e7a1\",\"\"],[\"e840\",\"\"],[\"e8a1\",\"\"],[\"e940\",\"\"],[\"e9a1\",\"\"],[\"ea40\",\"\"],[\"eaa1\",\"\"],[\"eb40\",\"\"],[\"eba1\",\"\"],[\"ec40\",\"\"],[\"eca1\",\"\"],[\"ed40\",\"\"],[\"eda1\",\"\"],[\"ee40\",\"\"],[\"eea1\",\"\"],[\"ef40\",\"\"],[\"efa1\",\"\"],[\"f040\",\"\"],[\"f0a1\",\"\"],[\"f140\",\"\"],[\"f1a1\",\"\"],[\"f240\",\"\"],[\"f2a1\",\"\"],[\"f340\",\"\"],[\"f3a1\",\"\"],[\"f440\",\"\"],[\"f4a1\",\"\"],[\"f540\",\"\"],[\"f5a1\",\"\"],[\"f640\",\"\"],[\"f6a1\",\"\"],[\"f740\",\"\"],[\"f7a1\",\"\"],[\"f840\",\"\"],[\"f8a1\",\"\"],[\"f940\",\"\"],[\"f9a1\",\"\"]]},function(e){e.exports=[[\"a140\",\"\",62],[\"a180\",\"\",32],[\"a240\",\"\",62],[\"a280\",\"\",32],[\"a2ab\",\"\",5],[\"a2e3\",\"\"],[\"a2ef\",\"\"],[\"a2fd\",\"\"],[\"a340\",\"\",62],[\"a380\",\"\",31,\"\"],[\"a440\",\"\",62],[\"a480\",\"\",32],[\"a4f4\",\"\",10],[\"a540\",\"\",62],[\"a580\",\"\",32],[\"a5f7\",\"\",7],[\"a640\",\"\",62],[\"a680\",\"\",32],[\"a6b9\",\"\",7],[\"a6d9\",\"\",6],[\"a6ec\",\"\"],[\"a6f3\",\"\"],[\"a6f6\",\"\",8],[\"a740\",\"\",62],[\"a780\",\"\",32],[\"a7c2\",\"\",14],[\"a7f2\",\"\",12],[\"a896\",\"\",10],[\"a8bc\",\"\"],[\"a8bf\",\"\"],[\"a8c1\",\"\"],[\"a8ea\",\"\",20],[\"a958\",\"\"],[\"a95b\",\"\"],[\"a95d\",\"\"],[\"a989\",\"\",11],[\"a997\",\"\",12],[\"a9f0\",\"\",14],[\"aaa1\",\"\",93],[\"aba1\",\"\",93],[\"aca1\",\"\",93],[\"ada1\",\"\",93],[\"aea1\",\"\",93],[\"afa1\",\"\",93],[\"d7fa\",\"\",4],[\"f8a1\",\"\",93],[\"f9a1\",\"\",93],[\"faa1\",\"\",93],[\"fba1\",\"\",93],[\"fca1\",\"\",93],[\"fda1\",\"\",93],[\"fe50\",\"\"],[\"fe80\",\"\",6,\"\",93]]},function(e,t,n){\"use strict\";var r=n(10).Buffer,o=n(272),i=e.exports;i.encodings=null,i.defaultCharUnicode=\"\",i.defaultCharSingleByte=\"?\",i.encode=function(e,t,n){e=\"\"+(e||\"\");var o=i.getEncoder(t,n),s=o.write(e),a=o.end();return a&&a.length>0?r.concat([s,a]):s},i.decode=function(e,t,n){\"string\"==typeof e&&(i.skipDecodeWarning||(console.error(\"Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding\"),i.skipDecodeWarning=!0),e=new r(\"\"+(e||\"\"),\"binary\"));var o=i.getDecoder(t,n),s=o.write(e),a=o.end();return a?s+a:s},i.encodingExists=function(e){try{return i.getCodec(e),!0}catch(e){return!1}},i.toEncoding=i.encode,i.fromEncoding=i.decode,i._codecDataCache={},i.getCodec=function(e){i.encodings||(i.encodings=n(271));for(var t=(\"\"+e).toLowerCase().replace(/[^0-9a-z]|:\\d{4}$/g,\"\"),r={};;){var o=i._codecDataCache[t];if(o)return o;var s=i.encodings[t];switch(typeof s){case\"string\":t=s;break;case\"object\":for(var a in s)r[a]=s[a];r.encodingName||(r.encodingName=t),t=s.type;break;case\"function\":return r.encodingName||(r.encodingName=t),o=new s(r,i),i._codecDataCache[r.encodingName]=o,o;default:throw new Error(\"Encoding not recognized: '\"+e+\"' (searched as: '\"+t+\"')\")}}},i.getEncoder=function(e,t){var n=i.getCodec(e),r=new n.encoder(t,n);return n.bomAware&&t&&t.addBOM&&(r=new o.PrependBOM(r,t)),r},i.getDecoder=function(e,t){var n=i.getCodec(e),r=new n.decoder(t,n);return!n.bomAware||t&&!1===t.stripBOM||(r=new o.StripBOM(r,t)),r};var s=\"undefined\"!=typeof process&&process.versions&&process.versions.node;if(s){var a=s.split(\".\").map(Number);(a[0]>0||a[1]>=10)&&n(256)(i),n(255)(i)}},function(e,t){var n=1e3,r=60*n,o=60*r,i=24*o,s=365.25*i;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+\" \"+n:Math.ceil(e/t)+\" \"+n+\"s\"}e.exports=function(e,t){t=t||{};var c,l=typeof e;if(\"string\"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return a*s;case\"days\":case\"day\":case\"d\":return a*i;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return a*o;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return a*r;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return a*n;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return a;default:return}}(e);if(\"number\"===l&&!1===isNaN(e))return t.long?a(c=e,i,\"day\")||a(c,o,\"hour\")||a(c,r,\"minute\")||a(c,n,\"second\")||c+\" ms\":function(e){if(e>=i)return Math.round(e/i)+\"d\";if(e>=o)return Math.round(e/o)+\"h\";if(e>=r)return Math.round(e/r)+\"m\";if(e>=n)return Math.round(e/n)+\"s\";return e+\"ms\"}(e);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(e))}},function(e,t,n){var r;function o(e){function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),\"string\"!=typeof s[0]&&s.unshift(\"%O\");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,r){if(\"%%\"===n)return n;c++;var o=t.formatters[r];if(\"function\"==typeof o){var i=s[c];n=o.call(e,i),s.splice(c,1),c--}return n}),t.formatArgs.call(e,s),(n.log||t.log||console.log.bind(console)).apply(e,s)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),\"function\"==typeof t.init&&t.init(n),n}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable(\"\")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=(\"string\"==typeof e?e:\"\").split(/[\\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(\"-\"===(e=n[o].replace(/\\*/g,\".*?\"))[0]?t.skips.push(new RegExp(\"^\"+e.substr(1)+\"$\")):t.names.push(new RegExp(\"^\"+e+\"$\")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(162),t.names=[],t.skips=[],t.formatters={}},function(e,t,n){\"use strict\";var r=n(5).EventEmitter;function o(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var r=n();return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:r}),r}})}function i(e){return e.toString()}o(e.exports,\"callSiteToString\",function(){var e=Error.stackTraceLimit,t={},r=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.stackTraceLimit=2,Error.captureStackTrace(t);var o=t.stack.slice();return Error.prepareStackTrace=r,Error.stackTraceLimit=e,o[0].toString?i:n(281)}),o(e.exports,\"eventListenerCount\",function(){return r.listenerCount||n(280)})},function(e,t,n){\"use strict\";var r=n(5).EventEmitter;function o(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var r=n();return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:r}),r}})}function i(e){return e.toString()}o(e.exports,\"callSiteToString\",function(){var e=Error.stackTraceLimit,t={},r=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.stackTraceLimit=2,Error.captureStackTrace(t);var o=t.stack.slice();return Error.prepareStackTrace=r,Error.stackTraceLimit=e,o[0].toString?i:n(285)}),o(e.exports,\"eventListenerCount\",function(){return r.listenerCount||n(284)})},function(e,t,n){\"use strict\";var r=n(31)(\"body-parser\"),o=Object.create(null);function i(e){return function(){return function(e){var t=o[e];if(void 0!==t)return t;switch(e){case\"json\":t=n(283);break;case\"raw\":t=n(250);break;case\"text\":t=n(249);break;case\"urlencoded\":t=n(248)}return o[e]=t}(e)}}t=e.exports=r.function(function(e){var n={};if(e)for(var r in e)\"type\"!==r&&(n[r]=e[r]);var o=t.urlencoded(n),i=t.json(n);return function(e,t,n){i(e,t,function(r){if(r)return n(r);o(e,t,n)})}},\"bodyParser: use individual json/urlencoded middlewares\"),Object.defineProperty(t,\"json\",{configurable:!0,enumerable:!0,get:i(\"json\")}),Object.defineProperty(t,\"raw\",{configurable:!0,enumerable:!0,get:i(\"raw\")}),Object.defineProperty(t,\"text\",{configurable:!0,enumerable:!0,get:i(\"text\")}),Object.defineProperty(t,\"urlencoded\",{configurable:!0,enumerable:!0,get:i(\"urlencoded\")})},function(e,t){e.exports=function(e){return function(t){return function(n,r){return e.monkInstance.executeWhenOpened().then(function(t){return t.collection(e.collection.name)}).then(function(e){return n.col=e,t(n,r)})}}}},function(e,t){e.exports=function(e){return function(e){return function(t,n){return e(t,n).then((r=t.callback,function(e){return r&&\"function\"==typeof r&&setTimeout(r,0,null,e),e})).catch(function(e){return function(t){if(!e||\"function\"!=typeof e)throw t;setTimeout(e,0,t)}}(t.callback));var r}}}},function(e,t){e.exports=function(e){return function(e){return function(t,n){if(!t.fields)return e(t,n);if(!Array.isArray(t.fields)&&\"object\"==typeof t.fields)return e(t,n);var r={};t.fields=\"string\"==typeof t.fields?t.fields.split(\" \"):t.fields||[];for(var o=0,i=t.fields.length;o<i;o++)r[t.fields[o]]=1;return t.fields=r,e(t,n)}}}},function(e,t){e.exports=function(e){return function(t){return function(n){return function(r,o){return!1===(r.options||{}).castIds?(delete r.options.castIds,n(r,o)):((r.options||{}).castIds&&delete r.options.castIds,e.forEach(function(e){r[e]&&(r[e]=t.monkInstance.cast(r[e]))}),n(r,o))}}}}},function(e,t){function n(e,t){if(!Array.isArray(e)&&\"object\"==typeof e)return e;for(var n={},r=0,o=(e=\"string\"==typeof e?e.split(\" \"):e||[]).length;r<o;r++)\"-\"===e[r][0]?n[e[r].substr(1)]=t:n[e[r]]=1;return n}e.exports=function(e){return function(t){return function(r,o){var i=e.collection;if(\"string\"==typeof r.options||Array.isArray(r.options))return r.options={fields:n(r.options)},t(r,o);for(var s in r.options=r.options||{},r.options.fields&&(r.options.fields=n(r.options.fields,0)),r.options.sort&&(r.options.sort=n(r.options.sort,-1)),i.options)s in r.options||(r.options[s]=i.options[s]);return t(r,o)}}}},function(e,t){e.exports=function(e){return function(e){return function(t,n){return t.query?(\"string\"!=typeof t.query&&\"function\"!=typeof t.query.toHexString||(t.query={_id:t.query}),e(t,n)):e(t,n)}}}},function(e,t){e.exports=function(e){return 0===e.length?function(e){return e}:1===e.length?e[0]:e.reduce(function(e,t){return function(n){return e(t(n))}})}},function(e,t,n){var r=n(173);e.exports=function(e){return function(t,n){var o,i={monkInstance:t,collection:n};return o=e.map(function(e){return e(i)}),r(o)}}},function(e,t,n){\"use strict\";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String(\"abc\");if(e[5]=\"de\",\"5\"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t[\"_\"+String.fromCharCode(n)]=n;if(\"0123456789\"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(\"\"))return!1;var r={};return\"abcdefghijklmnopqrst\".split(\"\").forEach(function(e){r[e]=e}),\"abcdefghijklmnopqrst\"===Object.keys(Object.assign({},r)).join(\"\")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,a=function(e){if(null===e||void 0===e)throw new TypeError(\"Object.assign cannot be called with null or undefined\");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))o.call(n,l)&&(a[l]=n[l]);if(r){s=r(n);for(var u=0;u<s.length;u++)i.call(n,s[u])&&(a[s[u]]=n[s[u]])}}return a}},function(e,t,n){var r=n(4),o=n(18),i=n(9),s=n(0),a=26;function c(e,t,n){if(n=n||{},this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=t,this.files=e.s._filesCollection,this.options=n,this.done=!1,this.id=n.id?n.id:r.BSON.ObjectId(),this.chunkSizeBytes=this.options.chunkSizeBytes,this.bufToStore=new Buffer(this.chunkSizeBytes),this.length=0,this.md5=o.createHash(\"md5\"),this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1,promiseLibrary:this.bucket.s.promiseLibrary},!this.bucket.s.calledOpenUploadStream){this.bucket.s.calledOpenUploadStream=!0;var i=this;!function(e,t){e.files.findOne({},{_id:1},function(n,r){return n?t(n):r?t():void e.files.listIndexes().toArray(function(n,r){if(n){if(n.code===a){var o={filename:1,uploadDate:1};return void e.files.createIndex(o,{background:!1},function(n){if(n)return t(n);p(e,t)})}return t(n)}var i=!1;if(r.forEach(function(e){var t=Object.keys(e.key);2===t.length&&1===e.key.filename&&1===e.key.uploadDate&&(i=!0)}),i)p(e,t);else{o={filename:1,uploadDate:1};var s=f(e);s.background=!1,e.files.createIndex(o,s,function(n){if(n)return t(n);p(e,t)})}})})}(this,function(){i.bucket.s.checkedIndexes=!0,i.bucket.emit(\"index\")})}}function l(e,t,n){if(!e.state.errored){if(e.state.errored=!0,n)return n(t);e.emit(\"error\",t)}}function u(e,t,n){return{_id:r.BSON.ObjectId(),files_id:e,n:t,data:n}}function p(e,t){e.chunks.listIndexes().toArray(function(n,r){if(n){if(n.code===a){var o={files_id:1,n:1};return void e.chunks.createIndex(o,{background:!1,unique:!0},function(e){if(e)return t(e);t()})}return t(n)}var i=!1;if(r.forEach(function(e){e.key&&(2===Object.keys(e.key).length&&1===e.key.files_id&&1===e.key.n&&(i=!0))}),i)t();else{o={files_id:1,n:1};var s=f(e);s.background=!1,s.unique=!0,e.chunks.createIndex(o,s,function(e){if(e)return t(e);t()})}})}function d(e,t){if(e.done)return!0;if(e.state.streamEnd&&0===e.state.outstandingRequests&&!e.state.errored){e.done=!0;var n=function(e,t,n,r,o,i,s,a){var c={_id:e,length:t,chunkSize:n,uploadDate:new Date,md5:r,filename:o};i&&(c.contentType=i);s&&(c.aliases=s);a&&(c.metadata=a);return c}(e.id,e.length,e.chunkSizeBytes,e.md5.digest(\"hex\"),e.filename,e.options.contentType,e.options.aliases,e.options.metadata);return!g(e,t)&&(e.files.insert(n,f(e),function(r){if(r)return l(e,r,t);e.emit(\"finish\",n)}),!0)}return!1}function f(e){var t={};return e.options.writeConcern&&(t.w=e.options.writeConcern.w,t.wtimeout=e.options.writeConcern.wtimeout,t.j=e.options.writeConcern.j),t}function h(e,t){return e.bucket.s.checkedIndexes?t(!1):(e.bucket.once(\"index\",function(){t(!0)}),!0)}function m(e,t){if(0===e.pos)return d(e,t);++e.state.outstandingRequests;var n=new Buffer(e.pos);e.bufToStore.copy(n,0,0,e.pos),e.md5.update(n);var r=u(e.id,e.n,n);if(g(e,t))return!1;e.chunks.insert(r,f(e),function(t){if(t)return l(e,t);--e.state.outstandingRequests,d(e)})}function g(e,t){return!!e.state.aborted&&(\"function\"==typeof t&&t(new Error(\"this stream has been aborted\")),!0)}e.exports=c,s.inherits(c,i.Writable),c.prototype.write=function(e,t,n){var r=this;return h(this,function(){return function(e,t,n,r){if(g(e,r))return!1;var o=Buffer.isBuffer(t)?t:new Buffer(t,n);if(e.length+=o.length,e.pos+o.length<e.chunkSizeBytes)return o.copy(e.bufToStore,e.pos),e.pos+=o.length,r&&r(),!0;var i=o.length,s=e.chunkSizeBytes-e.pos,a=Math.min(s,o.length),c=0;for(;i>0;){var p=o.length-i;if(o.copy(e.bufToStore,e.pos,p,p+a),e.pos+=a,0===(s-=a)){e.md5.update(e.bufToStore);var h=u(e.id,e.n,e.bufToStore);if(++e.state.outstandingRequests,++c,g(e,r))return!1;e.chunks.insert(h,f(e),function(t){if(t)return l(e,t);--e.state.outstandingRequests,--c||(e.emit(\"drain\",h),r&&r(),d(e))}),s=e.chunkSizeBytes,e.pos=0,++e.n}i-=a,a=Math.min(s,i)}return!1}(r,e,t,n)})},c.prototype.abort=function(e){if(this.state.streamEnd){var t=new Error(\"Cannot abort a stream that has already completed\");return\"function\"==typeof e?e(t):this.state.promiseLibrary.reject(t)}if(this.state.aborted)return t=new Error(\"Cannot call abort() on a stream twice\"),\"function\"==typeof e?e(t):this.state.promiseLibrary.reject(t);this.state.aborted=!0,this.chunks.deleteMany({files_id:this.id},function(t){\"function\"==typeof e&&e(t)})},c.prototype.end=function(e,t,n){var r=this;\"function\"==typeof e?(n=e,e=null,t=null):\"function\"==typeof t&&(n=t,t=null),g(this,n)||(this.state.streamEnd=!0,n&&this.once(\"finish\",function(e){n(null,e)}),e?this.write(e,t,function(){m(r)}):h(this,function(){m(r)}))}},function(e,t,n){var r=n(9),o=n(0);function i(e,t,n,o,i){this.s={bytesRead:0,chunks:e,cursor:null,expected:0,files:t,filter:o,init:!1,expectedEnd:0,file:null,options:i,readPreference:n},r.Readable.call(this)}function s(e){if(e.s.init)throw new Error(\"You cannot change options after the stream has enteredflowing mode!\")}function a(e,t){e.emit(\"error\",t)}e.exports=i,o.inherits(i,r.Readable),i.prototype._read=function(){var e=this;this.destroyed||function(e,t){if(e.s.file)return t();e.s.init||(!function(e){var t={};e.s.readPreference&&(t.readPreference=e.s.readPreference);e.s.options&&e.s.options.sort&&(t.sort=e.s.options.sort);e.s.options&&e.s.options.skip&&(t.skip=e.s.options.skip);e.s.files.findOne(e.s.filter,t,function(t,n){if(t)return a(e,t);if(!n){var r=e.s.filter._id?e.s.filter._id.toString():e.s.filter.filename,o=\"FileNotFound: file \"+r+\" was not found\",i=new Error(o);return i.code=\"ENOENT\",a(e,i)}if(n.length<=0)e.push(null);else if(e.destroyed)e.emit(\"close\");else{e.s.bytesToSkip=function(e,t,n){if(n&&null!=n.start){if(n.start>t.length)throw new Error(\"Stream start (\"+n.start+\") must not be more than the length of the file (\"+t.length+\")\");if(n.start<0)throw new Error(\"Stream start (\"+n.start+\") must not be negative\");if(null!=n.end&&n.end<n.start)throw new Error(\"Stream start (\"+n.start+\") must not be greater than stream end (\"+n.end+\")\");return e.s.bytesRead=Math.floor(n.start/t.chunkSize)*t.chunkSize,e.s.expected=Math.floor(n.start/t.chunkSize),n.start-e.s.bytesRead}}(e,n,e.s.options);var s={files_id:n._id};if(e.s.options&&null!=e.s.options.start){var c=Math.floor(e.s.options.start/n.chunkSize);c>0&&(s.n={$gte:c})}e.s.cursor=e.s.chunks.find(s).sort({n:1}),e.s.readPreference&&e.s.cursor.setReadPreference(e.s.readPreference),e.s.expectedEnd=Math.ceil(n.length/n.chunkSize),e.s.file=n,e.s.bytesToTrim=function(e,t,n,r){if(r&&null!=r.end){if(r.end>t.length)throw new Error(\"Stream end (\"+r.end+\") must not be more than the length of the file (\"+t.length+\")\");if(r.start<0)throw new Error(\"Stream end (\"+r.end+\") must not be negative\");var o=null!=r.start?Math.floor(r.start/t.chunkSize):0;return n.limit(Math.ceil(r.end/t.chunkSize)-o),e.s.expectedEnd=Math.ceil(r.end/t.chunkSize),Math.ceil(r.end/t.chunkSize)*t.chunkSize-r.end}}(e,n,e.s.cursor,e.s.options),e.emit(\"file\",n)}})}(e),e.s.init=!0);e.once(\"file\",function(){t()})}(e,function(){!function(e){if(e.destroyed)return;e.s.cursor.next(function(t,n){if(!e.destroyed){if(t)return a(e,t);if(!n)return e.push(null),e.s.cursor.close(function(t){if(t)return a(e,t);e.emit(\"close\")});var r=e.s.file.length-e.s.bytesRead,o=e.s.expected++,i=Math.min(e.s.file.chunkSize,r);if(n.n>o){var s=\"ChunkIsMissing: Got unexpected n: \"+n.n+\", expected: \"+o;return a(e,new Error(s))}if(n.n<o)return s=\"ExtraChunk: Got unexpected n: \"+n.n+\", expected: \"+o,a(e,new Error(s));var c=Buffer.isBuffer(n.data)?n.data:n.data.buffer;if(c.length!==i)return r<=0?(s=\"ExtraChunk: Got unexpected n: \"+n.n,a(e,new Error(s))):(s=\"ChunkIsWrongSize: Got unexpected length: \"+c.length+\", expected: \"+i,a(e,new Error(s)));if(e.s.bytesRead+=c.length,0===c.length)return e.push(null);var l=null,u=null;null!=e.s.bytesToSkip&&(l=e.s.bytesToSkip,e.s.bytesToSkip=0),o===e.s.expectedEnd&&null!=e.s.bytesToTrim&&(u=e.s.bytesToTrim),e.s.options.end&&e.s.options.end-e.s.bytesToSkip<c.length&&(u=e.s.options.end-e.s.bytesToSkip),null==l&&null==u||(c=c.slice(l||0,u||c.length)),e.push(c)}})}(e)})},i.prototype.start=function(e){return s(this),this.s.options.start=e,this},i.prototype.end=function(e){return s(this),this.s.options.end=e,this},i.prototype.abort=function(e){var t=this;this.push(null),this.destroyed=!0,this.s.cursor?this.s.cursor.close(function(n){t.emit(\"close\"),e&&e(n)}):(this.s.init||t.emit(\"close\"),e&&e())}},function(e,t,n){var r=n(5).EventEmitter,o=n(177),i=n(176),s=n(2).shallowClone,a=n(2).toError,c=n(0),l={bucketName:\"fs\",chunkSizeBytes:261120};function u(e,t){if(r.apply(this),this.setMaxListeners(0),t&&\"object\"==typeof t){t=s(t);for(var o=Object.keys(l),i=0;i<o.length;++i)t[o[i]]||(t[o[i]]=l[o[i]])}else t=l;this.s={db:e,options:t,_chunksCollection:e.collection(t.bucketName+\".chunks\"),_filesCollection:e.collection(t.bucketName+\".files\"),checkedIndexes:!1,calledOpenUploadStream:!1,promiseLibrary:e.s.promiseLibrary||(\"function\"==typeof global.Promise?global.Promise:n(12).Promise)}}function p(e,t,n){e.s._filesCollection.deleteOne({_id:t},function(r,o){if(r)return n(r);e.s._chunksCollection.deleteMany({files_id:t},function(e){return e?n(e):o.result.n?void n():n(new Error(\"FileNotFound: no file with id \"+t+\" found\"))})})}function d(e,t,n,r){var o={_id:t},i={$set:{filename:n}};e.s._filesCollection.updateOne(o,i,function(e,n){return e?r(e):n.result.n?void r():r(a(\"File with id \"+t+\" not found\"))})}function f(e,t){e.s._filesCollection.drop(function(n){if(n)return t(n);e.s._chunksCollection.drop(function(e){return e?t(e):t()})})}e.exports=u,c.inherits(u,r),u.prototype.openUploadStream=function(e,t){return(t=t?s(t):{}).chunkSizeBytes||(t.chunkSizeBytes=this.s.options.chunkSizeBytes),new i(this,e,t)},u.prototype.openUploadStreamWithId=function(e,t,n){return(n=n?s(n):{}).chunkSizeBytes||(n.chunkSizeBytes=this.s.options.chunkSizeBytes),n.id=e,new i(this,t,n)},u.prototype.openDownloadStream=function(e,t){var n={_id:e};return t={start:t&&t.start,end:t&&t.end},new o(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,n,t)},u.prototype.delete=function(e,t){if(\"function\"==typeof t)return p(this,e,t);var n=this;return new this.s.promiseLibrary(function(t,r){p(n,e,function(e,n){e?r(e):t(n)})})},u.prototype.find=function(e,t){e=e||{},t=t||{};var n=this.s._filesCollection.find(e);return null!=t.batchSize&&n.batchSize(t.batchSize),null!=t.limit&&n.limit(t.limit),null!=t.maxTimeMS&&n.maxTimeMS(t.maxTimeMS),null!=t.noCursorTimeout&&n.addCursorFlag(\"noCursorTimeout\",t.noCursorTimeout),null!=t.skip&&n.skip(t.skip),null!=t.sort&&n.sort(t.sort),n},u.prototype.openDownloadStreamByName=function(e,t){var n={uploadDate:-1},r=null;t&&null!=t.revision&&(t.revision>=0?(n={uploadDate:1},r=t.revision):r=-t.revision-1);var i={filename:e};return t={sort:n,skip:r,start:t&&t.start,end:t&&t.end},new o(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,i,t)},u.prototype.rename=function(e,t,n){if(\"function\"==typeof n)return d(this,e,t,n);var r=this;return new this.s.promiseLibrary(function(n,o){d(r,e,t,function(e,t){e?o(e):n(t)})})},u.prototype.drop=function(e){if(\"function\"==typeof e)return f(this,e);var t=this;return new this.s.promiseLibrary(function(e,n){f(t,function(t,r){t?n(t):e(r)})})}},function(e,t,n){\"use strict\";var r=n(22),o=n(58),i=n(0).format,s=n(2).assign,a=n(109);function c(e,t){var n=/^.*?\\./,r=\".\"+e.replace(n,\"\"),o=\".\"+t.replace(n,\"\");return!!r.endsWith(o)}function l(e,t,n){var a,c;try{a=function(e,t){var n=\"\",a=\"\",c=\"\",l=\"admin\",u=o.parse(e,!0);if((null==u.hostname||\"\"==u.hostname)&&-1==e.indexOf(\".sock\"))throw new Error(\"no hostname or hostnames provided in connection string\");if(\"0\"==u.port)throw new Error(\"invalid port (zero) with hostname\");if(!isNaN(parseInt(u.port,10))&&parseInt(u.port,10)>65535)throw new Error(\"invalid port (larger than 65535) with hostname\");if(u.path&&u.path.length>0&&\"/\"!=u.path[0]&&-1==e.indexOf(\".sock\"))throw new Error(\"missing delimiting slash between hosts and options\");if(u.query)for(var p in u.query){if(-1!=p.indexOf(\"::\"))throw new Error(\"double colon in host identifier\");if(\"\"==u.query[p])throw new Error(\"query parameter \"+p+\" is an incomplete value pair\")}if(u.auth){var d=u.auth.split(\":\");if(-1!=e.indexOf(u.auth)&&d.length>2)throw new Error(\"Username with password containing an unescaped colon\");if(-1!=e.indexOf(u.auth)&&-1!=u.auth.indexOf(\"@\"))throw new Error(\"Username containing an unescaped at-sign\")}for(var f=e.split(\"?\").shift().split(\",\"),h=[],m=0;m<f.length;m++){var g=f[m];-1!=g.indexOf(\"mongodb\")?-1!=g.indexOf(\"@\")?h.push(g.split(\"@\").pop()):h.push(g.substr(\"mongodb://\".length)):-1!=g.indexOf(\"/\")?h.push(g.split(\"/\").shift()):-1==g.indexOf(\"/\")&&h.push(g.trim())}for(m=0;m<h.length;m++){var y=o.parse(i(\"mongodb://%s\",h[m].trim()));if(y.path&&-1!=y.path.indexOf(\":\"))throw y.path.split(\"/\").length>1?new Error(\"slash in host identifier\"):new Error(\"double colon in host identifier\")}-1!=e.indexOf(\"?\")?(c=e.substr(e.indexOf(\"?\")+1),n=e.substring(\"mongodb://\".length,e.indexOf(\"?\"))):n=e.substring(\"mongodb://\".length);-1!=n.indexOf(\"@\")&&(a=n.split(\"@\")[0],n=n.split(\"@\")[1]);if(-1!=n.indexOf(\".sock\")){if(-1!=n.indexOf(\".sock/\")){if(-1!=(l=n.split(\".sock/\")[1]).indexOf(\"/\")){if(2==l.split(\"/\").length&&0==l.split(\"/\")[1].length)throw new Error(\"Illegal trailing backslash after database name\");throw new Error(\"More than 1 database name in URL\")}n=n.split(\"/\",n.indexOf(\".sock\")+\".sock\".length)}}else if(-1!=n.indexOf(\"/\")){if(n.split(\"/\").length>2){if(0==n.split(\"/\")[2].length)throw new Error(\"Illegal trailing backslash after database name\");throw new Error(\"More than 1 database name in URL\")}l=n.split(\"/\")[1],n=n.split(\"/\")[0]}var v,b={},x=a||\"\",w=x.split(\":\",2);w[0]=decodeURIComponent(w[0]),w[1]&&(w[1]=decodeURIComponent(w[1]));2==w.length&&(b.auth={user:w[0],password:w[1]});t&&null!=t.auth&&(b.auth=t.auth);var S={socketOptions:{}},k={read_preference_tags:[]},O={socketOptions:{}},C={socketOptions:{}};if(b.server_options=S,b.db_options=k,b.rs_options=O,b.mongos_options=C,e.match(/\\.sock/)){var _=e.substring(e.indexOf(\"mongodb://\")+\"mongodb://\".length,e.lastIndexOf(\".sock\")+\".sock\".length);-1!=_.indexOf(\"@\")&&(_=_.split(\"@\")[1]),v=[{domain_socket:_}]}else{var E={};v=n.split(\",\").map(function(e){var t,n,r;if(r=/\\[([^\\]]+)\\](?:\\:(.+))?/.exec(e))t=r[1],n=parseInt(r[2],10)||27017;else{var o=e.split(\":\",2);t=o[0]||\"localhost\",n=null!=o[1]?parseInt(o[1],10):27017,-1!=t.indexOf(\"?\")&&(t=t.split(/\\?/)[0])}return E[t+\"_\"+n]?null:(E[t+\"_\"+n]=1,{host:t,port:n})}).filter(function(e){return null!=e})}b.dbName=l||\"admin\",(c||\"\").split(/[&;]/).forEach(function(e){if(e){var t=e.split(\"=\"),n=t[0],o=t[1];switch(n){case\"slaveOk\":case\"slave_ok\":S.slave_ok=\"true\"==o,k.slaveOk=\"true\"==o;break;case\"maxPoolSize\":case\"poolSize\":S.poolSize=parseInt(o,10),O.poolSize=parseInt(o,10);break;case\"appname\":b.appname=decodeURIComponent(o);break;case\"autoReconnect\":case\"auto_reconnect\":S.auto_reconnect=\"true\"==o;break;case\"minPoolSize\":throw new Error(\"minPoolSize not supported\");case\"maxIdleTimeMS\":throw new Error(\"maxIdleTimeMS not supported\");case\"waitQueueMultiple\":throw new Error(\"waitQueueMultiple not supported\");case\"waitQueueTimeoutMS\":throw new Error(\"waitQueueTimeoutMS not supported\");case\"uuidRepresentation\":throw new Error(\"uuidRepresentation not supported\");case\"ssl\":if(\"prefer\"==o){S.ssl=o,O.ssl=o,C.ssl=o;break}S.ssl=\"true\"==o,O.ssl=\"true\"==o,C.ssl=\"true\"==o;break;case\"sslValidate\":S.sslValidate=\"true\"==o,O.sslValidate=\"true\"==o,C.sslValidate=\"true\"==o;break;case\"replicaSet\":case\"rs_name\":O.rs_name=o;break;case\"reconnectWait\":O.reconnectWait=parseInt(o,10);break;case\"retries\":O.retries=parseInt(o,10);break;case\"readSecondary\":case\"read_secondary\":O.read_secondary=\"true\"==o;break;case\"fsync\":k.fsync=\"true\"==o;break;case\"journal\":k.j=\"true\"==o;break;case\"safe\":k.safe=\"true\"==o;break;case\"nativeParser\":case\"native_parser\":k.native_parser=\"true\"==o;break;case\"readConcernLevel\":k.readConcern={level:o};break;case\"connectTimeoutMS\":S.socketOptions.connectTimeoutMS=parseInt(o,10),O.socketOptions.connectTimeoutMS=parseInt(o,10),C.socketOptions.connectTimeoutMS=parseInt(o,10);break;case\"socketTimeoutMS\":S.socketOptions.socketTimeoutMS=parseInt(o,10),O.socketOptions.socketTimeoutMS=parseInt(o,10),C.socketOptions.socketTimeoutMS=parseInt(o,10);break;case\"w\":k.w=parseInt(o,10),isNaN(k.w)&&(k.w=o);break;case\"authSource\":k.authSource=o;break;case\"gssapiServiceName\":k.gssapiServiceName=o;break;case\"authMechanism\":if(\"GSSAPI\"==o)if(null==b.auth){var i=decodeURIComponent(x);if(-1==i.indexOf(\"@\"))throw new Error(\"GSSAPI requires a provided principal\");b.auth={user:i,password:null}}else b.auth.user=decodeURIComponent(b.auth.user);else\"MONGODB-X509\"==o&&(b.auth={user:decodeURIComponent(x)});if(\"GSSAPI\"!=o&&\"MONGODB-X509\"!=o&&\"MONGODB-CR\"!=o&&\"DEFAULT\"!=o&&\"SCRAM-SHA-1\"!=o&&\"PLAIN\"!=o)throw new Error(\"only DEFAULT, GSSAPI, PLAIN, MONGODB-X509, SCRAM-SHA-1 or MONGODB-CR is supported by authMechanism\");k.authMechanism=o;break;case\"authMechanismProperties\":var s={};o.split(\",\").forEach(function(e){var t=e.split(\":\");s[t[0]]=t[1]}),k.authMechanismProperties=s,\"string\"==typeof s.SERVICE_NAME&&(k.gssapiServiceName=s.SERVICE_NAME),\"string\"==typeof s.SERVICE_REALM&&(k.gssapiServiceRealm=s.SERVICE_REALM),\"string\"==typeof s.CANONICALIZE_HOST_NAME&&(k.gssapiCanonicalizeHostName=\"true\"==s.CANONICALIZE_HOST_NAME);break;case\"wtimeoutMS\":k.wtimeout=parseInt(o,10);break;case\"readPreference\":if(!r.isValid(o))throw new Error(\"readPreference must be either primary/primaryPreferred/secondary/secondaryPreferred/nearest\");k.readPreference=o;break;case\"maxStalenessSeconds\":k.maxStalenessSeconds=parseInt(o,10);break;case\"readPreferenceTags\":var a={};if(null==(o=decodeURIComponent(o))||\"\"==o){k.read_preference_tags.push(a);break}for(var c=o.split(/\\,/),l=0;l<c.length;l++){var u=c[l].trim().split(/\\:/);a[u[0]]=u[1]}k.read_preference_tags.push(a)}}}),0===k.read_preference_tags.length&&(k.read_preference_tags=null);if(!(-1!=k.w&&0!=k.w||1!=k.journal&&1!=k.fsync&&1!=k.safe))throw new Error(\"w set to -1 or 0 cannot be combined with safe/w/journal/fsync\");k.readPreference||(k.readPreference=\"primary\");return k=s(k,t),b.servers=v,b}(e,t)}catch(e){c=e}return c?n(c,null):n(null,a)}e.exports=function(e,t,n){\"function\"==typeof t&&(n=t,t={}),t=t||{};var r=o.parse(e,!0);if(\"mongodb:\"!==r.protocol&&\"mongodb+srv:\"!==r.protocol)return n(new Error(\"invalid schema, expected mongodb or mongodb+srv\"));if(\"mongodb+srv:\"===r.protocol){if(r.hostname.split(\".\").length<3)return n(new Error(\"uri does not have hostname, domainname and tld\"));if(r.domainLength=r.hostname.split(\".\").length,r.pathname&&r.pathname.match(\",\"))return n(new Error(\"invalid uri, cannot contain multiple hostnames\"));if(r.port)return n(new Error(\"Ports not accepted with mongodb+srv\"));var i=\"_mongodb._tcp.\"+r.host;a.resolveSrv(i,function(e,o){if(e)return n(e);if(0===o.length)return n(new Error(\"No addresses found at host\"));for(var i=0;i<o.length;i++)if(!c(o[i].name,r.hostname,r.domainLength))return n(new Error(\"srv record does not share hostname with parent uri\"));var s=r.auth?\"mongodb://\"+r.auth+\"@\":\"mongodb://\",u=o.map(function(e,t){return 0===t?s+e.name+\":\"+e.port:e.name+\":\"+e.port}).join(\",\")+\"/\",p=[];(t.ssl||r.search)&&(t.ssl||!r.search||r.search.match(\"ssl\"))||p.push(\"ssl=true\"),r.search&&p.push(r.search.replace(\"?\",\"\")),a.resolveTxt(r.host,function(e,r){if(e&&\"ENODATA\"!==e.code)return n(e);if(e&&\"ENODATA\"===e.code&&(r=null),r){if(r.length>1)return n(new Error(\"multiple text records not allowed\"));if(!(r=(r=r[0]).length>1?r.join(\"\"):r[0]).includes(\"authSource\")&&!r.includes(\"replicaSet\"))return n(new Error(\"text record must only set `authSource` or `replicaSet`\"));p.push(r)}p.length&&(u+=\"?\"+p.join(\"&\")),l(u,t,n)})})}else l(e,t,n)}},function(e,t,n){\"use strict\";e.exports=i;var r=n(129),o=n(44);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}o.inherits=n(43),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(0).deprecate},function(e,t,n){\"use strict\";n(10).Buffer;var r=n(101);function o(){this.head=null,this.tail=null,this.length=0}e.exports=o,o.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},o.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},o.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(e){if(0===this.length)return\"\";for(var t=this.head,n=\"\"+t.data;t=t.next;)n+=e+t.data;return n},o.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,o=0;n;)n.data.copy(t,o),o+=n.data.length,n=n.next;return t}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return\"[object Array]\"==n.call(e)}},function(e,t,n){var r=n(5).EventEmitter,o=n(0).inherits,i=n(38),s=n(32),a=n(100).OrderedBulkOperation,c=n(99).UnorderedBulkOperation,l=n(127),u=n(23),p=n(64),d=n(98),f={operationId:1,next:function(){return this.operationId++}},h={current:function(){return(new Date).getTime()},duration:function(e,t){return t-e}},m=[\"authenticate\",\"saslStart\",\"saslContinue\",\"getnonce\",\"createUser\",\"updateUser\",\"copydbgetnonce\",\"copydbsaslstart\",\"copydb\"],g=function(e,t,o){var g=(t=t||{}).operationIdGenerator||f,y=t.timestampGenerator||h;r.call(this),this.overloads=[];\"function\"==typeof o&&function(e){for(var t=[],n=[l,a,c,s,i,u,p,d],r=0;r<n.length;r++)n[r].define&&t.push(n[r].define.generate());e(null,t)}(o);var v=this,b=[\"command\",\"insert\",\"update\",\"remove\"],x=e.Server.prototype;b.forEach(function(t){var n=x[t];v.overloads.push({proto:x,name:t,func:n}),x[t]=function(){var r=e.Query.nextRequestId(),o=Array.prototype.slice.call(arguments,0),i=o[0],s=o[1],a=o[2]||{},c=Object.keys(s)[0],l=i.split(\".\")[0],u=i.split(\".\");u.shift(),u=u.join(\".\"),\"insert\"==t?(c=\"insert\",s={insert:u,documents:s},a.writeConcern&&Object.keys(a.writeConcern).length>0&&(s.writeConcern=a.writeConcern),s.ordered=void 0==a.ordered||a.ordered):\"update\"==t?(c=\"update\",s={update:u,updates:s},a.writeConcern&&Object.keys(a.writeConcern).length>0&&(s.writeConcern=a.writeConcern),s.ordered=void 0==a.ordered||a.ordered):\"remove\"==t&&(c=\"delete\",s={delete:u,deletes:s},a.writeConcern&&Object.keys(a.writeConcern).length>0&&(s.writeConcern=a.writeConcern),s.ordered=void 0==a.ordered||a.ordered);var p=o.pop(),d=p.operationId||g.next(),f=this.s.pool.get(),h={command:s,databaseName:l,commandName:c,requestId:r,operationId:d,connectionId:f};-1!=m.indexOf(c.toLowerCase())&&(h.commandObj={},h.commandObj[c]=!0),v.emit(\"started\",h);var b=y.current();o.push(function(e,t){var n=y.current(),o={duration:y.duration(b,n),commandName:c,requestId:r,operationId:d,connectionId:f};e||t&&t.result&&0==t.result.ok?(o.failure=e||t.result.writeErrors||t.result,-1!=m.indexOf(c.toLowerCase())&&(o.failure={}),v.emit(\"failed\",o)):s&&s.writeConcern&&0==s.writeConcern.w?(o.reply={ok:1},v.emit(\"succeeded\",o)):(o.reply=t&&t.result?t.result:t,-1!=m.indexOf(c.toLowerCase())&&(o.reply={}),v.emit(\"succeeded\",o)),p(e,t)}),n.apply(this,o)}}),b=[\"execute\"];var w=[n(100).Bulk.prototype,n(99).Bulk.prototype];w.forEach(function(e){b.forEach(function(t){var n=e[t];v.overloads.push({proto:e,name:t,func:n}),e[t]=function(){var e=Array.prototype.slice.call(arguments,0);this.operationId=g.next();var t=e.pop();if(\"function\"!=typeof t)return n.apply(this,e);e.push(function(e,n){t(e,n)}),n.apply(this,e)}})}),b=[\"_find\",\"_getmore\",\"_killcursor\"];var S={_find:\"find\",_getmore:\"getMore\",_killcursor:\"killCursors\",_explain:\"explain\"};(w=[n(23).prototype,n(32).prototype,n(38).prototype]).forEach(function(t){b.forEach(function(n){var r=t[n];v.overloads.push({proto:t,name:n,func:r}),t[n]=function(){var t=this,o=e.Query.nextRequestId(),i=g.next(),s=this.ns.split(\".\"),a=s[0];s.shift();var c=s.join(\".\"),l=this.query,u=this.s.cmd;\"_find\"==n&&(t.operationId=i),\"_getmore\"==n?(l={getMore:this.cursorState.cursorId,collection:c,batchSize:u.batchSize},u.maxTimeMS&&(l.maxTimeMS=u.maxTimeMS)):\"_killcursor\"==n?l={killCursors:c,cursors:[this.cursorState.cursorId]}:u.find?(l={find:c,filter:u.query},u.sort&&(l.sort=u.sort),u.fields&&(l.projection=u.fields),u.limit&&u.limit<0?(l.limit=Math.abs(u.limit),l.singleBatch=!0):u.limit&&(l.limit=Math.abs(u.limit)),u.skip&&(l.skip=u.skip),u.hint&&(l.hint=u.hint),u.batchSize&&(l.batchSize=u.batchSize),\"boolean\"==typeof u.returnKey&&(l.returnKey=u.returnKey),u.comment&&(l.comment=u.comment),u.min&&(l.min=u.min),u.max&&(l.max=u.max),u.maxScan&&(l.maxScan=u.maxScan),u.maxTimeMS&&(l.maxTimeMS=u.maxTimeMS),\"boolean\"==typeof u.awaitData&&(l.awaitData=u.awaitData),\"boolean\"==typeof u.snapshot&&(l.snapshot=u.snapshot),\"boolean\"==typeof u.tailable&&(l.tailable=u.tailable),\"boolean\"==typeof u.oplogReplay&&(l.oplogReplay=u.oplogReplay),\"boolean\"==typeof u.noCursorTimeout&&(l.noCursorTimeout=u.noCursorTimeout),\"boolean\"==typeof u.partial&&(l.partial=u.partial),\"boolean\"==typeof u.showDiskLoc&&(l.showRecordId=u.showDiskLoc),u.readConcern&&(l.readConcern=u.readConcern),u.explain&&(l.explain=u.explain),u.exhaust&&(l.exhaust=u.exhaust),u.explain&&(l={explain:l,verbosity:\"allPlansExecution\"},u.readConcern&&(l.readConcern=u.readConcern),n=\"_explain\")):l=u;var p=null;this.connection&&(p=this.connection),!p&&this.server&&this.server.getConnection&&(p=this.server.getConnection());var d=\"_find\"==n?Object.keys(l)[0]:S[n];l={command:l,databaseName:a,commandName:d,requestId:o,operationId:this.operationId,connectionId:p};var f=Array.prototype.slice.call(arguments,0),h=f.pop();if(\"function\"!=typeof h&&\"killCursors\"!=l.commandName){f.push(h);var m=r.apply(this,f);return new t.s.promiseLibrary(function(e,n){var r=y.current();v.emit(\"started\",l),m.then(function(){var e={duration:y.duration(r,y.current()),commandName:d,requestId:o,operationId:t.operationId,connectionId:t.server.getConnection(),reply:t.cursorState.documents};v.emit(\"succeeded\",e)}).catch(function(e){var s={duration:y.duration(r,y.current()),commandName:d,requestId:o,operationId:i,connectionId:t.server.getConnection(),failure:e};v.emit(\"failed\",s),n(e)})})}var b=y.current();if(v.emit(\"started\",l),\"killCursors\"==l.commandName&&this.server.lastIsMaster()&&this.server.lastIsMaster().maxWireVersion<4)return l={duration:y.duration(b,y.current()),commandName:d,requestId:o,operationId:t.operationId,connectionId:t.server.getConnection(),reply:[{ok:1}]},f.push(h),r.apply(this,f),v.emit(\"succeeded\",l);f.push(function(e,n){if(e){var r={duration:y.duration(b,y.current()),commandName:d,requestId:o,operationId:i,connectionId:t.server.getConnection(),failure:e};v.emit(\"failed\",r)}else\"getmore\"==d.toLowerCase()&&null==n?n={cursor:{id:t.cursorState.cursorId,ns:t.ns,nextBatch:t.cursorState.documents},ok:1}:\"find\"!=d.toLowerCase()&&\"aggregate\"!=d.toLowerCase()&&\"listcollections\"!=d.toLowerCase()||null!=n?\"killcursors\"==d.toLowerCase()&&null==n&&(n={cursorsUnknown:[t.cursorState.lastCursorId],ok:1}):n={cursor:{id:t.cursorState.cursorId,ns:t.ns,firstBatch:t.cursorState.documents},ok:1},r={duration:y.duration(b,y.current()),commandName:d,requestId:o,operationId:t.operationId,connectionId:t.server.getConnection(),reply:n&&n.result?n.result:n},v.emit(\"succeeded\",r);h&&h(e,n)}),r.apply(this,f)}})})};o(g,r),g.prototype.uninstrument=function(){for(var e=0;e<this.overloads.length;e++){var t=this.overloads[e];t.proto[t.name]=t.func}this.removeAllListeners(\"started\"),this.removeAllListeners(\"succeeded\"),this.removeAllListeners(\"failed\")},e.exports=g},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(0).format,i=n(5).EventEmitter,s=n(66),a=n(27),c=n(14).retrieveBSON,l=n(8),u=n(106),p=n(72).assign,d=n(19).clone,f=(n(19),n(19).diff),h=n(19).cloneOptions,m=n(19).createClientInfo,g=c(),y=n(71),v=n(70),b=n(69),x=n(68),w=n(105),S=n(67),k=\"disconnected\",O=\"connecting\",C=\"connected\",_=\"unreferenced\",E=\"destroyed\";function I(e,t){var n={disconnected:[O,E,k],connecting:[O,E,C,k],connected:[C,k,E,_],unreferenced:[_,E],destroyed:[E]}[e.state];n&&-1!=n.indexOf(t)?e.state=t:e.logger.error(o(\"Pool with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]\",e.id,e.state,t,n))}var T=1,M=[\"connect\",\"close\",\"error\",\"timeout\",\"parseError\"],N=function(e,t){t=t||{},this.id=T++,this.s={options:p({},t),bson:t.bson||new g([g.Binary,g.Code,g.DBRef,g.Decimal128,g.Double,g.Int32,g.Long,g.Map,g.MaxKey,g.MinKey,g.ObjectId,g.BSONRegExp,g.Symbol,g.Timestamp]),Cursor:t.cursorFactory||s,logger:a(\"Mongos\",t),seedlist:e,haInterval:t.haInterval?t.haInterval:1e4,disconnectHandler:t.disconnectHandler,index:0,connectOptions:{},debug:\"boolean\"==typeof t.debug&&t.debug,localThresholdMS:t.localThresholdMS||15,clientInfo:m(t),authenticationContexts:[]},this.s.options.clientInfo=m(t),this.s.logger.isWarn()&&0!=this.s.options.socketTimeout&&this.s.options.socketTimeout<this.s.haInterval&&this.s.logger.warn(o(\"warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections due to socket timeouts\",this.s.options.socketTimeout,this.s.haInterval)),this.authProviders=t.authProviders||{mongocr:new y(this.s.bson),x509:new v(this.s.bson),plain:new b(this.s.bson),gssapi:new x(this.s.bson),sspi:new w(this.s.bson),\"scram-sha-1\":new S(this.s.bson)},this.state=k,this.connectingProxies=[],this.connectedProxies=[],this.disconnectedProxies=[],this.authenticating=!1,this.index=0,this.haTimeoutId=null,this.ismaster=null,this.topologyDescription={topologyType:\"Unknown\",servers:[]},i.call(this)};function A(e,t,n){e.listeners(t).length>0&&e.emit(t,n)}function B(e){return function(){e.state!=E&&(D(e.connectedProxies,e.disconnectedProxies,this),q(e),e.emit(\"left\",\"mongos\",this),e.emit(\"serverClosed\",{topologyId:e.id,address:this.name}))}}function j(e,t){return function(){var n=this;if(e.state==E)return q(e),D(e.connectingProxies,e.disconnectedProxies,this),this.destroy();if(\"connect\"==t?R(e,n,function(){if(e.ismaster=n.lastIsMaster(),\"isdbgrid\"==e.ismaster.msg){for(var t=0;t<e.connectedProxies.length;t++)if(e.connectedProxies[t].name==n.name)return D(e.connectingProxies,e.disconnectedProxies,n),q(e),n.destroy(),e.emit(\"failed\",n);for(t=0;t<M.length;t++)n.removeAllListeners(M[t]);n.on(\"error\",B(e)),n.on(\"close\",B(e)),n.on(\"timeout\",B(e)),n.on(\"parseError\",B(e)),D(e.connectingProxies,e.connectedProxies,n),e.emit(\"joined\",\"mongos\",n)}else{if(e.s.logger.isWarn()){var r=\"expected mongos proxy, but found replicaset member mongod for server %s\";e.ismaster.hosts||(r=\"expected mongos proxy, but found standalone mongod for server %s\"),e.s.logger.warn(o(r,n.name))}!function(e,t){for(var n=0;n<e.length;n++)e[n].name==t.name&&e.splice(n,1)}(e.connectingProxies,n),e.emit(\"left\",\"server\",n),e.emit(\"failed\",n)}}):(D(e.connectingProxies,e.disconnectedProxies,this),e.emit(\"left\",\"mongos\",this),e.emit(\"failed\",this)),q(e),0==e.connectingProxies.length){if(e.connectedProxies.length>0)I(e,C),e.emit(\"connect\",e),e.emit(\"fullsetup\",e),e.emit(\"all\",e);else if(0==e.disconnectedProxies.length)return e.s.logger.isWarn()&&e.s.logger.warn(o(\"no mongos proxies found in seed list, did you mean to connect to a replicaset\")),e.emit(\"error\",new l(\"no mongos proxies found in seed list\"));!function e(t,n){n=n||{};t.haTimeoutId=setTimeout(function(){if(t.state!=E&&t.state!=_){t.isConnected()&&t.s.disconnectHandler&&t.s.disconnectHandler.execute();var r=t.connectedProxies.slice(0),o=r.length;if(0==r.length)return t.listeners(\"close\").length>0&&t.state==O?t.emit(\"error\",new l(\"no mongos proxy available\")):t.emit(\"close\",t),L(t,t.disconnectedProxies,function(){t.state!=E&&t.state!=_&&(t.state==O&&n.firstConnect?(t.emit(\"connect\",t),t.emit(\"fullsetup\",t),t.emit(\"all\",t)):t.isConnected()?t.emit(\"reconnect\",t):!t.isConnected()&&t.listeners(\"close\").length>0&&t.emit(\"close\",t),e(t))});for(var i=0;i<r.length;i++)s(t,r[i],function(){if(0==(o-=1)){if(t.state==E||t.state==_)return;L(t,t.disconnectedProxies,function(){t.state!=E&&t.state!=_&&e(t)})}})}function s(e,n,r){var o=(new Date).getTime();A(t,\"serverHeartbeatStarted\",{connectionId:n.name}),n.command(\"admin.$cmd\",{ismaster:!0},{monitoring:!0,socketTimeout:t.s.options.connectionTimeout||2e3},function(e,i){if(t.state==E||t.state==_)return D(t.connectedProxies,t.disconnectedProxies,n),n.destroy(),r(e,i);var s=(new Date).getTime()-o;e?(A(t,\"serverHeartbeatFailed\",{durationMS:s,failure:e,connectionId:n.name}),D(t.connectedProxies,t.disconnectedProxies,n)):(n.ismaster=i.result,n.lastIsMasterMS=s,A(t,\"serverHeartbeatSucceeded\",{durationMS:s,reply:i.result,connectionId:n.name})),r(e,i)})}},t.s.haInterval)}(e,{firstConnect:!0})}}}function P(e){for(var t=e.connectedProxies.slice(0),n=Number.MAX_VALUE,r=0;r<t.length;r++)t[r].lastIsMasterMS<n&&(n=t[r].lastIsMasterMS);if(0==(t=t.filter(function(t){if(t.lastIsMasterMS<=n+e.s.localThresholdMS&&t.isConnected())return!0})).length)return e.connectedProxies[0];var o=t[e.index%t.length];return e.index=(e.index+1)%t.length,o}function D(e,t,n){for(var r=0;r<e.length;r++)e[r].name==n.name&&e.splice(r,1);for(r=0;r<t.length;r++)t[r].name==n.name&&t.splice(r,1);t.push(n)}function L(e,t,n){var r=t.length,o=function(e,t){return function(){var o=this;if(r-=1,e.state==E||e.state==_)return D(e.connectingProxies,e.disconnectedProxies,o),this.destroy();\"connect\"!=t||e.authenticating?\"connect\"==t&&e.authenticating&&(D(e.connectingProxies,e.disconnectedProxies,o),this.destroy()):R(e,o,function(){if(e.state==E||e.state==_)return D(e.connectingProxies,e.disconnectedProxies,o),o.destroy();for(var t=0;t<M.length;t++)o.removeAllListeners(M[t]);o.on(\"error\",B(e)),o.on(\"close\",B(e)),o.on(\"timeout\",B(e)),o.on(\"parseError\",B(e)),D(e.disconnectedProxies,e.connectedProxies,o),q(e),e.emit(\"joined\",\"mongos\",o)}),0==r&&n()}};if(0==r)return n();function i(t,n){setTimeout(function(){if(e.state!=E&&e.state!=_){var n=new u(p({},e.s.options,{host:t.name.split(\":\")[0],port:parseInt(t.name.split(\":\")[1],10)},{authProviders:e.authProviders,reconnect:!1,monitoring:!1,inTopology:!0},{clientInfo:d(e.s.clientInfo)}));n.on(\"serverDescriptionChanged\",function(t){e.emit(\"serverDescriptionChanged\",t)}),e.emit(\"serverOpening\",{topologyId:-1!=n.s.topologyId?n.s.topologyId:e.id,address:n.name}),n.once(\"connect\",o(e,\"connect\")),n.once(\"close\",o(e,\"close\")),n.once(\"timeout\",o(e,\"timeout\")),n.once(\"error\",o(e,\"error\")),n.once(\"parseError\",o(e,\"parseError\")),n.connect(e.s.connectOptions)}},n)}for(var s=0;s<t.length;s++)i(t[s],s)}function R(e,t,n){if(0==e.s.authenticationContexts.length)return n();!function e(t,n,r){if(0==t.length)return r();var o=t.shift().slice(0);o.push(function(o){e(t,n,r)}),n.auth.apply(n,o)}(e.s.authenticationContexts.slice(0),t,n)}r(N,i),Object.defineProperty(N.prototype,\"type\",{enumerable:!0,get:function(){return\"mongos\"}}),Object.defineProperty(N.prototype,\"parserType\",{enumerable:!0,get:function(){return g.native?\"c++\":\"js\"}}),N.prototype.connect=function(e){var t=this;this.s.connectOptions=e||{},I(this,O);var n=this.s.seedlist.map(function(e){return new u(p({},t.s.options,e,{authProviders:t.authProviders,reconnect:!1,monitoring:!1,inTopology:!0},{clientInfo:d(t.s.clientInfo)}))});n.forEach(function(e){e.on(\"serverDescriptionChanged\",function(e){t.emit(\"serverDescriptionChanged\",e)})}),A(this,\"topologyOpening\",{topologyId:this.id}),function(e,t){e.connectingProxies=e.connectingProxies.concat(t);var n=0;function r(t,n){setTimeout(function(){e.emit(\"serverOpening\",{topologyId:e.id,address:t.name}),q(e),t.once(\"close\",j(e,\"close\")),t.once(\"timeout\",j(e,\"timeout\")),t.once(\"parseError\",j(e,\"parseError\")),t.once(\"error\",j(e,\"error\")),t.once(\"connect\",j(e,\"connect\")),t.connect(e.s.connectOptions)},n)}for(;t.length>0;)r(t.shift(),n++)}(t,n)},N.prototype.lastIsMaster=function(){return this.ismaster},N.prototype.unref=function(){I(this,_),this.connectedProxies.concat(this.connectingProxies).forEach(function(e){e.unref()}),clearTimeout(this.haTimeoutId)},N.prototype.destroy=function(e){var t=this;I(this,E);var n=this.connectedProxies.concat(this.connectingProxies);this.haTimeoutId&&clearTimeout(this.haTimeoutId),this.s.authenticationContexts=[],n.forEach(function(n){t.emit(\"serverClosed\",{topologyId:t.id,address:n.name}),n.destroy(e),D(t.connectedProxies,t.disconnectedProxies,n)}),q(t),A(this,\"topologyClosed\",{topologyId:this.id})},N.prototype.isConnected=function(){return this.connectedProxies.length>0},N.prototype.isDestroyed=function(){return this.state==E};var z=function(e,t,n,r,o,i){\"function\"==typeof o&&(i=o,o=(o={})||{}),o=o||{};var s=P(e);if(!s)return i(new l(\"no mongos proxy available\"));s[t](n,r,o,i)};function q(e){if(e.listeners(\"topologyDescriptionChanged\").length>0){var t=\"Unknown\";e.setName;e.connectedProxies.length>0&&(t=\"Sharded\");var n={topologyType:t,servers:[]},r=e.disconnectedProxies.concat(e.connectingProxies);n.servers=n.servers.concat(r.map(function(e){var t=e.getDescription();return t.type=\"Unknown\",t})),n.servers=n.servers.concat(e.connectedProxies.map(function(e){var t=e.getDescription();return t.type=\"Mongos\",t}));var o=f(e.topologyDescription,n),i={topologyId:e.id,previousDescription:e.topologyDescription,newDescription:n,diff:o};o.servers.length>0&&e.emit(\"topologyDescriptionChanged\",i),e.topologyDescription=n}}N.prototype.insert=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state==E?r(new l(o(\"topology was destroyed\"))):this.isConnected()||null==this.s.disconnectHandler?this.isConnected()?void z(this,\"insert\",e,t,n,r):r(new l(\"no mongos proxy available\")):this.s.disconnectHandler.add(\"insert\",e,t,n,r)},N.prototype.update=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state==E?r(new l(o(\"topology was destroyed\"))):this.isConnected()||null==this.s.disconnectHandler?this.isConnected()?void z(this,\"update\",e,t,n,r):r(new l(\"no mongos proxy available\")):this.s.disconnectHandler.add(\"update\",e,t,n,r)},N.prototype.remove=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state==E?r(new l(o(\"topology was destroyed\"))):this.isConnected()||null==this.s.disconnectHandler?this.isConnected()?void z(this,\"remove\",e,t,n,r):r(new l(\"no mongos proxy available\")):this.s.disconnectHandler.add(\"remove\",e,t,n,r)},N.prototype.command=function(e,t,n,r){if(\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state==E)return r(new l(o(\"topology was destroyed\")));var i=P(this);if((null==i||!i.isConnected())&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,n,r);if(null==i)return r(new l(\"no mongos proxy available\"));var s=h(n);s.topology=this,i.command(e,t,s,r)},N.prototype.cursor=function(e,t,n){return new((n=n||{}).cursorFactory||this.s.Cursor)(this.s.bson,e,t,n,this,this.s.options)},N.prototype.auth=function(e,t){var n=Array.prototype.slice.call(arguments,0).slice(0),r=this,i=Array.prototype.slice.call(arguments,2),s=i.pop(),a=0;if(null==this.authProviders[e]&&\"default\"!=e)return s(new l(o(\"auth provider %s does not exist\",e)));if(this.authenticating)return s(new l(\"authentication or logout allready in process\"));if(!r.isConnected()&&null!=r.s.disconnectHandler)return r.s.disconnectHandler.add(\"auth\",t,n,{},s);this.authenticating=!0;var c=[],u=this.connectedProxies.slice(0);function p(n){var o=[e,t].concat(i.slice(0)).concat([function(e){if(d-=1,e&&c.push({name:n.name,err:e}),0==d){if(r.authenticating=!1,c.length)return r.s.authenticationContexts.splice(a,0),s(l.create({message:\"authentication fail\",errors:c}),!1);s(null,r)}}]);n.lastIsMaster().arbiterOnly||n.auth.apply(n,o)}0==u.length&&(this.authenticating=!1,s(null,!0)),a=this.s.authenticationContexts.length,this.s.authenticationContexts.push([e,t].concat(i.slice(0)));for(var d=u.length;u.length>0;)p(u.shift())},N.prototype.logout=function(e,t){var n=this;if(this.authenticating)throw new l(\"authentication or logout allready in process\");this.authenticating=!0;for(var r=Object.keys(this.authProviders),i=0;i<r.length;i++)this.authProviders[r[i]].logout(e);var s=this.connectedProxies.slice(0),a=s.length;if(0==a)return t();var c=[];function u(t,n){t.logout(e,function(e){e&&c.push({name:t.name,err:e}),n()})}for(i=0;i<s.length;i++)u(s[i],function(){if(0==(a-=1)){if(n.authenticating=!1,c.length)return t(l.create({message:o(\"logout failed against db %s\",e),errors:c}),!1);t()}})},N.prototype.getServer=function(){var e=P(this);return this.s.debug&&this.emit(\"pickedServer\",null,e),e},N.prototype.getConnection=function(){var e=this.getServer();if(e)return e.getConnection()},N.prototype.connections=function(){for(var e=[],t=0;t<this.connectedProxies.length;t++)e=e.concat(this.connectedProxies[t].connections());return e},e.exports=N},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(0).format,i=n(19).diff,s=n(5).EventEmitter,a=n(27),c=n(45),l=n(8),u=\"ReplicaSetNoPrimary\",p=\"ReplicaSetWithPrimary\",d=\"Unknown\",f=\"PossiblePrimary\",h=\"RSPrimary\",m=\"RSSecondary\",g=\"RSArbiter\",y=\"RSOther\",v=\"RSGhost\",b=\"Unknown\",x=function(e){e=e||{},s.call(this),this.topologyType=u,this.setName=e.setName,this.set={},this.id=e.id,this.setName=e.setName,this.logger=e.logger||a(\"ReplSet\",e),this.index=0,this.acceptableLatency=e.acceptableLatency||15,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS||1e4,this.primary=null,this.secondaries=[],this.arbiters=[],this.passives=[],this.ghosts=[],this.unknownServers=[],this.set={},this.maxElectionId=null,this.maxSetVersion=0,this.replicasetDescription={topologyType:\"Unknown\",servers:[]}};r(x,s),x.prototype.hasPrimaryAndSecondary=function(){return null!=this.primary&&this.secondaries.length>0},x.prototype.hasPrimaryOrSecondary=function(){return this.hasPrimary()||this.hasSecondary()},x.prototype.hasPrimary=function(){return null!=this.primary},x.prototype.hasSecondary=function(){return this.secondaries.length>0},x.prototype.get=function(e){for(var t=this.allServers(),n=0;n<t.length;n++)if(t[n].name.toLowerCase()===e.toLowerCase())return t[n];return null},x.prototype.allServers=function(e){e=e||{};var t=this.primary?[this.primary]:[];return t=t.concat(this.secondaries),e.ignoreArbiters||(t=t.concat(this.arbiters)),t=t.concat(this.passives)},x.prototype.destroy=function(e){this.primary&&this.primary.destroy(e),this.secondaries.forEach(function(t){t.destroy(e)}),this.arbiters.forEach(function(t){t.destroy(e)}),this.passives.forEach(function(t){t.destroy(e)}),this.ghosts.forEach(function(t){t.destroy(e)}),this.secondaries=[],this.arbiters=[],this.passives=[],this.ghosts=[],this.unknownServers=[],this.set={},this.primary=null,I(this)},x.prototype.remove=function(e,t){t=t||{};var n=e.name.toLowerCase(),r=this.primary?[this.primary]:[];r=(r=(r=r.concat(this.secondaries)).concat(this.arbiters)).concat(this.passives);for(var o=0;o<r.length;o++)if(!t.force&&r[o].equals(e)&&r[o].isConnected&&r[o].isConnected())return;this.set[n]&&(this.set[n].type=b,this.set[n].electionId=null,this.set[n].setName=null,this.set[n].setVersion=null);var i=null;this.primary&&this.primary.equals(e)&&(this.primary=null,this.topologyType=u,i=\"primary\"),i=E(e,this.secondaries)?\"secondary\":i,i=E(e,this.arbiters)?\"arbiter\":i,i=E(e,this.passives)?\"secondary\":i,E(e,this.ghosts),E(e,this.unknownServers),this.unknownServers.push(n),i&&this.emit(\"left\",i,e)},x.prototype.update=function(e){var t=e.lastIsMaster(),n=e.name.toLowerCase();if(t){var r=Array.isArray(t.hosts)?t.hosts:[];r=(r=(r=r.concat(Array.isArray(t.arbiters)?t.arbiters:[])).concat(Array.isArray(t.passives)?t.passives:[])).map(function(e){return e.toLowerCase()});for(var i=0;i<r.length;i++)-1!=this.unknownServers.indexOf(r[i])||this.set[r[i]]&&this.set[r[i]].type!=b||this.unknownServers.push(r[i].toLowerCase()),this.set[r[i]]||(this.set[r[i]]={type:b,electionId:null,setName:null,setVersion:null})}if(!t&&!O(t,e,this.unknownServers))return this.set[n]={type:b,setVersion:null,electionId:null,setName:null},this.set[n].type=b,this.set[n].electionId=t?t.electionId:t,this.set[n].setName=t?t.setName:t,this.set[n].setVersion=t?t.setVersion:t,-1==this.unknownServers.indexOf(e.name)&&this.unknownServers.push(n),!1;if(t&&\"isdbgrid\"==t.msg)return!1;if(t.setName&&t.hidden||t.setName&&!t.ismaster&&!t.secondary&&!t.arbiterOnly&&!t.passive)return this.set[n]={type:y,setVersion:null,electionId:null,setName:t.setName},this.topologyType=this.primary?p:u,t.setName&&(this.setName=t.setName),!1;if(t.isreplicaset)return this.set[n]={type:v,setVersion:null,electionId:null,setName:null},this.topologyType=this.primary?p:u,t.setName&&(this.setName=t.setName),!1;if(t&&t.ismaster&&!t.setName)return this.topologyType=this.primary?p:d,this.remove(e,{force:!0}),!1;if(t&&!t.ismaster&&!t.secondary&&!t.arbiterOnly)return this.remove(e,{force:!0}),!1;if(t.me&&t.me.toLowerCase()!=n)return this.logger.isWarn()&&this.logger.warn(o(\"the seedlist server was removed due to its address %s not matching its ismaster.me address %s\",e.name,t.me)),delete this.set[n],E(e,this.unknownServers),e.destroy(),this.primary&&!this.primary.equals(e)?this.topologyType=p:this.topologyType=u,!this.primary&&t.primary&&(this.set[t.primary.toLowerCase()]={type:f,setName:null,electionId:null,setVersion:null}),!1;if(!this.primary&&t.ismaster&&t.setName){var s=e.lastIsMaster().electionId;if(this.setName&&this.setName!=t.setName)return this.topologyType=u,new l(o(\"setName from ismaster does not match provided connection setName [%s] != [%s]\",t.setName,this.setName));if(!this.maxElectionId&&s)this.maxElectionId=s;else if(this.maxElectionId&&s){var a=_(this.maxElectionId,s),c=e.lastIsMaster().setVersion;if(1==a)return this.topologyType=u,!1;if(0==a&&c&&c<this.maxSetVersion)return this.topologyType=u,!1;this.maxSetVersion=c,this.maxElectionId=s}return-1!=t.hosts.map(function(e){return e.toLowerCase()}).indexOf(n)?(this.primary=e,this.set[n]={type:h,setVersion:t.setVersion,electionId:t.electionId,setName:t.setName},this.topologyType=p,t.setName&&(this.setName=t.setName),E(e,this.unknownServers),E(e,this.secondaries),E(e,this.passives),this.emit(\"joined\",\"primary\",e)):this.topologyType=u,I(this),!0}if(t.ismaster&&t.setName){var x=this.set[this.primary.name.toLowerCase()].electionId,w=this.set[this.primary.name.toLowerCase()].setVersion,S=this.set[this.primary.name.toLowerCase()].setName;s=e.lastIsMaster().electionId,c=e.lastIsMaster().setVersion;var k=e.lastIsMaster().setName;if(this.primary.equals(e)&&S==k)return!1;if(S&&S!=k)return this.primary.equals(e)?this.topologyType=u:this.topologyType=p,!1;if(x&&s){if(1==(a=_(x,s)))return!1;if(0==a&&w>c)return!1}else if(!x&&s&&c&&c<this.maxSetVersion)return!1;if(!this.maxElectionId&&s)this.maxElectionId=s;else if(this.maxElectionId&&s){if(1==(a=_(this.maxElectionId,s)))return!1;if(0==a&&w&&c){if(c<this.maxSetVersion)return!1}else if(c<this.maxSetVersion)return!1;this.maxElectionId=s,this.maxSetVersion=c}else this.maxSetVersion=c;return this.set[this.primary.name.toLowerCase()]={type:b,setVersion:null,electionId:null,setName:null},this.emit(\"left\",\"primary\",this.primary),this.primary.destroy(),this.primary=e,this.set[n]={type:h,setVersion:t.setVersion,electionId:t.electionId,setName:t.setName},this.topologyType=p,t.setName&&(this.setName=t.setName),E(e,this.unknownServers),E(e,this.secondaries),E(e,this.passives),this.emit(\"joined\",\"primary\",e),I(this),!0}return!this.primary&&t.primary&&(this.set[t.primary.toLowerCase()]={type:f,setVersion:null,electionId:null,setName:null}),t.secondary&&t.setName&&!O(t,e,this.secondaries)&&this.setName&&this.setName==t.setName?(C(this,m,t,e,this.secondaries),this.topologyType=this.primary?p:u,t.setName&&(this.setName=t.setName),E(e,this.unknownServers),this.primary&&this.primary.name.toLowerCase()==n&&(e.destroy(),this.primary=null,this.emit(\"left\",\"primary\",e)),this.emit(\"joined\",\"secondary\",e),I(this),!0):t.arbiterOnly&&t.setName&&!O(t,e,this.arbiters)&&this.setName&&this.setName==t.setName?(C(this,g,t,e,this.arbiters),this.topologyType=this.primary?p:u,t.setName&&(this.setName=t.setName),E(e,this.unknownServers),this.emit(\"joined\",\"arbiter\",e),I(this),!0):t.passive&&t.setName&&!O(t,e,this.passives)&&this.setName&&this.setName==t.setName?(C(this,m,t,e,this.passives),this.topologyType=this.primary?p:u,t.setName&&(this.setName=t.setName),E(e,this.unknownServers),this.primary&&this.primary.name.toLowerCase()==n&&(e.destroy(),this.primary=null,this.emit(\"left\",\"primary\",e)),this.emit(\"joined\",\"secondary\",e),I(this),!0):this.set[n]&&this.set[n].type==h?(this.emit(\"left\",\"primary\",this.primary),this.primary.destroy(),this.primary=null,this.topologyType=u,!1):(this.topologyType=this.primary?p:u,!1)},x.prototype.updateServerMaxStaleness=function(e,t){for(var n=0,r=0;r<this.secondaries.length;r++)n=Math.max(n,this.secondaries[r].lastWriteDate);e.ismaster.maxWireVersion>=5&&e.ismaster.secondary&&this.hasPrimary()?e.staleness=e.lastUpdateTime-e.lastWriteDate-(this.primary.lastUpdateTime-this.primary.lastWriteDate)+t:e.ismaster.maxWireVersion>=5&&e.ismaster.secondary&&(e.staleness=n-e.lastWriteDate+t)},x.prototype.updateSecondariesMaxStaleness=function(e){for(var t=0;t<this.secondaries.length;t++)this.updateServerMaxStaleness(this.secondaries[t],e)},x.prototype.pickServer=function(e){if(\"primary\"==(e=e||c.primary).preference&&null!=e.maxStalenessSeconds)return new l(\"primary readPreference incompatible with maxStalenessSeconds\");var t=this.primary?[this.primary]:[];if(t=t.concat(this.secondaries),null!=e.maxStalenessSeconds)for(var n=0;n<t.length;n++)if(t[n].ismaster.maxWireVersion<5)return new l(\"maxStalenessSeconds not supported by at least one of the replicaset members\");if(\"nearest\"==e.preference&&null==e.maxStalenessSeconds)return k(this,e);if(\"nearest\"==e.preference&&null!=e.maxStalenessSeconds)return S(this,e);var r=this.secondaries;if(e.equals(c.secondary)&&0==r.length)return new l(\"no secondary server available\");if(e.equals(c.secondaryPreferred)&&0==r.length&&null==this.primary)return new l(\"no secondary or primary server available\");if(e.equals(c.primary)&&null==this.primary)return new l(\"no primary server available\");if(e.equals(c.secondaryPreferred)||e.equals(c.secondary)){if(r.length>0&&null==e.maxStalenessSeconds){var o=k(this,e);if(o)return o}else if(r.length>0&&null!=e.maxStalenessSeconds&&(o=S(this,e)))return o;return e.equals(c.secondaryPreferred)?this.primary:null}if(e.equals(c.primaryPreferred)){if(o=null,this.primary)return this.primary;if(r.length>0&&null==e.maxStalenessSeconds?o=k(this,e):r.length>0&&null!=e.maxStalenessSeconds&&(o=S(this,e)),o)return o}return this.primary};var w=function(e,t){if(null==e.tags)return t;for(var n=[],r=Array.isArray(e.tags)?e.tags:[e.tags],o=0;o<r.length;o++)for(var i=r[o],s=0;s<t.length;s++){var a=t[s].lastIsMaster().tags||{},c=!0;for(var l in i)a[l]!=i[l]&&(c=!1);c&&n.push(t[s])}return n};function S(e,t){var n=[],r=(e.heartbeatFrequencyMS,1e3*t.maxStalenessSeconds);if(r<9e4)return new l(\"maxStalenessSeconds must be set to at least 90 seconds\");e.primary&&\"secondary\"!=t.preference&&\"secondaryPreferred\"!=t.preference&&n.push(e.primary);for(var o=0;o<e.secondaries.length;o++)n.push(e.secondaries[o]);if(e.primary&&0==n.length&&\"secondaryPreferred\"!=t.preference&&n.push(e.primary),(n=(n=w(t,n)).filter(function(e){return e.staleness<=r})).sort(function(e,t){return e.lastIsMasterMS>t.lastIsMasterMS}),0==n.length)return null;e.index=e.index%n.length;var i=n[e.index];return e.index=e.index+1,i}function k(e,t){var n=[];e.primary&&\"secondary\"!=t.preference&&\"secondaryPreferred\"!=t.preference&&n.push(e.primary);for(var r=0;r<e.secondaries.length;r++)n.push(e.secondaries[r]);0==n.length&&e.primary&&\"secondaryPreferred\"!=t.preference&&n.push(e.primary),(n=w(t,n)).sort(function(e,t){return e.lastIsMasterMS>t.lastIsMasterMS});var o=n.length>0?n[0].lastIsMasterMS:0;if(0==(n=n.filter(function(t){return t.lastIsMasterMS<=o+e.acceptableLatency})).length)return null;e.index=e.index%n.length;var i=n[e.index];return e.index=e.index+1,i}function O(e,t,n){for(var r=0;r<n.length;r++)if(n[r]&&n[r].name&&n[r].name.toLowerCase()==t.name.toLowerCase())return!0;return!1}function C(e,t,n,r,o){var i=r.name.toLowerCase();e.set[i].type=t,e.set[i].electionId=n?n.electionId:n,e.set[i].setName=n?n.setName:n,e.set[i].setVersion=n?n.setVersion:n,o.push(r)}function _(e,t){var n=new Buffer(e.toHexString(),\"hex\"),r=new Buffer(t.toHexString(),\"hex\");if(n===r)return 0;if(\"function\"==typeof Buffer.compare)return Buffer.compare(n,r);for(var o=n.length,i=r.length,s=Math.min(o,i),a=0;a<s&&n[a]===r[a];a++);return a!==s&&(o=n[a],i=r[a]),o<i?-1:i<o?1:0}function E(e,t){for(var n=0;n<t.length;n++){if(t[n].equals&&t[n].equals(e))return t.splice(n,1),!0;if(\"string\"==typeof t[n]&&t[n].toLowerCase()==e.name.toLowerCase())return t.splice(n,1),!0}return!1}function I(e){if(e.listeners(\"topologyDescriptionChanged\").length>0){var t=\"Unknown\",n=e.setName;e.hasPrimaryAndSecondary()?t=\"ReplicaSetWithPrimary\":!e.hasPrimary()&&e.hasSecondary()&&(t=\"ReplicaSetNoPrimary\");var r={topologyType:t,setName:n,servers:[]};if(e.hasPrimary()){var o=e.primary.getDescription();o.type=\"RSPrimary\",r.servers.push(o)}r.servers=r.servers.concat(e.secondaries.map(function(e){var t=e.getDescription();return t.type=\"RSSecondary\",t})),r.servers=r.servers.concat(e.arbiters.map(function(e){var t=e.getDescription();return t.type=\"RSArbiter\",t})),r.servers=r.servers.concat(e.passives.map(function(e){var t=e.getDescription();return t.type=\"RSSecondary\",t}));var s=i(e.replicasetDescription,r),a={topologyId:e.id,previousDescription:e.replicasetDescription,newDescription:r,diff:s};e.emit(\"topologyDescriptionChanged\",a),e.replicasetDescription=r}}e.exports=x},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(0).format,i=n(5).EventEmitter,s=n(45),a=n(66),c=n(14).retrieveBSON,l=n(27),u=n(8),p=n(106),d=n(186),f=n(72).assign,h=n(19).clone,m=n(19).Timeout,g=n(19).Interval,y=n(19).createClientInfo,v=n(71),b=n(70),x=n(69),w=n(68),S=n(105),k=n(67),O=c(),C=\"disconnected\",_=\"connecting\",E=\"connected\",I=\"unreferenced\",T=\"destroyed\";function M(e,t){var n={disconnected:[_,T,C],connecting:[_,T,E,C],connected:[E,C,T,I],unreferenced:[I,T],destroyed:[T]}[e.state];n&&-1!=n.indexOf(t)?e.state=t:e.s.logger.error(o(\"Pool with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]\",e.id,e.state,t,n))}var N=1,A=[\"connect\",\"close\",\"error\",\"timeout\",\"parseError\"],B=function(e,t){var n=this;if(t=t||{},!Array.isArray(e))throw new u(\"seedlist must be an array\");if(0==e.length)throw new u(\"seedlist must contain at least one entry\");e.forEach(function(e){if(\"string\"!=typeof e.host||\"number\"!=typeof e.port)throw new u(\"seedlist entry must contain a host and port\")}),i.call(this),this.id=N++;var r=t.localThresholdMS||15;t.acceptableLatency&&(r=t.acceptableLatency);var s=l(\"ReplSet\",t);this.s={options:f({},t),bson:t.bson||new O([O.Binary,O.Code,O.DBRef,O.Decimal128,O.Double,O.Int32,O.Long,O.Map,O.MaxKey,O.MinKey,O.ObjectId,O.BSONRegExp,O.Symbol,O.Timestamp]),Cursor:t.cursorFactory||a,logger:s,seedlist:e,replicaSetState:new d({id:this.id,setName:t.setName,acceptableLatency:r,heartbeatFrequencyMS:t.haInterval?t.haInterval:1e4,logger:s}),connectingServers:[],haInterval:t.haInterval?t.haInterval:1e4,minHeartbeatFrequencyMS:500,disconnectHandler:t.disconnectHandler,index:0,connectOptions:{},debug:\"boolean\"==typeof t.debug&&t.debug,clientInfo:y(t),authenticationContexts:[]},this.s.replicaSetState.on(\"topologyDescriptionChanged\",function(e){n.emit(\"topologyDescriptionChanged\",e)}),this.s.logger.isWarn()&&0!=this.s.options.socketTimeout&&this.s.options.socketTimeout<this.s.haInterval&&this.s.logger.warn(o(\"warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections due to socket timeouts\",this.s.options.socketTimeout,this.s.haInterval)),this.authProviders=t.authProviders||{mongocr:new v(this.s.bson),x509:new b(this.s.bson),plain:new x(this.s.bson),gssapi:new w(this.s.bson),sspi:new S(this.s.bson),\"scram-sha-1\":new k(this.s.bson)};[\"joined\",\"left\"].forEach(function(e){n.s.replicaSetState.on(e,function(t,r){n.emit(e,t,r)})}),this.initialConnectState={connect:!1,fullsetup:!1,all:!1},this.state=C,this.haTimeoutId=null,this.authenticating=!1,this.ismaster=null,this.intervalIds=[]};function j(e){e.s.replicaSetState.hasPrimaryAndSecondary()&&e.s.disconnectHandler?e.s.disconnectHandler.execute():e.s.replicaSetState.hasPrimary()&&e.s.disconnectHandler?e.s.disconnectHandler.execute({executePrimary:!0}):e.s.replicaSetState.hasSecondary()&&e.s.disconnectHandler&&e.s.disconnectHandler.execute({executeSecondary:!0})}function P(e,t,n){var r=t.length,o=null,i=function(e,t){return function(i){var s=this;if(r-=1,e.state==T||e.state==I)return this.destroy({force:!0});if(\"connect\"!=t||e.authenticating)\"connect\"==t&&e.authenticating?this.destroy({force:!0}):\"error\"==t&&(o=i);else{if(e.state==T||e.state==I)return s.destroy({force:!0});q(e,s,function(){if(e.state==T||e.state==I)return s.destroy({force:!0});if(e.s.replicaSetState.update(s)){s.lastIsMaster()&&s.lastIsMaster().ismaster&&(e.ismaster=s.lastIsMaster());for(var t=0;t<A.length;t++)s.removeAllListeners(A[t]);s.on(\"error\",z(e,\"error\")),s.on(\"close\",z(e,\"close\")),s.on(\"timeout\",z(e,\"timeout\")),s.on(\"parseError\",z(e,\"parseError\")),D(s.lastIsMaster().me,e,{}),j(e)}else s.destroy({force:!0})})}j(e),0==r&&n(o)}};if(0==r)return n();function s(t,n){setTimeout(function(){if(e.state!=T&&e.state!=I){var n=new p(f({},e.s.options,{host:t.split(\":\")[0],port:parseInt(t.split(\":\")[1],10)},{authProviders:e.authProviders,reconnect:!1,monitoring:!1,inTopology:!0},{clientInfo:h(e.s.clientInfo)}));n.once(\"connect\",i(e,\"connect\")),n.once(\"close\",i(e,\"close\")),n.once(\"timeout\",i(e,\"timeout\")),n.once(\"error\",i(e,\"error\")),n.once(\"parseError\",i(e,\"parseError\")),n.on(\"serverOpening\",function(t){e.emit(\"serverOpening\",t)}),n.on(\"serverDescriptionChanged\",function(t){e.emit(\"serverDescriptionChanged\",t)}),n.on(\"serverClosed\",function(t){e.emit(\"serverClosed\",t)}),n.connect(e.s.connectOptions)}},n)}for(var a=0;a<t.length;a++)s(t[a],a)}r(B,i),Object.defineProperty(B.prototype,\"type\",{enumerable:!0,get:function(){return\"replset\"}}),Object.defineProperty(B.prototype,\"parserType\",{enumerable:!0,get:function(){return O.native?\"c++\":\"js\"}});var D=function(e,t,n){if(!n.haInterval)for(var r=0;r<t.intervalIds.length;r++)if(t.intervalIds[r].__host===e)return;var o=n.haInterval?m:g,i=n.haInterval?n.haInterval:t.s.haInterval,s=new o(function(){if(t.state!=T&&t.state!=I){var n=t.s.replicaSetState.get(e);return n?function(e,t,n){var r=(new Date).getTime();F(e,\"serverHeartbeatStarted\",{connectionId:t.name}),t.command(\"admin.$cmd\",{ismaster:!0},{monitoring:!0,socketTimeout:e.s.options.connectionTimeout||2e3},function(o,i){if(e.state==T||e.state==I)return t.destroy({force:!0}),n(o,i);var s=(new Date).getTime()-r,a=process.hrtime();t.lastUpdateTime=1e3*a[0]+Math.round(a[1]/1e3),o?(F(e,\"serverHeartbeatFailed\",{durationMS:s,failure:o,connectionId:t.name}),e.s.replicaSetState.remove(t)):(t.ismaster=i.result,t.ismaster.lastWrite&&t.ismaster.lastWrite.lastWriteDate&&(t.lastWriteDate=t.ismaster.lastWrite.lastWriteDate.getTime()),-1==t.lastIsMasterMS?t.lastIsMasterMS=s:t.lastIsMasterMS&&(t.lastIsMasterMS=.2*s+.8*t.lastIsMasterMS),e.s.replicaSetState.update(t)&&t.lastIsMaster()&&t.lastIsMaster().ismaster&&(e.ismaster=t.lastIsMaster()),F(e,\"serverHeartbeatSucceeded\",{durationMS:s,reply:i.result,connectionId:t.name})),e.s.replicaSetState.updateServerMaxStaleness(t,e.s.haInterval),n(o,i)})}(t,n,function(e){t.state!=T&&t.state!=I?(t.intervalIds=t.intervalIds.filter(function(e){return e.isRunning()}),o===m?t.state==_&&(t.s.replicaSetState.hasSecondary()&&t.s.options.secondaryOnlyConnectionAllowed||t.s.replicaSetState.hasPrimary())&&(t.state=E,process.nextTick(function(){t.emit(\"connect\",t)}),L(t,{})):t.state==C&&(t.s.replicaSetState.hasSecondary()&&t.s.options.secondaryOnlyConnectionAllowed||t.s.replicaSetState.hasPrimary())&&(t.state=E,j(t),process.nextTick(function(){t.emit(\"reconnect\",t)})),t.initialConnectState.connect&&!t.initialConnectState.fullsetup&&t.s.replicaSetState.hasPrimaryAndSecondary()&&(t.initialConnectState.fullsetup=!0,t.initialConnectState.all=!0,process.nextTick(function(){t.emit(\"fullsetup\",t),t.emit(\"all\",t)}))):s.stop()}):void 0}s.stop()},i);s.start(),s.__host=e,t.intervalIds.push(s)};function L(e,t){if(e.state!=T&&e.state!=I){t=t||{};var n=Object.keys(e.s.replicaSetState.set),r=t.haInterval?m:g,o=t.haInterval?t.haInterval:e.s.haInterval;if(r===m)return P(e,e.s.replicaSetState.unknownServers,function(r){if(e.state!==T&&e.state!==I){if(!e.s.replicaSetState.hasPrimary()&&!e.s.options.secondaryOnlyConnectionAllowed)return r?e.emit(\"error\",r):(e.emit(\"error\",new u(\"no primary found in replicaset or invalid replica set name\")),e.destroy({force:!0}));if(!e.s.replicaSetState.hasSecondary()&&e.s.options.secondaryOnlyConnectionAllowed)return r?e.emit(\"error\",r):(e.emit(\"error\",new u(\"no secondary found in replicaset or invalid replica set name\")),e.destroy({force:!0}));for(var o=0;o<n.length;o++)D(n[o],e,t)}});for(var i=0;i<n.length;i++)D(n[i],e,t);var s=e.s.replicaSetState.hasPrimary()?o:e.s.minHeartbeatFrequencyMS;e.intervalIds.push(new m(function e(t){return function(){t.state!=T&&t.state!=I&&P(t,t.s.replicaSetState.unknownServers,function(){var n=t.s.replicaSetState.hasPrimary()?o:t.s.minHeartbeatFrequencyMS;t.intervalIds.push(new m(e(t),n).start())})}}(e),s).start())}}function R(e,t){for(var n=0;n<e.length;n++)if(e[n].name.toLowerCase()===t.name.toLowerCase())return!0;e.push(t)}function z(e,t){return function(){e.state!=T&&e.state!=I&&(e.s.logger.isDebug()&&e.s.logger.debug(o(\"handleEvent %s from server %s in replset with id %s\",t,this.name,e.id)),e.s.replicaSetState.remove(this),e.state!=T&&e.state!=I&&((e.s.replicaSetState.hasPrimary()||e.s.replicaSetState.hasSecondary()||!e.s.options.secondaryOnlyConnectionAllowed)&&e.s.replicaSetState.hasPrimary()||M(e,C),R(e.s.connectingServers,this)))}}function q(e,t,n){if(0==e.s.authenticationContexts.length)return n();if(t.lastIsMaster()&&t.lastIsMaster().arbiterOnly)return n();!function e(t,n,r){if(0==t.length)return r();var o=t.shift().slice(0);o.push(function(o){e(t,n,r)}),n.auth.apply(n,o)}(e.s.authenticationContexts.slice(0),t,n)}function U(e,t){return function(){var n=this;if(e.s.logger.isDebug()&&e.s.logger.debug(o(\"handleInitialConnectEvent %s from server %s in replset with id %s\",t,this.name,e.id)),e.state==T||e.state==I)return this.destroy({force:!0});\"connect\"==t?q(e,n,function(){if(e.state==T||e.state==I)return n.destroy({force:!0});var r=e.s.replicaSetState.update(n);if(1==r){n.lastIsMaster()&&n.lastIsMaster().ismaster&&(e.ismaster=n.lastIsMaster()),e.s.logger.isDebug()&&e.s.logger.debug(o(\"handleInitialConnectEvent %s from server %s in replset with id %s has state [%s]\",t,n.name,e.id,JSON.stringify(e.s.replicaSetState.set)));for(var i=0;i<A.length;i++)n.removeAllListeners(A[i]);n.on(\"error\",z(e,\"error\")),n.on(\"close\",z(e,\"close\")),n.on(\"timeout\",z(e,\"timeout\")),n.on(\"parseError\",z(e,\"parseError\")),function(e){var t=s.secondary.preference||s.secondary.mode,n=e.s.connectOptions.readPreference&&(e.s.connectOptions.readPreference.preference||e.s.connectOptions.readPreference.mode),r=e.state===_,o=e.s.replicaSetState.hasPrimary(),i=e.s.replicaSetState.hasSecondary(),a=e.s.options.secondaryOnlyConnectionAllowed,c=t===n;return r&&(c&&i||!c&&o)||i&&a}(e)&&(e.state=E,e.initialConnectState.connect=!0,process.nextTick(function(){e.emit(\"connect\",e)}),L(e,{}))}else{if(r instanceof u)return n.destroy({force:!0}),e.destroy({force:!0}),e.emit(\"error\",r);n.destroy({force:!0})}}):(e.emit(\"failed\",this),R(e.s.connectingServers,this),e.s.replicaSetState.remove(this)),e.initialConnectState.connect&&!e.initialConnectState.fullsetup&&e.s.replicaSetState.hasPrimaryAndSecondary()&&(e.initialConnectState.fullsetup=!0,e.initialConnectState.all=!0,process.nextTick(function(){e.emit(\"fullsetup\",e),e.emit(\"all\",e)}));for(var r=0;r<e.s.connectingServers.length;r++)e.s.connectingServers[r].equals(this)&&e.s.connectingServers.splice(r,1);0==e.s.connectingServers.length&&e.state==_&&L(e,{haInterval:1})}}function F(e,t,n){e.listeners(t).length>0&&e.emit(t,n)}B.prototype.connect=function(e){var t=this;this.s.connectOptions=e||{},M(this,_);var n=this.s.seedlist.map(function(e){return new p(f({},t.s.options,e,{authProviders:t.authProviders,reconnect:!1,monitoring:!1,inTopology:!0},{clientInfo:h(t.s.clientInfo)}))});if(this.s.options.socketTimeout>0&&this.s.options.socketTimeout<=this.s.options.haInterval)return t.emit(\"error\",new u(o(\"haInterval [%s] MS must be set to less than socketTimeout [%s] MS\",this.s.options.haInterval,this.s.options.socketTimeout)));F(this,\"topologyOpening\",{topologyId:this.id}),function(e,t){e.s.connectingServers=e.s.connectingServers.concat(t);var n=0;function r(t,n){setTimeout(function(){e.s.replicaSetState.update(t)&&t.lastIsMaster()&&t.lastIsMaster().ismaster&&(e.ismaster=t.lastIsMaster()),t.once(\"close\",U(e,\"close\")),t.once(\"timeout\",U(e,\"timeout\")),t.once(\"parseError\",U(e,\"parseError\")),t.once(\"error\",U(e,\"error\")),t.once(\"connect\",U(e,\"connect\")),t.on(\"serverOpening\",function(t){e.emit(\"serverOpening\",t)}),t.on(\"serverDescriptionChanged\",function(t){e.emit(\"serverDescriptionChanged\",t)}),t.on(\"serverClosed\",function(t){e.emit(\"serverClosed\",t)}),t.connect(e.s.connectOptions)},n)}for(;t.length>0;)r(t.shift(),n++)}(t,n)},B.prototype.destroy=function(e){e=e||{},M(this,T),this.haTimeoutId&&clearTimeout(this.haTimeoutId),this.s.replicaSetState.destroy(e),this.s.authenticationContexts=[],this.s.connectingServers.forEach(function(t){t.destroy(e)});for(var t=0;t<this.intervalIds.length;t++)this.intervalIds[t].stop(),this.intervalIds[t].stop();this.intervalIds=[],F(this,\"topologyClosed\",{topologyId:this.id})},B.prototype.unref=function(){M(this,I),this.s.replicaSetState.allServers().forEach(function(e){e.unref()}),clearTimeout(this.haTimeoutId)},B.prototype.lastIsMaster=function(){return this.s.options.secondaryOnlyConnectionAllowed&&!this.s.replicaSetState.hasPrimary()&&this.s.replicaSetState.hasSecondary()?this.s.replicaSetState.secondaries[0].lastIsMaster():this.s.replicaSetState.primary?this.s.replicaSetState.primary.lastIsMaster():this.ismaster},B.prototype.connections=function(){for(var e=this.s.replicaSetState.allServers(),t=[],n=0;n<e.length;n++)t=t.concat(e[n].connections());return t},B.prototype.isConnected=function(e){return e=e||{},!this.authenticating&&(e.readPreference&&e.readPreference.equals(s.secondary)?this.s.replicaSetState.hasSecondary():e.readPreference&&e.readPreference.equals(s.primary)?this.s.replicaSetState.hasPrimary():e.readPreference&&e.readPreference.equals(s.primaryPreferred)?this.s.replicaSetState.hasSecondary()||this.s.replicaSetState.hasPrimary():e.readPreference&&e.readPreference.equals(s.secondaryPreferred)?this.s.replicaSetState.hasSecondary()||this.s.replicaSetState.hasPrimary():!(!this.s.options.secondaryOnlyConnectionAllowed||!this.s.replicaSetState.hasSecondary())||this.s.replicaSetState.hasPrimary())},B.prototype.isDestroyed=function(){return this.state==T},B.prototype.getServer=function(e){e=e||{};var t=this.s.replicaSetState.pickServer(e.readPreference);return this.s.debug&&this.emit(\"pickedServer\",e.readPreference,t),t},B.prototype.getConnection=function(e){var t=this.getServer(e);if(t)return t.getConnection()},B.prototype.getServers=function(){return this.s.replicaSetState.allServers()};var H=function(e,t,n,r,o,i){if(\"function\"==typeof o&&(i=o,o=(o={})||{}),o=o||{},null==e.s.replicaSetState.primary)return i(new u(\"no primary server found\"));e.s.replicaSetState.primary[t](n,r,o,function(t){return t&&t.message&&t.message.match(/not master/)&&e.s.replicaSetState.remove(e.s.replicaSetState.primary,{force:!0}),i.apply(void 0,arguments)})};B.prototype.insert=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state==T?r(new u(o(\"topology was destroyed\"))):this.s.replicaSetState.hasPrimary()||null==this.s.disconnectHandler?void H(this,\"insert\",e,t,n,r):this.s.disconnectHandler.add(\"insert\",e,t,n,r)},B.prototype.update=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state==T?r(new u(o(\"topology was destroyed\"))):this.s.replicaSetState.hasPrimary()||null==this.s.disconnectHandler?void H(this,\"update\",e,t,n,r):this.s.disconnectHandler.add(\"update\",e,t,n,r)},B.prototype.remove=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state==T?r(new u(o(\"topology was destroyed\"))):this.s.replicaSetState.hasPrimary()||null==this.s.disconnectHandler?void H(this,\"remove\",e,t,n,r):this.s.disconnectHandler.add(\"remove\",e,t,n,r)},B.prototype.command=function(e,t,n,r){if(\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state==T)return r(new u(o(\"topology was destroyed\")));var i=n.readPreference?n.readPreference:s.primary;if(\"primary\"==i.preference&&!this.s.replicaSetState.hasPrimary()&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,n,r);if(\"secondary\"==i.preference&&!this.s.replicaSetState.hasSecondary()&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,n,r);if(\"primary\"!=i.preference&&!this.s.replicaSetState.hasSecondary()&&!this.s.replicaSetState.hasPrimary()&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,n,r);var a=this.s.replicaSetState.pickServer(i);return a instanceof p?(this.s.debug&&this.emit(\"pickedServer\",s.primary,a),null==a?r(new u(o(\"no server found that matches the provided readPreference %s\",i))):void a.command(e,t,n,r)):r(a)},B.prototype.auth=function(e,t){var n=Array.prototype.slice.call(arguments,0).slice(0),r=this,i=Array.prototype.slice.call(arguments,2),s=i.pop(),a=0;if(null==this.authProviders[e]&&\"default\"!=e)return s(new u(o(\"auth provider %s does not exist\",e)));if(this.authenticating)return s(new u(\"authentication or logout allready in process\"));if(null!=r.s.disconnectHandler){if(!r.s.replicaSetState.hasPrimary()&&!r.s.options.secondaryOnlyConnectionAllowed)return r.s.disconnectHandler.add(\"auth\",t,n,{},s);if(!r.s.replicaSetState.hasSecondary()&&r.s.options.secondaryOnlyConnectionAllowed)return r.s.disconnectHandler.add(\"auth\",t,n,{},s)}this.authenticating=!0;var c=[],l=this.s.replicaSetState.allServers();function p(n){var o=[e,t].concat(i.slice(0)).concat([function(e){if(d-=1,e&&c.push({name:n.name,err:e}),0==d){if(r.authenticating=!1,c.length)return r.s.authenticationContexts.splice(a,0),s(u.create({message:\"authentication fail\",errors:c}),!1);s(null,r)}}]);n.lastIsMaster().arbiterOnly?o.pop()(null):n.auth.apply(n,o)}0==l.length&&(this.authenticating=!1,s(null,!0));var d=l.length;for(a=this.s.authenticationContexts.length,this.s.authenticationContexts.push([e,t].concat(i.slice(0)));l.length>0;)p(l.shift())},B.prototype.logout=function(e,t){var n=this;if(this.authenticating)throw new u(\"authentication or logout allready in process\");this.authenticating=!0;for(var r=Object.keys(this.authProviders),i=0;i<r.length;i++)this.authProviders[r[i]].logout(e);n.s.authenticationContexts=n.s.authenticationContexts.filter(function(t){return t[1]!==e});var s=this.s.replicaSetState.allServers(),a=s.length;if(0==a)return t();var c=[];function l(t,n){t.logout(e,function(e){e&&c.push({name:t.name,err:e}),n()})}for(i=0;i<s.length;i++)l(s[i],function(){if(0==(a-=1)){if(n.authenticating=!1,c.length)return t(u.create({message:o(\"logout failed against db %s\",e),errors:c}),!1);t()}})},B.prototype.cursor=function(e,t,n){return new((n=n||{}).cursorFactory||this.s.Cursor)(this.s.bson,e,t,n,this,this.s.options)},e.exports=B},function(e){e.exports={_from:\"mongodb-core@2.1.19\",_id:\"mongodb-core@2.1.19\",_inBundle:!1,_integrity:\"sha512-Jt4AtWUkpuW03kRdYGxga4O65O1UHlFfvvInslEfLlGi+zDMxbBe3J2NVmN9qPJ957Mn6Iz0UpMtV80cmxCVxw==\",_location:\"/monk/mongodb-core\",_phantomChildren:{},_requested:{type:\"version\",registry:!0,raw:\"mongodb-core@2.1.19\",name:\"mongodb-core\",escapedName:\"mongodb-core\",rawSpec:\"2.1.19\",saveSpec:null,fetchSpec:\"2.1.19\"},_requiredBy:[\"/monk/mongodb\"],_resolved:\"https://registry.npmjs.org/mongodb-core/-/mongodb-core-2.1.19.tgz\",_shasum:\"00fbd5e5a3573763b9171cfd844e60a8f2a3a18b\",_spec:\"mongodb-core@2.1.19\",_where:\"/Users/darkua/code/Jodel-Backend-Challenge/node_modules/monk/node_modules/mongodb\",author:{name:\"Christian Kvalheim\"},bugs:{url:\"https://github.com/christkv/mongodb-core/issues\"},bundleDependencies:!1,dependencies:{bson:\"~1.0.4\",require_optional:\"~1.0.0\"},deprecated:!1,description:\"Core MongoDB driver functionality, no bells and whistles and meant for integration not end applications\",devDependencies:{co:\"^4.5.4\",\"conventional-changelog-cli\":\"^1.3.5\",coveralls:\"^2.11.6\",\"es6-promise\":\"^3.0.2\",gleak:\"0.5.0\",integra:\"0.1.8\",jsdoc:\"3.3.0-alpha8\",mkdirp:\"0.5.0\",\"mongodb-topology-manager\":\"1.0.x\",\"mongodb-version-manager\":\"github:christkv/mongodb-version-manager#master\",nyc:\"^5.5.0\",optimist:\"latest\",request:\"2.65.0\",rimraf:\"2.2.6\",semver:\"4.1.0\"},homepage:\"https://github.com/christkv/mongodb-core\",keywords:[\"mongodb\",\"core\"],license:\"Apache-2.0\",main:\"index.js\",name:\"mongodb-core\",peerOptionalDependencies:{kerberos:\"~0.0\",\"bson-ext\":\"1.0.5\"},repository:{type:\"git\",url:\"git://github.com/christkv/mongodb-core.git\"},scripts:{changelog:\"conventional-changelog -p angular -i HISTORY.md -s\",coverage:\"nyc node test/runner.js -t functional -l && node_modules/.bin/nyc report --reporter=text-lcov | node_modules/.bin/coveralls\",lint:\"eslint lib\",test:\"node test/runner.js -t functional\"},version:\"2.1.19\"}},function(e,t,n){\"use strict\";var r=n(11).Query,o=n(14).retrieveBSON,i=n(0).format,s=n(8),a=n(103).getReadPreference,c=o().Long,l=function(e){this.legacyWireProtocol=e},u=function(e,t,n,o,a,c,l,u){if(0==c.length)throw new s(\"insert must contain at least one document\");\"function\"==typeof l&&(u=l,l=(l={})||{});var p=a.split(\".\"),d=p.shift(),f=\"boolean\"!=typeof l.ordered||l.ordered,h=l.writeConcern,m={};if(m[n]=p.join(\".\"),m[o]=c,m.ordered=f,h&&Object.keys(h).length>0&&(m.writeConcern=h),l.collation)for(var g=0;g<m[o].length;g++)m[o][g].collation||(m[o][g].collation=l.collation);\"boolean\"==typeof l.bypassDocumentValidation&&(m.bypassDocumentValidation=l.bypassDocumentValidation);var y={checkKeys:!1,numberToSkip:0,numberToReturn:1};\"insert\"==n&&(y.checkKeys=!0),\"boolean\"==typeof l.checkKeys&&(y.checkKeys=l.checkKeys),l.serializeFunctions&&(y.serializeFunctions=l.serializeFunctions),l.ignoreUndefined&&(y.ignoreUndefined=l.ignoreUndefined);try{var v=new r(t,i(\"%s.$cmd\",d),m,y);e.write(v,{command:!0},u)}catch(e){u(e)}};l.prototype.insert=function(e,t,n,r,o,i,s){u(e,r,\"insert\",\"documents\",n,o,i,s)},l.prototype.update=function(e,t,n,r,o,i,s){u(e,r,\"update\",\"updates\",n,o,i,s)},l.prototype.remove=function(e,t,n,r,o,i,s){u(e,r,\"delete\",\"deletes\",n,o,i,s)},l.prototype.killCursor=function(e,t,n,o,a){var c=t.split(/\\./),l=i(\"%s.$cmd\",c.shift()),u={killCursors:c.join(\".\"),cursors:[n]},p=new r(e,l,u,{numberToSkip:0,numberToReturn:-1,checkKeys:!1,returnFieldSelector:null});p.slaveOk=!0;o&&o.isConnected()&&o.write(p,{command:!0},function(e,t){if(e){if(\"function\"!=typeof a)return;return a(e)}var r=t.message;if(0!=(1&r.responseFlags)){if(\"function\"!=typeof a)return;return a(new s(\"cursor killed or timed out\"),null)}if(!Array.isArray(r.documents)||0==r.documents.length){if(\"function\"!=typeof a)return;return a(new s(i(\"invalid killCursors result returned for cursor id %s\",n)))}\"function\"==typeof a&&a(null,r.documents[0])})},l.prototype.getMore=function(e,t,n,o,a,l,u,p){u=u||{};var d=t.split(/\\./),f=i(\"%s.$cmd\",d.shift()),h={getMore:n.cursorId,collection:d.join(\".\"),batchSize:Math.abs(o)};n.cmd.tailable&&\"number\"==typeof n.cmd.maxAwaitTimeMS&&(h.maxTimeMS=n.cmd.maxAwaitTimeMS);var m=new r(e,f,h,{numberToSkip:0,numberToReturn:-1,checkKeys:!1,returnFieldSelector:null});m.slaveOk=!0;var g={command:!0};a&&(g.raw=a),g.documentsReturnedIn=\"nextBatch\",\"boolean\"==typeof n.promoteLongs&&(g.promoteLongs=n.promoteLongs),\"boolean\"==typeof n.promoteValues&&(g.promoteValues=n.promoteValues),\"boolean\"==typeof n.promoteBuffers&&(g.promoteBuffers=n.promoteBuffers),l.write(m,g,function(e,t){if(e)return p(e);var r=t.message;if(0!=(1&r.responseFlags))return p(new s(\"cursor killed or timed out\"),null);if(a)return n.documents=r.documents,n.cursorId=r.cursorId,p(null,r.documents);if(0==r.documents[0].ok)return p(s.create(r.documents[0]));var o=\"number\"==typeof r.documents[0].cursor.id?c.fromNumber(r.documents[0].cursor.id):r.documents[0].cursor.id;n.documents=r.documents[0].cursor.nextBatch,n.cursorId=o,p(null,r.documents[0],r.connection)})},l.prototype.command=function(e,t,n,r,o,a){var c=\"boolean\"!=typeof(a=a||{}).wireProtocolCommand||a.wireProtocolCommand;if(n.find&&c){var l=p(e,t,n,r,o,a);return n.virtual=!1,l.documentsReturnedIn=\"firstBatch\",l}if(null==r.cursorId){if(n)return d(e,t,n,r,o,a);throw new s(i(\"command %s does not return a cursor\",JSON.stringify(n)))}};var p=function(e,t,n,o,s,c){var l=a(n,c=c||{});o.batchSize=n.batchSize||o.batchSize;var u=t.split(/\\./),p=i(\"%s.$cmd\",u.shift()),d={find:u.join(\".\")};n.query&&(n.query.$query?d.filter=n.query.$query:d.filter=n.query);var f=n.sort;if(Array.isArray(f)){var h={};if(f.length>0&&!Array.isArray(f[0])){var m=f[1];\"asc\"==m?m=1:\"desc\"==m&&(m=-1),h[f[0]]=m}else for(var g=0;g<f.length;g++)\"asc\"==(m=f[g][1])?m=1:\"desc\"==m&&(m=-1),h[f[g][0]]=m;f=h}n.sort&&(d.sort=f),n.fields&&(d.projection=n.fields),n.hint&&(d.hint=n.hint),n.skip&&(d.skip=n.skip),n.limit&&(d.limit=n.limit),n.limit<0&&(d.limit=Math.abs(n.limit),d.singleBatch=!0),\"number\"==typeof n.batchSize&&(n.batchSize<0&&(0!=n.limit&&Math.abs(n.batchSize)<Math.abs(n.limit)&&(d.limit=Math.abs(n.batchSize)),d.singleBatch=!0),d.batchSize=Math.abs(n.batchSize)),n.comment&&(d.comment=n.comment),n.maxScan&&(d.maxScan=n.maxScan),n.maxTimeMS&&(d.maxTimeMS=n.maxTimeMS),n.min&&(d.min=n.min),n.max&&(d.max=n.max),n.returnKey&&(d.returnKey=n.returnKey),n.showDiskLoc&&(d.showRecordId=n.showDiskLoc),n.snapshot&&(d.snapshot=n.snapshot),n.tailable&&(d.tailable=n.tailable),n.oplogReplay&&(d.oplogReplay=n.oplogReplay),n.noCursorTimeout&&(d.noCursorTimeout=n.noCursorTimeout),n.awaitData&&(d.awaitData=n.awaitData),n.awaitdata&&(d.awaitData=n.awaitdata),n.partial&&(d.partial=n.partial),n.collation&&(d.collation=n.collation),n.explain&&(d={explain:d}),n.readConcern&&(d.readConcern=n.readConcern);var y=\"boolean\"==typeof c.serializeFunctions&&c.serializeFunctions,v=\"boolean\"==typeof c.ignoreUndefined&&c.ignoreUndefined;\"mongos\"==s.type&&l&&\"primary\"!=l.preference&&(d={$query:d,$readPreference:l.toJSON()});var b=new r(e,p,d,{numberToSkip:0,numberToReturn:1,checkKeys:!1,returnFieldSelector:null,serializeFunctions:y,ignoreUndefined:v});return b.slaveOk=l.slaveOk(),b},d=function(e,t,n,o,s,c){var l=a(n,c=c||{}),u={};for(var p in n)u[p]=n[p];var d=t.split(/\\./),f=\"boolean\"==typeof c.serializeFunctions&&c.serializeFunctions,h=\"boolean\"==typeof c.ignoreUndefined&&c.ignoreUndefined;\"mongos\"==s.type&&l&&\"primary\"!=l.preference&&(u={$query:u,$readPreference:l.toJSON()});var m=new r(e,i(\"%s.$cmd\",d.shift()),u,{numberToSkip:0,numberToReturn:-1,checkKeys:!1,serializeFunctions:f,ignoreUndefined:h});return m.slaveOk=l.slaveOk(),m};e.exports=l},function(e,t,n){\"use strict\";var r=n(14).copy,o=n(14).retrieveBSON,i=n(11).KillCursor,s=n(11).GetMore,a=n(11).Query,c=n(0).format,l=n(8),u=n(103).getReadPreference,p=o().Long,d=function(){},f=function(e,t,n,r,o,i,s,u){if(0==i.length)throw new l(\"insert must contain at least one document\");\"function\"==typeof s&&(u=s,s=(s={})||{});var p=o.split(\".\"),d=p.shift(),f=\"boolean\"!=typeof s.ordered||s.ordered,h=s.writeConcern,m={};m[n]=p.join(\".\"),m[r]=i,m.ordered=f,h&&Object.keys(h).length>0&&(m.writeConcern=h),\"boolean\"==typeof s.bypassDocumentValidation&&(m.bypassDocumentValidation=s.bypassDocumentValidation);var g={checkKeys:!1,numberToSkip:0,numberToReturn:1};\"insert\"==n&&(g.checkKeys=!0),\"boolean\"==typeof s.checkKeys&&(g.checkKeys=s.checkKeys),s.serializeFunctions&&(g.serializeFunctions=s.serializeFunctions),s.ignoreUndefined&&(g.ignoreUndefined=s.ignoreUndefined);try{var y=new a(t,c(\"%s.$cmd\",d),m,g);e.write(y,{command:!0},u)}catch(e){u(e)}};d.prototype.insert=function(e,t,n,r,o,i,s){f(e,r,\"insert\",\"documents\",n,o,i,s)},d.prototype.update=function(e,t,n,r,o,i,s){f(e,r,\"update\",\"updates\",n,o,i,s)},d.prototype.remove=function(e,t,n,r,o,i,s){f(e,r,\"delete\",\"deletes\",n,o,i,s)},d.prototype.killCursor=function(e,t,n,r,o){var s=new i(e,[n]);r&&r.isConnected()&&r.write(s,{immediateRelease:!0,noResponse:!0}),\"function\"==typeof o&&o(null,null)},d.prototype.getMore=function(e,t,n,r,o,i,a,c){var u=new s(e,t,n.cursorId,{numberToReturn:r}),d={};o&&(d.raw=o),\"boolean\"==typeof n.promoteLongs&&(d.promoteLongs=n.promoteLongs),\"boolean\"==typeof n.promoteValues&&(d.promoteValues=n.promoteValues),\"boolean\"==typeof n.promoteBuffers&&(d.promoteBuffers=n.promoteBuffers),i.write(u,d,function(e,t){if(e)return c(e);var r=t.message;if(0!=(1&r.responseFlags))return c(new l(\"cursor does not exist, was killed or timed out\"),null);var o=\"number\"==typeof r.cursorId?p.fromNumber(r.cursorId):r.cursorId;n.documents=r.documents,n.cursorId=o,c(null,null,r.connection)})},d.prototype.command=function(e,t,n,r,o,i){if(n.find)return h(e,t,n,r,o,i);if(null==r.cursorId){if(n)return m(e,t,n,r,o,i);throw new l(c(\"command %s does not return a cursor\",JSON.stringify(n)))}};var h=function(e,t,n,o,i,s){var p=u(n,s=s||{});o.batchSize=n.batchSize||o.batchSize;var d=0;d=0==o.limit?o.batchSize:o.limit<0||o.limit<o.batchSize||o.limit>0&&0==o.batchSize?o.limit:o.batchSize;var f=o.skip||0,h={},m=!1;if(\"mongos\"==i.type&&p&&(h.$readPreference=p.toJSON(),m=!0),n.sort&&(h.orderby=n.sort,m=!0),n.hint&&(h.$hint=n.hint,m=!0),n.snapshot&&(h.$snapshot=n.snapshot,m=!0),n.returnKey&&(h.$returnKey=n.returnKey,m=!0),n.maxScan&&(h.$maxScan=n.maxScan,m=!0),n.min&&(h.$min=n.min,m=!0),n.max&&(h.$max=n.max,m=!0),n.showDiskLoc&&(h.$showDiskLoc=n.showDiskLoc,m=!0),n.comment&&(h.$comment=n.comment,m=!0),n.maxTimeMS&&(h.$maxTimeMS=n.maxTimeMS,m=!0),n.explain&&(d=-Math.abs(n.limit||0),m=!0,h.$explain=!0),m?h.$query=n.query:h=n.query,n.readConcern&&\"local\"!=n.readConcern.level)throw new l(c(\"server find command does not support a readConcern level of %s\",n.readConcern.level));n.readConcern&&delete(n=r(n)).readConcern;var g=\"boolean\"==typeof s.serializeFunctions&&s.serializeFunctions,y=\"boolean\"==typeof s.ignoreUndefined&&s.ignoreUndefined,v=new a(e,t,h,{numberToSkip:f,numberToReturn:d,checkKeys:!1,returnFieldSelector:n.fields,serializeFunctions:g,ignoreUndefined:y});return v.slaveOk=p.slaveOk(),\"boolean\"==typeof n.tailable&&(v.tailable=n.tailable),\"boolean\"==typeof n.oplogReplay&&(v.oplogReplay=n.oplogReplay),\"boolean\"==typeof n.noCursorTimeout&&(v.noCursorTimeout=n.noCursorTimeout),\"boolean\"==typeof n.awaitData&&(v.awaitData=n.awaitData),\"boolean\"==typeof n.partial&&(v.partial=n.partial),v},m=function(e,t,n,r,o,i){var s=u(n,i=i||{}),p={};for(var d in n)p[d]=n[d];var f=t.split(/\\./),h=\"boolean\"==typeof i.serializeFunctions&&i.serializeFunctions,m=\"boolean\"==typeof i.ignoreUndefined&&i.ignoreUndefined;if(n.readConcern&&\"local\"!=n.readConcern.level)throw new l(c(\"server %s command does not support a readConcern level of %s\",JSON.stringify(n),n.readConcern.level));n.readConcern&&delete n.readConcern,\"mongos\"==o.type&&s&&\"primary\"!=s.preference&&(p={$query:p,$readPreference:s.toJSON()});var g=new a(e,c(\"%s.$cmd\",f.shift()),p,{numberToSkip:0,numberToReturn:-1,checkKeys:!1,serializeFunctions:h,ignoreUndefined:m});return g.slaveOk=s.slaveOk(),g};e.exports=d},function(e,t,n){\"use strict\";var r=n(104).Insert,o=n(104).Update,i=n(104).Remove,s=n(14).copy,a=n(14).retrieveBSON,c=n(11).KillCursor,l=n(11).GetMore,u=n(11).Query,p=n(0).format,d=n(133),f=n(8),h=n(103).getReadPreference,m=a().Long,g=[\"w\",\"wtimeout\",\"j\",\"fsync\"],y=function(){};y.prototype.insert=function(e,t,n,o,i,s,a){var c=\"boolean\"!=typeof(s=s||{}).ordered||s.ordered;if((i=Array.isArray(i)?i:[i]).length>1e3)return a(new f(\"exceeded maximum write batch size of 1000\"));var l=s.writeConcern||{w:1};return c&&0!=l.w?k(\"insert\",r,t,n,o,e,i,s,a):O(\"insert\",r,t,n,o,e,i,s,a)},y.prototype.update=function(e,t,n,r,i,s,a){var c=\"boolean\"!=typeof(s=s||{}).ordered||s.ordered;i=Array.isArray(i)?i:[i];var l=s.writeConcern||{w:1};return c&&0!=l.w?k(\"update\",o,t,n,r,e,i,s,a):O(\"update\",o,t,n,r,e,i,s,a)},y.prototype.remove=function(e,t,n,r,o,s,a){var c=\"boolean\"!=typeof(s=s||{}).ordered||s.ordered;o=Array.isArray(o)?o:[o];var l=s.writeConcern||{w:1};return c&&0!=l.w?k(\"remove\",i,t,n,r,e,o,s,a):O(\"remove\",i,t,n,r,e,o,s,a)},y.prototype.killCursor=function(e,t,n,r,o){var i=new c(e,[n]);r&&r.isConnected()&&r.write(i,{immediateRelease:!0,noResponse:!0}),\"function\"==typeof o&&o(null,null)},y.prototype.getMore=function(e,t,n,r,o,i,s,a){var c=new l(e,t,n.cursorId,{numberToReturn:r}),u={};o&&(u.raw=o),\"boolean\"==typeof n.promoteLongs&&(u.promoteLongs=n.promoteLongs),\"boolean\"==typeof n.promoteValues&&(u.promoteValues=n.promoteValues),\"boolean\"==typeof n.promoteBuffers&&(u.promoteBuffers=n.promoteBuffers),i.write(c,u,function(e,t){if(e)return a(e);var r=t.message;if(0!=(1&r.responseFlags))return a(new f(\"cursor does not exist, was killed or timed out\"),null);var o=\"number\"==typeof r.cursorId?m.fromNumber(r.cursorId):r.cursorId;n.documents=r.documents,n.cursorId=o,a(null,null,r.connection)})},y.prototype.command=function(e,t,n,r,o,i){if(n.find)return v(e,t,n,r,o,i);if(null==r.cursorId){if(n)return b(e,t,n,r,o,i);throw new f(p(\"command %s does not return a cursor\",JSON.stringify(n)))}};var v=function(e,t,n,r,o,i){var a=h(n,i=i||{});r.batchSize=n.batchSize||r.batchSize;var c=0;c=0==r.limit?r.batchSize:r.limit<0||r.limit<r.batchSize||r.limit>0&&0==r.batchSize?r.limit:r.batchSize;var l=r.skip||0,d={},m=!1;if(\"mongos\"==o.type&&a&&(d.$readPreference=a.toJSON(),m=!0),n.sort&&(d.orderby=n.sort,m=!0),n.hint&&(d.$hint=n.hint,m=!0),n.snapshot&&(d.$snapshot=n.snapshot,m=!0),n.returnKey&&(d.$returnKey=n.returnKey,m=!0),n.maxScan&&(d.$maxScan=n.maxScan,m=!0),n.min&&(d.$min=n.min,m=!0),n.max&&(d.$max=n.max,m=!0),n.showDiskLoc&&(d.$showDiskLoc=n.showDiskLoc,m=!0),n.comment&&(d.$comment=n.comment,m=!0),n.maxTimeMS&&(d.$maxTimeMS=n.maxTimeMS,m=!0),n.explain&&(c=-Math.abs(n.limit||0),m=!0,d.$explain=!0),m?d.$query=n.query:d=n.query,n.readConcern&&\"local\"!=n.readConcern.level)throw new f(p(\"server find command does not support a readConcern level of %s\",n.readConcern.level));n.readConcern&&delete(n=s(n)).readConcern;var g=\"boolean\"==typeof i.serializeFunctions&&i.serializeFunctions,y=\"boolean\"==typeof i.ignoreUndefined&&i.ignoreUndefined,v=new u(e,t,d,{numberToSkip:l,numberToReturn:c,checkKeys:!1,returnFieldSelector:n.fields,serializeFunctions:g,ignoreUndefined:y});return v.slaveOk=a.slaveOk(),\"boolean\"==typeof n.tailable&&(v.tailable=n.tailable),\"boolean\"==typeof n.oplogReplay&&(v.oplogReplay=n.oplogReplay),\"boolean\"==typeof n.noCursorTimeout&&(v.noCursorTimeout=n.noCursorTimeout),\"boolean\"==typeof n.awaitData&&(v.awaitData=n.awaitData),\"boolean\"==typeof n.partial&&(v.partial=n.partial),v},b=function(e,t,n,r,o,i){var s=h(n,i=i||{}),a={};for(var c in n)a[c]=n[c];var l=t.split(/\\./);if(n.readConcern&&\"local\"!=n.readConcern.level)throw new f(p(\"server %s command does not support a readConcern level of %s\",JSON.stringify(n),n.readConcern.level));n.readConcern&&delete n.readConcern;var d=\"boolean\"==typeof i.serializeFunctions&&i.serializeFunctions,m=\"boolean\"==typeof i.ignoreUndefined&&i.ignoreUndefined;\"mongos\"==o.type&&s&&\"primary\"!=s.preference&&(a={$query:a,$readPreference:s.toJSON()});var g=new u(e,p(\"%s.$cmd\",l.shift()),a,{numberToSkip:0,numberToReturn:-1,checkKeys:!1,serializeFunctions:d,ignoreUndefined:m});return g.slaveOk=s.slaveOk(),g},x=function(e){return!(!e.w&&!e.wtimeout&&1!=e.j&&1!=e.fsync&&0!=Object.keys(e).length)},w=function(e){var t={};return null!=e.w&&(t.w=e.w),null!=e.wtimeout&&(t.wtimeout=e.wtimeout),null!=e.j&&(t.j=e.j),null!=e.fsync&&(t.fsync=e.fsync),t},S=function(e,t,n,r){var o={ok:1,n:0};\"update\"==e&&(o.nModified=0);for(var i=0;i<n.length;i++){var s=n[i],a=t[i];!s.upserted&&0!=s.updatedExisting||null!=o.upserted||(o.upserted=[]),s.upserted&&o.upserted.push({index:i,_id:s.upserted}),0==s.updatedExisting&&1==s.n&&null==s.upserted?o.upserted.push({index:i,_id:a.q._id}):1==s.updatedExisting&&(o.nModified+=s.n),1==s.ok&&\"insert\"==e&&null==s.err&&(o.n=o.n+1),null!=s&&0==s.ok||s.err||s.errmsg?(0==s.ok&&(o.ok=0),o.code=s.code,o.errmsg=s.errmsg||s.err||s.errMsg,11e3==s.code||11001==s.code||12582==s.code||16544==s.code||16538==s.code||16542==s.code||14==s.code||13511==s.code?(null==o.writeErrors&&(o.writeErrors=[]),o.writeErrors.push({index:i,code:s.code,errmsg:s.errmsg||s.err||s.errMsg})):o.writeConcernError={code:s.code,errmsg:s.errmsg||s.err||s.errMsg}):\"number\"==typeof s.n?o.n+=s.n:o.n+=1,null!=s&&s.lastOp&&(o.lastOp=s.lastOp)}return new d(o,r)},k=function(e,t,n,r,o,i,s,a,c){var l=s.slice(0),d=[],f=function(l,h){if(0==l.length)return process.nextTick(function(){h(null,S(e,s,d,null))});var m=l.shift(),y=new t(u.getRequestId(),n,o,r,[m],a),v=a.writeConcern||{w:1},b=w(v),x=r.split(\".\").shift();try{for(var k=[y],O={getlasterror:1},C=0;C<g.length;C++)null!=b[g[C]]&&(O[g[C]]=b[g[C]]);var _=new u(o,p(\"%s.$cmd\",x),O,{numberToReturn:-1});k.push(_);i.write(k,function(t,n){if(t)return c(t);var r=n.result;if(d.push(r),0==r.ok||r.err||r.errmsg)return c(null,S(e,s,d,n.connection));f(l,c)})}catch(t){d.push({ok:1,errmsg:\"string\"==typeof t?t:t.message,code:14}),process.nextTick(function(){h(null,S(e,s,d,null))})}};f(l,c)},O=function(e,t,n,r,o,i,s,a,c){for(var l,f=s.length,h=[],m=a.writeConcern||{w:1},y=w(m),v=0;v<s.length;v++){var b=new t(u.getRequestId(),n,o,r,[s[v]],a),k=r.split(\".\").shift();try{var O=[b];if(x(y)){for(var C={getlasterror:1},_=0;_<g.length;_++)null!=y[g[_]]&&(C[g[_]]=y[g[_]]);var E=new u(o,p(\"%s.$cmd\",k),C,{numberToReturn:-1});O.push(E);i.write(O,function(t){return function(n,r){n&&(l=n),f-=1,n||(h[t]=r.result),0==f&&process.nextTick(function(){if(l)return c(l);c(null,S(e,s,h,r.connection))})}}(v))}else i.write(O,{immediateRelease:!0,noResponse:!0})}catch(t){f-=1,h[v]={ok:1,errmsg:\"string\"==typeof t?t:t.message,code:14},0==f&&c(null,S(e,s,h,null))}}y&&0==y.w&&c&&c(null,new d({ok:1},null))};e.exports=y},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(5).EventEmitter,i=n(134),s=n(8),a=n(27),c=n(0).format,l=n(11).Query,u=n(133),p=n(72).assign,d=n(71),f=n(70),h=n(69),m=n(68),g=n(105),y=n(67),v=\"disconnected\",b=\"connecting\",x=\"connected\",w=\"destroying\",S=\"destroyed\",k=0,O=function(e){if(o.call(this),this.options=p({host:\"localhost\",port:27017,size:5,connectionTimeout:3e4,socketTimeout:36e4,keepAlive:!0,keepAliveInitialDelay:3e5,noDelay:!0,ssl:!1,checkServerIdentity:!0,ca:null,crl:null,cert:null,key:null,passPhrase:null,rejectUnauthorized:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,reconnect:!0,reconnectInterval:1e3,reconnectTries:30,domainsEnabled:!1},e),this.id=k++,this.retriesLeft=this.options.reconnectTries,this.reconnectId=null,!e.bson||e.bson&&(\"function\"!=typeof e.bson.serialize||\"function\"!=typeof e.bson.deserialize))throw new Error(\"must pass in valid bson parser\");this.logger=a(\"Pool\",e),this.state=v,this.availableConnections=[],this.inUseConnections=[],this.connectingConnections=[],this.executing=!1,this.queue=[],this.authProviders=e.authProviders||{mongocr:new d(e.bson),x509:new f(e.bson),plain:new h(e.bson),gssapi:new m(e.bson),sspi:new g(e.bson),\"scram-sha-1\":new y(e.bson)},this.reconnectConnection=null,this.authenticating=!1,this.loggingout=!1,this.nonAuthenticatedConnections=[],this.authenticatingTimestamp=null,this.numberOfConsecutiveTimeouts=0,this.connectionIndex=0};function C(e,t){var n={disconnected:[b,w,v],connecting:[b,w,x,v],connected:[x,v,w],destroying:[w,S],destroyed:[S]}[e.state];n&&-1!=n.indexOf(t)?e.state=t:e.logger.error(c(\"Pool with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]\",e.id,e.state,t,n))}function _(e,t,n,r){if(void 0===t[0])return r(null);var o=t[0],i=t[1];if(!e.authProviders[o])throw new s(c(\"authMechanism %s not supported\",o));var a=e.authProviders[o];a.auth.apply(a,[E(e),[n],i].concat(t.slice(2)).concat([r]))}function E(e){return function(t,n,r){if(e.state==S||e.state==w)return r(new s(\"pool destroyed\"));t.workItems.push({cb:r,command:!0,requestId:n.requestId}),t.write(n.toBin())}}function I(e,t,n){!function e(t,n,r,o){if(0==r.length)return o();t.authProviders[r.pop()].reauthenticate(E(t),[n],function(i){if(i)return o(i);e(t,n,r,o)})}(e,t,Object.keys(e.authProviders),n)}function T(e,t){return function(n){if(!this._connectionFailHandled){for(this._connectionFailHandled=!0,this.destroy(),D(e,this);this.workItems.length>0;){var r=this.workItems.shift();r.cb&&r.cb(n)}if(\"timeout\"==t&&(e.numberOfConsecutiveTimeouts=e.numberOfConsecutiveTimeouts+1,e.numberOfConsecutiveTimeouts>e.options.reconnectTries))return e.numberOfConsecutiveTimeouts=0,e.destroy(!0),e.emit(\"close\",e);0==e.socketCount()&&(e.state!=S&&e.state!=w&&C(e,v),t=\"error\"==t?\"close\":t,e.emit(t,n)),!e.reconnectId&&e.options.reconnect&&(e.reconnectId=setTimeout(M(e),e.options.reconnectInterval))}}}function M(e){return function(){function t(e,t){return function(){this._connectionFailHandled||(this._connectionFailHandled=!0,this.destroy(),e.retriesLeft=e.retriesLeft-1,0==e.retriesLeft?(e.destroy(),e.emit(\"reconnectFailed\",new s(c(\"failed to reconnect after %s attempts with interval %s ms\",e.options.reconnectTries,e.options.reconnectInterval)))):e.reconnectId=setTimeout(M(e),e.options.reconnectInterval))}}e.emit(\"attemptReconnect\",e),e.state!=S&&e.state!=w&&(e.isConnected()?e.reconnectId=null:(e.reconnectConnection=new i(A(e),e.options),e.reconnectConnection.on(\"close\",t(e)),e.reconnectConnection.on(\"error\",t(e)),e.reconnectConnection.on(\"timeout\",t(e)),e.reconnectConnection.on(\"parseError\",t(e)),e.reconnectConnection.on(\"connect\",function(e){return function(){var t=this;if(e.state==S||e.state==w)return t.destroy();L.forEach(function(e){t.removeAllListeners(e)}),e.reconnectId=null,t.on(\"error\",T(e,\"error\")),t.on(\"close\",T(e,\"close\")),t.on(\"timeout\",T(e,\"timeout\")),t.on(\"parseError\",T(e,\"parseError\")),I(e,this,function(){e.retriesLeft=e.options.reconnectTries,e.availableConnections.push(t),e.reconnectConnection=null,e.emit(\"reconnect\",e),q(e)()})}}(e)),e.reconnectConnection.connect()))}}function N(e,t,n){var r=t.indexOf(e);-1!=r&&(t.splice(r,1),n.push(e))}function A(e){return function(t,n){for(var r=null,o=0;o<n.workItems.length;o++)n.workItems[o].requestId==t.responseTo&&(r=n.workItems[o],n.workItems.splice(o,1));function i(e,t,n,r){if(!e.options.domainsEnabled)return process.nextTick(function(){return t(n,r)});t(n,r)}e.numberOfConsecutiveTimeouts=0,r.socketTimeout&&n.resetSocketTimeout(),e.logger.isDebug()&&e.logger.debug(c(\"message [%s] received from %s:%s\",t.raw.toString(\"hex\"),e.options.host,e.options.port)),function(e,t,n){var r=e.nonAuthenticatedConnections.slice(0),o=e.nonAuthenticatedConnections;if(e.nonAuthenticatedConnections=[],1==t.workItems.length&&(1==t.workItems[0].authenticating||\"number\"==typeof t.workItems[0].authenticatingTimestamp&&t.workItems[0].authenticatingTimestamp!=e.authenticatingTimestamp)&&r.push(t),0==r.length)return N(t,e.inUseConnections,e.availableConnections),n();for(var i=r.length,s=0;s<i;s++)I(e,r[s],function(){0==(i-=1)&&(e.availableConnections=e.availableConnections.concat(o),N(t,e.inUseConnections,e.availableConnections),n())})}(e,n,function(){if(e.executing||process.nextTick(function(){q(e)()}),!r.immediateRelease){try{t.parse(r)}catch(t){return i(e,r.cb,s.create(t))}if(r.command&&t.documents[0]&&(0==t.documents[0].ok||t.documents[0].$err||t.documents[0].errmsg||t.documents[0].code))return i(e,r.cb,s.create(t.documents[0]));t.hashedName=n.hashedName,i(e,r.cb,null,new u(r.fullResult?t:t.documents[0],n,t))}})}}r(O,o),Object.defineProperty(O.prototype,\"size\",{enumerable:!0,get:function(){return this.options.size}}),Object.defineProperty(O.prototype,\"connectionTimeout\",{enumerable:!0,get:function(){return this.options.connectionTimeout}}),Object.defineProperty(O.prototype,\"socketTimeout\",{enumerable:!0,get:function(){return this.options.socketTimeout}}),O.prototype.socketCount=function(){return this.availableConnections.length+this.inUseConnections.length},O.prototype.allConnections=function(){return this.availableConnections.concat(this.inUseConnections).concat(this.connectingConnections)},O.prototype.get=function(){return this.allConnections()[0]},O.prototype.isConnected=function(){if(this.state==S||this.state==w)return!1;for(var e=this.availableConnections.concat(this.inUseConnections),t=0;t<e.length;t++)if(e[t].isConnected())return!0;return!(0!=e.length||!this.authenticating)},O.prototype.isDestroyed=function(){return this.state==S||this.state==w},O.prototype.isDisconnected=function(){return this.state==v},O.prototype.connect=function(){if(this.state!=v)throw new s(\"connection in unlawful state \"+this.state);var e=this;C(this,b);var t=Array.prototype.slice.call(arguments,0),n=new i(A(e),this.options);this.connectingConnections.push(n),n.once(\"connect\",function(n){return e.state==S||e.state==w?e.destroy():e.options.inTopology?(C(e,x),N(n,e.connectingConnections,e.availableConnections),e.emit(\"connect\",e)):void I(e,n,function(r){return e.state==S||e.state==w?e.destroy():r?(e.destroy(),e.emit(\"error\",r)):void _(e,t,n,function(t){return e.state==S||e.state==w?e.destroy():t?(e.destroy(),e.emit(\"error\",t)):(C(e,x),N(n,e.connectingConnections,e.availableConnections),void e.emit(\"connect\",e))})})}),n.once(\"error\",T(this,\"error\")),n.once(\"close\",T(this,\"close\")),n.once(\"timeout\",T(this,\"timeout\")),n.once(\"parseError\",T(this,\"parseError\"));try{n.connect()}catch(t){process.nextTick(function(){e.emit(\"error\",t)})}},O.prototype.auth=function(e){var t=this,n=Array.prototype.slice.call(arguments,0),r=n.pop();if(null==t.authProviders[e]&&\"default\"!=e)throw new s(c(\"auth provider %s does not exist\",e));this.authenticating=!0,this.authenticatingTimestamp=(new Date).getTime(),function e(t,n){if(!t.loggingout)return n();setTimeout(function(){e(t,n)},1)}(t,function(){!function(e,t,n){var o=e.allConnections();e.availableConnections=[],e.inUseConnections=[],e.connectingConnections=[];var i=o.length,s=null;if(0==i)return e.authenticating=!1,r(null);for(var a=0;a<o.length;a++)_(e,t,o[a],function(t){if(i-=1,t&&(s=t),0==i){if(e.authenticating=!1,e.availableConnections=e.availableConnections.concat(o),s)return e.logger.isError()&&e.logger.error(c(\"[%s] failed to authenticate against server %s:%s\",e.id,e.options.host,e.options.port)),n(s);n(null)}})}(t,n,function(e){t.authenticating=!1,r(e)})})},O.prototype.logout=function(e,t){var n=this;if(\"string\"!=typeof e)throw new s(\"logout method requires a db name as first argument\");if(\"function\"!=typeof t)throw new s(\"logout method requires a callback\");this.loggingout=!0;for(var r=n.availableConnections.concat(n.inUseConnections),o=r.length,i=null,a=0;a<r.length;a++)E(n)(r[a],new l(this.options.bson,c(\"%s.$cmd\",e),{logout:1},{numberToSkip:0,numberToReturn:1}),function(e){o-=1,e&&(i=e),0==o&&(n.loggingout=!1,t(i))})},O.prototype.unref=function(){this.availableConnections.concat(this.inUseConnections).concat(this.connectingConnections).forEach(function(e){e.unref()})};var B=[\"error\",\"close\",\"timeout\",\"parseError\",\"connect\"];function j(e,t){t.forEach(function(e){for(var t=0;t<B.length;t++)e.removeAllListeners(B[t]);e.destroy()}),e.inUseConnections=[],e.availableConnections=[],e.nonAuthenticatedConnections=[],e.connectingConnections=[],C(e,S)}function P(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return t.splice(n,1),!0}function D(e,t){P(t,e.availableConnections)||P(t,e.inUseConnections)||P(t,e.connectingConnections)||P(t,e.nonAuthenticatedConnections)}O.prototype.destroy=function(e){var t=this;if(this.state!=S&&t.state!=w){if(C(this,w),e){for(var n=t.availableConnections.concat(t.inUseConnections).concat(t.nonAuthenticatedConnections).concat(t.connectingConnections);t.queue.length>0;){var r=t.queue.shift();\"function\"==typeof r.cb&&r.cb(new s(\"Pool was force destroyed\"))}return j(t,n)}this.reconnectId&&clearTimeout(this.reconnectId),this.reconnectConnection&&this.reconnectConnection.destroy(),function e(){if(z(t.queue),0==t.queue.length){for(var n=t.availableConnections.concat(t.inUseConnections).concat(t.nonAuthenticatedConnections).concat(t.connectingConnections),r=0;r<n.length;r++)if(n[r].workItems.length>0)return setTimeout(e,1);j(t,n)}else q(t)(),setTimeout(e,1)}()}},O.prototype.write=function(e,t,n){var r=this;if(\"function\"==typeof t&&(n=t),t=t||{},this.state!=S&&this.state!=w){if(this.options.domainsEnabled&&process.domain&&\"function\"==typeof n){var o=n;n=process.domain.bind(function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;t++)e[t]=arguments[t];process.nextTick(function(){o.apply(null,e)})})}var i={cb:n,raw:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,fullResult:!1},a=null;if(Array.isArray(e)){a=[];for(var c=0;c<e.length;c++)a.push(e[c].toBin());i.requestId=e[e.length-1].requestId}else i.requestId=e.requestId,a=e.toBin();if(i.buffer=a,i.promoteLongs=\"boolean\"!=typeof t.promoteLongs||t.promoteLongs,i.promoteValues=\"boolean\"!=typeof t.promoteValues||t.promoteValues,i.promoteBuffers=\"boolean\"==typeof t.promoteBuffers&&t.promoteBuffers,i.raw=\"boolean\"==typeof t.raw&&t.raw,i.immediateRelease=\"boolean\"==typeof t.immediateRelease&&t.immediateRelease,i.documentsReturnedIn=t.documentsReturnedIn,i.command=\"boolean\"==typeof t.command&&t.command,i.fullResult=\"boolean\"==typeof t.fullResult&&t.fullResult,i.noResponse=\"boolean\"==typeof t.noResponse&&t.noResponse,i.socketTimeout=t.socketTimeout,i.monitoring=t.monitoring,t.socketTimeout&&(i.socketTimeout=t.socketTimeout),\"function\"!=typeof n&&!t.noResponse)throw new s(\"write method must provide a callback\");t.monitoring?this.queue.unshift(i):this.queue.push(i),r.executing||process.nextTick(function(){q(r)()})}else if(n)try{n(new s(\"pool destroyed\"))}catch(e){process.nextTick(function(){throw e})}};var L=[\"close\",\"message\",\"error\",\"timeout\",\"parseError\",\"connect\"];function R(e){if(e.state!=S&&e.state!=w){var t=new i(A(e),e.options);e.connectingConnections.push(t);var n,r=function(t){return function(){t.destroy(),D(e,t),!e.reconnectId&&e.options.reconnect&&(e.reconnectId=setTimeout(M(e),e.options.reconnectInterval))}};t.once(\"close\",r(t)),t.once(\"error\",r(t)),t.once(\"timeout\",r(t)),t.once(\"parseError\",r(t)),t.once(\"connect\",(n=t,function(){if(e.state==S||e.state==w)return D(e,n),n.destroy();L.forEach(function(e){n.removeAllListeners(e)}),n.once(\"close\",T(e,\"close\")),n.once(\"error\",T(e,\"error\")),n.once(\"timeout\",T(e,\"timeout\")),n.once(\"parseError\",T(e,\"parseError\")),I(e,n,function(t){return e.state==S||e.state==w?n.destroy():(D(e,n),t?n.destroy():void(e.authenticating?e.nonAuthenticatedConnections.push(n):(e.availableConnections.push(n),q(e)())))})})),t.connect()}}function z(e){for(var t=0;t<e.length;t++)if(e[t].monitoring){var n=e[t];e.splice(t,1),n.cb(new s({message:\"no connection available for monitoring\",driver:!0}))}}function q(e){return function(){e.state!=S&&(e.executing||(e.executing=!0,function t(n){if(!e.authenticating)return n();setTimeout(function(){t(n)},1)}(function(){if(!(e.connectingConnections.length>0))for(;;){var t=e.availableConnections.length+e.connectingConnections.length+e.inUseConnections.length;if(0==e.availableConnections.length){z(e.queue);break}if(0==e.queue.length)break;for(var n=null,r=[],o=0;o<e.availableConnections.length;o++)0==e.availableConnections[o].workItems.length&&r.push(e.availableConnections[o]);if((n=0==r.length?e.availableConnections[e.connectionIndex++%e.availableConnections.length]:r[e.connectionIndex++%r.length]).isConnected()){var i=e.queue.shift();if(i.monitoring){var s=!1;for(o=0;o<e.availableConnections.length;o++)if(e.availableConnections[o].isConnected()&&0==e.availableConnections[o].workItems.length){s=!0,n=e.availableConnections[o];break}if(!s){e.queue.unshift(i),t<e.options.size&&e.queue.length>0&&R(e),setTimeout(function(){q(e)()},10);break}}if(t<e.options.size&&n.workItems.length>0){e.queue.unshift(i),R(e);break}var a=i.buffer;i.authenticating=e.authenticating,i.authenticatingTimestamp=e.authenticatingTimestamp,i.monitoring&&N(n,e.availableConnections,e.inUseConnections),i.noResponse||n.workItems.push(i),i.immediateRelease||\"number\"!=typeof i.socketTimeout||n.setSocketTimeout(i.socketTimeout);var c=!0;if(Array.isArray(a))for(o=0;o<a.length;o++)c=n.write(a[o]);else c=n.write(a);c&&i.immediateRelease&&e.authenticating?(D(e,n),e.nonAuthenticatedConnections.push(n)):!1===c&&(e.queue.unshift(i),D(e,n),z(e.queue))}else D(e,n),z(e.queue)}}),e.executing=!1))}}O._execute=q,e.exports=O},function(e,t,n){var r=n(135),o=n(20),i=n(175),s=o(\"monk:manager\"),a=n(121),c=r.ObjectID,l=r.MongoClient,u=n(5).EventEmitter,p=n(0).inherits,d={CLOSED:\"closed\",OPENING:\"opening\",OPEN:\"open\"},f={castIds:!0,middlewares:[n(172),n(171),n(170)([\"operations\",\"query\",\"data\",\"update\"]),n(169),n(168),n(167)]};function h(e,t,n){if(!e)throw Error(\"No connection URI provided.\");if(!(this instanceof h))return new h(e,t,n);if(\"function\"==typeof t&&(n=t,t={}),t=t||{},this._collectionOptions=i({},f,t.collectionOptions||{}),delete t.collectionOptions,Array.isArray(e)){if(!t.database)for(var r=0,o=e.length;r<o;r++)t.database||(t.database=e[r].replace(/([^\\/])+\\/?/,\"\")),e[r]=e[r].replace(/\\/.*/,\"\");e=e.join(\",\")+\"/\"+t.database,s('repl set connection \"%j\" to database \"%s\"',e,t.database)}\"string\"==typeof e&&(/^mongodb:\\/\\//.test(e)||(e=\"mongodb://\"+e)),this._state=d.OPENING,this._queue=[],this.on(\"open\",function(e){s(\"connection opened\"),s(\"emptying queries queue (%s to go)\",this._queue.length),this._queue.forEach(function(t){t(e)})}.bind(this)),this._connectionURI=e,this._connectionOptions=t,this.open(e,t,n&&function(e){n(e,this)}.bind(this)),this.helper={id:c},this.collections={},this.open=this.open.bind(this),this.close=this.close.bind(this),this.executeWhenOpened=this.executeWhenOpened.bind(this),this.collection=this.col=this.get=this.get.bind(this),this.oid=this.id,this.setDefaultCollectionOptions=this.setDefaultCollectionOptions.bind(this),this.addMiddleware=this.addMiddleware.bind(this)}e.exports=h,p(h,u),h.prototype.open=function(e,t,n){l.connect(e,t,function(e,t){if(e||!t)this._state=d.CLOSED,this.emit(\"error-opening\",e);else{this._state=d.OPEN,this._db=t;var r=this;[\"authenticated\",\"close\",\"error\",\"fullsetup\",\"parseError\",\"reconnect\",\"timeout\"].forEach(function(e){r._db.on(e,function(t){r.emit(e,t)})}),this.emit(\"open\",t)}n&&n(e,this)}.bind(this))},h.prototype.executeWhenOpened=function(){switch(this._state){case d.OPEN:return Promise.resolve(this._db);case d.OPENING:return new Promise(function(e){this._queue.push(e)}.bind(this));case d.CLOSED:default:return new Promise(function(e){this._queue.push(e),this.open(this._connectionURI,this._connectionOptions)}.bind(this))}},h.prototype.then=function(e){return new Promise(function(e,t){this.once(\"open\",e),this.once(\"error-opening\",t)}.bind(this)).then(e.bind(null,this))},h.prototype.catch=function(e){return new Promise(function(e){this.once(\"error-opening\",e)}.bind(this)).then(e.bind(null))},h.prototype.close=function(e,t){\"function\"==typeof e&&(t=e,e=!1);var n=this;function r(r,o){o.close(e,function(){n._state=d.CLOSED,t&&t(),r()})}switch(this._state){case d.CLOSED:return t&&t(),Promise.resolve();case d.OPENING:return new Promise(function(e){n._queue.push(function(t){r(e,t)})});case d.OPEN:default:return new Promise(function(e){r(e,n._db)})}},h.prototype.get=function(e,t){return!1!==(t||{}).cache&&this.collections[e]||(delete(t||{}).cache,this.collections[e]=new a(this,e,i({},this._collectionOptions||{},t||{}))),this.collections[e]},h.prototype.create=function(e,t,n){return this.executeWhenOpened().then(function(n){n.createCollection(e,t)}).catch(function(e){this.emit(\"error\",e)}),this.get(e,n)},h.prototype.setDefaultCollectionOptions=function(e){this._collectionOptions=e},h.prototype.addMiddleware=function(e){this._collectionOptions||(this._collectionOptions={}),this._collectionOptions.middlewares||(this._collectionOptions.middlewares=[]),this._collectionOptions.middlewares.push(e)},h.prototype.id=function(e){return n(95).id(e)},h.prototype.cast=function(e){return n(95).cast(e)}},function(e,t,n){var r=n(193);e.exports=t=r,t.default=r,t.manager=r,t.Collection=n(121);var o=n(95);for(var i in o)t[i]=o[i]},function(e,t,n){\"use strict\";var r=n(3),o=n(18),i=n(9),s=n(0),a=26;function c(e,t,n){if(n=n||{},this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=t,this.files=e.s._filesCollection,this.options=n,this.done=!1,this.id=n.id?n.id:r.BSON.ObjectId(),this.chunkSizeBytes=this.options.chunkSizeBytes,this.bufToStore=new Buffer(this.chunkSizeBytes),this.length=0,this.md5=o.createHash(\"md5\"),this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1,promiseLibrary:this.bucket.s.promiseLibrary},!this.bucket.s.calledOpenUploadStream){this.bucket.s.calledOpenUploadStream=!0;var i=this;!function(e,t){e.files.findOne({},{_id:1},function(n,r){return n?t(n):r?t():void e.files.listIndexes().toArray(function(n,r){if(n){if(n.code===a){var o={filename:1,uploadDate:1};return void e.files.createIndex(o,{background:!1},function(n){if(n)return t(n);p(e,t)})}return t(n)}var i=!1;if(r.forEach(function(e){var t=Object.keys(e.key);2===t.length&&1===e.key.filename&&1===e.key.uploadDate&&(i=!0)}),i)p(e,t);else{o={filename:1,uploadDate:1};var s=f(e);s.background=!1,e.files.createIndex(o,s,function(n){if(n)return t(n);p(e,t)})}})})}(this,function(){i.bucket.s.checkedIndexes=!0,i.bucket.emit(\"index\")})}}function l(e,t,n){if(!e.state.errored){if(e.state.errored=!0,n)return n(t);e.emit(\"error\",t)}}function u(e,t,n){return{_id:r.BSON.ObjectId(),files_id:e,n:t,data:n}}function p(e,t){e.chunks.listIndexes().toArray(function(n,r){if(n){if(n.code===a){var o={files_id:1,n:1};return void e.chunks.createIndex(o,{background:!1,unique:!0},function(e){if(e)return t(e);t()})}return t(n)}var i=!1;if(r.forEach(function(e){e.key&&(2===Object.keys(e.key).length&&1===e.key.files_id&&1===e.key.n&&(i=!0))}),i)t();else{o={files_id:1,n:1};var s=f(e);s.background=!1,s.unique=!0,e.chunks.createIndex(o,s,function(e){if(e)return t(e);t()})}})}function d(e,t){if(e.done)return!0;if(e.state.streamEnd&&0===e.state.outstandingRequests&&!e.state.errored){e.done=!0;var n=function(e,t,n,r,o,i,s,a){var c={_id:e,length:t,chunkSize:n,uploadDate:new Date,md5:r,filename:o};i&&(c.contentType=i);s&&(c.aliases=s);a&&(c.metadata=a);return c}(e.id,e.length,e.chunkSizeBytes,e.md5.digest(\"hex\"),e.filename,e.options.contentType,e.options.aliases,e.options.metadata);return!g(e,t)&&(e.files.insert(n,f(e),function(r){if(r)return l(e,r,t);e.emit(\"finish\",n)}),!0)}return!1}function f(e){var t={};return e.options.writeConcern&&(t.w=e.options.writeConcern.w,t.wtimeout=e.options.writeConcern.wtimeout,t.j=e.options.writeConcern.j),t}function h(e,t){return e.bucket.s.checkedIndexes?t(!1):(e.bucket.once(\"index\",function(){t(!0)}),!0)}function m(e,t){if(0===e.pos)return d(e,t);++e.state.outstandingRequests;var n=new Buffer(e.pos);e.bufToStore.copy(n,0,0,e.pos),e.md5.update(n);var r=u(e.id,e.n,n);if(g(e,t))return!1;e.chunks.insert(r,f(e),function(t){if(t)return l(e,t);--e.state.outstandingRequests,d(e)})}function g(e,t){return!!e.state.aborted&&(\"function\"==typeof t&&t(new Error(\"this stream has been aborted\")),!0)}e.exports=c,s.inherits(c,i.Writable),c.prototype.write=function(e,t,n){var r=this;return h(this,function(){return function(e,t,n,r){if(g(e,r))return!1;var o=Buffer.isBuffer(t)?t:new Buffer(t,n);if(e.length+=o.length,e.pos+o.length<e.chunkSizeBytes)return o.copy(e.bufToStore,e.pos),e.pos+=o.length,r&&r(),!0;var i=o.length,s=e.chunkSizeBytes-e.pos,a=Math.min(s,o.length),c=0;for(;i>0;){var p=o.length-i;if(o.copy(e.bufToStore,e.pos,p,p+a),e.pos+=a,0===(s-=a)){e.md5.update(e.bufToStore);var h=u(e.id,e.n,e.bufToStore);if(++e.state.outstandingRequests,++c,g(e,r))return!1;e.chunks.insert(h,f(e),function(t){if(t)return l(e,t);--e.state.outstandingRequests,--c||(e.emit(\"drain\",h),r&&r(),d(e))}),s=e.chunkSizeBytes,e.pos=0,++e.n}i-=a,a=Math.min(s,i)}return!1}(r,e,t,n)})},c.prototype.abort=function(e){if(this.state.streamEnd){var t=new Error(\"Cannot abort a stream that has already completed\");return\"function\"==typeof e?e(t):this.state.promiseLibrary.reject(t)}if(this.state.aborted)return t=new Error(\"Cannot call abort() on a stream twice\"),\"function\"==typeof e?e(t):this.state.promiseLibrary.reject(t);this.state.aborted=!0,this.chunks.deleteMany({files_id:this.id},function(t){\"function\"==typeof e&&e(t)})},c.prototype.end=function(e,t,n){var r=this;\"function\"==typeof e?(n=e,e=null,t=null):\"function\"==typeof t&&(n=t,t=null),g(this,n)||(this.state.streamEnd=!0,n&&this.once(\"finish\",function(e){n(null,e)}),e?this.write(e,t,function(){m(r)}):h(this,function(){m(r)}))}},function(e,t,n){\"use strict\";var r=n(9),o=n(0);function i(e,t,n,o,i){this.s={bytesRead:0,chunks:e,cursor:null,expected:0,files:t,filter:o,init:!1,expectedEnd:0,file:null,options:i,readPreference:n},r.Readable.call(this)}function s(e){if(e.s.init)throw new Error(\"You cannot change options after the stream has enteredflowing mode!\")}function a(e,t){e.emit(\"error\",t)}e.exports=i,o.inherits(i,r.Readable),i.prototype._read=function(){var e=this;this.destroyed||function(e,t){if(e.s.file)return t();e.s.init||(!function(e){var t={};e.s.readPreference&&(t.readPreference=e.s.readPreference);e.s.options&&e.s.options.sort&&(t.sort=e.s.options.sort);e.s.options&&e.s.options.skip&&(t.skip=e.s.options.skip);e.s.files.findOne(e.s.filter,t,function(t,n){if(t)return a(e,t);if(!n){var r=e.s.filter._id?e.s.filter._id.toString():e.s.filter.filename,o=\"FileNotFound: file \"+r+\" was not found\",i=new Error(o);return i.code=\"ENOENT\",a(e,i)}if(n.length<=0)e.push(null);else if(e.destroyed)e.emit(\"close\");else{e.s.bytesToSkip=function(e,t,n){if(n&&null!=n.start){if(n.start>t.length)throw new Error(\"Stream start (\"+n.start+\") must not be more than the length of the file (\"+t.length+\")\");if(n.start<0)throw new Error(\"Stream start (\"+n.start+\") must not be negative\");if(null!=n.end&&n.end<n.start)throw new Error(\"Stream start (\"+n.start+\") must not be greater than stream end (\"+n.end+\")\");return e.s.bytesRead=Math.floor(n.start/t.chunkSize)*t.chunkSize,e.s.expected=Math.floor(n.start/t.chunkSize),n.start-e.s.bytesRead}}(e,n,e.s.options);var s={files_id:n._id};if(e.s.options&&null!=e.s.options.start){var c=Math.floor(e.s.options.start/n.chunkSize);c>0&&(s.n={$gte:c})}e.s.cursor=e.s.chunks.find(s).sort({n:1}),e.s.readPreference&&e.s.cursor.setReadPreference(e.s.readPreference),e.s.expectedEnd=Math.ceil(n.length/n.chunkSize),e.s.file=n,e.s.bytesToTrim=function(e,t,n,r){if(r&&null!=r.end){if(r.end>t.length)throw new Error(\"Stream end (\"+r.end+\") must not be more than the length of the file (\"+t.length+\")\");if(r.start<0)throw new Error(\"Stream end (\"+r.end+\") must not be negative\");var o=null!=r.start?Math.floor(r.start/t.chunkSize):0;return n.limit(Math.ceil(r.end/t.chunkSize)-o),e.s.expectedEnd=Math.ceil(r.end/t.chunkSize),Math.ceil(r.end/t.chunkSize)*t.chunkSize-r.end}}(e,n,e.s.cursor,e.s.options),e.emit(\"file\",n)}})}(e),e.s.init=!0);e.once(\"file\",function(){t()})}(e,function(){!function(e){if(e.destroyed)return;e.s.cursor.next(function(t,n){if(!e.destroyed){if(t)return a(e,t);if(!n)return e.push(null),e.s.cursor.close(function(t){if(t)return a(e,t);e.emit(\"close\")});var r=e.s.file.length-e.s.bytesRead,o=e.s.expected++,i=Math.min(e.s.file.chunkSize,r);if(n.n>o){var s=\"ChunkIsMissing: Got unexpected n: \"+n.n+\", expected: \"+o;return a(e,new Error(s))}if(n.n<o)return s=\"ExtraChunk: Got unexpected n: \"+n.n+\", expected: \"+o,a(e,new Error(s));var c=Buffer.isBuffer(n.data)?n.data:n.data.buffer;if(c.length!==i)return r<=0?(s=\"ExtraChunk: Got unexpected n: \"+n.n,a(e,new Error(s))):(s=\"ChunkIsWrongSize: Got unexpected length: \"+c.length+\", expected: \"+i,a(e,new Error(s)));if(e.s.bytesRead+=c.length,0===c.length)return e.push(null);var l=null,u=null;null!=e.s.bytesToSkip&&(l=e.s.bytesToSkip,e.s.bytesToSkip=0),o===e.s.expectedEnd&&null!=e.s.bytesToTrim&&(u=e.s.bytesToTrim),e.s.options.end&&e.s.options.end-e.s.bytesToSkip<c.length&&(u=e.s.options.end-e.s.bytesToSkip),null==l&&null==u||(c=c.slice(l||0,u||c.length)),e.push(c)}})}(e)})},i.prototype.start=function(e){return s(this),this.s.options.start=e,this},i.prototype.end=function(e){return s(this),this.s.options.end=e,this},i.prototype.abort=function(e){var t=this;this.push(null),this.destroyed=!0,this.s.cursor?this.s.cursor.close(function(n){t.emit(\"close\"),e&&e(n)}):(this.s.init||t.emit(\"close\"),e&&e())}},function(e,t,n){\"use strict\";var r=n(5).EventEmitter,o=n(196),i=n(195),s=n(1).shallowClone,a=n(1).toError,c=n(0),l=n(1).executeOperation,u={bucketName:\"fs\",chunkSizeBytes:261120};function p(e,t){if(r.apply(this),this.setMaxListeners(0),t&&\"object\"==typeof t){t=s(t);for(var n=Object.keys(u),o=0;o<n.length;++o)t[n[o]]||(t[n[o]]=u[n[o]])}else t=u;this.s={db:e,options:t,_chunksCollection:e.collection(t.bucketName+\".chunks\"),_filesCollection:e.collection(t.bucketName+\".files\"),checkedIndexes:!1,calledOpenUploadStream:!1,promiseLibrary:e.s.promiseLibrary||Promise}}function d(e,t,n){e.s._filesCollection.deleteOne({_id:t},function(r,o){if(r)return n(r);e.s._chunksCollection.deleteMany({files_id:t},function(e){return e?n(e):o.result.n?void n():n(new Error(\"FileNotFound: no file with id \"+t+\" found\"))})})}function f(e,t,n,r){var o={_id:t},i={$set:{filename:n}};e.s._filesCollection.updateOne(o,i,function(e,n){return e?r(e):n.result.n?void r():r(a(\"File with id \"+t+\" not found\"))})}function h(e,t){e.s._filesCollection.drop(function(n){if(n)return t(n);e.s._chunksCollection.drop(function(e){return e?t(e):t()})})}e.exports=p,c.inherits(p,r),p.prototype.openUploadStream=function(e,t){return(t=t?s(t):{}).chunkSizeBytes||(t.chunkSizeBytes=this.s.options.chunkSizeBytes),new i(this,e,t)},p.prototype.openUploadStreamWithId=function(e,t,n){return(n=n?s(n):{}).chunkSizeBytes||(n.chunkSizeBytes=this.s.options.chunkSizeBytes),n.id=e,new i(this,t,n)},p.prototype.openDownloadStream=function(e,t){var n={_id:e};return t={start:t&&t.start,end:t&&t.end},new o(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,n,t)},p.prototype.delete=function(e,t){return l(this.s.db.s.topology,d,[this,e,t],{skipSessions:!0})},p.prototype.find=function(e,t){e=e||{},t=t||{};var n=this.s._filesCollection.find(e);return null!=t.batchSize&&n.batchSize(t.batchSize),null!=t.limit&&n.limit(t.limit),null!=t.maxTimeMS&&n.maxTimeMS(t.maxTimeMS),null!=t.noCursorTimeout&&n.addCursorFlag(\"noCursorTimeout\",t.noCursorTimeout),null!=t.skip&&n.skip(t.skip),null!=t.sort&&n.sort(t.sort),n},p.prototype.openDownloadStreamByName=function(e,t){var n={uploadDate:-1},r=null;t&&null!=t.revision&&(t.revision>=0?(n={uploadDate:1},r=t.revision):r=-t.revision-1);var i={filename:e};return t={sort:n,skip:r,start:t&&t.start,end:t&&t.end},new o(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,i,t)},p.prototype.rename=function(e,t,n){return l(this.s.db.s.topology,f,[this,e,t,n],{skipSessions:!0})},p.prototype.drop=function(e){return l(this.s.db.s.topology,h,[this,e],{skipSessions:!0})}},function(e,t,n){\"use strict\";var r=n(1).shallowClone,o=n(1).handleCallback,i=n(3).MongoError,s=n(0).format,a=function(e,t,n,r,a){if(e.topology&&e.topology.isDestroyed())return a(new i(\"topology was destroyed\"));var c=r.dbName;c=r.authdb?r.authdb:c,c=r.authSource?r.authSource:c;var l=function(t,n){e.listeners(\"authenticated\").length>0&&e.emit(\"authenticated\",t,n),o(a,t,n)},u=r.authMechanism||\"\";\"MONGODB-CR\"===(u=u.toUpperCase())?e.topology.auth(\"mongocr\",c,t,n,function(e){if(e)return o(a,e,!1);l(null,!0)}):\"PLAIN\"===u?e.topology.auth(\"plain\",c,t,n,function(e){if(e)return o(a,e,!1);l(null,!0)}):\"MONGODB-X509\"===u?e.topology.auth(\"x509\",c,t,n,function(e){if(e)return o(a,e,!1);l(null,!0)}):\"SCRAM-SHA-1\"===u?e.topology.auth(\"scram-sha-1\",c,t,n,function(e){if(e)return o(a,e,!1);l(null,!0)}):\"GSSAPI\"===u?\"win32\"===process.platform?e.topology.auth(\"sspi\",c,t,n,r,function(e){if(e)return o(a,e,!1);l(null,!0)}):e.topology.auth(\"gssapi\",c,t,n,r,function(e){if(e)return o(a,e,!1);l(null,!0)}):\"DEFAULT\"===u?e.topology.auth(\"default\",c,t,n,function(e){if(e)return o(a,e,!1);l(null,!0)}):o(a,i.create({message:s(\"authentication mechanism %s not supported\",r.authMechanism),driver:!0}))};e.exports=function(e,t,n,s,c){if(\"function\"==typeof s&&(c=s,s={}),(s=r(s=s||{})).authMechanism){if(\"GSSAPI\"!==s.authMechanism&&\"DEFAULT\"!==s.authMechanism&&\"MONGODB-CR\"!==s.authMechanism&&\"MONGODB-X509\"!==s.authMechanism&&\"SCRAM-SHA-1\"!==s.authMechanism&&\"PLAIN\"!==s.authMechanism)return o(c,i.create({message:\"only DEFAULT, GSSAPI, PLAIN, MONGODB-X509, SCRAM-SHA-1 or MONGODB-CR is supported by authMechanism\",driver:!0}))}else s.authMechanism=\"DEFAULT\";return\"function\"==typeof c?a(e,t,n,s,function(e,t){if(e&&e.message&&-1!==e.message.indexOf(\"saslStart\")&&(e.code=59),e)return c(e,t);c(null,t)}):new e.s.promiseLibrary(function(r,o){a(e,t,n,s,function(e,t){if(e&&e.message&&-1!==e.message.indexOf(\"saslStart\")&&(e.code=59),e)return o(e);r(t)})})}},function(e){e.exports={_from:\"mongodb\",_id:\"mongodb@3.0.3\",_inBundle:!1,_integrity:\"sha512-BuYbPwjrIS/Ik/AUegjnYb8ncOa4dj8tzP4eSCsaqjP9yjmIWzzKrAXBY+s8xy6xkTJxgvbuTFub6cIwpmHRXQ==\",_location:\"/mongodb\",_phantomChildren:{},_requested:{type:\"tag\",registry:!0,raw:\"mongodb\",name:\"mongodb\",escapedName:\"mongodb\",rawSpec:\"\",saveSpec:null,fetchSpec:\"latest\"},_requiredBy:[\"#USER\",\"/\"],_resolved:\"https://registry.npmjs.org/mongodb/-/mongodb-3.0.3.tgz\",_shasum:\"83b33e01f26b4a2e1f8a2b3427cabbaee31df017\",_spec:\"mongodb\",_where:\"/Users/darkua/code/Jodel-Backend-Challenge\",author:{name:\"Christian Kvalheim\"},bugs:{url:\"https://github.com/mongodb/node-mongodb-native/issues\"},bundleDependencies:!1,dependencies:{\"mongodb-core\":\"3.0.3\"},deprecated:!1,description:\"The official MongoDB driver for Node.js\",devDependencies:{betterbenchmarks:\"^0.1.0\",bluebird:\"3.5.0\",bson:\"^1.0.4\",chai:\"^4.1.1\",co:\"4.6.0\",\"conventional-changelog-cli\":\"^1.3.5\",coveralls:\"^2.11.6\",eslint:\"^4.5.0\",\"eslint-plugin-prettier\":\"^2.2.0\",istanbul:\"^0.4.5\",jsdoc:\"3.5.4\",\"mongodb-extended-json\":\"^1.10.0\",\"mongodb-mock-server\":\"^1.0.0\",\"mongodb-test-runner\":\"^1.1.18\",prettier:\"^1.5.3\",semver:\"5.4.1\",sinon:\"^4.3.0\",\"worker-farm\":\"^1.5.0\"},engines:{node:\">=4\"},homepage:\"https://github.com/mongodb/node-mongodb-native\",keywords:[\"mongodb\",\"driver\",\"official\"],license:\"Apache-2.0\",main:\"index.js\",name:\"mongodb\",repository:{type:\"git\",url:\"git+ssh://git@github.com/mongodb/node-mongodb-native.git\"},scripts:{changelog:\"conventional-changelog -p angular -i HISTORY.md -s\",coverage:\"istanbul cover mongodb-test-runner -- -t 60000  test/unit test/functional\",format:\"prettier --print-width 100 --tab-width 2 --single-quote --write 'test/**/*.js' 'lib/**/*.js'\",lint:\"eslint lib test\",test:\"npm run lint && mongodb-test-runner -t 60000 test/unit test/functional\"},version:\"3.0.3\"}},function(e,t,n){\"use strict\";const r=n(3).ReadPreference,o=n(58),i=n(0).format,s=n(3).Logger,a=n(109);function c(e,t){let n=/^.*?\\./,r=`.${e.replace(n,\"\")}`,o=`.${t.replace(n,\"\")}`;return!!r.endsWith(o)}function l(e,t,n){let a,c;try{a=function(e,t){let n=\"\",a=\"\",c=\"\",l=\"admin\",u=o.parse(e,!0);if((null==u.hostname||\"\"===u.hostname)&&-1===e.indexOf(\".sock\"))throw new Error(\"No hostname or hostnames provided in connection string\");if(\"0\"===u.port)throw new Error(\"Invalid port (zero) with hostname\");if(!isNaN(parseInt(u.port,10))&&parseInt(u.port,10)>65535)throw new Error(\"Invalid port (larger than 65535) with hostname\");if(u.path&&u.path.length>0&&\"/\"!==u.path[0]&&-1===e.indexOf(\".sock\"))throw new Error(\"Missing delimiting slash between hosts and options\");if(u.query)for(let e in u.query){if(-1!==e.indexOf(\"::\"))throw new Error(\"Double colon in host identifier\");if(\"\"===u.query[e])throw new Error(\"Query parameter \"+e+\" is an incomplete value pair\")}if(u.auth){let t=u.auth.split(\":\");if(-1!==e.indexOf(u.auth)&&t.length>2)throw new Error(\"Username with password containing an unescaped colon\");if(-1!==e.indexOf(u.auth)&&-1!==u.auth.indexOf(\"@\"))throw new Error(\"Username containing an unescaped at-sign\")}let p=e.split(\"?\").shift().split(\",\"),d=[];for(let e=0;e<p.length;e++){let t=p[e];-1!==t.indexOf(\"mongodb\")?-1!==t.indexOf(\"@\")?d.push(t.split(\"@\").pop()):d.push(t.substr(\"mongodb://\".length)):-1!==t.indexOf(\"/\")?d.push(t.split(\"/\").shift()):-1===t.indexOf(\"/\")&&d.push(t.trim())}for(let e=0;e<d.length;e++){let t=o.parse(i(\"mongodb://%s\",d[e].trim()));if(t.path&&-1!==t.path.indexOf(\":\"))throw t.path.split(\"/\").length>1&&-1===t.path.indexOf(\"::\")?new Error(\"Slash in host identifier\"):new Error(\"Double colon in host identifier\")}-1!==e.indexOf(\"?\")?(c=e.substr(e.indexOf(\"?\")+1),n=e.substring(\"mongodb://\".length,e.indexOf(\"?\"))):n=e.substring(\"mongodb://\".length);-1!==n.indexOf(\"@\")&&(a=n.split(\"@\")[0],n=n.split(\"@\")[1]);if(n.split(\"/\").length>2)throw new Error(\"Unsupported host '\"+n.split(\"?\")[0]+\"', hosts must be URL encoded and contain at most one unencoded slash\");if(-1!==n.indexOf(\".sock\")){if(-1!==n.indexOf(\".sock/\")){if(-1!==(l=n.split(\".sock/\")[1]).indexOf(\"/\")){if(2===l.split(\"/\").length&&0===l.split(\"/\")[1].length)throw new Error(\"Illegal trailing backslash after database name\");throw new Error(\"More than 1 database name in URL\")}n=n.split(\"/\",n.indexOf(\".sock\")+\".sock\".length)}}else if(-1!==n.indexOf(\"/\")){if(n.split(\"/\").length>2){if(0===n.split(\"/\")[2].length)throw new Error(\"Illegal trailing backslash after database name\");throw new Error(\"More than 1 database name in URL\")}l=n.split(\"/\")[1],n=n.split(\"/\")[0]}n=decodeURIComponent(n);let f,h,m,g,y={},v=a||\"\",b=v.split(\":\",2),x=decodeURIComponent(b[0]);if(b[0]!==encodeURIComponent(x))throw new Error(\"Username contains an illegal unescaped character\");if(b[0]=x,b[1]){let e=decodeURIComponent(b[1]);if(b[1]!==encodeURIComponent(e))throw new Error(\"Password contains an illegal unescaped character\");b[1]=e}2===b.length&&(y.auth={user:b[0],password:b[1]});t&&null!=t.auth&&(y.auth=t.auth);let w={socketOptions:{}},S={read_preference_tags:[]},k={socketOptions:{}},O={socketOptions:{}};if(y.server_options=w,y.db_options=S,y.rs_options=k,y.mongos_options=O,e.match(/\\.sock/)){let t=e.substring(e.indexOf(\"mongodb://\")+\"mongodb://\".length,e.lastIndexOf(\".sock\")+\".sock\".length);-1!==t.indexOf(\"@\")&&(t=t.split(\"@\")[1]),t=decodeURIComponent(t),m=[{domain_socket:t}]}else{let e={};m=(f=n).split(\",\").map(function(t){let n,r,o;if(o=/\\[([^\\]]+)\\](?::(.+))?/.exec(t))n=o[1],r=parseInt(o[2],10)||27017;else{let e=t.split(\":\",2);n=e[0]||\"localhost\",r=null!=e[1]?parseInt(e[1],10):27017,-1!==n.indexOf(\"?\")&&(n=n.split(/\\?/)[0])}return e[n+\"_\"+r]?null:(e[n+\"_\"+r]=1,{host:n,port:r})}).filter(function(e){return null!=e})}y.dbName=l||\"admin\",(h=(c||\"\").split(/[&;]/)).forEach(function(e){if(e){var t=e.split(\"=\"),n=t[0],o=t[1];switch(n){case\"slaveOk\":case\"slave_ok\":w.slave_ok=\"true\"===o,S.slaveOk=\"true\"===o;break;case\"maxPoolSize\":case\"poolSize\":w.poolSize=parseInt(o,10),k.poolSize=parseInt(o,10);break;case\"appname\":y.appname=decodeURIComponent(o);break;case\"autoReconnect\":case\"auto_reconnect\":w.auto_reconnect=\"true\"===o;break;case\"ssl\":if(\"prefer\"===o){w.ssl=o,k.ssl=o,O.ssl=o;break}w.ssl=\"true\"===o,k.ssl=\"true\"===o,O.ssl=\"true\"===o;break;case\"sslValidate\":w.sslValidate=\"true\"===o,k.sslValidate=\"true\"===o,O.sslValidate=\"true\"===o;break;case\"replicaSet\":case\"rs_name\":k.rs_name=o;break;case\"reconnectWait\":k.reconnectWait=parseInt(o,10);break;case\"retries\":k.retries=parseInt(o,10);break;case\"readSecondary\":case\"read_secondary\":k.read_secondary=\"true\"===o;break;case\"fsync\":S.fsync=\"true\"===o;break;case\"journal\":S.j=\"true\"===o;break;case\"safe\":S.safe=\"true\"===o;break;case\"nativeParser\":case\"native_parser\":S.native_parser=\"true\"===o;break;case\"readConcernLevel\":S.readConcern={level:o};break;case\"connectTimeoutMS\":w.socketOptions.connectTimeoutMS=parseInt(o,10),k.socketOptions.connectTimeoutMS=parseInt(o,10),O.socketOptions.connectTimeoutMS=parseInt(o,10);break;case\"socketTimeoutMS\":w.socketOptions.socketTimeoutMS=parseInt(o,10),k.socketOptions.socketTimeoutMS=parseInt(o,10),O.socketOptions.socketTimeoutMS=parseInt(o,10);break;case\"w\":S.w=parseInt(o,10),isNaN(S.w)&&(S.w=o);break;case\"authSource\":S.authSource=o;break;case\"gssapiServiceName\":S.gssapiServiceName=o;break;case\"authMechanism\":if(\"GSSAPI\"===o)if(null==y.auth){let e=decodeURIComponent(v);if(-1===e.indexOf(\"@\"))throw new Error(\"GSSAPI requires a provided principal\");y.auth={user:e,password:null}}else y.auth.user=decodeURIComponent(y.auth.user);else\"MONGODB-X509\"===o&&(y.auth={user:decodeURIComponent(v)});if(\"GSSAPI\"!==o&&\"MONGODB-X509\"!==o&&\"MONGODB-CR\"!==o&&\"DEFAULT\"!==o&&\"SCRAM-SHA-1\"!==o&&\"PLAIN\"!==o)throw new Error(\"Only DEFAULT, GSSAPI, PLAIN, MONGODB-X509, SCRAM-SHA-1 or MONGODB-CR is supported by authMechanism\");S.authMechanism=o;break;case\"authMechanismProperties\":{let e={};o.split(\",\").forEach(function(t){let n=t.split(\":\");e[n[0]]=n[1]}),S.authMechanismProperties=e,\"string\"==typeof e.SERVICE_NAME&&(S.gssapiServiceName=e.SERVICE_NAME),\"string\"==typeof e.SERVICE_REALM&&(S.gssapiServiceRealm=e.SERVICE_REALM),\"string\"==typeof e.CANONICALIZE_HOST_NAME&&(S.gssapiCanonicalizeHostName=\"true\"===e.CANONICALIZE_HOST_NAME)}break;case\"wtimeoutMS\":S.wtimeout=parseInt(o,10);break;case\"readPreference\":if(!r.isValid(o))throw new Error(\"readPreference must be either primary/primaryPreferred/secondary/secondaryPreferred/nearest\");S.readPreference=o;break;case\"maxStalenessSeconds\":S.maxStalenessSeconds=parseInt(o,10);break;case\"readPreferenceTags\":{let e={};if(null==(o=decodeURIComponent(o))||\"\"===o){S.read_preference_tags.push(e);break}let t=o.split(/,/);for(let n=0;n<t.length;n++){let r=t[n].trim().split(/:/);e[r[0]]=r[1]}S.read_preference_tags.push(e)}break;case\"compressors\":{g=w.compression||{};let e=o.split(\",\");if(!e.every(function(e){return\"snappy\"===e||\"zlib\"===e}))throw new Error(\"Compressors must be at least one of snappy or zlib\");g.compressors=e,w.compression=g}break;case\"zlibCompressionLevel\":{g=w.compression||{};let e=parseInt(o,10);if(e<-1||e>9)throw new Error(\"zlibCompressionLevel must be an integer between -1 and 9\");g.zlibCompressionLevel=e,w.compression=g}break;case\"retryWrites\":S.retryWrites=\"true\"===o;break;case\"minSize\":S.minSize=parseInt(o,10);break;default:s(\"URL Parser\").warn(`${n} is not supported as a connection string option`)}}}),0===S.read_preference_tags.length&&(S.read_preference_tags=null);if(!(-1!==S.w&&0!==S.w||!0!==S.journal&&!0!==S.fsync&&!0!==S.safe))throw new Error(\"w set to -1 or 0 cannot be combined with safe/w/journal/fsync\");S.readPreference||(S.readPreference=\"primary\");return S=Object.assign(S,t),y.servers=m,y}(e,t)}catch(e){c=e}return c?n(c,null):n(null,a)}e.exports=function(e,t,n){let r;\"function\"==typeof t&&(n=t,t={}),t=t||{};try{r=o.parse(e,!0)}catch(e){return n(new Error(\"URL malformed, cannot be parsed\"))}if(\"mongodb:\"!==r.protocol&&\"mongodb+srv:\"!==r.protocol)return n(new Error(\"Invalid schema, expected `mongodb` or `mongodb+srv`\"));if(\"mongodb:\"===r.protocol)return l(e,t,n);if(r.hostname.split(\".\").length<3)return n(new Error(\"URI does not have hostname, domain name and tld\"));if(r.domainLength=r.hostname.split(\".\").length,r.pathname&&r.pathname.match(\",\"))return n(new Error(\"Invalid URI, cannot contain multiple hostnames\"));if(r.port)return n(new Error(\"Ports not accepted with `mongodb+srv` URIs\"));let i=`_mongodb._tcp.${r.host}`;a.resolveSrv(i,function(e,o){if(e)return n(e);if(0===o.length)return n(new Error(\"No addresses found at host\"));for(let e=0;e<o.length;e++)if(!c(o[e].name,r.hostname,r.domainLength))return n(new Error(\"Server record does not share hostname with parent URI\"));let i=r.auth?`mongodb://${r.auth}@`:\"mongodb://\",s=o.map(function(e,t){return 0===t?`${i}${e.name}:${e.port}`:`${e.name}:${e.port}`}).join(\",\")+\"/\",u=[];(t.ssl||r.search)&&(t.ssl||!r.search||r.search.match(\"ssl\"))||u.push(\"ssl=true\"),r.search&&u.push(r.search.replace(\"?\",\"\")),a.resolveTxt(r.host,function(e,r){if(e&&\"ENODATA\"!==e.code)return n(e);if(e&&\"ENODATA\"===e.code&&(r=null),r){if(r.length>1)return n(new Error(\"Multiple text records not allowed\"));if(!(r=(r=r[0]).length>1?r.join(\"\"):r[0]).includes(\"authSource\")&&!r.includes(\"replicaSet\"))return n(new Error(\"Text record must only set `authSource` or `replicaSet`\"));u.push(r)}u.length&&(s+=`?${u.join(\"&\")}`),l(s,t,n)})})}},function(e,t,n){\"use strict\";var r=n(5),o=n(0).inherits,i=n(3).MongoNetworkError,s=[\"maxAwaitTimeMS\",\"collation\",\"readPreference\"],a=function(e,t,r){if(!(e instanceof n(46)))throw new Error(\"collection provided to ChangeStream constructor is not an instance of Collection\");var o=this;o.pipeline=t||[],o.options=r||{},o.promiseLibrary=e.s.promiseLibrary,o.namespace={collection:e.collectionName,database:e.s.db.databaseName},o.serverConfig=e.s.db.serverConfig,o.options.readPreference=o.options.readPreference||e.s.readPreference,o.cursor=c(o),o.on(\"newListener\",function(e){\"change\"===e&&o.cursor&&0===o.cursor.listenerCount(\"change\")&&o.cursor.on(\"data\",function(e){u(o,null,e)})}),o.on(\"removeListener\",function(e){\"change\"===e&&0===o.listenerCount(\"change\")&&o.cursor&&o.cursor.removeAllListeners(\"data\")})};o(a,r);var c=function(e){e.resumeToken&&(e.options.resumeAfter=e.resumeToken);var t=l(e.serverConfig,e.namespace,e.pipeline,e.resumeToken,e.options);return e.listenerCount(\"change\")>0&&t.on(\"data\",function(t){u(e,null,t)}),t.on(\"close\",function(){e.emit(\"close\")}),t.on(\"end\",function(){e.emit(\"end\")}),t.on(\"error\",function(t){e.emit(\"error\",t)}),t},l=function(e,t,n,r,o){var i={};o.fullDocument&&(i.fullDocument=o.fullDocument),(r||o.resumeAfter)&&(i.resumeAfter=r||o.resumeAfter);var a={};s.forEach(function(e){o[e]&&(a[e]=o[e])});var c=[{$changeStream:i}];c=c.concat(n);var l={aggregate:t.collection,pipeline:c,readConcern:{level:\"majority\"},cursor:{batchSize:o.batchSize||1}};return e.cursor(t.database+\".\"+t.collection,l,a)};a.prototype.hasNext=function(e){return this.cursor.hasNext(e)},a.prototype.next=function(e){var t=this;return this.isClosed()?e?e(new Error(\"Change Stream is not open.\"),null):t.promiseLibrary.reject(new Error(\"Change Stream is not open.\")):this.cursor.next().then(function(n){return u(t,null,n,e)}).catch(function(n){return u(t,n,null,e)})},a.prototype.isClosed=function(){return!this.cursor||this.cursor.isClosed()},a.prototype.close=function(e){if(!this.cursor)return e?e():this.promiseLibrary.resolve();var t=this.cursor;return delete this.cursor,t.close(e)},a.prototype.pipe=function(e,t){return this.pipeDestinations||(this.pipeDestinations=[]),this.pipeDestinations.push(e),this.cursor.pipe(e,t)},a.prototype.unpipe=function(e){return this.pipeDestinations&&this.pipeDestinations.indexOf(e)>-1&&this.pipeDestinations.splice(this.pipeDestinations.indexOf(e),1),this.cursor.unpipe(e)},a.prototype.pause=function(){return this.cursor.pause()},a.prototype.resume=function(){return this.cursor.resume()},a.prototype.stream=function(e){return this.streamOptions=e,this.cursor.stream(e)};var u=function(e,t,n,r){if(t)return t instanceof i&&!e.attemptingResume?(e.attemptingResume=!0,e.cursor.close(function(n){if(n)return r?r(t,null):e.promiseLibrary.reject(t);if(e.cursor=c(e),e.pipeDestinations){var o=e.cursor.stream(e.streamOptions);for(var i in e.pipeDestinations)o.pipe(i)}return r?e.next(r):e.next()})):\"function\"==typeof r?r(t,null):e.listenerCount(\"error\")?e.emit(\"error\",t):e.promiseLibrary.reject(t);if(e.attemptingResume=!1,!n||!n._id){var o=new Error(\"A change stream document has been received that lacks a resume token (_id).\");return\"function\"==typeof r?r(o,null):e.listenerCount(\"error\")?e.emit(\"error\",o):e.promiseLibrary.reject(o)}return e.resumeToken=n._id,\"function\"==typeof r?r(t,n):e.listenerCount(\"change\")?e.emit(\"change\",n):e.promiseLibrary.resolve(n)};e.exports=a},function(e,t,n){\"use strict\";var r=n(5).EventEmitter,o=n(0).inherits,i=n(39),s=n(33),a=n(108).OrderedBulkOperation,c=n(107).UnorderedBulkOperation,l=n(141),u=n(25),p=n(46),d=n(74),f={operationId:1,next:function(){return this.operationId++}},h={current:function(){return(new Date).getTime()},duration:function(e,t){return t-e}},m=[\"authenticate\",\"saslStart\",\"saslContinue\",\"getnonce\",\"createUser\",\"updateUser\",\"copydbgetnonce\",\"copydbsaslstart\",\"copydb\"],g=function(e,t,o){var g=(t=t||{}).operationIdGenerator||f,y=t.timestampGenerator||h;r.call(this),this.overloads=[];\"function\"==typeof o&&function(e){for(var t=[],n=[l,a,c,s,i,u,p,d],r=0;r<n.length;r++)n[r].define&&t.push(n[r].define.generate());e(null,t)}(o);var v=this,b=[\"command\",\"insert\",\"update\",\"remove\"],x=e.Server.prototype;b.forEach(function(t){var n=x[t];v.overloads.push({proto:x,name:t,func:n}),x[t]=function(){var r=e.Query.nextRequestId(),o=Array.prototype.slice.call(arguments,0),i=o[0],s=o[1],a=o[2]||{},c=Object.keys(s)[0],l=i.split(\".\")[0],u=i.split(\".\");u.shift(),u=u.join(\".\"),\"insert\"===t?(c=\"insert\",s={insert:u,documents:s},a.writeConcern&&Object.keys(a.writeConcern).length>0&&(s.writeConcern=a.writeConcern),s.ordered=void 0===a.ordered||a.ordered):\"update\"===t?(c=\"update\",s={update:u,updates:s},a.writeConcern&&Object.keys(a.writeConcern).length>0&&(s.writeConcern=a.writeConcern),s.ordered=void 0===a.ordered||a.ordered):\"remove\"===t&&(c=\"delete\",s={delete:u,deletes:s},a.writeConcern&&Object.keys(a.writeConcern).length>0&&(s.writeConcern=a.writeConcern),s.ordered=void 0===a.ordered||a.ordered);var p=o.pop(),d=p.operationId||g.next(),f=this.s.pool.get(),h={command:s,databaseName:l,commandName:c,requestId:r,operationId:d,connectionId:f};-1!==m.indexOf(c.toLowerCase())&&(h.commandObj={},h.commandObj[c]=!0),v.emit(\"started\",h);var b=y.current();o.push(function(e,t){var n=y.current(),o={duration:y.duration(b,n),commandName:c,requestId:r,operationId:d,connectionId:f};e||t&&t.result&&0===t.result.ok?(o.failure=e||t.result.writeErrors||t.result,-1!==m.indexOf(c.toLowerCase())&&(o.failure={}),v.emit(\"failed\",o)):s&&s.writeConcern&&0===s.writeConcern.w?(o.reply={ok:1},v.emit(\"succeeded\",o)):(o.reply=t&&t.result?t.result:t,-1!==m.indexOf(c.toLowerCase())&&(o.reply={}),v.emit(\"succeeded\",o)),p(e,t)}),n.apply(this,o)}}),b=[\"execute\"];var w=[n(108).Bulk.prototype,n(107).Bulk.prototype];w.forEach(function(e){b.forEach(function(t){var n=e[t];v.overloads.push({proto:e,name:t,func:n}),e[t]=function(){var e=Array.prototype.slice.call(arguments,0);this.operationId=g.next();var t=e.pop();if(\"function\"!=typeof t)return n.apply(this,e);e.push(function(e,n){t(e,n)}),n.apply(this,e)}})}),b=[\"_find\",\"_getmore\",\"_killcursor\"];var S={_find:\"find\",_getmore:\"getMore\",_killcursor:\"killCursors\",_explain:\"explain\"};(w=[n(25).prototype,n(33).prototype,n(39).prototype]).forEach(function(t){b.forEach(function(n){var r=t[n];v.overloads.push({proto:t,name:n,func:r}),t[n]=function(){var t=this,o=e.Query.nextRequestId(),i=g.next(),s=this.ns.split(\".\"),a=s[0];s.shift();var c=s.join(\".\"),l=this.query,u=this.s.cmd;\"_find\"===n&&(t.operationId=i),\"_getmore\"===n?(l={getMore:this.cursorState.cursorId,collection:c,batchSize:u.batchSize},u.maxTimeMS&&(l.maxTimeMS=u.maxTimeMS)):\"_killcursor\"===n?l={killCursors:c,cursors:[this.cursorState.cursorId]}:u.find?(l={find:c,filter:u.query},u.sort&&(l.sort=u.sort),u.fields&&(l.projection=u.fields),u.limit&&u.limit<0?(l.limit=Math.abs(u.limit),l.singleBatch=!0):u.limit&&(l.limit=Math.abs(u.limit)),u.skip&&(l.skip=u.skip),u.hint&&(l.hint=u.hint),u.batchSize&&(l.batchSize=u.batchSize),\"boolean\"==typeof u.returnKey&&(l.returnKey=u.returnKey),u.comment&&(l.comment=u.comment),u.min&&(l.min=u.min),u.max&&(l.max=u.max),u.maxScan&&(l.maxScan=u.maxScan),u.maxTimeMS&&(l.maxTimeMS=u.maxTimeMS),\"boolean\"==typeof u.awaitData&&(l.awaitData=u.awaitData),\"boolean\"==typeof u.snapshot&&(l.snapshot=u.snapshot),\"boolean\"==typeof u.tailable&&(l.tailable=u.tailable),\"boolean\"==typeof u.oplogReplay&&(l.oplogReplay=u.oplogReplay),\"boolean\"==typeof u.noCursorTimeout&&(l.noCursorTimeout=u.noCursorTimeout),\"boolean\"==typeof u.partial&&(l.partial=u.partial),\"boolean\"==typeof u.showDiskLoc&&(l.showRecordId=u.showDiskLoc),u.readConcern&&(l.readConcern=u.readConcern),u.explain&&(l.explain=u.explain),u.exhaust&&(l.exhaust=u.exhaust),u.explain&&(l={explain:l,verbosity:\"allPlansExecution\"},u.readConcern&&(l.readConcern=u.readConcern),n=\"_explain\")):l=u;var p=null;this.connection&&(p=this.connection),!p&&this.topology&&this.topology.getConnection&&(p=this.topology.getConnection());var d=\"_find\"===n?Object.keys(l)[0]:S[n];l={command:l,databaseName:a,commandName:d,requestId:o,operationId:this.operationId,connectionId:p};var f=Array.prototype.slice.call(arguments,0),h=f.pop();if(\"function\"!=typeof h&&\"killCursors\"!==l.commandName){f.push(h);var m=r.apply(this,f);return new t.s.promiseLibrary(function(e,n){var r=y.current();v.emit(\"started\",l),m.then(function(){var e={duration:y.duration(r,y.current()),commandName:d,requestId:o,operationId:t.operationId,connectionId:t.topology.getConnection(),reply:t.cursorState.documents};v.emit(\"succeeded\",e)}).catch(function(e){var s={duration:y.duration(r,y.current()),commandName:d,requestId:o,operationId:i,connectionId:t.topology.getConnection(),failure:e};v.emit(\"failed\",s),n(e)})})}var b=y.current();if(v.emit(\"started\",l),\"killCursors\"===l.commandName&&this.topology.lastIsMaster()&&this.topology.lastIsMaster().maxWireVersion<4)return l={duration:y.duration(b,y.current()),commandName:d,requestId:o,operationId:t.operationId,connectionId:t.topology.getConnection(),reply:[{ok:1}]},f.push(h),r.apply(this,f),v.emit(\"succeeded\",l);f.push(function(e,n){if(e){var r={duration:y.duration(b,y.current()),commandName:d,requestId:o,operationId:i,connectionId:t.topology.getConnection(),failure:e};v.emit(\"failed\",r)}else n&&n.documents&&(n=n.documents[0]),\"getmore\"!==d.toLowerCase()||null!=n&&null!=n.cursor?\"find\"!==d.toLowerCase()&&\"aggregate\"!==d.toLowerCase()&&\"listcollections\"!==d.toLowerCase()||null!=n&&null!=n.cursor?\"killcursors\"===d.toLowerCase()&&null==n&&(n={cursorsUnknown:[t.cursorState.lastCursorId],ok:1}):n={cursor:{id:t.cursorState.cursorId,ns:t.ns,firstBatch:t.cursorState.documents},ok:1}:n={cursor:{id:t.cursorState.cursorId,ns:t.ns,nextBatch:t.cursorState.documents},ok:1},r={duration:y.duration(b,y.current()),commandName:d,requestId:o,operationId:t.operationId,connectionId:t.topology.getConnection(),reply:n&&n.result?n.result:n},v.emit(\"succeeded\",r);h&&h(e,n)}),r.apply(this,f)}})})};o(g,r),g.prototype.uninstrument=function(){for(var e=0;e<this.overloads.length;e++){var t=this.overloads[e];t.proto[t.name]=t.func}this.removeAllListeners(\"started\"),this.removeAllListeners(\"succeeded\"),this.removeAllListeners(\"failed\")},e.exports=g},function(e,t,n){\"use strict\";const r=n(58),o=n(118),i=n(109),s=n(6).MongoParseError,a=/(mongodb(?:\\+srv|)):\\/\\/(?: (?:[^:]*) (?: : ([^@]*) )? @ )?([^/?]*)(?:\\/|)(.*)/;function c(e,t){const n=/^.*?\\./,r=`.${e.replace(n,\"\")}`,o=`.${t.replace(n,\"\")}`;return r.endsWith(o)}function l(e){if(Array.isArray(e))1===(e=e.filter((e,t)=>e.indexOf(e)===t)).length&&(e=e[0]);else if(e.indexOf(\":\")>0)e=e.split(\",\").reduce((e,t)=>{const n=t.split(\":\");return e[n[0]]=l(n[1]),e},{});else if(\"true\"===e.toLowerCase()||\"false\"===e.toLowerCase())e=\"true\"===e.toLowerCase();else if(!Number.isNaN(e)){const t=parseFloat(e);Number.isNaN(t)||(e=parseFloat(e))}return e}const u=\"mongodb+srv\",p=[\"mongodb\",u];function d(e,t,n){\"function\"==typeof t&&(n=t,t={}),t=t||{};try{r.parse(e)}catch(e){return n(new s(\"URI malformed, cannot be parsed\"))}const f=e.match(a);if(!f)return n(new s(\"Invalid connection string\"));const h=f[1];if(-1===p.indexOf(h))return n(new s(\"Invalid protocol provided\"));if(h===u)return function(e,t,n){const o=r.parse(e,!0);if(o.hostname.split(\".\").length<3)return n(new s(\"URI does not have hostname, domain name and tld\"));if(o.domainLength=o.hostname.split(\".\").length,o.pathname&&o.pathname.match(\",\"))return n(new s(\"Invalid URI, cannot contain multiple hostnames\"));if(o.port)return n(new s(`Ports not accepted with '${u}' URIs`));let a=`_mongodb._tcp.${o.host}`;i.resolveSrv(a,(e,r)=>{if(e)return n(e);if(0===r.length)return n(new s(\"No addresses found at host\"));for(let e=0;e<r.length;e++)if(!c(r[e].name,o.hostname,o.domainLength))return n(new s(\"Server record does not share hostname with parent URI\"));let a=o.auth?`mongodb://${o.auth}@`:\"mongodb://\",l=r.map((e,t)=>0===t?`${a}${e.name}:${e.port}`:`${e.name}:${e.port}`).join(\",\")+\"/\",u=[];t.ssl||o.search&&null!=o.query.ssl||u.push(\"ssl=true\"),o.search&&u.push(o.search.replace(\"?\",\"\")),i.resolveTxt(o.host,(e,t)=>{if(e){if(\"ENODATA\"!==e.code)return n(e);t=null}if(t){if(t.length>1)return n(new s(\"Multiple text records not allowed\"));if(!(t=(t=t[0]).length>1?t.join(\"\"):t[0]).includes(\"authSource\")&&!t.includes(\"replicaSet\"))return n(new s(\"Text record must only set `authSource` or `replicaSet`\"));u.push(t)}u.length&&(l+=`?${u.join(\"&\")}`),d(l,n)})})}(e,t,n);const m=f[4].split(\"?\"),g=m.length>0?m[0]:null;let y=function(e){const t={};let n=o.parse(e);for(const e in n){const r=n[e];if(\"\"===r||null==r)return new s(\"Incomplete key value pair for option\");t[e.toLowerCase()]=l(r)}return t.wtimeout&&t.wtimeoutms&&(delete t.wtimeout,console.warn(\"Unsupported option `wtimeout` specified\")),Object.keys(t).length?t:null}(m.length>1?m[1]:null);if(y instanceof s)return n(y);y=Object.assign({},y,t);const v={username:null,password:null,db:g&&\"\"!==g?o.unescape(g):null};if(-1!==f[4].split(\"?\")[0].indexOf(\"@\"))return n(new s(\"Unescaped slash in userinfo section\"));const b=f[3].split(\"@\");if(b.length>2)return n(new s(\"Unescaped at-sign in authority section\"));if(b.length>1){const e=b.shift().split(\":\");if(e.length>2)return n(new s(\"Unescaped colon in authority section\"));v.username=o.unescape(e[0]),v.password=e[1]?o.unescape(e[1]):null}let x=null;const w=b.shift().split(\",\").map(e=>{let t=r.parse(`mongodb://${e}`);if(\"/:\"===t.path)return x=new s(\"Double colon in host identifier\"),null;if(e.match(/\\.sock/)&&(t.hostname=o.unescape(e),t.port=null),Number.isNaN(t.port))return void(x=new s(\"Invalid port (non-numeric string)\"));const n={host:t.hostname,port:t.port?parseInt(t.port):null};if(0!==n.port)if(n.port>65535)x=new s(\"Invalid port (larger than 65535) with hostname\");else{if(!(n.port<0))return n;x=new s(\"Invalid port (negative number)\")}else x=new s(\"Invalid port (zero) with hostname\")}).filter(e=>!!e);return x?n(x):0===w.length||\"\"===w[0].host||null===w[0].host?n(new s(\"No hostname or hostnames provided in connection string\")):void n(null,{hosts:w,auth:v.db||v.username?v:null,options:Object.keys(y).length?y:null})}e.exports=d},function(e,t,n){\"use strict\";const r=n(18);e.exports={uuidV4:()=>{const e=r.randomBytes(16);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,e}}},function(e,t,n){\"use strict\";const r=n(13).retrieveBSON,o=n(5),i=r().Binary,s=n(204).uuidV4;class a extends o{constructor(e,t,n){if(super(),null==e)throw new Error(\"ClientSession requires a topology\");if(null==t||!(t instanceof l))throw new Error(\"ClientSession requires a ServerSessionPool\");n=n||{},this.topology=e,this.sessionPool=t,this.hasEnded=!1,this.serverSession=t.acquire(),this.supports={causalConsistency:!!n.causalConsistency},void 0!==(n=n||{}).initialClusterTime?this.clusterTime=n.initialClusterTime:this.clusterTime=null,this.operationTime=null}endSession(e,t){\"function\"==typeof e&&(t=e,e={}),e=e||{},this.hasEnded?\"function\"==typeof t&&t(null,null):(e.skipCommand||this.topology.endSessions(this.id),this.hasEnded=!0,this.emit(\"ended\",this),this.sessionPool.release(this.serverSession),\"function\"==typeof t&&t(null,null))}advanceOperationTime(e){null!=this.operationTime?e.greaterThan(this.operationTime)&&(this.operationTime=e):this.operationTime=e}equals(e){return e instanceof a&&this.id.id.buffer.equals(e.id.id.buffer)}}Object.defineProperty(a.prototype,\"id\",{get:function(){return this.serverSession.id}});class c{constructor(){this.id={id:new i(s(),i.SUBTYPE_UUID)},this.lastUse=Date.now(),this.txnNumber=0}hasTimedOut(e){return Math.round((Date.now()-this.lastUse)%864e5%36e5/6e4)>e-1}}class l{constructor(e){if(null==e)throw new Error(\"ServerSessionPool requires a topology\");this.topology=e,this.sessions=[]}endAllPooledSessions(){this.sessions.length&&(this.topology.endSessions(this.sessions.map(e=>e.id)),this.sessions=[])}acquire(){const e=this.topology.logicalSessionTimeoutMinutes;for(;this.sessions.length;){const t=this.sessions.shift();if(!t.hasTimedOut(e))return t}return new c}release(e){const t=this.topology.logicalSessionTimeoutMinutes;for(;this.sessions.length;){if(!this.sessions[this.sessions.length-1].hasTimedOut(t))break;this.sessions.pop()}e.hasTimedOut(t)||this.sessions.unshift(e)}}e.exports={ClientSession:a,ServerSession:c,ServerSessionPool:l}},function(e,t,n){\"use strict\";const r=n(0).inherits,o=n(0).format,i=n(5).EventEmitter,s=n(76),a=n(28),c=n(13).retrieveBSON,l=n(6).MongoError,u=n(6),p=n(111),d=n(7).clone,f=n(7).diff,h=n(7).cloneOptions,m=n(7).createClientInfo,g=n(7).SessionMixins,y=n(7).isRetryableWritesSupported,v=n(7).getNextTransactionNumber,b=c();var x=n(81),w=n(80),S=n(79),k=n(78),O=n(110),C=n(77),_=\"disconnected\",E=\"connecting\",I=\"connected\",T=\"unreferenced\",M=\"destroyed\";function N(e,t){var n={disconnected:[E,M,_],connecting:[E,M,I,_],connected:[I,_,M,T],unreferenced:[T,M],destroyed:[M]}[e.state];n&&-1!==n.indexOf(t)?e.state=t:e.logger.error(o(\"Pool with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]\",e.id,e.state,t,n))}var A=1,B=[\"connect\",\"close\",\"error\",\"timeout\",\"parseError\"],j=function(e,t){t=t||{},this.id=A++,this.s={options:Object.assign({},t),bson:t.bson||new b([b.Binary,b.Code,b.DBRef,b.Decimal128,b.Double,b.Int32,b.Long,b.Map,b.MaxKey,b.MinKey,b.ObjectId,b.BSONRegExp,b.Symbol,b.Timestamp]),Cursor:t.cursorFactory||s,logger:a(\"Mongos\",t),seedlist:e,haInterval:t.haInterval?t.haInterval:1e4,disconnectHandler:t.disconnectHandler,index:0,connectOptions:{},debug:\"boolean\"==typeof t.debug&&t.debug,localThresholdMS:t.localThresholdMS||15,clientInfo:m(t),authenticationContexts:[]},this.s.options.clientInfo=m(t),this.s.logger.isWarn()&&0!==this.s.options.socketTimeout&&this.s.options.socketTimeout<this.s.haInterval&&this.s.logger.warn(o(\"warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections due to socket timeouts\",this.s.options.socketTimeout,this.s.haInterval)),this.authProviders=t.authProviders||{mongocr:new x(this.s.bson),x509:new w(this.s.bson),plain:new S(this.s.bson),gssapi:new k(this.s.bson),sspi:new O(this.s.bson),\"scram-sha-1\":new C(this.s.bson)},this.state=_,this.connectingProxies=[],this.connectedProxies=[],this.disconnectedProxies=[],this.authenticating=!1,this.index=0,this.haTimeoutId=null,this.ismaster=null,this.topologyDescription={topologyType:\"Unknown\",servers:[]},this.clusterTime=null,i.call(this)};function P(e,t,n){e.listeners(t).length>0&&e.emit(t,n)}function D(e){return function(){e.state!==M&&(z(e.connectedProxies,e.disconnectedProxies,this),H(e),e.emit(\"left\",\"mongos\",this),e.emit(\"serverClosed\",{topologyId:e.id,address:this.name}))}}function L(e,t){return function(){var n=this;if(e.state===M)return H(e),z(e.connectingProxies,e.disconnectedProxies,this),this.destroy();if(\"connect\"===t?U(e,n,function(){if(e.ismaster=n.lastIsMaster(),\"isdbgrid\"===e.ismaster.msg){for(var t=0;t<e.connectedProxies.length;t++)if(e.connectedProxies[t].name===n.name)return z(e.connectingProxies,e.disconnectedProxies,n),H(e),n.destroy(),e.emit(\"failed\",n);for(t=0;t<B.length;t++)n.removeAllListeners(B[t]);n.on(\"error\",D(e)),n.on(\"close\",D(e)),n.on(\"timeout\",D(e)),n.on(\"parseError\",D(e)),z(e.connectingProxies,e.connectedProxies,n),e.emit(\"joined\",\"mongos\",n)}else{if(e.s.logger.isWarn()){var r=\"expected mongos proxy, but found replicaset member mongod for server %s\";e.ismaster.hosts||(r=\"expected mongos proxy, but found standalone mongod for server %s\"),e.s.logger.warn(o(r,n.name))}!function(e,t){for(var n=0;n<e.length;n++)e[n].name===t.name&&e.splice(n,1)}(e.connectingProxies,n),e.emit(\"left\",\"server\",n),e.emit(\"failed\",n)}}):(z(e.connectingProxies,e.disconnectedProxies,this),e.emit(\"left\",\"mongos\",this),e.emit(\"failed\",this)),H(e),0===e.connectingProxies.length){if(e.connectedProxies.length>0&&e.state===E)N(e,I),e.emit(\"connect\",e),e.emit(\"fullsetup\",e),e.emit(\"all\",e);else if(0===e.disconnectedProxies.length)return e.s.logger.isWarn()&&e.s.logger.warn(o(\"no mongos proxies found in seed list, did you mean to connect to a replicaset\")),e.emit(\"error\",new l(\"no mongos proxies found in seed list\"));!function e(t,n){n=n||{};t.haTimeoutId=setTimeout(function(){if(t.state!==M&&t.state!==T){t.isConnected()&&t.s.disconnectHandler&&t.s.disconnectHandler.execute();var r=t.connectedProxies.slice(0),o=r.length;if(0===r.length)return t.listeners(\"close\").length>0&&t.state===E?t.emit(\"error\",new l(\"no mongos proxy available\")):t.emit(\"close\",t),q(t,t.disconnectedProxies,function(){t.state!==M&&t.state!==T&&(t.state===E&&n.firstConnect?(t.emit(\"connect\",t),t.emit(\"fullsetup\",t),t.emit(\"all\",t)):t.isConnected()?t.emit(\"reconnect\",t):!t.isConnected()&&t.listeners(\"close\").length>0&&t.emit(\"close\",t),e(t))});for(var i=0;i<r.length;i++)s(t,r[i],function(){if(0===(o-=1)){if(t.state===M||t.state===T)return;q(t,t.disconnectedProxies,function(){t.state!==M&&t.state!==T&&e(t)})}})}function s(e,n,r){var o=(new Date).getTime();P(t,\"serverHeartbeatStarted\",{connectionId:n.name}),n.command(\"admin.$cmd\",{ismaster:!0},{monitoring:!0,socketTimeout:t.s.options.connectionTimeout||2e3},function(e,i){if(t.state===M||t.state===T)return z(t.connectedProxies,t.disconnectedProxies,n),n.destroy(),r(e,i);var s=(new Date).getTime()-o;e?(P(t,\"serverHeartbeatFailed\",{durationMS:s,failure:e,connectionId:n.name}),z(t.connectedProxies,t.disconnectedProxies,n)):(n.ismaster=i.result,n.lastIsMasterMS=s,P(t,\"serverHeartbeatSucceeded\",{durationMS:s,reply:i.result,connectionId:n.name})),r(e,i)})}},t.s.haInterval)}(e,{firstConnect:!0})}}}function R(e){for(var t=e.connectedProxies.slice(0),n=Number.MAX_VALUE,r=0;r<t.length;r++)t[r].lastIsMasterMS<n&&(n=t[r].lastIsMasterMS);if(0===(t=t.filter(function(t){if(t.lastIsMasterMS<=n+e.s.localThresholdMS&&t.isConnected())return!0})).length)return e.connectedProxies[0];var o=t[e.index%t.length];return e.index=(e.index+1)%t.length,o}function z(e,t,n){for(var r=0;r<e.length;r++)e[r].name===n.name&&e.splice(r,1);for(r=0;r<t.length;r++)t[r].name===n.name&&t.splice(r,1);t.push(n)}function q(e,t,n){var r=t.length,o=function(e,t){return function(){var o=this;if(r-=1,e.state===M||e.state===T)return z(e.connectingProxies,e.disconnectedProxies,o),this.destroy();\"connect\"!==t||e.authenticating?\"connect\"===t&&e.authenticating&&(z(e.connectingProxies,e.disconnectedProxies,o),this.destroy()):U(e,o,function(){if(e.state===M||e.state===T)return z(e.connectingProxies,e.disconnectedProxies,o),o.destroy();for(var t=0;t<B.length;t++)o.removeAllListeners(B[t]);o.on(\"error\",D(e)),o.on(\"close\",D(e)),o.on(\"timeout\",D(e)),o.on(\"parseError\",D(e)),z(e.disconnectedProxies,e.connectedProxies,o),H(e),e.emit(\"joined\",\"mongos\",o)}),0===r&&n()}};if(0===r)return n();function i(t,n){setTimeout(function(){if(e.state!==M&&e.state!==T){var n=new p(Object.assign({},e.s.options,{host:t.name.split(\":\")[0],port:parseInt(t.name.split(\":\")[1],10),authProviders:e.authProviders,reconnect:!1,monitoring:!1,parent:e,clientInfo:d(e.s.clientInfo)}));n.on(\"serverDescriptionChanged\",function(t){e.emit(\"serverDescriptionChanged\",t)}),e.emit(\"serverOpening\",{topologyId:-1!==n.s.topologyId?n.s.topologyId:e.id,address:n.name}),n.once(\"connect\",o(e,\"connect\")),n.once(\"close\",o(e,\"close\")),n.once(\"timeout\",o(e,\"timeout\")),n.once(\"error\",o(e,\"error\")),n.once(\"parseError\",o(e,\"parseError\")),n.connect(e.s.connectOptions)}},n)}for(var s=0;s<t.length;s++)i(t[s],s)}function U(e,t,n){if(0===e.s.authenticationContexts.length)return n();!function e(t,n,r){if(0===t.length)return r();var o=t.shift().slice(0);o.push(function(){e(t,n,r)}),n.auth.apply(n,o)}(e.s.authenticationContexts.slice(0),t,n)}r(j,i),Object.assign(j.prototype,g),Object.defineProperty(j.prototype,\"type\",{enumerable:!0,get:function(){return\"mongos\"}}),Object.defineProperty(j.prototype,\"parserType\",{enumerable:!0,get:function(){return b.native?\"c++\":\"js\"}}),Object.defineProperty(j.prototype,\"logicalSessionTimeoutMinutes\",{enumerable:!0,get:function(){return this.ismaster&&this.ismaster.logicalSessionTimeoutMinutes||null}}),j.prototype.connect=function(e){var t=this;this.s.connectOptions=e||{},N(this,E);var n=this.s.seedlist.map(function(e){return new p(Object.assign({},t.s.options,e,{authProviders:t.authProviders,reconnect:!1,monitoring:!1,parent:t,clientInfo:d(t.s.clientInfo)}))});const r=e=>{t.emit(\"serverDescriptionChanged\",e)};n.forEach(function(e){e.on(\"serverDescriptionChanged\",r),e.on(\"destroy\",()=>e.removeListener(\"serverDescriptionChanged\",r))}),P(this,\"topologyOpening\",{topologyId:this.id}),function(e,t){e.connectingProxies=e.connectingProxies.concat(t);var n=0;function r(t,n){setTimeout(function(){e.emit(\"serverOpening\",{topologyId:e.id,address:t.name}),H(e),t.once(\"close\",L(e,\"close\")),t.once(\"timeout\",L(e,\"timeout\")),t.once(\"parseError\",L(e,\"parseError\")),t.once(\"error\",L(e,\"error\")),t.once(\"connect\",L(e,\"connect\")),t.connect(e.s.connectOptions)},n)}for(;t.length>0;)r(t.shift(),n++)}(t,n)},j.prototype.lastIsMaster=function(){return this.ismaster},j.prototype.unref=function(){N(this,T),this.connectedProxies.concat(this.connectingProxies).forEach(function(e){e.unref()}),clearTimeout(this.haTimeoutId)},j.prototype.destroy=function(e){var t=this;N(this,M);var n=this.connectedProxies.concat(this.connectingProxies);this.haTimeoutId&&clearTimeout(this.haTimeoutId),this.s.authenticationContexts=[],n.forEach(function(n){t.emit(\"serverClosed\",{topologyId:t.id,address:n.name}),n.destroy(e),z(t.connectedProxies,t.disconnectedProxies,n)}),H(t),P(this,\"topologyClosed\",{topologyId:this.id})},j.prototype.isConnected=function(){return this.connectedProxies.length>0},j.prototype.isDestroyed=function(){return this.state===M};var F=function(e,t,n,r,o,i){\"function\"==typeof o&&(i=o,o={}),o=o||{};let s=R(e);return s?o.retryWrites&&o.session&&y(e)?(o.txnNumber=v(o.session),void s[t](n,r,o,(a,c)=>a?(a instanceof u.MongoNetworkError||a.message.match(/not master/))&&(s=R(e))&&y(s)?void s[t](n,r,o,i):i(a):i(null,c))):s[t](n,r,o,i):i(new l(\"no mongos proxy available\"))};function H(e){if(e.listeners(\"topologyDescriptionChanged\").length>0){var t=\"Unknown\";e.connectedProxies.length>0&&(t=\"Sharded\");var n={topologyType:t,servers:[]},r=e.disconnectedProxies.concat(e.connectingProxies);n.servers=n.servers.concat(r.map(function(e){var t=e.getDescription();return t.type=\"Unknown\",t})),n.servers=n.servers.concat(e.connectedProxies.map(function(e){var t=e.getDescription();return t.type=\"Mongos\",t}));var o=f(e.topologyDescription,n),i={topologyId:e.id,previousDescription:e.topologyDescription,newDescription:n,diff:o};o.servers.length>0&&e.emit(\"topologyDescriptionChanged\",i),e.topologyDescription=n}}j.prototype.insert=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state===M?r(new l(o(\"topology was destroyed\"))):this.isConnected()||null==this.s.disconnectHandler?this.isConnected()?void F(this,\"insert\",e,t,n,r):r(new l(\"no mongos proxy available\")):this.s.disconnectHandler.add(\"insert\",e,t,n,r)},j.prototype.update=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state===M?r(new l(o(\"topology was destroyed\"))):this.isConnected()||null==this.s.disconnectHandler?this.isConnected()?void F(this,\"update\",e,t,n,r):r(new l(\"no mongos proxy available\")):this.s.disconnectHandler.add(\"update\",e,t,n,r)},j.prototype.remove=function(e,t,n,r){return\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state===M?r(new l(o(\"topology was destroyed\"))):this.isConnected()||null==this.s.disconnectHandler?this.isConnected()?void F(this,\"remove\",e,t,n,r):r(new l(\"no mongos proxy available\")):this.s.disconnectHandler.add(\"remove\",e,t,n,r)},j.prototype.command=function(e,t,n,r){if(\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state===M)return r(new l(o(\"topology was destroyed\")));var i=R(this);if((null==i||!i.isConnected())&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,n,r);if(null==i)return r(new l(\"no mongos proxy available\"));var s=h(n);s.topology=this,i.command(e,t,s,r)},j.prototype.cursor=function(e,t,n){const r=(n=n||{}).topology||this;return new(n.cursorFactory||this.s.Cursor)(this.s.bson,e,t,n,r,this.s.options)},j.prototype.auth=function(e,t){var n=Array.prototype.slice.call(arguments,0).slice(0),r=this,i=Array.prototype.slice.call(arguments,2),s=i.pop(),a=0;if(null==this.authProviders[e]&&\"default\"!==e)return s(new l(o(\"auth provider %s does not exist\",e)));if(this.authenticating)return s(new l(\"authentication or logout allready in process\"));if(!r.isConnected()&&null!=r.s.disconnectHandler)return r.s.disconnectHandler.add(\"auth\",t,n,{},s);this.authenticating=!0;var c=[],u=this.connectedProxies.slice(0);function p(n){var o=[e,t].concat(i.slice(0)).concat([function(e){if(d-=1,e&&c.push({name:n.name,err:e}),0===d){if(r.authenticating=!1,c.length)return r.s.authenticationContexts.splice(a,0),s(new l({message:\"authentication fail\",errors:c}),!1);s(null,r)}}]);n.lastIsMaster().arbiterOnly||n.auth.apply(n,o)}0===u.length&&(this.authenticating=!1,s(null,!0)),a=this.s.authenticationContexts.length,this.s.authenticationContexts.push([e,t].concat(i.slice(0)));for(var d=u.length;u.length>0;)p(u.shift())},j.prototype.logout=function(e,t){var n=this;if(this.authenticating)throw new l(\"authentication or logout allready in process\");this.authenticating=!0;for(var r=Object.keys(this.authProviders),i=0;i<r.length;i++)this.authProviders[r[i]].logout(e);var s=this.connectedProxies.slice(0),a=s.length;if(0===a)return t();var c=[];function u(t,n){t.logout(e,function(e){e&&c.push({name:t.name,err:e}),n()})}for(i=0;i<s.length;i++)u(s[i],function(){if(0===(a-=1)){if(n.authenticating=!1,c.length)return t(new l({message:o(\"logout failed against db %s\",e),errors:c}),!1);t()}})},j.prototype.getServer=function(){var e=R(this);return this.s.debug&&this.emit(\"pickedServer\",null,e),e},j.prototype.getConnection=function(){var e=this.getServer();if(e)return e.getConnection()},j.prototype.connections=function(){for(var e=[],t=0;t<this.connectedProxies.length;t++)e=e.concat(this.connectedProxies[t].connections());return e},e.exports=j},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(0).format,i=n(7).diff,s=n(5).EventEmitter,a=n(28),c=n(41),l=n(6).MongoError,u=\"ReplicaSetNoPrimary\",p=\"ReplicaSetWithPrimary\",d=\"Unknown\",f=\"PossiblePrimary\",h=\"RSPrimary\",m=\"RSSecondary\",g=\"RSArbiter\",y=\"RSOther\",v=\"RSGhost\",b=\"Unknown\",x=function(e){e=e||{},s.call(this),this.topologyType=u,this.setName=e.setName,this.set={},this.id=e.id,this.setName=e.setName,this.logger=e.logger||a(\"ReplSet\",e),this.index=0,this.acceptableLatency=e.acceptableLatency||15,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS||1e4,this.primary=null,this.secondaries=[],this.arbiters=[],this.passives=[],this.ghosts=[],this.unknownServers=[],this.set={},this.maxElectionId=null,this.maxSetVersion=0,this.replicasetDescription={topologyType:\"Unknown\",servers:[]},this.logicalSessionTimeoutMinutes=void 0};r(x,s),x.prototype.hasPrimaryAndSecondary=function(){return null!=this.primary&&this.secondaries.length>0},x.prototype.hasPrimaryOrSecondary=function(){return this.hasPrimary()||this.hasSecondary()},x.prototype.hasPrimary=function(){return null!=this.primary},x.prototype.hasSecondary=function(){return this.secondaries.length>0},x.prototype.get=function(e){for(var t=this.allServers(),n=0;n<t.length;n++)if(t[n].name.toLowerCase()===e.toLowerCase())return t[n];return null},x.prototype.allServers=function(e){e=e||{};var t=this.primary?[this.primary]:[];return t=t.concat(this.secondaries),e.ignoreArbiters||(t=t.concat(this.arbiters)),t=t.concat(this.passives)},x.prototype.destroy=function(e){this.primary&&this.primary.destroy(e),this.secondaries.forEach(function(t){t.destroy(e)}),this.arbiters.forEach(function(t){t.destroy(e)}),this.passives.forEach(function(t){t.destroy(e)}),this.ghosts.forEach(function(t){t.destroy(e)}),this.secondaries=[],this.arbiters=[],this.passives=[],this.ghosts=[],this.unknownServers=[],this.set={},this.primary=null,T(this)},x.prototype.remove=function(e,t){t=t||{};var n=e.name.toLowerCase(),r=this.primary?[this.primary]:[];r=(r=(r=r.concat(this.secondaries)).concat(this.arbiters)).concat(this.passives);for(var o=0;o<r.length;o++)if(!t.force&&r[o].equals(e)&&r[o].isConnected&&r[o].isConnected())return;this.set[n]&&(this.set[n].type=b,this.set[n].electionId=null,this.set[n].setName=null,this.set[n].setVersion=null);var i=null;this.primary&&this.primary.equals(e)&&(this.primary=null,this.topologyType=u,i=\"primary\"),i=I(e,this.secondaries)?\"secondary\":i,i=I(e,this.arbiters)?\"arbiter\":i,i=I(e,this.passives)?\"secondary\":i,I(e,this.ghosts),I(e,this.unknownServers),this.unknownServers.push(n),i&&this.emit(\"left\",i,e)};const w=e=>e.arbiterOnly&&e.setName;x.prototype.update=function(e){var t=e.lastIsMaster(),n=e.name.toLowerCase();if(t){var r=Array.isArray(t.hosts)?t.hosts:[];r=(r=(r=r.concat(Array.isArray(t.arbiters)?t.arbiters:[])).concat(Array.isArray(t.passives)?t.passives:[])).map(function(e){return e.toLowerCase()});for(var i=0;i<r.length;i++)-1!==this.unknownServers.indexOf(r[i])||this.set[r[i]]&&this.set[r[i]].type!==b||this.unknownServers.push(r[i].toLowerCase()),this.set[r[i]]||(this.set[r[i]]={type:b,electionId:null,setName:null,setVersion:null})}if(!t&&!C(t,e,this.unknownServers))return this.set[n]={type:b,setVersion:null,electionId:null,setName:null},this.set[n].type=b,this.set[n].electionId=t?t.electionId:t,this.set[n].setName=t?t.setName:t,this.set[n].setVersion=t?t.setVersion:t,-1===this.unknownServers.indexOf(e.name)&&this.unknownServers.push(n),!1;if(void 0===t.logicalSessionTimeoutMinutes||w(t)||(void 0===this.logicalSessionTimeoutMinutes||null===t.logicalSessionTimeoutMinutes?this.logicalSessionTimeoutMinutes=t.logicalSessionTimeoutMinutes:this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,t.logicalSessionTimeoutMinutes)),t&&\"isdbgrid\"===t.msg)return!1;if(t.setName&&t.hidden||t.setName&&!t.ismaster&&!t.secondary&&!t.arbiterOnly&&!t.passive)return this.set[n]={type:y,setVersion:null,electionId:null,setName:t.setName},this.topologyType=this.primary?p:u,t.setName&&(this.setName=t.setName),!1;if(t.isreplicaset)return this.set[n]={type:v,setVersion:null,electionId:null,setName:null},this.topologyType=this.primary?p:u,t.setName&&(this.setName=t.setName),!1;if(t&&t.ismaster&&!t.setName)return this.topologyType=this.primary?p:d,this.remove(e,{force:!0}),!1;if(t&&!t.ismaster&&!t.secondary&&!t.arbiterOnly)return this.remove(e,{force:!0}),!1;if(t.me&&t.me.toLowerCase()!==n)return this.logger.isWarn()&&this.logger.warn(o(\"the seedlist server was removed due to its address %s not matching its ismaster.me address %s\",e.name,t.me)),delete this.set[n],I(e,this.unknownServers),e.destroy(),this.primary&&!this.primary.equals(e)?this.topologyType=p:this.topologyType=u,!this.primary&&t.primary&&(this.set[t.primary.toLowerCase()]={type:f,setName:null,electionId:null,setVersion:null}),!1;if(!this.primary&&t.ismaster&&t.setName){var s=e.lastIsMaster().electionId;if(this.setName&&this.setName!==t.setName)return this.topologyType=u,new l(o(\"setName from ismaster does not match provided connection setName [%s] != [%s]\",t.setName,this.setName));if(!this.maxElectionId&&s)this.maxElectionId=s;else if(this.maxElectionId&&s){var a=E(this.maxElectionId,s),c=e.lastIsMaster().setVersion;if(1===a)return this.topologyType=u,!1;if(0===a&&c&&c<this.maxSetVersion)return this.topologyType=u,!1;this.maxSetVersion=c,this.maxElectionId=s}return-1!==t.hosts.map(function(e){return e.toLowerCase()}).indexOf(n)?(this.primary=e,this.set[n]={type:h,setVersion:t.setVersion,electionId:t.electionId,setName:t.setName},this.topologyType=p,t.setName&&(this.setName=t.setName),I(e,this.unknownServers),I(e,this.secondaries),I(e,this.passives),this.emit(\"joined\",\"primary\",e)):this.topologyType=u,T(this),!0}if(t.ismaster&&t.setName){var x=this.set[this.primary.name.toLowerCase()].electionId,S=this.set[this.primary.name.toLowerCase()].setVersion,k=this.set[this.primary.name.toLowerCase()].setName;s=e.lastIsMaster().electionId,c=e.lastIsMaster().setVersion;var O=e.lastIsMaster().setName;if(this.primary.equals(e)&&k===O)return!1;if(k&&k!==O)return this.primary.equals(e)?this.topologyType=u:this.topologyType=p,!1;if(x&&s){if(1===(a=E(x,s)))return!1;if(0===a&&S>c)return!1}else if(!x&&s&&c&&c<this.maxSetVersion)return!1;if(!this.maxElectionId&&s)this.maxElectionId=s;else if(this.maxElectionId&&s){if(1===(a=E(this.maxElectionId,s)))return!1;if(0===a&&S&&c){if(c<this.maxSetVersion)return!1}else if(c<this.maxSetVersion)return!1;this.maxElectionId=s,this.maxSetVersion=c}else this.maxSetVersion=c;return this.set[this.primary.name.toLowerCase()]={type:b,setVersion:null,electionId:null,setName:null},this.emit(\"left\",\"primary\",this.primary),this.primary.destroy(),this.primary=e,this.set[n]={type:h,setVersion:t.setVersion,electionId:t.electionId,setName:t.setName},this.topologyType=p,t.setName&&(this.setName=t.setName),I(e,this.unknownServers),I(e,this.secondaries),I(e,this.passives),this.emit(\"joined\",\"primary\",e),T(this),!0}return!this.primary&&t.primary&&(this.set[t.primary.toLowerCase()]={type:f,setVersion:null,electionId:null,setName:null}),t.secondary&&t.setName&&!C(t,e,this.secondaries)&&this.setName&&this.setName===t.setName?(_(this,m,t,e,this.secondaries),this.topologyType=this.primary?p:u,t.setName&&(this.setName=t.setName),I(e,this.unknownServers),this.primary&&this.primary.name.toLowerCase()===n&&(e.destroy(),this.primary=null,this.emit(\"left\",\"primary\",e)),this.emit(\"joined\",\"secondary\",e),T(this),!0):w(t)&&!C(t,e,this.arbiters)&&this.setName&&this.setName===t.setName?(_(this,g,t,e,this.arbiters),this.topologyType=this.primary?p:u,t.setName&&(this.setName=t.setName),I(e,this.unknownServers),this.emit(\"joined\",\"arbiter\",e),T(this),!0):t.passive&&t.setName&&!C(t,e,this.passives)&&this.setName&&this.setName===t.setName?(_(this,m,t,e,this.passives),this.topologyType=this.primary?p:u,t.setName&&(this.setName=t.setName),I(e,this.unknownServers),this.primary&&this.primary.name.toLowerCase()===n&&(e.destroy(),this.primary=null,this.emit(\"left\",\"primary\",e)),this.emit(\"joined\",\"secondary\",e),T(this),!0):this.set[n]&&this.set[n].type===h?(this.emit(\"left\",\"primary\",this.primary),this.primary.destroy(),this.primary=null,this.topologyType=u,!1):(this.topologyType=this.primary?p:u,!1)},x.prototype.updateServerMaxStaleness=function(e,t){for(var n=0,r=0;r<this.secondaries.length;r++)n=Math.max(n,this.secondaries[r].lastWriteDate);e.ismaster.maxWireVersion>=5&&e.ismaster.secondary&&this.hasPrimary()?e.staleness=e.lastUpdateTime-e.lastWriteDate-(this.primary.lastUpdateTime-this.primary.lastWriteDate)+t:e.ismaster.maxWireVersion>=5&&e.ismaster.secondary&&(e.staleness=n-e.lastWriteDate+t)},x.prototype.updateSecondariesMaxStaleness=function(e){for(var t=0;t<this.secondaries.length;t++)this.updateServerMaxStaleness(this.secondaries[t],e)},x.prototype.pickServer=function(e){if(\"primary\"===(e=e||c.primary).preference&&null!=e.maxStalenessSeconds)return new l(\"primary readPreference incompatible with maxStalenessSeconds\");var t=this.primary?[this.primary]:[];if(t=t.concat(this.secondaries),null!=e.maxStalenessSeconds)for(var n=0;n<t.length;n++)if(t[n].ismaster.maxWireVersion<5)return new l(\"maxStalenessSeconds not supported by at least one of the replicaset members\");if(\"nearest\"===e.preference&&null==e.maxStalenessSeconds)return O(this,e);if(\"nearest\"===e.preference&&null!=e.maxStalenessSeconds)return k(this,e);var r=this.secondaries;if(e.equals(c.secondary)&&0===r.length)return new l(\"no secondary server available\");if(e.equals(c.secondaryPreferred)&&0===r.length&&null==this.primary)return new l(\"no secondary or primary server available\");if(e.equals(c.primary)&&null==this.primary)return new l(\"no primary server available\");if(e.equals(c.secondaryPreferred)||e.equals(c.secondary)){if(r.length>0&&null==e.maxStalenessSeconds){var o=O(this,e);if(o)return o}else if(r.length>0&&null!=e.maxStalenessSeconds&&(o=k(this,e)))return o;return e.equals(c.secondaryPreferred)?this.primary:null}if(e.equals(c.primaryPreferred)){if(o=null,this.primary)return this.primary;if(r.length>0&&null==e.maxStalenessSeconds?o=O(this,e):r.length>0&&null!=e.maxStalenessSeconds&&(o=k(this,e)),o)return o}return this.primary};var S=function(e,t){if(null==e.tags)return t;for(var n=[],r=Array.isArray(e.tags)?e.tags:[e.tags],o=0;o<r.length;o++)for(var i=r[o],s=0;s<t.length;s++){var a=t[s].lastIsMaster().tags||{},c=!0;for(var l in i)a[l]!==i[l]&&(c=!1);c&&n.push(t[s])}return n};function k(e,t){var n=[],r=1e3*t.maxStalenessSeconds;if(r<9e4)return new l(\"maxStalenessSeconds must be set to at least 90 seconds\");e.primary&&\"secondary\"!==t.preference&&\"secondaryPreferred\"!==t.preference&&n.push(e.primary);for(var o=0;o<e.secondaries.length;o++)n.push(e.secondaries[o]);if(e.primary&&0===n.length&&\"secondaryPreferred\"!==t.preference&&n.push(e.primary),(n=(n=S(t,n)).filter(function(e){return e.staleness<=r})).sort(function(e,t){return e.lastIsMasterMS>t.lastIsMasterMS}),0===n.length)return null;e.index=e.index%n.length;var i=n[e.index];return e.index=e.index+1,i}function O(e,t){var n=[];e.primary&&\"secondary\"!==t.preference&&\"secondaryPreferred\"!==t.preference&&n.push(e.primary);for(var r=0;r<e.secondaries.length;r++)n.push(e.secondaries[r]);0===n.length&&e.primary&&\"secondaryPreferred\"!==t.preference&&n.push(e.primary),(n=S(t,n)).sort(function(e,t){return e.lastIsMasterMS>t.lastIsMasterMS});var o=n.length>0?n[0].lastIsMasterMS:0;if(0===(n=n.filter(function(t){return t.lastIsMasterMS<=o+e.acceptableLatency})).length)return null;e.index=e.index%n.length;var i=n[e.index];return e.index=e.index+1,i}function C(e,t,n){for(var r=0;r<n.length;r++)if(n[r]&&n[r].name&&n[r].name.toLowerCase()===t.name.toLowerCase())return!0;return!1}function _(e,t,n,r,o){var i=r.name.toLowerCase();e.set[i].type=t,e.set[i].electionId=n?n.electionId:n,e.set[i].setName=n?n.setName:n,e.set[i].setVersion=n?n.setVersion:n,o.push(r)}function E(e,t){var n=new Buffer(e.toHexString(),\"hex\"),r=new Buffer(t.toHexString(),\"hex\");if(n===r)return 0;if(\"function\"==typeof Buffer.compare)return Buffer.compare(n,r);for(var o=n.length,i=r.length,s=Math.min(o,i),a=0;a<s&&n[a]===r[a];a++);return a!==s&&(o=n[a],i=r[a]),o<i?-1:i<o?1:0}function I(e,t){for(var n=0;n<t.length;n++){if(t[n].equals&&t[n].equals(e))return t.splice(n,1),!0;if(\"string\"==typeof t[n]&&t[n].toLowerCase()===e.name.toLowerCase())return t.splice(n,1),!0}return!1}function T(e){if(e.listeners(\"topologyDescriptionChanged\").length>0){var t=\"Unknown\",n=e.setName;e.hasPrimaryAndSecondary()?t=\"ReplicaSetWithPrimary\":!e.hasPrimary()&&e.hasSecondary()&&(t=\"ReplicaSetNoPrimary\");var r={topologyType:t,setName:n,servers:[]};if(e.hasPrimary()){var o=e.primary.getDescription();o.type=\"RSPrimary\",r.servers.push(o)}r.servers=r.servers.concat(e.secondaries.map(function(e){var t=e.getDescription();return t.type=\"RSSecondary\",t})),r.servers=r.servers.concat(e.arbiters.map(function(e){var t=e.getDescription();return t.type=\"RSArbiter\",t})),r.servers=r.servers.concat(e.passives.map(function(e){var t=e.getDescription();return t.type=\"RSSecondary\",t}));var s=i(e.replicasetDescription,r),a={topologyId:e.id,previousDescription:e.replicasetDescription,newDescription:r,diff:s};e.emit(\"topologyDescriptionChanged\",a),e.replicasetDescription=r}}e.exports=x},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(0).format,i=n(5).EventEmitter,s=n(41),a=n(76),c=n(13).retrieveBSON,l=n(28),u=n(6).MongoError,p=n(6),d=n(111),f=n(207),h=n(7).clone,m=n(7).Timeout,g=n(7).Interval,y=n(7).createClientInfo,v=n(7).SessionMixins,b=n(7).isRetryableWritesSupported,x=n(7).getNextTransactionNumber,w=n(81),S=n(80),k=n(79),O=n(78),C=n(110),_=n(77),E=c(),I=\"disconnected\",T=\"connecting\",M=\"connected\",N=\"unreferenced\",A=\"destroyed\";function B(e,t){var n={disconnected:[T,A,I],connecting:[T,A,M,I],connected:[M,I,A,N],unreferenced:[N,A],destroyed:[A]}[e.state];n&&-1!==n.indexOf(t)?e.state=t:e.s.logger.error(o(\"Pool with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]\",e.id,e.state,t,n))}var j=1,P=[\"connect\",\"close\",\"error\",\"timeout\",\"parseError\"],D=function(e,t){var n=this;if(t=t||{},!Array.isArray(e))throw new u(\"seedlist must be an array\");if(0===e.length)throw new u(\"seedlist must contain at least one entry\");e.forEach(function(e){if(\"string\"!=typeof e.host||\"number\"!=typeof e.port)throw new u(\"seedlist entry must contain a host and port\")}),i.call(this),this.id=j++;var r=t.localThresholdMS||15;t.acceptableLatency&&(r=t.acceptableLatency);var s=l(\"ReplSet\",t);this.s={options:Object.assign({},t),bson:t.bson||new E([E.Binary,E.Code,E.DBRef,E.Decimal128,E.Double,E.Int32,E.Long,E.Map,E.MaxKey,E.MinKey,E.ObjectId,E.BSONRegExp,E.Symbol,E.Timestamp]),Cursor:t.cursorFactory||a,logger:s,seedlist:e,replicaSetState:new f({id:this.id,setName:t.setName,acceptableLatency:r,heartbeatFrequencyMS:t.haInterval?t.haInterval:1e4,logger:s}),connectingServers:[],haInterval:t.haInterval?t.haInterval:1e4,minHeartbeatFrequencyMS:500,disconnectHandler:t.disconnectHandler,index:0,connectOptions:{},debug:\"boolean\"==typeof t.debug&&t.debug,clientInfo:y(t),authenticationContexts:[]},this.s.replicaSetState.on(\"topologyDescriptionChanged\",function(e){n.emit(\"topologyDescriptionChanged\",e)}),this.s.logger.isWarn()&&0!==this.s.options.socketTimeout&&this.s.options.socketTimeout<this.s.haInterval&&this.s.logger.warn(o(\"warning socketTimeout %s is less than haInterval %s. This might cause unnecessary server reconnections due to socket timeouts\",this.s.options.socketTimeout,this.s.haInterval)),this.authProviders=t.authProviders||{mongocr:new w(this.s.bson),x509:new S(this.s.bson),plain:new k(this.s.bson),gssapi:new O(this.s.bson),sspi:new C(this.s.bson),\"scram-sha-1\":new _(this.s.bson)};[\"joined\",\"left\"].forEach(function(e){n.s.replicaSetState.on(e,function(t,r){n.emit(e,t,r)})}),this.initialConnectState={connect:!1,fullsetup:!1,all:!1},this.state=I,this.haTimeoutId=null,this.authenticating=!1,this.ismaster=null,this.intervalIds=[],this.clusterTime=null};function L(e){e.s.replicaSetState.hasPrimaryAndSecondary()&&e.s.disconnectHandler?e.s.disconnectHandler.execute():e.s.replicaSetState.hasPrimary()&&e.s.disconnectHandler?e.s.disconnectHandler.execute({executePrimary:!0}):e.s.replicaSetState.hasSecondary()&&e.s.disconnectHandler&&e.s.disconnectHandler.execute({executeSecondary:!0})}function R(e,t,n){var r=t.length,o=null,i=function(e,t){return function(i){var s=this;if(r-=1,e.state===A||e.state===N)return this.destroy({force:!0});if(\"connect\"!==t||e.authenticating)\"connect\"===t&&e.authenticating?this.destroy({force:!0}):\"error\"===t&&(o=i);else{if(e.state===A||e.state===N)return s.destroy({force:!0});H(e,s,function(){if(e.state===A||e.state===N)return s.destroy({force:!0});if(e.s.replicaSetState.update(s)){s.lastIsMaster()&&s.lastIsMaster().ismaster&&(e.ismaster=s.lastIsMaster());for(var t=0;t<P.length;t++)s.removeAllListeners(P[t]);s.on(\"error\",F(e,\"error\")),s.on(\"close\",F(e,\"close\")),s.on(\"timeout\",F(e,\"timeout\")),s.on(\"parseError\",F(e,\"parseError\")),z(s.lastIsMaster().me,e,{}),L(e)}else s.destroy({force:!0})})}L(e),0===r&&n(o)}};if(0===r)return n();function s(t,n){setTimeout(function(){if(e.state!==A&&e.state!==N){var n=new d(Object.assign({},e.s.options,{host:t.split(\":\")[0],port:parseInt(t.split(\":\")[1],10),authProviders:e.authProviders,reconnect:!1,monitoring:!1,parent:e,clientInfo:h(e.s.clientInfo)}));n.once(\"connect\",i(e,\"connect\")),n.once(\"close\",i(e,\"close\")),n.once(\"timeout\",i(e,\"timeout\")),n.once(\"error\",i(e,\"error\")),n.once(\"parseError\",i(e,\"parseError\")),n.on(\"serverOpening\",function(t){e.emit(\"serverOpening\",t)}),n.on(\"serverDescriptionChanged\",function(t){e.emit(\"serverDescriptionChanged\",t)}),n.on(\"serverClosed\",function(t){e.emit(\"serverClosed\",t)}),n.connect(e.s.connectOptions)}},n)}for(var a=0;a<t.length;a++)s(t[a],a)}r(D,i),Object.assign(D.prototype,v),Object.defineProperty(D.prototype,\"type\",{enumerable:!0,get:function(){return\"replset\"}}),Object.defineProperty(D.prototype,\"parserType\",{enumerable:!0,get:function(){return E.native?\"c++\":\"js\"}}),Object.defineProperty(D.prototype,\"logicalSessionTimeoutMinutes\",{enumerable:!0,get:function(){return this.s.replicaSetState.logicalSessionTimeoutMinutes||null}});var z=function(e,t,n){if(!n.haInterval)for(var r=0;r<t.intervalIds.length;r++)if(t.intervalIds[r].__host===e)return;var o=n.haInterval?m:g,i=n.haInterval?n.haInterval:t.s.haInterval,s=new o(function(){if(t.state!==A&&t.state!==N){var n=t.s.replicaSetState.get(e);return n?function(e,t,n){var r=(new Date).getTime();$(e,\"serverHeartbeatStarted\",{connectionId:t.name}),t.command(\"admin.$cmd\",{ismaster:!0},{monitoring:!0,socketTimeout:e.s.options.connectionTimeout||2e3},function(o,i){if(e.state===A||e.state===N)return t.destroy({force:!0}),n(o,i);var s=(new Date).getTime()-r,a=process.hrtime();t.lastUpdateTime=1e3*a[0]+Math.round(a[1]/1e3),o?($(e,\"serverHeartbeatFailed\",{durationMS:s,failure:o,connectionId:t.name}),e.s.replicaSetState.remove(t)):(t.ismaster=i.result,t.ismaster.lastWrite&&t.ismaster.lastWrite.lastWriteDate&&(t.lastWriteDate=t.ismaster.lastWrite.lastWriteDate.getTime()),-1===t.lastIsMasterMS?t.lastIsMasterMS=s:t.lastIsMasterMS&&(t.lastIsMasterMS=.2*s+.8*t.lastIsMasterMS),e.s.replicaSetState.update(t)&&t.lastIsMaster()&&t.lastIsMaster().ismaster&&(e.ismaster=t.lastIsMaster()),$(e,\"serverHeartbeatSucceeded\",{durationMS:s,reply:i.result,connectionId:t.name})),e.s.replicaSetState.updateServerMaxStaleness(t,e.s.haInterval),n(o,i)})}(t,n,function(e){e||(t.state!==A&&t.state!==N?(t.intervalIds=t.intervalIds.filter(function(e){return e.isRunning()}),o===m?t.state===T&&(t.s.replicaSetState.hasSecondary()&&t.s.options.secondaryOnlyConnectionAllowed||t.s.replicaSetState.hasPrimary())&&(t.state=M,process.nextTick(function(){t.emit(\"connect\",t)}),q(t,{})):t.state===I&&(t.s.replicaSetState.hasSecondary()&&t.s.options.secondaryOnlyConnectionAllowed||t.s.replicaSetState.hasPrimary())&&(t.state=M,L(t),process.nextTick(function(){t.emit(\"reconnect\",t)})),t.initialConnectState.connect&&!t.initialConnectState.fullsetup&&t.s.replicaSetState.hasPrimaryAndSecondary()&&(t.initialConnectState.fullsetup=!0,t.initialConnectState.all=!0,process.nextTick(function(){t.emit(\"fullsetup\",t),t.emit(\"all\",t)}))):s.stop())}):void 0}s.stop()},i);s.start(),s.__host=e,t.intervalIds.push(s)};function q(e,t){if(e.state!==A&&e.state!==N){t=t||{};var n=Object.keys(e.s.replicaSetState.set),r=t.haInterval?m:g,o=t.haInterval?t.haInterval:e.s.haInterval;if(r===m)return R(e,e.s.replicaSetState.unknownServers,function(r){if(e.state!==A&&e.state!==N){if(!e.s.replicaSetState.hasPrimary()&&!e.s.options.secondaryOnlyConnectionAllowed)return r?e.emit(\"error\",r):(e.emit(\"error\",new u(\"no primary found in replicaset or invalid replica set name\")),e.destroy({force:!0}));if(!e.s.replicaSetState.hasSecondary()&&e.s.options.secondaryOnlyConnectionAllowed)return r?e.emit(\"error\",r):(e.emit(\"error\",new u(\"no secondary found in replicaset or invalid replica set name\")),e.destroy({force:!0}));for(var o=0;o<n.length;o++)z(n[o],e,t)}});for(var i=0;i<n.length;i++)z(n[i],e,t);var s=e.s.replicaSetState.hasPrimary()?o:e.s.minHeartbeatFrequencyMS;e.intervalIds.push(new m(function e(t){return function(){t.state!==A&&t.state!==N&&R(t,t.s.replicaSetState.unknownServers,function(){var n=t.s.replicaSetState.hasPrimary()?o:t.s.minHeartbeatFrequencyMS;t.intervalIds.push(new m(e(t),n).start())})}}(e),s).start())}}function U(e,t){for(var n=0;n<e.length;n++)if(e[n].name.toLowerCase()===t.name.toLowerCase())return!0;e.push(t)}function F(e,t){return function(){e.state!==A&&e.state!==N&&(e.s.logger.isDebug()&&e.s.logger.debug(o(\"handleEvent %s from server %s in replset with id %s\",t,this.name,e.id)),e.s.replicaSetState.remove(this),e.state!==A&&e.state!==N&&((e.s.replicaSetState.hasPrimary()||e.s.replicaSetState.hasSecondary()||!e.s.options.secondaryOnlyConnectionAllowed)&&e.s.replicaSetState.hasPrimary()||B(e,I),U(e.s.connectingServers,this)))}}function H(e,t,n){if(0===e.s.authenticationContexts.length)return n();if(t.lastIsMaster()&&t.lastIsMaster().arbiterOnly)return n();!function e(t,n,r){if(0===t.length)return r();var o=t.shift().slice(0);o.push(function(){e(t,n,r)}),n.auth.apply(n,o)}(e.s.authenticationContexts.slice(0),t,n)}function V(e,t){return function(){var n=this;if(e.s.logger.isDebug()&&e.s.logger.debug(o(\"handleInitialConnectEvent %s from server %s in replset with id %s\",t,this.name,e.id)),e.state===A||e.state===N)return this.destroy({force:!0});\"connect\"===t?H(e,n,function(){if(e.state===A||e.state===N)return n.destroy({force:!0});var r=e.s.replicaSetState.update(n);if(!0===r){n.lastIsMaster()&&n.lastIsMaster().ismaster&&(e.ismaster=n.lastIsMaster()),e.s.logger.isDebug()&&e.s.logger.debug(o(\"handleInitialConnectEvent %s from server %s in replset with id %s has state [%s]\",t,n.name,e.id,JSON.stringify(e.s.replicaSetState.set)));for(var i=0;i<P.length;i++)n.removeAllListeners(P[i]);n.on(\"error\",F(e,\"error\")),n.on(\"close\",F(e,\"close\")),n.on(\"timeout\",F(e,\"timeout\")),n.on(\"parseError\",F(e,\"parseError\")),function(e){const t=e.state===T,n=e.s.replicaSetState.hasPrimary(),r=e.s.replicaSetState.hasSecondary(),o=e.s.options.secondaryOnlyConnectionAllowed,i=e.s.connectOptions.readPreference&&e.s.connectOptions.readPreference.equals(s.secondary);return t&&(i&&r||!i&&n)||r&&o}(e)&&(e.state=M,e.initialConnectState.connect=!0,process.nextTick(function(){e.emit(\"connect\",e)}),q(e,{}))}else{if(r instanceof u)return n.destroy({force:!0}),e.destroy({force:!0}),e.emit(\"error\",r);n.destroy({force:!0})}}):(e.emit(\"failed\",this),U(e.s.connectingServers,this),e.s.replicaSetState.remove(this)),e.initialConnectState.connect&&!e.initialConnectState.fullsetup&&e.s.replicaSetState.hasPrimaryAndSecondary()&&(e.initialConnectState.fullsetup=!0,e.initialConnectState.all=!0,process.nextTick(function(){e.emit(\"fullsetup\",e),e.emit(\"all\",e)}));for(var r=0;r<e.s.connectingServers.length;r++)e.s.connectingServers[r].equals(this)&&e.s.connectingServers.splice(r,1);0===e.s.connectingServers.length&&e.state===T&&q(e,{haInterval:1})}}function $(e,t,n){e.listeners(t).length>0&&e.emit(t,n)}function W(e,t,n){\"function\"==typeof t&&(n=t,t={}),t=t||{};const r=e.self,i=e.op,s=e.ns,a=e.ops;if(r.state===A)return n(new u(o(\"topology was destroyed\")));const c=!e.retrying&&t.retryWrites&&t.session&&b(r);if(!r.s.replicaSetState.hasPrimary()){if(r.s.disconnectHandler)return r.s.disconnectHandler.add(i,s,a,t,n);if(!c)return n(new u(\"no primary server found\"))}const l=(o,i)=>{if(!o)return n(null,i);if(!(o instanceof p.MongoNetworkError||o.message.match(/not master/)))return n(o);if(c){return W(Object.assign({},e,{retrying:!0}),t,n)}return r.s.replicaSetState.remove(r.s.replicaSetState.primary,{force:!0}),n(o)};return n.operationId&&(l.operationId=n.operationId),c&&(t.txnNumber=x(t.session)),r.s.replicaSetState.primary[i](s,a,t,l)}D.prototype.connect=function(e){var t=this;this.s.connectOptions=e||{},B(this,T);var n=this.s.seedlist.map(function(e){return new d(Object.assign({},t.s.options,e,{authProviders:t.authProviders,reconnect:!1,monitoring:!1,parent:t,clientInfo:h(t.s.clientInfo)}))});if(this.s.options.socketTimeout>0&&this.s.options.socketTimeout<=this.s.options.haInterval)return t.emit(\"error\",new u(o(\"haInterval [%s] MS must be set to less than socketTimeout [%s] MS\",this.s.options.haInterval,this.s.options.socketTimeout)));$(this,\"topologyOpening\",{topologyId:this.id}),function(e,t){e.s.connectingServers=e.s.connectingServers.concat(t);var n=0;function r(t,n){setTimeout(function(){e.s.replicaSetState.update(t)&&t.lastIsMaster()&&t.lastIsMaster().ismaster&&(e.ismaster=t.lastIsMaster()),t.once(\"close\",V(e,\"close\")),t.once(\"timeout\",V(e,\"timeout\")),t.once(\"parseError\",V(e,\"parseError\")),t.once(\"error\",V(e,\"error\")),t.once(\"connect\",V(e,\"connect\")),t.on(\"serverOpening\",function(t){e.emit(\"serverOpening\",t)}),t.on(\"serverDescriptionChanged\",function(t){e.emit(\"serverDescriptionChanged\",t)}),t.on(\"serverClosed\",function(t){e.emit(\"serverClosed\",t)}),t.connect(e.s.connectOptions)},n)}for(;t.length>0;)r(t.shift(),n++)}(t,n)},D.prototype.destroy=function(e){e=e||{},B(this,A),this.haTimeoutId&&clearTimeout(this.haTimeoutId),this.s.replicaSetState.destroy(e),this.s.authenticationContexts=[],this.s.connectingServers.forEach(function(t){t.destroy(e)});for(var t=0;t<this.intervalIds.length;t++)this.intervalIds[t].stop(),this.intervalIds[t].stop();this.intervalIds=[],$(this,\"topologyClosed\",{topologyId:this.id})},D.prototype.unref=function(){B(this,N),this.s.replicaSetState.allServers().forEach(function(e){e.unref()}),clearTimeout(this.haTimeoutId)},D.prototype.lastIsMaster=function(){return this.s.options.secondaryOnlyConnectionAllowed&&!this.s.replicaSetState.hasPrimary()&&this.s.replicaSetState.hasSecondary()?this.s.replicaSetState.secondaries[0].lastIsMaster():this.s.replicaSetState.primary?this.s.replicaSetState.primary.lastIsMaster():this.ismaster},D.prototype.connections=function(){for(var e=this.s.replicaSetState.allServers(),t=[],n=0;n<e.length;n++)t=t.concat(e[n].connections());return t},D.prototype.isConnected=function(e){return e=e||{},!this.authenticating&&(e.readPreference&&e.readPreference.equals(s.secondary)?this.s.replicaSetState.hasSecondary():e.readPreference&&e.readPreference.equals(s.primary)?this.s.replicaSetState.hasPrimary():e.readPreference&&e.readPreference.equals(s.primaryPreferred)?this.s.replicaSetState.hasSecondary()||this.s.replicaSetState.hasPrimary():e.readPreference&&e.readPreference.equals(s.secondaryPreferred)?this.s.replicaSetState.hasSecondary()||this.s.replicaSetState.hasPrimary():!(!this.s.options.secondaryOnlyConnectionAllowed||!this.s.replicaSetState.hasSecondary())||this.s.replicaSetState.hasPrimary())},D.prototype.isDestroyed=function(){return this.state===A},D.prototype.getServer=function(e){e=e||{};var t=this.s.replicaSetState.pickServer(e.readPreference);return this.s.debug&&this.emit(\"pickedServer\",e.readPreference,t),t},D.prototype.getConnection=function(e){var t=this.getServer(e);if(t)return t.getConnection()},D.prototype.getServers=function(){return this.s.replicaSetState.allServers()},D.prototype.insert=function(e,t,n,r){W({self:this,op:\"insert\",ns:e,ops:t},n,r)},D.prototype.update=function(e,t,n,r){W({self:this,op:\"update\",ns:e,ops:t},n,r)},D.prototype.remove=function(e,t,n,r){W({self:this,op:\"remove\",ns:e,ops:t},n,r)},D.prototype.command=function(e,t,n,r){if(\"function\"==typeof n&&(r=n,n=(n={})||{}),this.state===A)return r(new u(o(\"topology was destroyed\")));var i=n.readPreference?n.readPreference:s.primary;if(\"primary\"===i.preference&&!this.s.replicaSetState.hasPrimary()&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,n,r);if(\"secondary\"===i.preference&&!this.s.replicaSetState.hasSecondary()&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,n,r);if(\"primary\"!==i.preference&&!this.s.replicaSetState.hasSecondary()&&!this.s.replicaSetState.hasPrimary()&&null!=this.s.disconnectHandler)return this.s.disconnectHandler.add(\"command\",e,t,n,r);var a=this.s.replicaSetState.pickServer(i);return a instanceof d?(this.s.debug&&this.emit(\"pickedServer\",s.primary,a),null==a?r(new u(o(\"no server found that matches the provided readPreference %s\",i))):void a.command(e,t,n,r)):r(a)},D.prototype.auth=function(e,t){var n=Array.prototype.slice.call(arguments,0).slice(0),r=this,i=Array.prototype.slice.call(arguments,2),s=i.pop(),a=0;if(null==this.authProviders[e]&&\"default\"!==e)return s(new u(o(\"auth provider %s does not exist\",e)));if(this.authenticating)return s(new u(\"authentication or logout allready in process\"));if(null!=r.s.disconnectHandler){if(!r.s.replicaSetState.hasPrimary()&&!r.s.options.secondaryOnlyConnectionAllowed)return r.s.disconnectHandler.add(\"auth\",t,n,{},s);if(!r.s.replicaSetState.hasSecondary()&&r.s.options.secondaryOnlyConnectionAllowed)return r.s.disconnectHandler.add(\"auth\",t,n,{},s)}this.authenticating=!0;var c=[],l=this.s.replicaSetState.allServers();function p(n){var o=[e,t].concat(i.slice(0)).concat([function(e){if(d-=1,e&&c.push({name:n.name,err:e}),0===d){if(r.authenticating=!1,c.length)return r.s.authenticationContexts.splice(a,0),s(new u({message:\"authentication fail\",errors:c}),!1);s(null,r)}}]);n.lastIsMaster().arbiterOnly?o.pop()(null):n.auth.apply(n,o)}0===l.length&&(this.authenticating=!1,s(null,!0));var d=l.length;for(a=this.s.authenticationContexts.length,this.s.authenticationContexts.push([e,t].concat(i.slice(0)));l.length>0;)p(l.shift())},D.prototype.logout=function(e,t){var n=this;if(this.authenticating)throw new u(\"authentication or logout allready in process\");this.authenticating=!0;for(var r=Object.keys(this.authProviders),i=0;i<r.length;i++)this.authProviders[r[i]].logout(e);n.s.authenticationContexts=n.s.authenticationContexts.filter(function(t){return t[1]!==e});var s=this.s.replicaSetState.allServers(),a=s.length;if(0===a)return t();var c=[];function l(t,n){t.logout(e,function(e){e&&c.push({name:t.name,err:e}),n()})}for(i=0;i<s.length;i++)l(s[i],function(){if(0===(a-=1)){if(n.authenticating=!1,c.length)return t(new u({message:o(\"logout failed against db %s\",e),errors:c}),!1);t()}})},D.prototype.cursor=function(e,t,n){const r=(n=n||{}).topology||this;return new(n.cursorFactory||this.s.Cursor)(this.s.bson,e,t,n,r,this.s.options)},e.exports=D},function(e,t,n){\"use strict\";var r=n(15).Query,o=n(13).retrieveBSON,i=n(0).format,s=n(6).MongoError,a=n(6).MongoNetworkError,c=n(29).getReadPreference,l=o().Long,u=function(e){this.legacyWireProtocol=e},p=function(e,t,n,o,a,c,l,u){if(0===c.length)throw new s(\"insert must contain at least one document\");\"function\"==typeof l&&(u=l,l=(l={})||{});var p=a.split(\".\"),d=p.shift(),f=\"boolean\"!=typeof l.ordered||l.ordered,h=l.writeConcern,m={};if(m[n]=p.join(\".\"),m[o]=c,m.ordered=f,h&&Object.keys(h).length>0&&(m.writeConcern=h),l.collation)for(var g=0;g<m[o].length;g++)m[o][g].collation||(m[o][g].collation=l.collation);\"boolean\"==typeof l.bypassDocumentValidation&&(m.bypassDocumentValidation=l.bypassDocumentValidation),void 0!==l.txnNumber&&(m.txnNumber=l.txnNumber);var y={command:!0};void 0!==l.session&&(y.session=l.session);var v={checkKeys:!1,numberToSkip:0,numberToReturn:1};\"insert\"===n&&(v.checkKeys=!1),\"boolean\"==typeof l.checkKeys&&(v.checkKeys=l.checkKeys),l.serializeFunctions&&(v.serializeFunctions=l.serializeFunctions),l.ignoreUndefined&&(v.ignoreUndefined=l.ignoreUndefined);try{var b=new r(t,i(\"%s.$cmd\",d),m,v);e.write(b,y,u)}catch(e){u(e)}};u.prototype.insert=function(e,t,n,r,o,i,s){p(e,r,\"insert\",\"documents\",n,o,i,s)},u.prototype.update=function(e,t,n,r,o,i,s){p(e,r,\"update\",\"updates\",n,o,i,s)},u.prototype.remove=function(e,t,n,r,o,i,s){p(e,r,\"delete\",\"deletes\",n,o,i,s)},u.prototype.killCursor=function(e,t,n,o,c){var l=t.split(/\\./),u=i(\"%s.$cmd\",l.shift());const p=n.cursorId;var d={killCursors:l.join(\".\"),cursors:[p]},f=new r(e,u,d,{numberToSkip:0,numberToReturn:-1,checkKeys:!1,returnFieldSelector:null});f.slaveOk=!0;var h=function(e,t){if(e){if(\"function\"!=typeof c)return;return c(e)}var n=t.message;if(0!=(1&n.responseFlags)){if(\"function\"!=typeof c)return;return c(new a(\"cursor killed or timed out\"),null)}if(!Array.isArray(n.documents)||0===n.documents.length){if(\"function\"!=typeof c)return;return c(new s(i(\"invalid killCursors result returned for cursor id %s\",p)))}\"function\"==typeof c&&c(null,n.documents[0])};const m={command:!0};if(\"object\"==typeof n.session&&(m.session=n.session),o&&o.isConnected())try{o.write(f,m,h)}catch(e){h(e,null)}else\"function\"==typeof c&&c(null,null)},u.prototype.getMore=function(e,t,n,o,c,u,p,d){p=p||{};var f=t.split(/\\./),h=i(\"%s.$cmd\",f.shift()),m={getMore:n.cursorId,collection:f.join(\".\"),batchSize:Math.abs(o)};n.cmd.tailable&&\"number\"==typeof n.cmd.maxAwaitTimeMS&&(m.maxTimeMS=n.cmd.maxAwaitTimeMS);var g=new r(e,h,m,{numberToSkip:0,numberToReturn:-1,checkKeys:!1,returnFieldSelector:null});g.slaveOk=!0;var y={command:!0};c&&(y.raw=c),y.documentsReturnedIn=\"nextBatch\",\"boolean\"==typeof n.promoteLongs&&(y.promoteLongs=n.promoteLongs),\"boolean\"==typeof n.promoteValues&&(y.promoteValues=n.promoteValues),\"boolean\"==typeof n.promoteBuffers&&(y.promoteBuffers=n.promoteBuffers),\"object\"==typeof n.session&&(y.session=n.session),u.write(g,y,function(e,t){if(e)return d(e);var r=t.message;if(0!=(1&r.responseFlags))return d(new a(\"cursor killed or timed out\"),null);if(c)return n.documents=r.documents,n.cursorId=r.cursorId,d(null,r.documents);if(0===r.documents[0].ok)return d(new s(r.documents[0]));var o=\"number\"==typeof r.documents[0].cursor.id?l.fromNumber(r.documents[0].cursor.id):r.documents[0].cursor.id;n.documents=r.documents[0].cursor.nextBatch,n.cursorId=o,d(null,r.documents[0],r.connection)})},u.prototype.command=function(e,t,n,r,o,a){var c=\"boolean\"!=typeof(a=a||{}).wireProtocolCommand||a.wireProtocolCommand;if(n.find&&c){var l=d(e,t,n,r,o,a);return n.virtual=!1,l.documentsReturnedIn=\"firstBatch\",l}if(null==r.cursorId){if(n)return f(e,t,n,r,o,a);throw new s(i(\"command %s does not return a cursor\",JSON.stringify(n)))}};var d=function(e,t,n,o,s,a){var l=c(n,a=a||{});o.batchSize=n.batchSize||o.batchSize;var u=t.split(/\\./),p=i(\"%s.$cmd\",u.shift()),d={find:u.join(\".\")};n.query&&(n.query.$query?d.filter=n.query.$query:d.filter=n.query);var f=n.sort;if(Array.isArray(f)){var h={};if(f.length>0&&!Array.isArray(f[0])){var m=f[1];\"asc\"===m?m=1:\"desc\"===m&&(m=-1),h[f[0]]=m}else for(var g=0;g<f.length;g++)\"asc\"===(m=f[g][1])?m=1:\"desc\"===m&&(m=-1),h[f[g][0]]=m;f=h}n.sort&&(d.sort=f),n.fields&&(d.projection=n.fields),n.hint&&(d.hint=n.hint),n.skip&&(d.skip=n.skip),n.limit&&(d.limit=n.limit),n.limit<0&&(d.limit=Math.abs(n.limit),d.singleBatch=!0),\"number\"==typeof n.batchSize&&(n.batchSize<0&&(0!==n.limit&&Math.abs(n.batchSize)<Math.abs(n.limit)&&(d.limit=Math.abs(n.batchSize)),d.singleBatch=!0),d.batchSize=Math.abs(n.batchSize)),n.comment&&(d.comment=n.comment),n.maxScan&&(d.maxScan=n.maxScan),n.maxTimeMS&&(d.maxTimeMS=n.maxTimeMS),n.min&&(d.min=n.min),n.max&&(d.max=n.max),n.returnKey&&(d.returnKey=n.returnKey),n.showDiskLoc&&(d.showRecordId=n.showDiskLoc),n.snapshot&&(d.snapshot=n.snapshot),n.tailable&&(d.tailable=n.tailable),n.oplogReplay&&(d.oplogReplay=n.oplogReplay),n.noCursorTimeout&&(d.noCursorTimeout=n.noCursorTimeout),n.awaitData&&(d.awaitData=n.awaitData),n.awaitdata&&(d.awaitData=n.awaitdata),n.partial&&(d.partial=n.partial),n.collation&&(d.collation=n.collation),n.explain&&(d={explain:d}),n.readConcern&&(d.readConcern=n.readConcern);var y=\"boolean\"==typeof a.serializeFunctions&&a.serializeFunctions,v=\"boolean\"==typeof a.ignoreUndefined&&a.ignoreUndefined;\"mongos\"===s.type&&l&&\"primary\"!==l.preference&&(d={$query:d,$readPreference:l.toJSON()});var b=new r(e,p,d,{numberToSkip:0,numberToReturn:1,checkKeys:!1,returnFieldSelector:null,serializeFunctions:y,ignoreUndefined:v});return b.slaveOk=l.slaveOk(),b},f=function(e,t,n,o,s,a){var l=c(n,a=a||{}),u={};for(var p in n)u[p]=n[p];var d=t.split(/\\./),f=\"boolean\"==typeof a.serializeFunctions&&a.serializeFunctions,h=\"boolean\"==typeof a.ignoreUndefined&&a.ignoreUndefined;\"mongos\"===s.type&&l&&\"primary\"!==l.preference&&(u={$query:u,$readPreference:l.toJSON()});var m=new r(e,i(\"%s.$cmd\",d.shift()),u,{numberToSkip:0,numberToReturn:-1,checkKeys:!1,serializeFunctions:f,ignoreUndefined:h});return m.slaveOk=l.slaveOk(),m};e.exports=u},function(e,t,n){\"use strict\";var r=n(13).copy,o=n(13).retrieveBSON,i=n(15).KillCursor,s=n(15).GetMore,a=n(15).Query,c=n(0).format,l=n(6).MongoError,u=n(29).getReadPreference,p=o().Long,d=function(){},f=function(e,t,n,r,o,i,s,u){if(0===i.length)throw new l(\"insert must contain at least one document\");\"function\"==typeof s&&(u=s,s=(s={})||{});var p=o.split(\".\"),d=p.shift(),f=\"boolean\"!=typeof s.ordered||s.ordered,h=s.writeConcern,m={};m[n]=p.join(\".\"),m[r]=i,m.ordered=f,h&&Object.keys(h).length>0&&(m.writeConcern=h),\"boolean\"==typeof s.bypassDocumentValidation&&(m.bypassDocumentValidation=s.bypassDocumentValidation);var g={command:!0};void 0!==s.session&&(g.session=s.session);var y={checkKeys:!1,numberToSkip:0,numberToReturn:1};\"insert\"===n&&(y.checkKeys=!1),\"boolean\"==typeof s.checkKeys&&(y.checkKeys=s.checkKeys),s.serializeFunctions&&(y.serializeFunctions=s.serializeFunctions),s.ignoreUndefined&&(y.ignoreUndefined=s.ignoreUndefined);try{var v=new a(t,c(\"%s.$cmd\",d),m,y);e.write(v,g,u)}catch(e){u(e)}};d.prototype.insert=function(e,t,n,r,o,i,s){f(e,r,\"insert\",\"documents\",n,o,i,s)},d.prototype.update=function(e,t,n,r,o,i,s){f(e,r,\"update\",\"updates\",n,o,i,s)},d.prototype.remove=function(e,t,n,r,o,i,s){f(e,r,\"delete\",\"deletes\",n,o,i,s)},d.prototype.killCursor=function(e,t,n,r,o){var s=n.cursorId,a=new i(e,[s]);const c={immediateRelease:!0,noResponse:!0};if(\"object\"==typeof n.session&&(c.session=n.session),r&&r.isConnected())try{r.write(a,c,o)}catch(e){o(e,null)}\"function\"==typeof o&&o(null,null)},d.prototype.getMore=function(e,t,n,r,o,i,a,c){var u=new s(e,t,n.cursorId,{numberToReturn:r}),d={};o&&(d.raw=o),\"boolean\"==typeof n.promoteLongs&&(d.promoteLongs=n.promoteLongs),\"boolean\"==typeof n.promoteValues&&(d.promoteValues=n.promoteValues),\"boolean\"==typeof n.promoteBuffers&&(d.promoteBuffers=n.promoteBuffers),\"object\"==typeof n.session&&(d.session=n.session),i.write(u,d,function(e,t){if(e)return c(e);var r=t.message;if(0!=(1&r.responseFlags))return c(new l(\"cursor does not exist, was killed or timed out\"),null);var o=\"number\"==typeof r.cursorId?p.fromNumber(r.cursorId):r.cursorId;n.documents=r.documents,n.cursorId=o,c(null,null,r.connection)})},d.prototype.command=function(e,t,n,r,o,i){if(n.find)return h(e,t,n,r,o,i);if(null==r.cursorId){if(n)return m(e,t,n,r,o,i);throw new l(c(\"command %s does not return a cursor\",JSON.stringify(n)))}};var h=function(e,t,n,o,i,s){var p=u(n,s=s||{});o.batchSize=n.batchSize||o.batchSize;var d=0;d=0===o.limit?o.batchSize:o.limit<0||o.limit<o.batchSize||o.limit>0&&0===o.batchSize?o.limit:o.batchSize;var f=o.skip||0,h={},m=!1;if(\"mongos\"===i.type&&p&&(h.$readPreference=p.toJSON(),m=!0),n.sort&&(h.orderby=n.sort,m=!0),n.hint&&(h.$hint=n.hint,m=!0),n.snapshot&&(h.$snapshot=n.snapshot,m=!0),n.returnKey&&(h.$returnKey=n.returnKey,m=!0),n.maxScan&&(h.$maxScan=n.maxScan,m=!0),n.min&&(h.$min=n.min,m=!0),n.max&&(h.$max=n.max,m=!0),n.showDiskLoc&&(h.$showDiskLoc=n.showDiskLoc,m=!0),n.comment&&(h.$comment=n.comment,m=!0),n.maxTimeMS&&(h.$maxTimeMS=n.maxTimeMS,m=!0),n.explain&&(d=-Math.abs(n.limit||0),m=!0,h.$explain=!0),m?h.$query=n.query:h=n.query,n.readConcern&&\"local\"!==n.readConcern.level)throw new l(c(\"server find command does not support a readConcern level of %s\",n.readConcern.level));n.readConcern&&delete(n=r(n)).readConcern;var g=\"boolean\"==typeof s.serializeFunctions&&s.serializeFunctions,y=\"boolean\"==typeof s.ignoreUndefined&&s.ignoreUndefined,v=new a(e,t,h,{numberToSkip:f,numberToReturn:d,checkKeys:!1,returnFieldSelector:n.fields,serializeFunctions:g,ignoreUndefined:y});return v.slaveOk=p.slaveOk(),\"boolean\"==typeof n.tailable&&(v.tailable=n.tailable),\"boolean\"==typeof n.oplogReplay&&(v.oplogReplay=n.oplogReplay),\"boolean\"==typeof n.noCursorTimeout&&(v.noCursorTimeout=n.noCursorTimeout),\"boolean\"==typeof n.awaitData&&(v.awaitData=n.awaitData),\"boolean\"==typeof n.partial&&(v.partial=n.partial),v},m=function(e,t,n,r,o,i){var s=u(n,i=i||{}),p={};for(var d in n)p[d]=n[d];var f=t.split(/\\./),h=\"boolean\"==typeof i.serializeFunctions&&i.serializeFunctions,m=\"boolean\"==typeof i.ignoreUndefined&&i.ignoreUndefined;if(n.readConcern&&\"local\"!==n.readConcern.level)throw new l(c(\"server %s command does not support a readConcern level of %s\",JSON.stringify(n),n.readConcern.level));n.readConcern&&delete n.readConcern,\"mongos\"===o.type&&s&&\"primary\"!==s.preference&&(p={$query:p,$readPreference:s.toJSON()});var g=new a(e,c(\"%s.$cmd\",f.shift()),p,{numberToSkip:0,numberToReturn:-1,checkKeys:!1,serializeFunctions:h,ignoreUndefined:m});return g.slaveOk=s.slaveOk(),g};e.exports=d},function(e){e.exports={_from:\"mongodb-core@3.0.3\",_id:\"mongodb-core@3.0.3\",_inBundle:!1,_integrity:\"sha512-AkEiYeq4PZrgoKPZ32q2nL2xFe9iswOgefMipS2YHJHX8DCFAXmYr1aFxefAWisinxI/nd57nBMSe4mrm3yV1g==\",_location:\"/mongodb-core\",_phantomChildren:{},_requested:{type:\"version\",registry:!0,raw:\"mongodb-core@3.0.3\",name:\"mongodb-core\",escapedName:\"mongodb-core\",rawSpec:\"3.0.3\",saveSpec:null,fetchSpec:\"3.0.3\"},_requiredBy:[\"/mongodb\"],_resolved:\"https://registry.npmjs.org/mongodb-core/-/mongodb-core-3.0.3.tgz\",_shasum:\"496d7dd0052dc3a2e213edf9ddcddc78b47a712c\",_spec:\"mongodb-core@3.0.3\",_where:\"/Users/darkua/code/Jodel-Backend-Challenge/node_modules/mongodb\",author:{name:\"Christian Kvalheim\"},bugs:{url:\"https://github.com/mongodb-js/mongodb-core/issues\"},bundleDependencies:!1,dependencies:{bson:\"~1.0.4\",require_optional:\"^1.0.1\"},deprecated:!1,description:\"Core MongoDB driver functionality, no bells and whistles and meant for integration not end applications\",devDependencies:{chai:\"^4.1.2\",co:\"^4.6.0\",\"conventional-changelog-cli\":\"^1.3.5\",eslint:\"^4.6.1\",\"eslint-plugin-prettier\":\"^2.2.0\",jsdoc:\"3.5.4\",\"mongodb-mock-server\":\"^1.0.0\",\"mongodb-test-runner\":\"^1.1.18\",prettier:\"^1.6.1\",snappy:\"^6.0.1\"},homepage:\"https://github.com/mongodb-js/mongodb-core\",keywords:[\"mongodb\",\"core\"],license:\"Apache-2.0\",main:\"index.js\",name:\"mongodb-core\",peerOptionalDependencies:{kerberos:\"^0.0.23\",snappy:\"^6.0.1\",\"bson-ext\":\"1.0.5\"},repository:{type:\"git\",url:\"git://github.com/mongodb-js/mongodb-core.git\"},scripts:{changelog:\"conventional-changelog -p angular -i HISTORY.md -s\",coverage:\"nyc node test/runner.js -t functional -l && node_modules/.bin/nyc report --reporter=text-lcov | node_modules/.bin/coveralls\",format:\"prettier --print-width 100 --tab-width 2 --single-quote --write index.js 'test/**/*.js' 'lib/**/*.js'\",lint:\"eslint index.js lib test\",test:\"npm run lint && mongodb-test-runner -t 60000 test/tests\"},version:\"3.0.3\"}},function(e,t,n){\"use strict\";var r=function(e,t,n){this.result=e,this.connection=t,this.message=n};r.prototype.toJSON=function(){return this.result},r.prototype.toString=function(){return JSON.stringify(this.toJSON())},e.exports=r},function(e,t,n){\"use strict\";var r=n(0).inherits,o=n(5).EventEmitter,i=n(143),s=n(6).MongoError,a=n(6).MongoNetworkError,c=n(28),l=n(0).format,u=n(15).Query,p=n(212),d=n(29).MESSAGE_HEADER_SIZE,f=n(29).opcodes,h=n(82).compress,m=n(82).compressorIDs,g=n(82).uncompressibleCommands,y=n(7).resolveClusterTime,v=n(81),b=n(80),x=n(79),w=n(78),S=n(110),k=n(77),O=\"disconnected\",C=\"connecting\",_=\"connected\",E=\"destroying\",I=\"destroyed\",T=0;var M=function(e,t){if(o.call(this),this.topology=e,this.options=Object.assign({host:\"localhost\",port:27017,size:5,minSize:0,connectionTimeout:3e4,socketTimeout:36e4,keepAlive:!0,keepAliveInitialDelay:3e5,noDelay:!0,ssl:!1,checkServerIdentity:!0,ca:null,crl:null,cert:null,key:null,passPhrase:null,rejectUnauthorized:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,reconnect:!0,reconnectInterval:1e3,reconnectTries:30,domainsEnabled:!1},t),this.id=T++,this.retriesLeft=this.options.reconnectTries,this.reconnectId=null,!t.bson||t.bson&&(\"function\"!=typeof t.bson.serialize||\"function\"!=typeof t.bson.deserialize))throw new Error(\"must pass in valid bson parser\");this.logger=c(\"Pool\",t),this.state=O,this.availableConnections=[],this.inUseConnections=[],this.connectingConnections=[],this.executing=!1,this.queue=[],this.authProviders=t.authProviders||{mongocr:new v(t.bson),x509:new b(t.bson),plain:new x(t.bson),gssapi:new w(t.bson),sspi:new S(t.bson),\"scram-sha-1\":new k(t.bson)},this.reconnectConnection=null,this.authenticating=!1,this.loggingout=!1,this.nonAuthenticatedConnections=[],this.authenticatingTimestamp=null,this.numberOfConsecutiveTimeouts=0,this.connectionIndex=0};function N(e,t){var n={disconnected:[C,E,O],connecting:[C,E,_,O],connected:[_,O,E],destroying:[E,I],destroyed:[I]}[e.state];n&&-1!==n.indexOf(t)?e.state=t:e.logger.error(l(\"Pool with id [%s] failed attempted illegal state transition from [%s] to [%s] only following state allowed [%s]\",e.id,e.state,t,n))}function A(e,t,n,r){if(void 0===t[0])return r(null);var o=t[0],i=t[1];if(!e.authProviders[o])throw new s(l(\"authMechanism %s not supported\",o));var a=e.authProviders[o];a.auth.apply(a,[B(e),[n],i].concat(t.slice(2)).concat([r]))}function B(e){return function(t,n,r){if(e.state===I||e.state===E)return r(new s(\"pool destroyed\"));t.workItems.push({cb:r,command:!0,requestId:n.requestId}),t.write(n.toBin())}}function j(e,t,n){!function e(t,n,r,o){if(0===r.length)return o();t.authProviders[r.pop()].reauthenticate(B(t),[n],function(i){if(i)return o(i);e(t,n,r,o)})}(e,t,Object.keys(e.authProviders),n)}function P(e,t){return function(n){if(this._connectionFailHandled)return;for(this._connectionFailHandled=!0,this.destroy(),V(e,this);this.workItems.length>0;){var r=this.workItems.shift();r.cb&&r.cb(n)}if(\"timeout\"===t&&(e.numberOfConsecutiveTimeouts=e.numberOfConsecutiveTimeouts+1,e.numberOfConsecutiveTimeouts>e.options.reconnectTries))return e.numberOfConsecutiveTimeouts=0,e.destroy(!0),e.emit(\"close\",e);0===e.socketCount()&&(e.state!==I&&e.state!==E&&N(e,O),t=\"error\"===t?\"close\":t,e.emit(t,n)),!e.reconnectId&&e.options.reconnect&&(e.reconnectId=setTimeout(D(e),e.options.reconnectInterval)),e.availableConnections.length+e.connectingConnections.length+e.inUseConnections.length<e.minSize&&W(e)}}function D(e){return function(){function t(e){return function(){this._connectionFailHandled||(this._connectionFailHandled=!0,this.destroy(),e.retriesLeft=e.retriesLeft-1,e.retriesLeft<=0?(e.destroy(),e.emit(\"reconnectFailed\",new a(l(\"failed to reconnect after %s attempts with interval %s ms\",e.options.reconnectTries,e.options.reconnectInterval)))):e.reconnectId=setTimeout(D(e),e.options.reconnectInterval))}}e.emit(\"attemptReconnect\",e),e.state!==I&&e.state!==E&&(e.isConnected()?e.reconnectId=null:(e.reconnectConnection=new i(R(e),e.options),e.reconnectConnection.on(\"close\",t(e)),e.reconnectConnection.on(\"error\",t(e)),e.reconnectConnection.on(\"timeout\",t(e)),e.reconnectConnection.on(\"parseError\",t(e)),e.reconnectConnection.on(\"connect\",function(e){return function(){var t=this;if(e.state===I||e.state===E)return t.destroy();$.forEach(function(e){t.removeAllListeners(e)}),e.reconnectId=null,t.on(\"error\",P(e,\"error\")),t.on(\"close\",P(e,\"close\")),t.on(\"timeout\",P(e,\"timeout\")),t.on(\"parseError\",P(e,\"parseError\")),j(e,this,function(){e.retriesLeft=e.options.reconnectTries,e.availableConnections.push(t),e.reconnectConnection=null,e.emit(\"reconnect\",e),Y(e)()})}}(e)),e.reconnectConnection.connect()))}}function L(e,t,n){var r=t.indexOf(e);-1!==r&&(t.splice(r,1),n.push(e))}function R(e){return function(t,n){for(var r=null,o=0;o<n.workItems.length;o++)n.workItems[o].requestId===t.responseTo&&(r=n.workItems[o],n.workItems.splice(o,1));function i(e,t,n,r){if(!e.options.domainsEnabled)return process.nextTick(function(){return t(n,r)});t(n,r)}e.numberOfConsecutiveTimeouts=0,r&&r.socketTimeout&&n.resetSocketTimeout(),e.logger.isDebug()&&e.logger.debug(l(\"message [%s] received from %s:%s\",t.raw.toString(\"hex\"),e.options.host,e.options.port)),function(e,t,n){var r=e.nonAuthenticatedConnections.slice(0),o=e.nonAuthenticatedConnections;if(e.nonAuthenticatedConnections=[],1===t.workItems.length&&(!0===t.workItems[0].authenticating||\"number\"==typeof t.workItems[0].authenticatingTimestamp&&t.workItems[0].authenticatingTimestamp!==e.authenticatingTimestamp)&&r.push(t),0===r.length)return L(t,e.inUseConnections,e.availableConnections),n();for(var i=r.length,s=0;s<i;s++)j(e,r[s],function(){0==(i-=1)&&(e.availableConnections=e.availableConnections.concat(o),L(t,e.inUseConnections,e.availableConnections),n())})}(e,n,function(){if(e.executing||process.nextTick(function(){Y(e)()}),r&&!r.immediateRelease){try{t.parse(r)}catch(t){return i(e,r.cb,new s(t))}if(t.documents[0]){if(t.documents[0].$clusterTime){const n=t.documents[0].$clusterTime;e.topology.clusterTime=n,null!=r.session&&y(r.session,n)}t.documents[0].operationTime&&r.session&&r.session.supports.causalConsistency&&r.session.advanceOperationTime(t.documents[0].operationTime)}if(r.command&&t.documents[0]&&(0===t.documents[0].ok||t.documents[0].$err||t.documents[0].errmsg||t.documents[0].code))return i(e,r.cb,new s(t.documents[0]));t.hashedName=n.hashedName,i(e,r.cb,null,new p(r.fullResult?t:t.documents[0],n,t))}})}}r(M,o),Object.defineProperty(M.prototype,\"size\",{enumerable:!0,get:function(){return this.options.size}}),Object.defineProperty(M.prototype,\"minSize\",{enumerable:!0,get:function(){return this.options.minSize}}),Object.defineProperty(M.prototype,\"connectionTimeout\",{enumerable:!0,get:function(){return this.options.connectionTimeout}}),Object.defineProperty(M.prototype,\"socketTimeout\",{enumerable:!0,get:function(){return this.options.socketTimeout}}),M.prototype.socketCount=function(){return this.availableConnections.length+this.inUseConnections.length},M.prototype.allConnections=function(){return this.availableConnections.concat(this.inUseConnections).concat(this.connectingConnections)},M.prototype.get=function(){return this.allConnections()[0]},M.prototype.isConnected=function(){if(this.state===I||this.state===E)return!1;for(var e=this.availableConnections.concat(this.inUseConnections),t=0;t<e.length;t++)if(e[t].isConnected())return!0;return!(0!==e.length||!this.authenticating)},M.prototype.isDestroyed=function(){return this.state===I||this.state===E},M.prototype.isDisconnected=function(){return this.state===O},M.prototype.connect=function(){if(this.state!==O)throw new s(\"connection in unlawful state \"+this.state);var e=this;N(this,C);var t=Array.prototype.slice.call(arguments,0),n=new i(R(e),this.options);this.connectingConnections.push(n),n.once(\"connect\",function(n){return e.state===I||e.state===E?e.destroy():e.options.inTopology?(N(e,_),L(n,e.connectingConnections,e.availableConnections),e.emit(\"connect\",e)):void j(e,n,function(r){return e.state===I||e.state===E?e.destroy():r?(e.destroy(),e.emit(\"error\",r)):void A(e,t,n,function(t){if(e.state===I||e.state===E)return e.destroy();if(t)return e.destroy(),e.emit(\"error\",t);if(N(e,_),L(n,e.connectingConnections,e.availableConnections),e.minSize)for(let t=0;t<e.minSize;t++)W(e);e.emit(\"connect\",e)})})}),n.once(\"error\",P(this,\"error\")),n.once(\"close\",P(this,\"close\")),n.once(\"timeout\",P(this,\"timeout\")),n.once(\"parseError\",P(this,\"parseError\"));try{n.connect()}catch(t){process.nextTick(function(){e.emit(\"error\",t)})}},M.prototype.auth=function(e){var t=this,n=Array.prototype.slice.call(arguments,0),r=n.pop();if(null==t.authProviders[e]&&\"default\"!==e)throw new s(l(\"auth provider %s does not exist\",e));this.authenticating=!0,this.authenticatingTimestamp=(new Date).getTime(),function e(t,n){if(!t.loggingout)return n();setTimeout(function(){e(t,n)},1)}(t,function(){!function(e,t,n){var o=e.allConnections();e.availableConnections=[],e.inUseConnections=[],e.connectingConnections=[];var i=o.length,s=null;if(0===i)return e.authenticating=!1,r(null);for(var a=0;a<o.length;a++)A(e,t,o[a],function(t){if(i-=1,t&&(s=t),0===i){if(e.authenticating=!1,e.availableConnections=e.availableConnections.concat(o),s)return e.logger.isError()&&e.logger.error(l(\"[%s] failed to authenticate against server %s:%s\",e.id,e.options.host,e.options.port)),n(s);n(null)}})}(t,n,function(e){t.authenticating=!1,r(e)})})},M.prototype.logout=function(e,t){var n=this;if(\"string\"!=typeof e)throw new s(\"logout method requires a db name as first argument\");if(\"function\"!=typeof t)throw new s(\"logout method requires a callback\");this.loggingout=!0;for(var r=n.availableConnections.concat(n.inUseConnections),o=r.length,i=null,a=0;a<r.length;a++)B(n)(r[a],new u(this.options.bson,l(\"%s.$cmd\",e),{logout:1},{numberToSkip:0,numberToReturn:1}),function(e){o-=1,e&&(i=e),0===o&&(n.loggingout=!1,t(i))})},M.prototype.unref=function(){this.availableConnections.concat(this.inUseConnections).concat(this.connectingConnections).forEach(function(e){e.unref()})};var z=[\"error\",\"close\",\"timeout\",\"parseError\",\"connect\"];function q(e,t){t.forEach(function(e){for(var t=0;t<z.length;t++)e.removeAllListeners(z[t]);e.destroy()}),e.inUseConnections=[],e.availableConnections=[],e.nonAuthenticatedConnections=[],e.connectingConnections=[],N(e,I)}M.prototype.destroy=function(e){var t=this;if(this.state!==I&&t.state!==E){if(N(this,E),e){for(var n=t.availableConnections.concat(t.inUseConnections).concat(t.nonAuthenticatedConnections).concat(t.connectingConnections);t.queue.length>0;){var r=t.queue.shift();\"function\"==typeof r.cb&&r.cb(new s(\"Pool was force destroyed\"))}return q(t,n)}this.reconnectId&&clearTimeout(this.reconnectId),this.reconnectConnection&&this.reconnectConnection.destroy(),function e(){if(K(t.queue),0===t.queue.length){for(var n=t.availableConnections.concat(t.inUseConnections).concat(t.nonAuthenticatedConnections).concat(t.connectingConnections),r=0;r<n.length;r++)if(n[r].workItems.length>0)return setTimeout(e,1);q(t,n)}else Y(t)(),setTimeout(e,1)}()}};var U=function(e,t,n,r){if(0===t.length)return r(null,n);var o=t.shift(),i=o.toBin();if(e.options.agreedCompressor&&!F(o)){var s=Buffer.concat(i),a=s.slice(d),c=s.readInt32LE(12);h(e,a,function(i,s){if(i)return r(i,null);var l=new Buffer(d);l.writeInt32LE(d+9+s.length,0),l.writeInt32LE(o.requestId,4),l.writeInt32LE(0,8),l.writeInt32LE(f.OP_COMPRESSED,12);var u=new Buffer(9);u.writeInt32LE(c,0),u.writeInt32LE(a.length,4),u.writeUInt8(m[e.options.agreedCompressor],8),n.push(Buffer.concat([l,u,s])),U(e,t,n,r)})}else n.push(i),U(e,t,n,r)};M.prototype.write=function(e,t,n){var r=this;if(\"function\"==typeof t&&(n=t),t=t||{},\"function\"!=typeof n&&!t.noResponse)throw new s(\"write method must provide a callback\");if(this.state!==I&&this.state!==E){if(this.options.domainsEnabled&&process.domain&&\"function\"==typeof n){var o=n;n=process.domain.bind(function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;t++)e[t]=arguments[t];process.nextTick(function(){o.apply(null,e)})})}var i,a={cb:n,raw:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,fullResult:!1};if(a.promoteLongs=\"boolean\"!=typeof t.promoteLongs||t.promoteLongs,a.promoteValues=\"boolean\"!=typeof t.promoteValues||t.promoteValues,a.promoteBuffers=\"boolean\"==typeof t.promoteBuffers&&t.promoteBuffers,a.raw=\"boolean\"==typeof t.raw&&t.raw,a.immediateRelease=\"boolean\"==typeof t.immediateRelease&&t.immediateRelease,a.documentsReturnedIn=t.documentsReturnedIn,a.command=\"boolean\"==typeof t.command&&t.command,a.fullResult=\"boolean\"==typeof t.fullResult&&t.fullResult,a.noResponse=\"boolean\"==typeof t.noResponse&&t.noResponse,a.session=t.session||null,a.socketTimeout=t.socketTimeout,a.monitoring=t.monitoring,t.socketTimeout&&(a.socketTimeout=t.socketTimeout),Array.isArray(e)||(e=[e]),a.requestId=e[e.length-1].requestId,null!=(i=this.topology)&&null!=i.ismaster&&i.ismaster.maxWireVersion>=6){let t={};if(this.topology.clusterTime&&(t={$clusterTime:this.topology.clusterTime}),a.session){if(a.session.hasEnded)return n(new s(\"Use of expired sessions is not permitted\"));a.session.clusterTime&&a.session.clusterTime.clusterTime.greaterThan(t.$clusterTime.clusterTime)&&(t.$clusterTime=a.session.clusterTime),t.lsid=a.session.id,a.session.serverSession.lastUse=Date.now()}e.forEach(e=>{e instanceof u?Object.assign(e.query,t):Object.assign(e,t)})}U(r,e,[],function(e,n){if(e)throw e;a.buffer=n,t.monitoring?r.queue.unshift(a):r.queue.push(a),r.executing||process.nextTick(function(){Y(r)()})})}else if(n)try{n(new s(\"pool destroyed\"))}catch(e){process.nextTick(function(){throw e})}};var F=function(e){return g.some(function(t){return e.query.hasOwnProperty(t)})};function H(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return t.splice(n,1),!0}function V(e,t){H(t,e.availableConnections)||H(t,e.inUseConnections)||H(t,e.connectingConnections)||H(t,e.nonAuthenticatedConnections)}var $=[\"close\",\"message\",\"error\",\"timeout\",\"parseError\",\"connect\"];function W(e){if(e.state!==I&&e.state!==E){var t=new i(R(e),e.options);e.connectingConnections.push(t);var n,r=function(t){return function(){t.destroy(),V(e,t),!e.reconnectId&&e.options.reconnect&&(e.reconnectId=setTimeout(D(e),e.options.reconnectInterval))}};t.once(\"close\",r(t)),t.once(\"error\",r(t)),t.once(\"timeout\",r(t)),t.once(\"parseError\",r(t)),t.once(\"connect\",(n=t,function(){if(e.state===I||e.state===E)return V(e,n),n.destroy();$.forEach(function(e){n.removeAllListeners(e)}),n.once(\"close\",P(e,\"close\")),n.once(\"error\",P(e,\"error\")),n.once(\"timeout\",P(e,\"timeout\")),n.once(\"parseError\",P(e,\"parseError\")),j(e,n,function(t){return e.state===I||e.state===E?n.destroy():(V(e,n),t?n.destroy():void(e.authenticating?e.nonAuthenticatedConnections.push(n):(e.availableConnections.push(n),Y(e)())))})})),t.connect()}}function K(e){for(var t=0;t<e.length;t++)if(e[t].monitoring){var n=e[t];e.splice(t,1),n.cb(new s({message:\"no connection available for monitoring\",driver:!0}))}}function Y(e){return function(){e.state!==I&&(e.executing||(e.executing=!0,function t(n){if(!e.authenticating)return n();setTimeout(function(){t(n)},1)}(function(){if(!(e.connectingConnections.length>0))for(;;){var t=e.availableConnections.length+e.connectingConnections.length+e.inUseConnections.length;if(0===e.availableConnections.length){K(e.queue);break}if(0===e.queue.length)break;for(var n=null,r=[],o=0;o<e.availableConnections.length;o++)0===e.availableConnections[o].workItems.length&&r.push(e.availableConnections[o]);if((n=0===r.length?e.availableConnections[e.connectionIndex++%e.availableConnections.length]:r[e.connectionIndex++%r.length]).isConnected()){var i=e.queue.shift();if(i.monitoring){var s=!1;for(o=0;o<e.availableConnections.length;o++)if(e.availableConnections[o].isConnected()&&0===e.availableConnections[o].workItems.length){s=!0,n=e.availableConnections[o];break}if(!s){e.queue.unshift(i),t<e.options.size&&e.queue.length>0&&W(e),setTimeout(function(){Y(e)()},10);break}}if(t<e.options.size&&n.workItems.length>0){e.queue.unshift(i),W(e);break}var a=i.buffer;i.authenticating=e.authenticating,i.authenticatingTimestamp=e.authenticatingTimestamp,i.monitoring&&L(n,e.availableConnections,e.inUseConnections),i.noResponse||n.workItems.push(i),i.immediateRelease||\"number\"!=typeof i.socketTimeout||n.setSocketTimeout(i.socketTimeout);var c=!0;if(Array.isArray(a))for(o=0;o<a.length;o++)c=n.write(a[o]);else c=n.write(a);c&&i.immediateRelease&&e.authenticating?(V(e,n),e.nonAuthenticatedConnections.push(n)):!1===c&&(e.queue.unshift(i),V(e,n),K(e.queue))}else V(e,n),K(e.queue)}}),e.executing=!1))}}M._execute=Y,e.exports=M},function(e,t){var n;t=e.exports=K,n=\"object\"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\\bsemver\\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(\"SEMVER\"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION=\"2.0.0\";var r=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],s=t.src=[],a=0,c=a++;s[c]=\"0|[1-9]\\\\d*\";var l=a++;s[l]=\"[0-9]+\";var u=a++;s[u]=\"\\\\d*[a-zA-Z-][a-zA-Z0-9-]*\";var p=a++;s[p]=\"(\"+s[c]+\")\\\\.(\"+s[c]+\")\\\\.(\"+s[c]+\")\";var d=a++;s[d]=\"(\"+s[l]+\")\\\\.(\"+s[l]+\")\\\\.(\"+s[l]+\")\";var f=a++;s[f]=\"(?:\"+s[c]+\"|\"+s[u]+\")\";var h=a++;s[h]=\"(?:\"+s[l]+\"|\"+s[u]+\")\";var m=a++;s[m]=\"(?:-(\"+s[f]+\"(?:\\\\.\"+s[f]+\")*))\";var g=a++;s[g]=\"(?:-?(\"+s[h]+\"(?:\\\\.\"+s[h]+\")*))\";var y=a++;s[y]=\"[0-9A-Za-z-]+\";var v=a++;s[v]=\"(?:\\\\+(\"+s[y]+\"(?:\\\\.\"+s[y]+\")*))\";var b=a++,x=\"v?\"+s[p]+s[m]+\"?\"+s[v]+\"?\";s[b]=\"^\"+x+\"$\";var w=\"[v=\\\\s]*\"+s[d]+s[g]+\"?\"+s[v]+\"?\",S=a++;s[S]=\"^\"+w+\"$\";var k=a++;s[k]=\"((?:<|>)?=?)\";var O=a++;s[O]=s[l]+\"|x|X|\\\\*\";var C=a++;s[C]=s[c]+\"|x|X|\\\\*\";var _=a++;s[_]=\"[v=\\\\s]*(\"+s[C]+\")(?:\\\\.(\"+s[C]+\")(?:\\\\.(\"+s[C]+\")(?:\"+s[m]+\")?\"+s[v]+\"?)?)?\";var E=a++;s[E]=\"[v=\\\\s]*(\"+s[O]+\")(?:\\\\.(\"+s[O]+\")(?:\\\\.(\"+s[O]+\")(?:\"+s[g]+\")?\"+s[v]+\"?)?)?\";var I=a++;s[I]=\"^\"+s[k]+\"\\\\s*\"+s[_]+\"$\";var T=a++;s[T]=\"^\"+s[k]+\"\\\\s*\"+s[E]+\"$\";var M=a++;s[M]=\"(?:^|[^\\\\d])(\\\\d{1,16})(?:\\\\.(\\\\d{1,16}))?(?:\\\\.(\\\\d{1,16}))?(?:$|[^\\\\d])\";var N=a++;s[N]=\"(?:~>?)\";var A=a++;s[A]=\"(\\\\s*)\"+s[N]+\"\\\\s+\",i[A]=new RegExp(s[A],\"g\");var B=a++;s[B]=\"^\"+s[N]+s[_]+\"$\";var j=a++;s[j]=\"^\"+s[N]+s[E]+\"$\";var P=a++;s[P]=\"(?:\\\\^)\";var D=a++;s[D]=\"(\\\\s*)\"+s[P]+\"\\\\s+\",i[D]=new RegExp(s[D],\"g\");var L=a++;s[L]=\"^\"+s[P]+s[_]+\"$\";var R=a++;s[R]=\"^\"+s[P]+s[E]+\"$\";var z=a++;s[z]=\"^\"+s[k]+\"\\\\s*(\"+w+\")$|^$\";var q=a++;s[q]=\"^\"+s[k]+\"\\\\s*(\"+x+\")$|^$\";var U=a++;s[U]=\"(\\\\s*)\"+s[k]+\"\\\\s*(\"+w+\"|\"+s[_]+\")\",i[U]=new RegExp(s[U],\"g\");var F=a++;s[F]=\"^\\\\s*(\"+s[_]+\")\\\\s+-\\\\s+(\"+s[_]+\")\\\\s*$\";var H=a++;s[H]=\"^\\\\s*(\"+s[E]+\")\\\\s+-\\\\s+(\"+s[E]+\")\\\\s*$\";var V=a++;s[V]=\"(<|>)?=?\\\\s*\\\\*\";for(var $=0;$<a;$++)n($,s[$]),i[$]||(i[$]=new RegExp(s[$]));function W(e,t){if(e instanceof K)return e;if(\"string\"!=typeof e)return null;if(e.length>r)return null;if(!(t?i[S]:i[b]).test(e))return null;try{return new K(e,t)}catch(e){return null}}function K(e,t){if(e instanceof K){if(e.loose===t)return e;e=e.version}else if(\"string\"!=typeof e)throw new TypeError(\"Invalid Version: \"+e);if(e.length>r)throw new TypeError(\"version is longer than \"+r+\" characters\");if(!(this instanceof K))return new K(e,t);n(\"SemVer\",e,t),this.loose=t;var s=e.trim().match(t?i[S]:i[b]);if(!s)throw new TypeError(\"Invalid Version: \"+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>o||this.major<0)throw new TypeError(\"Invalid major version\");if(this.minor>o||this.minor<0)throw new TypeError(\"Invalid minor version\");if(this.patch>o||this.patch<0)throw new TypeError(\"Invalid patch version\");s[4]?this.prerelease=s[4].split(\".\").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split(\".\"):[],this.format()}t.parse=W,t.valid=function(e,t){var n=W(e,t);return n?n.version:null},t.clean=function(e,t){var n=W(e.trim().replace(/^[=v]+/,\"\"),t);return n?n.version:null},t.SemVer=K,K.prototype.format=function(){return this.version=this.major+\".\"+this.minor+\".\"+this.patch,this.prerelease.length&&(this.version+=\"-\"+this.prerelease.join(\".\")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(e){return n(\"SemVer.compare\",this.version,this.loose,e),e instanceof K||(e=new K(e,this.loose)),this.compareMain(e)||this.comparePre(e)},K.prototype.compareMain=function(e){return e instanceof K||(e=new K(e,this.loose)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},K.prototype.comparePre=function(e){if(e instanceof K||(e=new K(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],o=e.prerelease[t];if(n(\"prerelease compare\",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return G(r,o)}while(++t)},K.prototype.inc=function(e,t){switch(e){case\"premajor\":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc(\"pre\",t);break;case\"preminor\":this.prerelease.length=0,this.patch=0,this.minor++,this.inc(\"pre\",t);break;case\"prepatch\":this.prerelease.length=0,this.inc(\"patch\",t),this.inc(\"pre\",t);break;case\"prerelease\":0===this.prerelease.length&&this.inc(\"patch\",t),this.inc(\"pre\",t);break;case\"major\":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case\"minor\":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case\"patch\":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case\"pre\":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)\"number\"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(\"invalid increment argument: \"+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){\"string\"==typeof n&&(r=n,n=void 0);try{return new K(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(Q(e,t))return null;var n=W(e),r=W(t);if(n.prerelease.length||r.prerelease.length){for(var o in n)if((\"major\"===o||\"minor\"===o||\"patch\"===o)&&n[o]!==r[o])return\"pre\"+o;return\"prerelease\"}for(var o in n)if((\"major\"===o||\"minor\"===o||\"patch\"===o)&&n[o]!==r[o])return o},t.compareIdentifiers=G;var Y=/^[0-9]+$/;function G(e,t){var n=Y.test(e),r=Y.test(t);return n&&r&&(e=+e,t=+t),n&&!r?-1:r&&!n?1:e<t?-1:e>t?1:0}function J(e,t,n){return new K(e,n).compare(new K(t,n))}function Z(e,t,n){return J(e,t,n)>0}function X(e,t,n){return J(e,t,n)<0}function Q(e,t,n){return 0===J(e,t,n)}function ee(e,t,n){return 0!==J(e,t,n)}function te(e,t,n){return J(e,t,n)>=0}function ne(e,t,n){return J(e,t,n)<=0}function re(e,t,n,r){var o;switch(t){case\"===\":\"object\"==typeof e&&(e=e.version),\"object\"==typeof n&&(n=n.version),o=e===n;break;case\"!==\":\"object\"==typeof e&&(e=e.version),\"object\"==typeof n&&(n=n.version),o=e!==n;break;case\"\":case\"=\":case\"==\":o=Q(e,n,r);break;case\"!=\":o=ee(e,n,r);break;case\">\":o=Z(e,n,r);break;case\">=\":o=te(e,n,r);break;case\"<\":o=X(e,n,r);break;case\"<=\":o=ne(e,n,r);break;default:throw new TypeError(\"Invalid operator: \"+t)}return o}function oe(e,t){if(e instanceof oe){if(e.loose===t)return e;e=e.value}if(!(this instanceof oe))return new oe(e,t);n(\"comparator\",e,t),this.loose=t,this.parse(e),this.semver===ie?this.value=\"\":this.value=this.operator+this.semver.version,n(\"comp\",this)}t.rcompareIdentifiers=function(e,t){return G(t,e)},t.major=function(e,t){return new K(e,t).major},t.minor=function(e,t){return new K(e,t).minor},t.patch=function(e,t){return new K(e,t).patch},t.compare=J,t.compareLoose=function(e,t){return J(e,t,!0)},t.rcompare=function(e,t,n){return J(t,e,n)},t.sort=function(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})},t.rsort=function(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})},t.gt=Z,t.lt=X,t.eq=Q,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=re,t.Comparator=oe;var ie={};function se(e,t){if(e instanceof se)return e.loose===t?e:new se(e.raw,t);if(e instanceof oe)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\\s*\\|\\|\\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError(\"Invalid SemVer Range: \"+e);this.format()}function ae(e){return!e||\"x\"===e.toLowerCase()||\"*\"===e}function ce(e,t,n,r,o,i,s,a,c,l,u,p,d){return((t=ae(n)?\"\":ae(r)?\">=\"+n+\".0.0\":ae(o)?\">=\"+n+\".\"+r+\".0\":\">=\"+t)+\" \"+(a=ae(c)?\"\":ae(l)?\"<\"+(+c+1)+\".0.0\":ae(u)?\"<\"+c+\".\"+(+l+1)+\".0\":p?\"<=\"+c+\".\"+l+\".\"+u+\"-\"+p:\"<=\"+a)).trim()}function le(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(r=0;r<e.length;r++)if(n(e[r].semver),e[r].semver!==ie&&e[r].semver.prerelease.length>0){var o=e[r].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ue(e,t,n){try{t=new se(t,n)}catch(e){return!1}return t.test(e)}function pe(e,t,n,r){var o,i,s,a,c;switch(e=new K(e,r),t=new se(t,r),n){case\">\":o=Z,i=ne,s=X,a=\">\",c=\">=\";break;case\"<\":o=X,i=te,s=Z,a=\"<\",c=\"<=\";break;default:throw new TypeError('Must provide a hilo val of \"<\" or \">\"')}if(ue(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=null,p=null;if(t.set[l].forEach(function(e){e.semver===ie&&(e=new oe(\">=0.0.0\")),u=u||e,p=p||e,o(e.semver,u.semver,r)?u=e:s(e.semver,p.semver,r)&&(p=e)}),u.operator===a||u.operator===c)return!1;if((!p.operator||p.operator===a)&&i(e,p.semver))return!1;if(p.operator===c&&s(e,p.semver))return!1}return!0}oe.prototype.parse=function(e){var t=this.loose?i[z]:i[q],n=e.match(t);if(!n)throw new TypeError(\"Invalid comparator: \"+e);this.operator=n[1],\"=\"===this.operator&&(this.operator=\"\"),n[2]?this.semver=new K(n[2],this.loose):this.semver=ie},oe.prototype.toString=function(){return this.value},oe.prototype.test=function(e){return n(\"Comparator.test\",e,this.loose),this.semver===ie||(\"string\"==typeof e&&(e=new K(e,this.loose)),re(e,this.operator,this.semver,this.loose))},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError(\"a Comparator is required\");var n;if(\"\"===this.operator)return n=new se(e.value,t),ue(this.value,n,t);if(\"\"===e.operator)return n=new se(this.value,t),ue(e.semver,n,t);var r=!(\">=\"!==this.operator&&\">\"!==this.operator||\">=\"!==e.operator&&\">\"!==e.operator),o=!(\"<=\"!==this.operator&&\"<\"!==this.operator||\"<=\"!==e.operator&&\"<\"!==e.operator),i=this.semver.version===e.semver.version,s=!(\">=\"!==this.operator&&\"<=\"!==this.operator||\">=\"!==e.operator&&\"<=\"!==e.operator),a=re(this.semver,\"<\",e.semver,t)&&(\">=\"===this.operator||\">\"===this.operator)&&(\"<=\"===e.operator||\"<\"===e.operator),c=re(this.semver,\">\",e.semver,t)&&(\"<=\"===this.operator||\"<\"===this.operator)&&(\">=\"===e.operator||\">\"===e.operator);return r||o||i&&s||a||c},t.Range=se,se.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(\" \").trim()}).join(\"||\").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),n(\"range\",e,t);var r=t?i[H]:i[F];e=e.replace(r,ce),n(\"hyphen replace\",e),e=e.replace(i[U],\"$1$2$3\"),n(\"comparator trim\",e,i[U]),e=(e=(e=e.replace(i[A],\"$1~\")).replace(i[D],\"$1^\")).split(/\\s+/).join(\" \");var o=t?i[z]:i[q],s=e.split(\" \").map(function(e){return function(e,t){return n(\"comp\",e),e=function(e,t){return e.trim().split(/\\s+/).map(function(e){return function(e,t){n(\"caret\",e,t);var r=t?i[R]:i[L];return e.replace(r,function(t,r,o,i,s){var a;return n(\"caret\",e,t,r,o,i,s),ae(r)?a=\"\":ae(o)?a=\">=\"+r+\".0.0 <\"+(+r+1)+\".0.0\":ae(i)?a=\"0\"===r?\">=\"+r+\".\"+o+\".0 <\"+r+\".\"+(+o+1)+\".0\":\">=\"+r+\".\"+o+\".0 <\"+(+r+1)+\".0.0\":s?(n(\"replaceCaret pr\",s),\"-\"!==s.charAt(0)&&(s=\"-\"+s),a=\"0\"===r?\"0\"===o?\">=\"+r+\".\"+o+\".\"+i+s+\" <\"+r+\".\"+o+\".\"+(+i+1):\">=\"+r+\".\"+o+\".\"+i+s+\" <\"+r+\".\"+(+o+1)+\".0\":\">=\"+r+\".\"+o+\".\"+i+s+\" <\"+(+r+1)+\".0.0\"):(n(\"no pr\"),a=\"0\"===r?\"0\"===o?\">=\"+r+\".\"+o+\".\"+i+\" <\"+r+\".\"+o+\".\"+(+i+1):\">=\"+r+\".\"+o+\".\"+i+\" <\"+r+\".\"+(+o+1)+\".0\":\">=\"+r+\".\"+o+\".\"+i+\" <\"+(+r+1)+\".0.0\"),n(\"caret return\",a),a})}(e,t)}).join(\" \")}(e,t),n(\"caret\",e),e=function(e,t){return e.trim().split(/\\s+/).map(function(e){return function(e,t){var r=t?i[j]:i[B];return e.replace(r,function(t,r,o,i,s){var a;return n(\"tilde\",e,t,r,o,i,s),ae(r)?a=\"\":ae(o)?a=\">=\"+r+\".0.0 <\"+(+r+1)+\".0.0\":ae(i)?a=\">=\"+r+\".\"+o+\".0 <\"+r+\".\"+(+o+1)+\".0\":s?(n(\"replaceTilde pr\",s),\"-\"!==s.charAt(0)&&(s=\"-\"+s),a=\">=\"+r+\".\"+o+\".\"+i+s+\" <\"+r+\".\"+(+o+1)+\".0\"):a=\">=\"+r+\".\"+o+\".\"+i+\" <\"+r+\".\"+(+o+1)+\".0\",n(\"tilde return\",a),a})}(e,t)}).join(\" \")}(e,t),n(\"tildes\",e),e=function(e,t){return n(\"replaceXRanges\",e,t),e.split(/\\s+/).map(function(e){return function(e,t){e=e.trim();var r=t?i[T]:i[I];return e.replace(r,function(t,r,o,i,s,a){n(\"xRange\",e,t,r,o,i,s,a);var c=ae(o),l=c||ae(i),u=l||ae(s),p=u;return\"=\"===r&&p&&(r=\"\"),c?t=\">\"===r||\"<\"===r?\"<0.0.0\":\"*\":r&&p?(l&&(i=0),u&&(s=0),\">\"===r?(r=\">=\",l?(o=+o+1,i=0,s=0):u&&(i=+i+1,s=0)):\"<=\"===r&&(r=\"<\",l?o=+o+1:i=+i+1),t=r+o+\".\"+i+\".\"+s):l?t=\">=\"+o+\".0.0 <\"+(+o+1)+\".0.0\":u&&(t=\">=\"+o+\".\"+i+\".0 <\"+o+\".\"+(+i+1)+\".0\"),n(\"xRange return\",t),t})}(e,t)}).join(\" \")}(e,t),n(\"xrange\",e),e=function(e,t){return n(\"replaceStars\",e,t),e.trim().replace(i[V],\"\")}(e,t),n(\"stars\",e),e}(e,t)}).join(\" \").split(/\\s+/);return this.loose&&(s=s.filter(function(e){return!!e.match(o)})),s=s.map(function(e){return new oe(e,t)})},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError(\"a Range is required\");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new se(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(\" \").trim().split(\" \")})},se.prototype.test=function(e){if(!e)return!1;\"string\"==typeof e&&(e=new K(e,this.loose));for(var t=0;t<this.set.length;t++)if(le(this.set[t],e))return!0;return!1},t.satisfies=ue,t.maxSatisfying=function(e,t,n){var r=null,o=null;try{var i=new se(t,n)}catch(e){return null}return e.forEach(function(e){i.test(e)&&(r&&-1!==o.compare(e)||(o=new K(r=e,n)))}),r},t.minSatisfying=function(e,t,n){var r=null,o=null;try{var i=new se(t,n)}catch(e){return null}return e.forEach(function(e){i.test(e)&&(r&&1!==o.compare(e)||(o=new K(r=e,n)))}),r},t.validRange=function(e,t){try{return new se(e,t).range||\"*\"}catch(e){return null}},t.ltr=function(e,t,n){return pe(e,t,\"<\",n)},t.gtr=function(e,t,n){return pe(e,t,\">\",n)},t.outside=pe,t.prerelease=function(e,t){var n=W(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof K)return e;if(\"string\"!=typeof e)return null;var t=e.match(i[M]);return null==t?null:W((t[1]||\"0\")+\".\"+(t[2]||\"0\")+\".\"+(t[3]||\"0\"))}},function(e,t){e.exports=require(\"module\")},function(e,t,n){\"use strict\";var r=n(21),o=n(215);e.exports=function(e,t){if(\"string\"!=typeof e||\"string\"!=typeof t)throw new TypeError(\"Expected `fromDir` and `moduleId` to be a string\");e=r.resolve(e);var n=r.join(e,\"noop.js\");try{return o._resolveFilename(t,{id:n,filename:n,paths:o._nodeModulePaths(e)})}catch(e){return null}}},function(e,t,n){\"use strict\";n(34).writeIEEE754,n(34).readIEEE754;var r=n(42).Long,o=n(57).Double,i=n(56).Timestamp,s=n(55).ObjectID,a=n(53).Symbol,c=n(54).BSONRegExp,l=n(52).Code,u=n(51),p=n(50).MinKey,d=n(49).MaxKey,f=n(48).DBRef,h=n(47).Binary,m=function(e){return\"object\"==typeof e&&\"[object Date]\"===Object.prototype.toString.call(e)},g=function(e,t,n){var r=5;if(Array.isArray(e))for(var o=0;o<e.length;o++)r+=y(o.toString(),e[o],t,!0,n);else for(var i in e.toBSON&&(e=e.toBSON()),e)r+=y(i,e[i],t,!1,n);return r};function y(e,t,n,y,b){switch(t&&t.toBSON&&(t=t.toBSON()),typeof t){case\"string\":return 1+Buffer.byteLength(e,\"utf8\")+1+4+Buffer.byteLength(t,\"utf8\")+1;case\"number\":return Math.floor(t)===t&&t>=v.JS_INT_MIN&&t<=v.JS_INT_MAX&&t>=v.BSON_INT32_MIN&&t<=v.BSON_INT32_MAX?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+5:(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+9;case\"undefined\":return y||!b?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1:0;case\"boolean\":return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+2;case\"object\":if(null==t||t instanceof p||t instanceof d||\"MinKey\"==t._bsontype||\"MaxKey\"==t._bsontype)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1;if(t instanceof s||\"ObjectID\"==t._bsontype)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+13;if(t instanceof Date||m(t))return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+9;if(\"undefined\"!=typeof Buffer&&Buffer.isBuffer(t))return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+6+t.length;if(t instanceof r||t instanceof o||t instanceof i||\"Long\"==t._bsontype||\"Double\"==t._bsontype||\"Timestamp\"==t._bsontype)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+9;if(t instanceof u||\"Decimal128\"==t._bsontype)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+17;if(t instanceof l||\"Code\"==t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+4+4+Buffer.byteLength(t.code.toString(),\"utf8\")+1+g(t.scope,n,b):(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+4+Buffer.byteLength(t.code.toString(),\"utf8\")+1;if(t instanceof h||\"Binary\"==t._bsontype)return t.sub_type==h.SUBTYPE_BYTE_ARRAY?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+(t.position+1+4+1+4):(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+(t.position+1+4+1);if(t instanceof a||\"Symbol\"==t._bsontype)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+Buffer.byteLength(t.value,\"utf8\")+4+1+1;if(t instanceof f||\"DBRef\"==t._bsontype){var x={$ref:t.namespace,$id:t.oid};return null!=t.db&&(x.$db=t.db),(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+g(x,n,b)}return t instanceof RegExp||\"[object RegExp]\"===Object.prototype.toString.call(t)?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+Buffer.byteLength(t.source,\"utf8\")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:t instanceof c||\"BSONRegExp\"==t._bsontype?(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+Buffer.byteLength(t.pattern,\"utf8\")+1+Buffer.byteLength(t.options,\"utf8\")+1:(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+g(t,n,b)+1;case\"function\":if(t instanceof RegExp||\"[object RegExp]\"===Object.prototype.toString.call(t)||\"[object RegExp]\"==String.call(t))return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+Buffer.byteLength(t.source,\"utf8\")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(n&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+4+4+Buffer.byteLength(t.toString(),\"utf8\")+1+g(t.scope,n,b);if(n)return(null!=e?Buffer.byteLength(e,\"utf8\")+1:0)+1+4+Buffer.byteLength(t.toString(),\"utf8\")+1}return 0}var v={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992};e.exports=g},function(e,t,n){\"use strict\";var r=n(34).writeIEEE754,o=(n(34).readIEEE754,n(42).Long),i=n(113),s=(n(57).Double,n(56).Timestamp,n(55).ObjectID,n(53).Symbol,n(52).Code,n(54).BSONRegExp,n(83).Int32,n(50).MinKey),a=(n(49).MaxKey,n(51),n(48).DBRef,n(47).Binary);try{Uint8Array}catch(e){Buffer}var c=/\\x00/,l=function(e){return\"object\"==typeof e&&\"[object Date]\"===Object.prototype.toString.call(e)},u=function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)},p=function(e,t,n,r,o){e[r++]=A.BSON_DATA_STRING,e[(r=r+(o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"))+1)-1]=0;var i=e.write(n,r+4,\"utf8\");return e[r+3]=i+1>>24&255,e[r+2]=i+1>>16&255,e[r+1]=i+1>>8&255,e[r]=i+1&255,r=r+4+i,e[r++]=0,r},d=function(e,t,n,i,s){if(Math.floor(n)===n&&n>=A.JS_INT_MIN&&n<=A.JS_INT_MAX)if(n>=A.BSON_INT32_MIN&&n<=A.BSON_INT32_MAX)e[i++]=A.BSON_DATA_INT,i+=s?e.write(t,i,\"ascii\"):e.write(t,i,\"utf8\"),e[i++]=0,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=n>>16&255,e[i++]=n>>24&255;else if(n>=A.JS_INT_MIN&&n<=A.JS_INT_MAX){e[i++]=A.BSON_DATA_NUMBER,i+=s?e.write(t,i,\"ascii\"):e.write(t,i,\"utf8\"),e[i++]=0,r(e,n,i,\"little\",52,8),i+=8}else{e[i++]=A.BSON_DATA_LONG,i+=s?e.write(t,i,\"ascii\"):e.write(t,i,\"utf8\"),e[i++]=0;var a=o.fromNumber(n),c=a.getLowBits(),l=a.getHighBits();e[i++]=255&c,e[i++]=c>>8&255,e[i++]=c>>16&255,e[i++]=c>>24&255,e[i++]=255&l,e[i++]=l>>8&255,e[i++]=l>>16&255,e[i++]=l>>24&255}else e[i++]=A.BSON_DATA_NUMBER,i+=s?e.write(t,i,\"ascii\"):e.write(t,i,\"utf8\"),e[i++]=0,r(e,n,i,\"little\",52,8),i+=8;return i},f=function(e,t,n,r,o){return e[r++]=A.BSON_DATA_NULL,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0,r},h=function(e,t,n,r,o){return e[r++]=A.BSON_DATA_BOOLEAN,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0,e[r++]=n?1:0,r},m=function(e,t,n,r,i){e[r++]=A.BSON_DATA_DATE,r+=i?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0;var s=o.fromNumber(n.getTime()),a=s.getLowBits(),c=s.getHighBits();return e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=255&c,e[r++]=c>>8&255,e[r++]=c>>16&255,e[r++]=c>>24&255,r},g=function(e,t,n,r,o){if(e[r++]=A.BSON_DATA_REGEXP,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0,n.source&&null!=n.source.match(c))throw Error(\"value \"+n.source+\" must not contain null bytes\");return r+=e.write(n.source,r,\"utf8\"),e[r++]=0,n.global&&(e[r++]=115),n.ignoreCase&&(e[r++]=105),n.multiline&&(e[r++]=109),e[r++]=0,r},y=function(e,t,n,r,o){if(e[r++]=A.BSON_DATA_REGEXP,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0,null!=n.pattern.match(c))throw Error(\"pattern \"+n.pattern+\" must not contain null bytes\");return r+=e.write(n.pattern,r,\"utf8\"),e[r++]=0,r+=e.write(n.options.split(\"\").sort().join(\"\"),r,\"utf8\"),e[r++]=0,r},v=function(e,t,n,r,o){return e[r++]=null===n?A.BSON_DATA_NULL:n instanceof s?A.BSON_DATA_MIN_KEY:A.BSON_DATA_MAX_KEY,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0,r},b=function(e,t,n,r,o){if(e[r++]=A.BSON_DATA_OID,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0,\"string\"==typeof n.id)e.write(n.id,r,\"binary\");else{if(!n.id||!n.id.copy)throw new Error(\"object [\"+JSON.stringify(n)+\"] is not a valid ObjectId\");n.id.copy(e,r,0,12)}return r+12},x=function(e,t,n,r,o){e[r++]=A.BSON_DATA_BINARY,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0;var i=n.length;return e[r++]=255&i,e[r++]=i>>8&255,e[r++]=i>>16&255,e[r++]=i>>24&255,e[r++]=A.BSON_BINARY_SUBTYPE_DEFAULT,n.copy(e,r,0,i),r+=i},w=function(e,t,n,r,o,i,s,a,c,l){for(var u=0;u<l.length;u++)if(l[u]===n)throw new Error(\"cyclic dependency detected\");l.push(n),e[r++]=Array.isArray(n)?A.BSON_DATA_ARRAY:A.BSON_DATA_OBJECT,r+=c?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0;var p=N(e,n,o,r,i+1,s,a,l);l.pop();return p},S=function(e,t,n,r,o){return e[r++]=A.BSON_DATA_DECIMAL128,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0,n.bytes.copy(e,r,0,16),r+16},k=function(e,t,n,r,o){e[r++]=\"Long\"==n._bsontype?A.BSON_DATA_LONG:A.BSON_DATA_TIMESTAMP,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0;var i=n.getLowBits(),s=n.getHighBits();return e[r++]=255&i,e[r++]=i>>8&255,e[r++]=i>>16&255,e[r++]=i>>24&255,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,r},O=function(e,t,n,r,o){return e[r++]=A.BSON_DATA_INT,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=n>>16&255,e[r++]=n>>24&255,r},C=function(e,t,n,o,i){return e[o++]=A.BSON_DATA_NUMBER,o+=i?e.write(t,o,\"ascii\"):e.write(t,o,\"utf8\"),e[o++]=0,r(e,n,o,\"little\",52,8),o+=8},_=function(e,t,n,r,o,i,s){e[r++]=A.BSON_DATA_CODE,r+=s?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0;var a=n.toString(),c=e.write(a,r+4,\"utf8\")+1;return e[r]=255&c,e[r+1]=c>>8&255,e[r+2]=c>>16&255,e[r+3]=c>>24&255,r=r+4+c-1,e[r++]=0,r},E=function(e,t,n,r,o,i,s,a,c){if(n.scope&&\"object\"==typeof n.scope){e[r++]=A.BSON_DATA_CODE_W_SCOPE,r+=c?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0;var l=r,u=\"string\"==typeof n.code?n.code:n.code.toString();r+=4;var p=e.write(u,r+4,\"utf8\")+1;e[r]=255&p,e[r+1]=p>>8&255,e[r+2]=p>>16&255,e[r+3]=p>>24&255,e[r+4+p-1]=0,r=r+p+4;var d=N(e,n.scope,o,r,i+1,s,a);r=d-1;var f=d-l;e[l++]=255&f,e[l++]=f>>8&255,e[l++]=f>>16&255,e[l++]=f>>24&255,e[r++]=0}else{e[r++]=A.BSON_DATA_CODE,r+=c?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0;u=n.code.toString();var h=e.write(u,r+4,\"utf8\")+1;e[r]=255&h,e[r+1]=h>>8&255,e[r+2]=h>>16&255,e[r+3]=h>>24&255,r=r+4+h-1,e[r++]=0}return r},I=function(e,t,n,r,o){e[r++]=A.BSON_DATA_BINARY,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0;var i=n.value(!0),s=n.position;return n.sub_type==a.SUBTYPE_BYTE_ARRAY&&(s+=4),e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,e[r++]=n.sub_type,n.sub_type==a.SUBTYPE_BYTE_ARRAY&&(s-=4,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255),i.copy(e,r,0,n.position),r+=n.position},T=function(e,t,n,r,o){e[r++]=A.BSON_DATA_SYMBOL,r+=o?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0;var i=e.write(n.value,r+4,\"utf8\")+1;return e[r]=255&i,e[r+1]=i>>8&255,e[r+2]=i>>16&255,e[r+3]=i>>24&255,r=r+4+i-1,e[r++]=0,r},M=function(e,t,n,r,o,i,s){e[r++]=A.BSON_DATA_OBJECT,r+=s?e.write(t,r,\"ascii\"):e.write(t,r,\"utf8\"),e[r++]=0;var a,c=r,l=(a=null!=n.db?N(e,{$ref:n.namespace,$id:n.oid,$db:n.db},!1,r,o+1,i):N(e,{$ref:n.namespace,$id:n.oid},!1,r,o+1,i))-c;return e[c++]=255&l,e[c++]=l>>8&255,e[c++]=l>>16&255,e[c++]=l>>24&255,a},N=function(e,t,n,r,o,s,a,N){r=r||0,(N=N||[]).push(t);var A=r+4;if(Array.isArray(t))for(var B=0;B<t.length;B++){var j=\"\"+B;if((z=t[B])&&z.toBSON){if(\"function\"!=typeof z.toBSON)throw new Error(\"toBSON is not a function\");z=z.toBSON()}\"string\"==(R=typeof z)?A=p(e,j,z,A,!0):\"number\"==R?A=d(e,j,z,A,!0):\"boolean\"==R?A=h(e,j,z,A,!0):z instanceof Date||l(z)?A=m(e,j,z,A,!0):void 0===z?A=f(e,j,0,A,!0):null===z?A=f(e,j,0,A,!0):\"ObjectID\"==z._bsontype?A=b(e,j,z,A,!0):Buffer.isBuffer(z)?A=x(e,j,z,A,!0):z instanceof RegExp||u(z)?A=g(e,j,z,A,!0):\"object\"==R&&null==z._bsontype?A=w(e,j,z,A,n,o,s,a,!0,N):\"object\"==R&&\"Decimal128\"==z._bsontype?A=S(e,j,z,A,!0):\"Long\"==z._bsontype||\"Timestamp\"==z._bsontype?A=k(e,j,z,A,!0):\"Double\"==z._bsontype?A=C(e,j,z,A,!0):\"function\"==typeof z&&s?A=_(e,j,z,A,0,0,s):\"Code\"==z._bsontype?A=E(e,j,z,A,n,o,s,a,!0):\"Binary\"==z._bsontype?A=I(e,j,z,A,!0):\"Symbol\"==z._bsontype?A=T(e,j,z,A,!0):\"DBRef\"==z._bsontype?A=M(e,j,z,A,o,s,!0):\"BSONRegExp\"==z._bsontype?A=y(e,j,z,A,!0):\"Int32\"==z._bsontype?A=O(e,j,z,A,!0):\"MinKey\"!=z._bsontype&&\"MaxKey\"!=z._bsontype||(A=v(e,j,z,A,!0))}else if(t instanceof i)for(var P=t.entries(),D=!1;!D;){var L=P.next();if(!(D=L.done)){j=L.value[0];var R=typeof(z=L.value[1]);if(\"$db\"!=j&&\"$ref\"!=j&&\"$id\"!=j){if(null!=j.match(c))throw Error(\"key \"+j+\" must not contain null bytes\");if(n){if(\"$\"==j[0])throw Error(\"key \"+j+\" must not start with '$'\");if(~j.indexOf(\".\"))throw Error(\"key \"+j+\" must not contain '.'\")}}\"string\"==R?A=p(e,j,z,A):\"number\"==R?A=d(e,j,z,A):\"boolean\"==R?A=h(e,j,z,A):z instanceof Date||l(z)?A=m(e,j,z,A):void 0===z&&1==a||(null===z||void 0===z?A=f(e,j,0,A):\"ObjectID\"==z._bsontype?A=b(e,j,z,A):Buffer.isBuffer(z)?A=x(e,j,z,A):z instanceof RegExp||u(z)?A=g(e,j,z,A):\"object\"==R&&null==z._bsontype?A=w(e,j,z,A,n,o,s,a,!1,N):\"object\"==R&&\"Decimal128\"==z._bsontype?A=S(e,j,z,A):\"Long\"==z._bsontype||\"Timestamp\"==z._bsontype?A=k(e,j,z,A):\"Double\"==z._bsontype?A=C(e,j,z,A):\"Code\"==z._bsontype?A=E(e,j,z,A,n,o,s,a):\"function\"==typeof z&&s?A=_(e,j,z,A,0,0,s):\"Binary\"==z._bsontype?A=I(e,j,z,A):\"Symbol\"==z._bsontype?A=T(e,j,z,A):\"DBRef\"==z._bsontype?A=M(e,j,z,A,o,s):\"BSONRegExp\"==z._bsontype?A=y(e,j,z,A):\"Int32\"==z._bsontype?A=O(e,j,z,A):\"MinKey\"!=z._bsontype&&\"MaxKey\"!=z._bsontype||(A=v(e,j,z,A)))}}else{if(t.toBSON){if(\"function\"!=typeof t.toBSON)throw new Error(\"toBSON is not a function\");if(null!=(t=t.toBSON())&&\"object\"!=typeof t)throw new Error(\"toBSON function did not return an object\")}for(var j in t){var z;if((z=t[j])&&z.toBSON){if(\"function\"!=typeof z.toBSON)throw new Error(\"toBSON is not a function\");z=z.toBSON()}R=typeof z;if(\"$db\"!=j&&\"$ref\"!=j&&\"$id\"!=j){if(null!=j.match(c))throw Error(\"key \"+j+\" must not contain null bytes\");if(n){if(\"$\"==j[0])throw Error(\"key \"+j+\" must not start with '$'\");if(~j.indexOf(\".\"))throw Error(\"key \"+j+\" must not contain '.'\")}}\"string\"==R?A=p(e,j,z,A):\"number\"==R?A=d(e,j,z,A):\"boolean\"==R?A=h(e,j,z,A):z instanceof Date||l(z)?A=m(e,j,z,A):void 0===z&&1==a||(null===z||void 0===z?A=f(e,j,0,A):\"ObjectID\"==z._bsontype?A=b(e,j,z,A):Buffer.isBuffer(z)?A=x(e,j,z,A):z instanceof RegExp||u(z)?A=g(e,j,z,A):\"object\"==R&&null==z._bsontype?A=w(e,j,z,A,n,o,s,a,!1,N):\"object\"==R&&\"Decimal128\"==z._bsontype?A=S(e,j,z,A):\"Long\"==z._bsontype||\"Timestamp\"==z._bsontype?A=k(e,j,z,A):\"Double\"==z._bsontype?A=C(e,j,z,A):\"Code\"==z._bsontype?A=E(e,j,z,A,n,o,s,a):\"function\"==typeof z&&s?A=_(e,j,z,A,0,0,s):\"Binary\"==z._bsontype?A=I(e,j,z,A):\"Symbol\"==z._bsontype?A=T(e,j,z,A):\"DBRef\"==z._bsontype?A=M(e,j,z,A,o,s):\"BSONRegExp\"==z._bsontype?A=y(e,j,z,A):\"Int32\"==z._bsontype?A=O(e,j,z,A):\"MinKey\"!=z._bsontype&&\"MaxKey\"!=z._bsontype||(A=v(e,j,z,A)))}}N.pop(),e[A++]=0;var q=A-r;return e[r++]=255&q,e[r++]=q>>8&255,e[r++]=q>>16&255,e[r++]=q>>24&255,A},A={};A.functionCache={};A.BSON_DATA_NUMBER=1,A.BSON_DATA_STRING=2,A.BSON_DATA_OBJECT=3,A.BSON_DATA_ARRAY=4,A.BSON_DATA_BINARY=5,A.BSON_DATA_UNDEFINED=6,A.BSON_DATA_OID=7,A.BSON_DATA_BOOLEAN=8,A.BSON_DATA_DATE=9,A.BSON_DATA_NULL=10,A.BSON_DATA_REGEXP=11,A.BSON_DATA_CODE=13,A.BSON_DATA_SYMBOL=14,A.BSON_DATA_CODE_W_SCOPE=15,A.BSON_DATA_INT=16,A.BSON_DATA_TIMESTAMP=17,A.BSON_DATA_LONG=18,A.BSON_DATA_DECIMAL128=19,A.BSON_DATA_MIN_KEY=255,A.BSON_DATA_MAX_KEY=127,A.BSON_BINARY_SUBTYPE_DEFAULT=0,A.BSON_BINARY_SUBTYPE_FUNCTION=1,A.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,A.BSON_BINARY_SUBTYPE_UUID=3,A.BSON_BINARY_SUBTYPE_MD5=4,A.BSON_BINARY_SUBTYPE_USER_DEFINED=128,A.BSON_INT32_MAX=2147483647,A.BSON_INT32_MIN=-2147483648,A.BSON_INT64_MAX=Math.pow(2,63)-1,A.BSON_INT64_MIN=-Math.pow(2,63),A.JS_INT_MAX=9007199254740992,A.JS_INT_MIN=-9007199254740992;o.fromNumber(9007199254740992),o.fromNumber(-9007199254740992);e.exports=N},function(module,exports,__webpack_require__){\"use strict\";var readIEEE754=__webpack_require__(34).readIEEE754,f=__webpack_require__(0).format,Long=__webpack_require__(42).Long,Double=__webpack_require__(57).Double,Timestamp=__webpack_require__(56).Timestamp,ObjectID=__webpack_require__(55).ObjectID,Symbol=__webpack_require__(53).Symbol,Code=__webpack_require__(52).Code,MinKey=__webpack_require__(50).MinKey,MaxKey=__webpack_require__(49).MaxKey,Decimal128=__webpack_require__(51),Int32=__webpack_require__(83),DBRef=__webpack_require__(48).DBRef,BSONRegExp=__webpack_require__(54).BSONRegExp,Binary=__webpack_require__(47).Binary,deserialize=function(e,t,n){var r=(t=null==t?{}:t)&&t.index?t.index:0,o=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24;if(o<5||e.length<o||o+r>e.length)throw new Error(\"corrupt bson message\");if(0!=e[r+o-1])throw new Error(\"One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00\");return deserializeObject(e,r,t,n)},deserializeObject=function(e,t,n,r){var o=null!=n.evalFunctions&&n.evalFunctions,i=null!=n.cacheFunctions&&n.cacheFunctions,s=null!=n.cacheFunctionsCrc32&&n.cacheFunctionsCrc32,a=null==n.fieldsAsRaw?null:n.fieldsAsRaw,c=null!=n.raw&&n.raw,l=\"boolean\"==typeof n.bsonRegExp&&n.bsonRegExp,u=null!=n.promoteBuffers&&n.promoteBuffers,p=null==n.promoteLongs||n.promoteLongs,d=null==n.promoteValues||n.promoteValues,f=t;if(e.length<5)throw new Error(\"corrupt bson message < 5 bytes long\");var h=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(h<5||h>e.length)throw new Error(\"corrupt bson message\");for(var m=r?[]:{},g=0;;){var y=e[t++];if(0==y)break;for(var v=t;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var b=r?g++:e.toString(\"utf8\",t,v);if(t=v+1,y==BSON.BSON_DATA_STRING){if((F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<=0||F>e.length-t||0!=e[t+F-1])throw new Error(\"bad string length in bson\");m[b]=e.toString(\"utf8\",t,t+F-1),t+=F}else if(y==BSON.BSON_DATA_OID){var x=new Buffer(12);e.copy(x,0,t,t+12),m[b]=new ObjectID(x),t+=12}else if(y==BSON.BSON_DATA_INT&&0==d)m[b]=new Int32(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(y==BSON.BSON_DATA_INT)m[b]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(y==BSON.BSON_DATA_NUMBER&&0==d)m[b]=new Double(e.readDoubleLE(t)),t+=8;else if(y==BSON.BSON_DATA_NUMBER)m[b]=e.readDoubleLE(t),t+=8;else if(y==BSON.BSON_DATA_DATE){var w=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,S=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;m[b]=new Date(new Long(w,S).toNumber())}else if(y==BSON.BSON_DATA_BOOLEAN){if(0!=e[t]&&1!=e[t])throw new Error(\"illegal boolean type value\");m[b]=1==e[t++]}else if(y==BSON.BSON_DATA_OBJECT){var k=t;if((q=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)<=0||q>e.length-t)throw new Error(\"bad embedded document length in bson\");m[b]=c?e.slice(t,t+q):deserializeObject(e,k,n,!1),t+=q}else if(y==BSON.BSON_DATA_ARRAY){k=t;var O=n,C=t+(q=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24);if(a&&a[b]){for(var _ in O={},n)O[_]=n[_];O.raw=!0}if(m[b]=deserializeObject(e,k,O,!0),0!=e[(t+=q)-1])throw new Error(\"invalid array terminator byte\");if(t!=C)throw new Error(\"corrupted array bson\")}else if(y==BSON.BSON_DATA_UNDEFINED)m[b]=void 0;else if(y==BSON.BSON_DATA_NULL)m[b]=null;else if(y==BSON.BSON_DATA_LONG){w=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,S=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var E=new Long(w,S);m[b]=p&&1==d&&E.lessThanOrEqual(JS_INT_MAX_LONG)&&E.greaterThanOrEqual(JS_INT_MIN_LONG)?E.toNumber():E}else if(y==BSON.BSON_DATA_DECIMAL128){var I=new Buffer(16);e.copy(I,0,t,t+16),t+=16;var T=new Decimal128(I);m[b]=T.toObject?T.toObject():T}else if(y==BSON.BSON_DATA_BINARY){var M=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,N=M,A=e[t++];if(M<0)throw new Error(\"Negative binary type element size found\");if(M>e.length)throw new Error(\"Binary type size larger than document size\");if(null!=e.slice){if(A==Binary.SUBTYPE_BYTE_ARRAY){if((M=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error(\"Negative binary type element size found for subtype 0x02\");if(M>N-4)throw new Error(\"Binary type with subtype 0x02 contains to long binary size\");if(M<N-4)throw new Error(\"Binary type with subtype 0x02 contains to short binary size\")}m[b]=u&&d?e.slice(t,t+M):new Binary(e.slice(t,t+M),A)}else{var B=\"undefined\"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(M)):new Array(M);if(A==Binary.SUBTYPE_BYTE_ARRAY){if((M=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error(\"Negative binary type element size found for subtype 0x02\");if(M>N-4)throw new Error(\"Binary type with subtype 0x02 contains to long binary size\");if(M<N-4)throw new Error(\"Binary type with subtype 0x02 contains to short binary size\")}for(v=0;v<M;v++)B[v]=e[t+v];m[b]=u&&d?B:new Binary(B,A)}t+=M}else if(y==BSON.BSON_DATA_REGEXP&&0==l){for(v=t;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var j=e.toString(\"utf8\",t,v);for(v=t=v+1;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");var P=e.toString(\"utf8\",t,v);t=v+1;var D=new Array(P.length);for(v=0;v<P.length;v++)switch(P[v]){case\"m\":D[v]=\"m\";break;case\"s\":D[v]=\"g\";break;case\"i\":D[v]=\"i\"}m[b]=new RegExp(j,D.join(\"\"))}else if(y==BSON.BSON_DATA_REGEXP&&1==l){for(v=t;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");for(j=e.toString(\"utf8\",t,v),v=t=v+1;0!==e[v]&&v<e.length;)v++;if(v>=e.length)throw new Error(\"Bad BSON Document: illegal CString\");P=e.toString(\"utf8\",t,v);t=v+1,m[b]=new BSONRegExp(j,P)}else if(y==BSON.BSON_DATA_SYMBOL){if((F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<=0||F>e.length-t||0!=e[t+F-1])throw new Error(\"bad string length in bson\");m[b]=new Symbol(e.toString(\"utf8\",t,t+F-1)),t+=F}else if(y==BSON.BSON_DATA_TIMESTAMP){w=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,S=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;m[b]=new Timestamp(w,S)}else if(y==BSON.BSON_DATA_MIN_KEY)m[b]=new MinKey;else if(y==BSON.BSON_DATA_MAX_KEY)m[b]=new MaxKey;else if(y==BSON.BSON_DATA_CODE){if((F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<=0||F>e.length-t||0!=e[t+F-1])throw new Error(\"bad string length in bson\");var L=e.toString(\"utf8\",t,t+F-1);if(o){if(i){var R=s?crc32(L):L;m[b]=isolateEvalWithHash(functionCache,R,L,m)}else m[b]=isolateEval(L)}else m[b]=new Code(L);t+=F}else if(y==BSON.BSON_DATA_CODE_W_SCOPE){var z=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(z<13)throw new Error(\"code_w_scope total size shorter minimum expected length\");if((F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<=0||F>e.length-t||0!=e[t+F-1])throw new Error(\"bad string length in bson\");L=e.toString(\"utf8\",t,t+F-1),k=t+=F;var q=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,U=deserializeObject(e,k,n,!1);if(t+=q,z<8+q+F)throw new Error(\"code_w_scope total size is to short, truncating scope\");if(z>8+q+F)throw new Error(\"code_w_scope total size is to long, clips outer document\");if(o){if(i){R=s?crc32(L):L;m[b]=isolateEvalWithHash(functionCache,R,L,m)}else m[b]=isolateEval(L);m[b].scope=U}else m[b]=new Code(L,U)}else{if(y!=BSON.BSON_DATA_DBPOINTER)throw new Error(\"Detected unknown BSON type \"+y.toString(16)+' for fieldname \"'+b+'\", are you using the latest BSON parser');var F;if((F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<=0||F>e.length-t||0!=e[t+F-1])throw new Error(\"bad string length in bson\");var H=e.toString(\"utf8\",t,t+F-1);t+=F;var V=new Buffer(12);e.copy(V,0,t,t+12);x=new ObjectID(V);t+=12;var $=H.split(\".\"),W=$.shift(),K=$.join(\".\");m[b]=new DBRef(K,x,W)}}if(h!=t-f){if(r)throw new Error(\"corrupt array bson\");throw new Error(\"corrupt object bson\")}return null!=m.$id&&(m=new DBRef(m.$ref,m.$id,m.$db)),m},isolateEvalWithHash=function(functionCache,hash,functionString,object){var value=null;return null==functionCache[hash]&&(eval(\"value = \"+functionString),functionCache[hash]=value),functionCache[hash].bind(object)},isolateEval=function(functionString){var value=null;return eval(\"value = \"+functionString),value},BSON={},functionCache=BSON.functionCache={};BSON.BSON_DATA_NUMBER=1,BSON.BSON_DATA_STRING=2,BSON.BSON_DATA_OBJECT=3,BSON.BSON_DATA_ARRAY=4,BSON.BSON_DATA_BINARY=5,BSON.BSON_DATA_UNDEFINED=6,BSON.BSON_DATA_OID=7,BSON.BSON_DATA_BOOLEAN=8,BSON.BSON_DATA_DATE=9,BSON.BSON_DATA_NULL=10,BSON.BSON_DATA_REGEXP=11,BSON.BSON_DATA_DBPOINTER=12,BSON.BSON_DATA_CODE=13,BSON.BSON_DATA_SYMBOL=14,BSON.BSON_DATA_CODE_W_SCOPE=15,BSON.BSON_DATA_INT=16,BSON.BSON_DATA_TIMESTAMP=17,BSON.BSON_DATA_LONG=18,BSON.BSON_DATA_DECIMAL128=19,BSON.BSON_DATA_MIN_KEY=255,BSON.BSON_DATA_MAX_KEY=127,BSON.BSON_BINARY_SUBTYPE_DEFAULT=0,BSON.BSON_BINARY_SUBTYPE_FUNCTION=1,BSON.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,BSON.BSON_BINARY_SUBTYPE_UUID=3,BSON.BSON_BINARY_SUBTYPE_MD5=4,BSON.BSON_BINARY_SUBTYPE_USER_DEFINED=128,BSON.BSON_INT32_MAX=2147483647,BSON.BSON_INT32_MIN=-2147483648,BSON.BSON_INT64_MAX=Math.pow(2,63)-1,BSON.BSON_INT64_MIN=-Math.pow(2,63),BSON.JS_INT_MAX=9007199254740992,BSON.JS_INT_MIN=-9007199254740992;var JS_INT_MAX_LONG=Long.fromNumber(9007199254740992),JS_INT_MIN_LONG=Long.fromNumber(-9007199254740992);module.exports=deserialize},function(e,t,n){\"use strict\";n(34).writeIEEE754,n(34).readIEEE754;var r=n(113),o=n(42),i=n(57),s=n(56),a=n(55),c=n(54),l=n(53),u=n(83),p=n(52),d=n(51),f=n(50),h=n(49),m=n(48),g=n(47),y=n(219),v=n(218),b=n(217),x=new Buffer(17825792),w=function(){};w.prototype.serialize=function(e,t){var n=\"boolean\"==typeof(t=t||{}).checkKeys&&t.checkKeys,r=\"boolean\"==typeof t.serializeFunctions&&t.serializeFunctions,o=\"boolean\"!=typeof t.ignoreUndefined||t.ignoreUndefined,i=v(x,e,n,0,0,r,o,[]),s=new Buffer(i);return x.copy(s,0,0,s.length),s},w.prototype.serializeWithBufferAndIndex=function(e,t,n){var r=\"boolean\"==typeof(n=n||{}).checkKeys&&n.checkKeys,o=\"boolean\"==typeof n.serializeFunctions&&n.serializeFunctions,i=\"boolean\"!=typeof n.ignoreUndefined||n.ignoreUndefined,s=\"number\"==typeof n.index?n.index:0,a=v(x,e,r,s||0,0,o,i);return x.copy(t,s,0,a),a-1},w.prototype.deserialize=function(e,t){return y(e,t)},w.prototype.calculateObjectSize=function(e,t){var n=\"boolean\"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,r=\"boolean\"!=typeof t.ignoreUndefined||t.ignoreUndefined;return b(e,n,r)},w.prototype.deserializeStream=function(e,t,n,r,o,i){i=null!=i?i:{};for(var s=t,a=0;a<n;a++){var c=e[s]|e[s+1]<<8|e[s+2]<<16|e[s+3]<<24;i.index=s,r[o+a]=this.deserialize(e,i),s+=c}return s},w.BSON_INT32_MAX=2147483647,w.BSON_INT32_MIN=-2147483648,w.BSON_INT64_MAX=Math.pow(2,63)-1,w.BSON_INT64_MIN=-Math.pow(2,63),w.JS_INT_MAX=9007199254740992,w.JS_INT_MIN=-9007199254740992;o.fromNumber(9007199254740992),o.fromNumber(-9007199254740992);w.BSON_DATA_NUMBER=1,w.BSON_DATA_STRING=2,w.BSON_DATA_OBJECT=3,w.BSON_DATA_ARRAY=4,w.BSON_DATA_BINARY=5,w.BSON_DATA_OID=7,w.BSON_DATA_BOOLEAN=8,w.BSON_DATA_DATE=9,w.BSON_DATA_NULL=10,w.BSON_DATA_REGEXP=11,w.BSON_DATA_CODE=13,w.BSON_DATA_SYMBOL=14,w.BSON_DATA_CODE_W_SCOPE=15,w.BSON_DATA_INT=16,w.BSON_DATA_TIMESTAMP=17,w.BSON_DATA_LONG=18,w.BSON_DATA_MIN_KEY=255,w.BSON_DATA_MAX_KEY=127,w.BSON_BINARY_SUBTYPE_DEFAULT=0,w.BSON_BINARY_SUBTYPE_FUNCTION=1,w.BSON_BINARY_SUBTYPE_BYTE_ARRAY=2,w.BSON_BINARY_SUBTYPE_UUID=3,w.BSON_BINARY_SUBTYPE_MD5=4,w.BSON_BINARY_SUBTYPE_USER_DEFINED=128,e.exports=w,e.exports.Code=p,e.exports.Map=r,e.exports.Symbol=l,e.exports.BSON=w,e.exports.DBRef=m,e.exports.Binary=g,e.exports.ObjectID=a,e.exports.Long=o,e.exports.Timestamp=s,e.exports.Double=i,e.exports.Int32=u,e.exports.MinKey=f,e.exports.MaxKey=h,e.exports.BSONRegExp=c,e.exports.Decimal128=d},function(e,t,n){\"use strict\";var r=n(3),o=n(202),i=n(138).connect;i.MongoError=r.MongoError,i.Admin=n(139),i.MongoClient=n(138),i.Db=n(74),i.Collection=n(46),i.Server=n(73),i.ReplSet=n(136),i.Mongos=n(137),i.ReadPreference=n(3).ReadPreference,i.GridStore=n(141),i.Chunk=n(140),i.Logger=r.Logger,i.Cursor=n(25),i.GridFSBucket=n(197),i.CoreServer=n(3).Server,i.CoreConnection=n(3).Connection,i.Binary=r.BSON.Binary,i.Code=r.BSON.Code,i.Map=r.BSON.Map,i.DBRef=r.BSON.DBRef,i.Double=r.BSON.Double,i.Int32=r.BSON.Int32,i.Long=r.BSON.Long,i.MinKey=r.BSON.MinKey,i.MaxKey=r.BSON.MaxKey,i.ObjectID=r.BSON.ObjectID,i.ObjectId=r.BSON.ObjectID,i.Symbol=r.BSON.Symbol,i.Timestamp=r.BSON.Timestamp,i.BSONRegExp=r.BSON.BSONRegExp,i.Decimal128=r.BSON.Decimal128,i.connect=i,i.instrument=function(e,t){return\"function\"==typeof e&&(t=e,e={}),new o(r,e,t)},e.exports=i},function(e,t,n){\"use strict\";var r=n(89),o=n(88),i=n(59),s=n(21).resolve,a=n(114),c=n(58);e.exports=function(e,t){if(!e)throw new TypeError(\"root path required\");if(\"string\"!=typeof e)throw new TypeError(\"root path must be a string\");var n=Object.create(t||null),l=!1!==n.fallthrough,u=!1!==n.redirect,p=n.setHeaders;if(p&&\"function\"!=typeof p)throw new TypeError(\"option setHeaders must be function\");n.maxage=n.maxage||n.maxAge||0,n.root=s(e);var d=u?function(e){if(this.hasTrailingSlash())this.error(404);else{var t=i.original(this.req);t.path=null,t.pathname=function(e){for(var t=0;t<e.length&&47===e.charCodeAt(t);t++);return t>1?\"/\"+e.substr(t):e}(t.pathname+\"/\");var n,s,a=r(c.format(t)),l=(n=\"Redirecting\",s='Redirecting to <a href=\"'+o(a)+'\">'+o(a)+\"</a>\",'<!DOCTYPE html>\\n<html lang=\"en\">\\n<head>\\n<meta charset=\"utf-8\">\\n<title>'+n+\"</title>\\n</head>\\n<body>\\n<pre>\"+s+\"</pre>\\n</body>\\n\");e.statusCode=301,e.setHeader(\"Content-Type\",\"text/html; charset=UTF-8\"),e.setHeader(\"Content-Length\",Buffer.byteLength(l)),e.setHeader(\"Content-Security-Policy\",\"default-src 'self'\"),e.setHeader(\"X-Content-Type-Options\",\"nosniff\"),e.setHeader(\"Location\",a),e.end(l)}}:function(){this.error(404)};return function(e,t,r){if(\"GET\"!==e.method&&\"HEAD\"!==e.method)return l?r():(t.statusCode=405,t.setHeader(\"Allow\",\"GET, HEAD\"),t.setHeader(\"Content-Length\",\"0\"),void t.end());var o=!l,s=i.original(e),c=i(e).pathname;\"/\"===c&&\"/\"!==s.pathname.substr(-1)&&(c=\"\");var u=a(e,c,n);u.on(\"directory\",d),p&&u.on(\"headers\",p),l&&u.on(\"file\",function(){o=!0}),u.on(\"error\",function(e){!o&&e.statusCode<500?r():r(e)}),u.pipe(t)}},e.exports.mime=a.mime},function(e,t,n){\"use strict\";e.exports=function(e,t){if(!e||!e.getHeader||!e.setHeader)throw new TypeError(\"res argument is required\");var n=e.getHeader(\"Vary\")||\"\",r=Array.isArray(n)?n.join(\", \"):String(n);(n=o(r,t))&&e.setHeader(\"Vary\",n)},e.exports.append=o;var r=/^[!#$%&'*+\\-.^_`|~0-9A-Za-z]+$/;function o(e,t){if(\"string\"!=typeof e)throw new TypeError(\"header argument is required\");if(!t)throw new TypeError(\"field argument is required\");for(var n=Array.isArray(t)?t:i(String(t)),o=0;o<n.length;o++)if(!r.test(n[o]))throw new TypeError(\"field argument contains an invalid header name\");if(\"*\"===e)return e;var s=e,a=i(e.toLowerCase());if(-1!==n.indexOf(\"*\")||-1!==a.indexOf(\"*\"))return\"*\";for(var c=0;c<n.length;c++){var l=n[c].toLowerCase();-1===a.indexOf(l)&&(a.push(l),s=s?s+\", \"+n[c]:n[c])}return s}function i(e){for(var t=0,n=[],r=0,o=0,i=e.length;o<i;o++)switch(e.charCodeAt(o)){case 32:r===t&&(r=t=o+1);break;case 44:n.push(e.substring(r,t)),r=t=o+1;break;default:t=o+1}return n.push(e.substring(r,t)),n}},function(e,t,n){\"use strict\";t.parse=function(e,t){if(\"string\"!=typeof e)throw new TypeError(\"argument str must be a string\");for(var n={},o=t||{},s=e.split(i),c=o.decode||r,l=0;l<s.length;l++){var u=s[l],p=u.indexOf(\"=\");if(!(p<0)){var d=u.substr(0,p).trim(),f=u.substr(++p,u.length).trim();'\"'==f[0]&&(f=f.slice(1,-1)),void 0==n[d]&&(n[d]=a(f,c))}}return n},t.serialize=function(e,t,n){var r=n||{},i=r.encode||o;if(\"function\"!=typeof i)throw new TypeError(\"option encode is invalid\");if(!s.test(e))throw new TypeError(\"argument name is invalid\");var a=i(t);if(a&&!s.test(a))throw new TypeError(\"argument val is invalid\");var c=e+\"=\"+a;if(null!=r.maxAge){var l=r.maxAge-0;if(isNaN(l))throw new Error(\"maxAge should be a Number\");c+=\"; Max-Age=\"+Math.floor(l)}if(r.domain){if(!s.test(r.domain))throw new TypeError(\"option domain is invalid\");c+=\"; Domain=\"+r.domain}if(r.path){if(!s.test(r.path))throw new TypeError(\"option path is invalid\");c+=\"; Path=\"+r.path}if(r.expires){if(\"function\"!=typeof r.expires.toUTCString)throw new TypeError(\"option expires is invalid\");c+=\"; Expires=\"+r.expires.toUTCString()}r.httpOnly&&(c+=\"; HttpOnly\");r.secure&&(c+=\"; Secure\");if(r.sameSite){var u=\"string\"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite;switch(u){case!0:c+=\"; SameSite=Strict\";break;case\"lax\":c+=\"; SameSite=Lax\";break;case\"strict\":c+=\"; SameSite=Strict\";break;default:throw new TypeError(\"option sameSite is invalid\")}}return c};var r=decodeURIComponent,o=encodeURIComponent,i=/; */,s=/^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;function a(e,t){try{return t(e)}catch(t){return e}}},function(e,t,n){var r=n(18);function o(e){return r.createHash(\"sha1\").update(e).digest(\"hex\")}t.sign=function(e,t){if(\"string\"!=typeof e)throw new TypeError(\"Cookie value must be provided as a string.\");if(\"string\"!=typeof t)throw new TypeError(\"Secret string must be provided.\");return e+\".\"+r.createHmac(\"sha256\",t).update(e).digest(\"base64\").replace(/\\=+$/,\"\")},t.unsign=function(e,n){if(\"string\"!=typeof e)throw new TypeError(\"Signed cookie string must be provided.\");if(\"string\"!=typeof n)throw new TypeError(\"Secret string must be provided.\");var r=e.slice(0,e.lastIndexOf(\".\"));return o(t.sign(r,n))==o(e)&&r}},function(e,t,n){\"use strict\";var r=n(115).Buffer,o=n(149),i=n(31)(\"express\"),s=n(89),a=n(88),c=n(86),l=n(35).isAbsolute,u=n(90),p=n(21),d=n(93),f=n(85),h=n(225).sign,m=n(35).normalizeType,g=n(35).normalizeTypes,y=n(35).setCharset,v=n(224),b=n(114),x=p.extname,w=b.mime,S=p.resolve,k=n(223),O=Object.create(c.ServerResponse.prototype);e.exports=O;var C=/;\\s*charset\\s*=/;function _(e,t,n,r){var o,i=!1;function s(){if(!i){i=!0;var e=new Error(\"Request aborted\");e.code=\"ECONNABORTED\",r(e)}}function a(e){i||(i=!0,r(e))}t.on(\"directory\",function(){if(!i){i=!0;var e=new Error(\"EISDIR, read\");e.code=\"EISDIR\",r(e)}}),t.on(\"end\",function(){i||(i=!0,r())}),t.on(\"error\",a),t.on(\"file\",function(){o=!1}),t.on(\"stream\",function(){o=!0}),u(e,function(e){return e&&\"ECONNRESET\"===e.code?s():e?a(e):void(i||setImmediate(function(){!1===o||i?i||(i=!0,r()):s()}))}),n.headers&&t.on(\"headers\",function(e){for(var t=n.headers,r=Object.keys(t),o=0;o<r.length;o++){var i=r[o];e.setHeader(i,t[i])}}),t.pipe(e)}function E(e,t,n,r){var o=t||n?JSON.stringify(e,t,n):JSON.stringify(e);return r&&(o=o.replace(/[<>&]/g,function(e){switch(e.charCodeAt(0)){case 60:return\"\\\\u003c\";case 62:return\"\\\\u003e\";case 38:return\"\\\\u0026\";default:return e}})),o}O.status=function(e){return this.statusCode=e,this},O.links=function(e){var t=this.get(\"Link\")||\"\";return t&&(t+=\", \"),this.set(\"Link\",t+Object.keys(e).map(function(t){return\"<\"+e[t]+'>; rel=\"'+t+'\"'}).join(\", \"))},O.send=function(e){var t,n,o=e,s=this.req,a=this.app;switch(2===arguments.length&&(\"number\"!=typeof arguments[0]&&\"number\"==typeof arguments[1]?(i(\"res.send(body, status): Use res.status(status).send(body) instead\"),this.statusCode=arguments[1]):(i(\"res.send(status, body): Use res.status(status).send(body) instead\"),this.statusCode=arguments[0],o=arguments[1])),\"number\"==typeof o&&1===arguments.length&&(this.get(\"Content-Type\")||this.type(\"txt\"),i(\"res.send(status): Use res.sendStatus(status) instead\"),this.statusCode=o,o=d[o]),typeof o){case\"string\":this.get(\"Content-Type\")||this.type(\"html\");break;case\"boolean\":case\"number\":case\"object\":if(null===o)o=\"\";else{if(!r.isBuffer(o))return this.json(o);this.get(\"Content-Type\")||this.type(\"bin\")}}\"string\"==typeof o&&(t=\"utf8\",\"string\"==typeof(n=this.get(\"Content-Type\"))&&this.set(\"Content-Type\",y(n,\"utf-8\")));var c,l,u=a.get(\"etag fn\"),p=!this.get(\"ETag\")&&\"function\"==typeof u;return void 0!==o&&(r.isBuffer(o)?c=o.length:!p&&o.length<1e3?c=r.byteLength(o,t):(o=r.from(o,t),t=void 0,c=o.length),this.set(\"Content-Length\",c)),p&&void 0!==c&&(l=u(o,t))&&this.set(\"ETag\",l),s.fresh&&(this.statusCode=304),204!==this.statusCode&&304!==this.statusCode||(this.removeHeader(\"Content-Type\"),this.removeHeader(\"Content-Length\"),this.removeHeader(\"Transfer-Encoding\"),o=\"\"),\"HEAD\"===s.method?this.end():this.end(o,t),this},O.json=function(e){var t=e;2===arguments.length&&(\"number\"==typeof arguments[1]?(i(\"res.json(obj, status): Use res.status(status).json(obj) instead\"),this.statusCode=arguments[1]):(i(\"res.json(status, obj): Use res.status(status).json(obj) instead\"),this.statusCode=arguments[0],t=arguments[1]));var n=this.app,r=n.get(\"json escape\"),o=E(t,n.get(\"json replacer\"),n.get(\"json spaces\"),r);return this.get(\"Content-Type\")||this.set(\"Content-Type\",\"application/json\"),this.send(o)},O.jsonp=function(e){var t=e;2===arguments.length&&(\"number\"==typeof arguments[1]?(i(\"res.jsonp(obj, status): Use res.status(status).json(obj) instead\"),this.statusCode=arguments[1]):(i(\"res.jsonp(status, obj): Use res.status(status).jsonp(obj) instead\"),this.statusCode=arguments[0],t=arguments[1]));var n=this.app,r=n.get(\"json escape\"),o=E(t,n.get(\"json replacer\"),n.get(\"json spaces\"),r),s=this.req.query[n.get(\"jsonp callback name\")];return this.get(\"Content-Type\")||(this.set(\"X-Content-Type-Options\",\"nosniff\"),this.set(\"Content-Type\",\"application/json\")),Array.isArray(s)&&(s=s[0]),\"string\"==typeof s&&0!==s.length&&(this.set(\"X-Content-Type-Options\",\"nosniff\"),this.set(\"Content-Type\",\"text/javascript\"),o=\"/**/ typeof \"+(s=s.replace(/[^\\[\\]\\w$.]/g,\"\"))+\" === 'function' && \"+s+\"(\"+(o=o.replace(/\\u2028/g,\"\\\\u2028\").replace(/\\u2029/g,\"\\\\u2029\"))+\");\"),this.send(o)},O.sendStatus=function(e){var t=d[e]||String(e);return this.statusCode=e,this.type(\"txt\"),this.send(t)},O.sendFile=function(e,t,n){var r=n,o=this.req,i=o.next,s=t||{};if(!e)throw new TypeError(\"path argument is required to res.sendFile\");if(\"function\"==typeof t&&(r=t,s={}),!s.root&&!l(e))throw new TypeError(\"path must be absolute or specify root to res.sendFile\");var a=encodeURI(e);_(this,b(o,a,s),s,function(e){return r?r(e):e&&\"EISDIR\"===e.code?i():void(e&&\"ECONNABORTED\"!==e.code&&\"write\"!==e.syscall&&i(e))})},O.sendfile=function(e,t,n){var r=n,o=this.req,i=o.next,s=t||{};\"function\"==typeof t&&(r=t,s={}),_(this,b(o,e,s),s,function(e){return r?r(e):e&&\"EISDIR\"===e.code?i():void(e&&\"ECONNABORT\"!==e.code&&\"write\"!==e.syscall&&i(e))})},O.sendfile=i.function(O.sendfile,\"res.sendfile: Use res.sendFile instead\"),O.download=function(e,t,n,r){var i=r,s=t,a=n||null;\"function\"==typeof t?(i=t,s=null,a=null):\"function\"==typeof n&&(i=n,a=null);var c={\"Content-Disposition\":o(s||e)};if(a&&a.headers)for(var l=Object.keys(a.headers),u=0;u<l.length;u++){var p=l[u];\"content-disposition\"!==p.toLowerCase()&&(c[p]=a.headers[p])}(a=Object.create(a)).headers=c;var d=S(e);return this.sendFile(d,a,i)},O.contentType=O.type=function(e){var t=-1===e.indexOf(\"/\")?w.lookup(e):e;return this.set(\"Content-Type\",t)},O.format=function(e){var t=this.req,n=t.next,r=e.default;r&&delete e.default;var o=Object.keys(e),i=o.length>0&&t.accepts(o);if(this.vary(\"Accept\"),i)this.set(\"Content-Type\",m(i).value),e[i](t,this,n);else if(r)r();else{var s=new Error(\"Not Acceptable\");s.status=s.statusCode=406,s.types=g(o).map(function(e){return e.value}),n(s)}return this},O.attachment=function(e){return e&&this.type(x(e)),this.set(\"Content-Disposition\",o(e)),this},O.append=function(e,t){var n=this.get(e),r=t;return n&&(r=Array.isArray(n)?n.concat(t):Array.isArray(t)?[n].concat(t):[n,t]),this.set(e,r)},O.set=O.header=function(e,t){if(2===arguments.length){var n=Array.isArray(t)?t.map(String):String(t);if(\"content-type\"===e.toLowerCase()){if(Array.isArray(n))throw new TypeError(\"Content-Type cannot be set to an Array\");if(!C.test(n)){var r=w.charsets.lookup(n.split(\";\")[0]);r&&(n+=\"; charset=\"+r.toLowerCase())}}this.setHeader(e,n)}else for(var o in e)this.set(o,e[o]);return this},O.get=function(e){return this.getHeader(e)},O.clearCookie=function(e,t){var n=f({expires:new Date(1),path:\"/\"},t);return this.cookie(e,\"\",n)},O.cookie=function(e,t,n){var r=f({},n),o=this.req.secret,i=r.signed;if(i&&!o)throw new Error('cookieParser(\"secret\") required for signed cookies');var s=\"object\"==typeof t?\"j:\"+JSON.stringify(t):String(t);return i&&(s=\"s:\"+h(s,o)),\"maxAge\"in r&&(r.expires=new Date(Date.now()+r.maxAge),r.maxAge/=1e3),null==r.path&&(r.path=\"/\"),this.append(\"Set-Cookie\",v.serialize(e,String(s),r)),this},O.location=function(e){var t=e;return\"back\"===e&&(t=this.req.get(\"Referrer\")||\"/\"),this.set(\"Location\",s(t))},O.redirect=function(e){var t,n=e,o=302;2===arguments.length&&(\"number\"==typeof arguments[0]?(o=arguments[0],n=arguments[1]):(i(\"res.redirect(url, status): Use res.redirect(status, url) instead\"),o=arguments[1])),n=this.location(n).get(\"Location\"),this.format({text:function(){t=d[o]+\". Redirecting to \"+n},html:function(){var e=a(n);t=\"<p>\"+d[o]+'. Redirecting to <a href=\"'+e+'\">'+e+\"</a></p>\"},default:function(){t=\"\"}}),this.statusCode=o,this.set(\"Content-Length\",r.byteLength(t)),\"HEAD\"===this.req.method?this.end():this.end(t)},O.vary=function(e){return!e||Array.isArray(e)&&!e.length?(i(\"res.vary(): Provide a field name\"),this):(k(this,e),this)},O.render=function(e,t,n){var r=this.req.app,o=n,i=t||{},s=this.req,a=this;\"function\"==typeof t&&(o=t,i={}),i._locals=a.locals,o=o||function(e,t){if(e)return s.next(e);a.send(t)},r.render(e,i,o)}},function(e,t,n){\"use strict\";e.exports=a,e.exports.preferredMediaTypes=a;var r=/^\\s*([^\\s\\/;]+)\\/([^;\\s]+)\\s*(?:;(.*))?$/;function o(e){for(var t=function(e){for(var t=e.split(\",\"),n=1,r=0;n<t.length;n++)p(t[r])%2==0?t[++r]=t[n]:t[r]+=\",\"+t[n];return t.length=r+1,t}(e),n=0,r=0;n<t.length;n++){var o=i(t[n].trim(),n);o&&(t[r++]=o)}return t.length=r,t}function i(e,t){var n=r.exec(e);if(!n)return null;var o=Object.create(null),i=1,s=n[2],a=n[1];if(n[3])for(var c=function(e){for(var t=e.split(\";\"),n=1,r=0;n<t.length;n++)p(t[r])%2==0?t[++r]=t[n]:t[r]+=\";\"+t[n];t.length=r+1;for(var n=0;n<t.length;n++)t[n]=t[n].trim();return t}(n[3]).map(d),l=0;l<c.length;l++){var u=c[l],f=u[0].toLowerCase(),h=u[1],m=h&&'\"'===h[0]&&'\"'===h[h.length-1]?h.substr(1,h.length-2):h;if(\"q\"===f){i=parseFloat(m);break}o[f]=m}return{type:a,subtype:s,params:o,q:i,i:t}}function s(e,t,n){var r=i(e),o=0;if(!r)return null;if(t.type.toLowerCase()==r.type.toLowerCase())o|=4;else if(\"*\"!=t.type)return null;if(t.subtype.toLowerCase()==r.subtype.toLowerCase())o|=2;else if(\"*\"!=t.subtype)return null;var s=Object.keys(t.params);if(s.length>0){if(!s.every(function(e){return\"*\"==t.params[e]||(t.params[e]||\"\").toLowerCase()==(r.params[e]||\"\").toLowerCase()}))return null;o|=1}return{i:n,o:t.i,q:t.q,s:o}}function a(e,t){var n=o(void 0===e?\"*/*\":e||\"\");if(!t)return n.filter(u).sort(c).map(l);var r=t.map(function(e,t){return function(e,t,n){for(var r={o:-1,q:0,s:0},o=0;o<t.length;o++){var i=s(e,t[o],n);i&&(r.s-i.s||r.q-i.q||r.o-i.o)<0&&(r=i)}return r}(e,n,t)});return r.filter(u).sort(c).map(function(e){return t[r.indexOf(e)]})}function c(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function l(e){return e.type+\"/\"+e.subtype}function u(e){return e.q>0}function p(e){for(var t=0,n=0;-1!==(n=e.indexOf('\"',n));)t++,n++;return t}function d(e){var t,n,r=e.indexOf(\"=\");return-1===r?t=e:(t=e.substr(0,r),n=e.substr(r+1)),[t,n]}},function(e,t,n){\"use strict\";e.exports=s,e.exports.preferredLanguages=s;var r=/^\\s*([^\\s\\-;]+)(?:-([^\\s;]+))?\\s*(?:;(.*))?$/;function o(e,t){var n=r.exec(e);if(!n)return null;var o=n[1],i=n[2],s=o;i&&(s+=\"-\"+i);var a=1;if(n[3]){var c=n[3].split(\";\");for(t=0;t<c.length;t++){var l=c[t].split(\"=\");\"q\"===l[0]&&(a=parseFloat(l[1]))}}return{prefix:o,suffix:i,q:a,i:t,full:s}}function i(e,t,n){var r=o(e);if(!r)return null;var i=0;if(t.full.toLowerCase()===r.full.toLowerCase())i|=4;else if(t.prefix.toLowerCase()===r.full.toLowerCase())i|=2;else if(t.full.toLowerCase()===r.prefix.toLowerCase())i|=1;else if(\"*\"!==t.full)return null;return{i:n,o:t.i,q:t.q,s:i}}function s(e,t){var n=function(e){for(var t=e.split(\",\"),n=0,r=0;n<t.length;n++){var i=o(t[n].trim(),n);i&&(t[r++]=i)}return t.length=r,t}(void 0===e?\"*\":e||\"\");if(!t)return n.filter(l).sort(a).map(c);var r=t.map(function(e,t){return function(e,t,n){for(var r={o:-1,q:0,s:0},o=0;o<t.length;o++){var s=i(e,t[o],n);s&&(r.s-s.s||r.q-s.q||r.o-s.o)<0&&(r=s)}return r}(e,n,t)});return r.filter(l).sort(a).map(function(e){return t[r.indexOf(e)]})}function a(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function c(e){return e.full}function l(e){return e.q>0}},function(e,t,n){\"use strict\";e.exports=s,e.exports.preferredEncodings=s;var r=/^\\s*([^\\s;]+)\\s*(?:;(.*))?$/;function o(e,t){var n=r.exec(e);if(!n)return null;var o=n[1],i=1;if(n[2]){var s=n[2].split(\";\");for(t=0;t<s.length;t++){var a=s[t].trim().split(\"=\");if(\"q\"===a[0]){i=parseFloat(a[1]);break}}}return{encoding:o,q:i,i:t}}function i(e,t,n){var r=0;if(t.encoding.toLowerCase()===e.toLowerCase())r|=1;else if(\"*\"!==t.encoding)return null;return{i:n,o:t.i,q:t.q,s:r}}function s(e,t){var n=function(e){for(var t=e.split(\",\"),n=!1,r=1,s=0,a=0;s<t.length;s++){var c=o(t[s].trim(),s);c&&(t[a++]=c,n=n||i(\"identity\",c),r=Math.min(r,c.q||1))}return n||(t[a++]={encoding:\"identity\",q:r,i:s}),t.length=a,t}(e||\"\");if(!t)return n.filter(l).sort(a).map(c);var r=t.map(function(e,t){return function(e,t,n){for(var r={o:-1,q:0,s:0},o=0;o<t.length;o++){var s=i(e,t[o],n);s&&(r.s-s.s||r.q-s.q||r.o-s.o)<0&&(r=s)}return r}(e,n,t)});return r.filter(l).sort(a).map(function(e){return t[r.indexOf(e)]})}function a(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function c(e){return e.encoding}function l(e){return e.q>0}},function(e,t,n){\"use strict\";e.exports=s,e.exports.preferredCharsets=s;var r=/^\\s*([^\\s;]+)\\s*(?:;(.*))?$/;function o(e,t){var n=r.exec(e);if(!n)return null;var o=n[1],i=1;if(n[2]){var s=n[2].split(\";\");for(t=0;t<s.length;t++){var a=s[t].trim().split(\"=\");if(\"q\"===a[0]){i=parseFloat(a[1]);break}}}return{charset:o,q:i,i:t}}function i(e,t,n){var r=0;if(t.charset.toLowerCase()===e.toLowerCase())r|=1;else if(\"*\"!==t.charset)return null;return{i:n,o:t.i,q:t.q,s:r}}function s(e,t){var n=function(e){for(var t=e.split(\",\"),n=0,r=0;n<t.length;n++){var i=o(t[n].trim(),n);i&&(t[r++]=i)}return t.length=r,t}(void 0===e?\"*\":e||\"\");if(!t)return n.filter(l).sort(a).map(c);var r=t.map(function(e,t){return function(e,t,n){for(var r={o:-1,q:0,s:0},o=0;o<t.length;o++){var s=i(e,t[o],n);s&&(r.s-s.s||r.q-s.q||r.o-s.o)<0&&(r=s)}return r}(e,n,t)});return r.filter(l).sort(a).map(function(e){return t[r.indexOf(e)]})}function a(e,t){return t.q-e.q||t.s-e.s||e.o-t.o||e.i-t.i||0}function c(e){return e.charset}function l(e){return e.q>0}},function(e,t,n){\"use strict\";var r=Object.create(null);function o(e){if(!(this instanceof o))return new o(e);this.request=e}function i(e){var t=r[e];if(void 0!==t)return t;switch(e){case\"charset\":t=n(230);break;case\"encoding\":t=n(229);break;case\"language\":t=n(228);break;case\"mediaType\":t=n(227);break;default:throw new Error(\"Cannot find module '\"+e+\"'\")}return r[e]=t,t}e.exports=o,e.exports.Negotiator=o,o.prototype.charset=function(e){var t=this.charsets(e);return t&&t[0]},o.prototype.charsets=function(e){return(0,i(\"charset\").preferredCharsets)(this.request.headers[\"accept-charset\"],e)},o.prototype.encoding=function(e){var t=this.encodings(e);return t&&t[0]},o.prototype.encodings=function(e){return(0,i(\"encoding\").preferredEncodings)(this.request.headers[\"accept-encoding\"],e)},o.prototype.language=function(e){var t=this.languages(e);return t&&t[0]},o.prototype.languages=function(e){return(0,i(\"language\").preferredLanguages)(this.request.headers[\"accept-language\"],e)},o.prototype.mediaType=function(e){var t=this.mediaTypes(e);return t&&t[0]},o.prototype.mediaTypes=function(e){return(0,i(\"mediaType\").preferredMediaTypes)(this.request.headers.accept,e)},o.prototype.preferredCharset=o.prototype.charset,o.prototype.preferredCharsets=o.prototype.charsets,o.prototype.preferredEncoding=o.prototype.encoding,o.prototype.preferredEncodings=o.prototype.encodings,o.prototype.preferredLanguage=o.prototype.language,o.prototype.preferredLanguages=o.prototype.languages,o.prototype.preferredMediaType=o.prototype.mediaType,o.prototype.preferredMediaTypes=o.prototype.mediaTypes},function(e,t,n){\"use strict\";var r=n(231),o=n(156);function i(e){if(!(this instanceof i))return new i(e);this.headers=e.headers,this.negotiator=new r(e)}function s(e){return-1===e.indexOf(\"/\")?o.lookup(e):e}function a(e){return\"string\"==typeof e}e.exports=i,i.prototype.type=i.prototype.types=function(e){var t=e;if(t&&!Array.isArray(t)){t=new Array(arguments.length);for(var n=0;n<t.length;n++)t[n]=arguments[n]}if(!t||0===t.length)return this.negotiator.mediaTypes();if(!this.headers.accept)return t[0];var r=t.map(s),o=this.negotiator.mediaTypes(r.filter(a))[0];return!!o&&t[r.indexOf(o)]},i.prototype.encoding=i.prototype.encodings=function(e){var t=e;if(t&&!Array.isArray(t)){t=new Array(arguments.length);for(var n=0;n<t.length;n++)t[n]=arguments[n]}return t&&0!==t.length?this.negotiator.encodings(t)[0]||!1:this.negotiator.encodings()},i.prototype.charset=i.prototype.charsets=function(e){var t=e;if(t&&!Array.isArray(t)){t=new Array(arguments.length);for(var n=0;n<t.length;n++)t[n]=arguments[n]}return t&&0!==t.length?this.negotiator.charsets(t)[0]||!1:this.negotiator.charsets()},i.prototype.lang=i.prototype.langs=i.prototype.language=i.prototype.languages=function(e){var t=e;if(t&&!Array.isArray(t)){t=new Array(arguments.length);for(var n=0;n<t.length;n++)t[n]=arguments[n]}return t&&0!==t.length?this.negotiator.languages(t)[0]||!1:this.negotiator.languages()}},function(e,t,n){\"use strict\";var r=n(232),o=n(31)(\"express\"),i=n(92).isIP,s=n(60),a=n(86),c=n(147),l=n(146),u=n(59),p=n(145),d=Object.create(a.IncomingMessage.prototype);function f(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:n})}e.exports=d,d.get=d.header=function(e){if(!e)throw new TypeError(\"name argument is required to req.get\");if(\"string\"!=typeof e)throw new TypeError(\"name must be a string to req.get\");var t=e.toLowerCase();switch(t){case\"referer\":case\"referrer\":return this.headers.referrer||this.headers.referer;default:return this.headers[t]}},d.accepts=function(){var e=r(this);return e.types.apply(e,arguments)},d.acceptsEncodings=function(){var e=r(this);return e.encodings.apply(e,arguments)},d.acceptsEncoding=o.function(d.acceptsEncodings,\"req.acceptsEncoding: Use acceptsEncodings instead\"),d.acceptsCharsets=function(){var e=r(this);return e.charsets.apply(e,arguments)},d.acceptsCharset=o.function(d.acceptsCharsets,\"req.acceptsCharset: Use acceptsCharsets instead\"),d.acceptsLanguages=function(){var e=r(this);return e.languages.apply(e,arguments)},d.acceptsLanguage=o.function(d.acceptsLanguages,\"req.acceptsLanguage: Use acceptsLanguages instead\"),d.range=function(e,t){var n=this.get(\"Range\");if(n)return l(e,n,t)},d.param=function(e,t){var n=this.params||{},r=this.body||{},i=this.query||{},s=1===arguments.length?\"name\":\"name, default\";return o(\"req.param(\"+s+\"): Use req.params, req.body, or req.query instead\"),null!=n[e]&&n.hasOwnProperty(e)?n[e]:null!=r[e]?r[e]:null!=i[e]?i[e]:t},d.is=function(e){var t=e;if(!Array.isArray(e)){t=new Array(arguments.length);for(var n=0;n<t.length;n++)t[n]=arguments[n]}return s(this,t)},f(d,\"protocol\",function(){var e=this.connection.encrypted?\"https\":\"http\";if(!this.app.get(\"trust proxy fn\")(this.connection.remoteAddress,0))return e;var t=this.get(\"X-Forwarded-Proto\")||e,n=t.indexOf(\",\");return-1!==n?t.substring(0,n).trim():t.trim()}),f(d,\"secure\",function(){return\"https\"===this.protocol}),f(d,\"ip\",function(){var e=this.app.get(\"trust proxy fn\");return p(this,e)}),f(d,\"ips\",function(){var e=this.app.get(\"trust proxy fn\"),t=p.all(this,e);return t.reverse().pop(),t}),f(d,\"subdomains\",function(){var e=this.hostname;if(!e)return[];var t=this.app.get(\"subdomain offset\"),n=i(e)?[e]:e.split(\".\").reverse();return n.slice(t)}),f(d,\"path\",function(){return u(this).pathname}),f(d,\"hostname\",function(){var e=this.app.get(\"trust proxy fn\"),t=this.get(\"X-Forwarded-Host\");if(t&&e(this.connection.remoteAddress,0)||(t=this.get(\"Host\")),t){var n=\"[\"===t[0]?t.indexOf(\"]\")+1:0,r=t.indexOf(\":\",n);return-1!==r?t.substring(0,r):t}}),f(d,\"host\",o.function(function(){return this.hostname},\"req.host: Use req.hostname instead\")),f(d,\"fresh\",function(){var e=this.method,t=this.res,n=t.statusCode;return(\"GET\"===e||\"HEAD\"===e)&&((n>=200&&n<300||304===n)&&c(this.headers,{etag:t.get(\"ETag\"),\"last-modified\":t.get(\"Last-Modified\")}))}),f(d,\"stale\",function(){return!this.fresh}),f(d,\"xhr\",function(){return\"xmlhttprequest\"===(this.get(\"X-Requested-With\")||\"\").toLowerCase()})},function(e,t,n){(function(e){(function(){var t,n,r,o,i,s,a;n={},void 0!==e&&null!==e&&e.exports?e.exports=n:this.ipaddr=n,a=function(e,t,n,r){var o,i;if(e.length!==t.length)throw new Error(\"ipaddr: cannot match CIDR for objects with different lengths\");for(o=0;r>0;){if((i=n-r)<0&&(i=0),e[o]>>i!=t[o]>>i)return!1;r-=n,o+=1}return!0},n.subnetMatch=function(e,t,n){var r,o,i,s,a;for(i in null==n&&(n=\"unicast\"),t)for(!(s=t[i])[0]||s[0]instanceof Array||(s=[s]),r=0,o=s.length;r<o;r++)if(a=s[r],e.kind()===a[0].kind()&&e.match.apply(e,a))return i;return n},n.IPv4=function(){function e(e){var t,n,r;if(4!==e.length)throw new Error(\"ipaddr: ipv4 octet count should be 4\");for(t=0,n=e.length;t<n;t++)if(!(0<=(r=e[t])&&r<=255))throw new Error(\"ipaddr: ipv4 octet should fit in 8 bits\");this.octets=e}return e.prototype.kind=function(){return\"ipv4\"},e.prototype.toString=function(){return this.octets.join(\".\")},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.match=function(e,t){var n;if(void 0===t&&(e=(n=e)[0],t=n[1]),\"ipv4\"!==e.kind())throw new Error(\"ipaddr: cannot match ipv4 address with non-ipv4 one\");return a(this.octets,e.octets,8,t)},e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.range=function(){return n.subnetMatch(this,this.SpecialRanges)},e.prototype.toIPv4MappedAddress=function(){return n.IPv6.parse(\"::ffff:\"+this.toString())},e.prototype.prefixLengthFromSubnetMask=function(){var e,t,n,r,o,i,s;for(s={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},e=0,o=!1,t=n=3;n>=0;t=n+=-1){if(!((r=this.octets[t])in s))return null;if(i=s[r],o&&0!==i)return null;8!==i&&(o=!0),e+=i}return 32-e},e}(),r=\"(0?\\\\d+|0x[a-f0-9]+)\",o={fourOctet:new RegExp(\"^\"+r+\"\\\\.\"+r+\"\\\\.\"+r+\"\\\\.\"+r+\"$\",\"i\"),longValue:new RegExp(\"^\"+r+\"$\",\"i\")},n.IPv4.parser=function(e){var t,n,r,i,s;if(n=function(e){return\"0\"===e[0]&&\"x\"!==e[1]?parseInt(e,8):parseInt(e)},t=e.match(o.fourOctet))return function(){var e,o,i,s;for(s=[],e=0,o=(i=t.slice(1,6)).length;e<o;e++)r=i[e],s.push(n(r));return s}();if(t=e.match(o.longValue)){if((s=n(t[1]))>4294967295||s<0)throw new Error(\"ipaddr: address outside defined range\");return function(){var e,t;for(t=[],i=e=0;e<=24;i=e+=8)t.push(s>>i&255);return t}().reverse()}return null},n.IPv6=function(){function e(e,t){var n,r,o,i,s,a;if(16===e.length)for(this.parts=[],n=r=0;r<=14;n=r+=2)this.parts.push(e[n]<<8|e[n+1]);else{if(8!==e.length)throw new Error(\"ipaddr: ipv6 part count should be 8 or 16\");this.parts=e}for(o=0,i=(a=this.parts).length;o<i;o++)if(!(0<=(s=a[o])&&s<=65535))throw new Error(\"ipaddr: ipv6 part should fit in 16 bits\");t&&(this.zoneId=t)}return e.prototype.kind=function(){return\"ipv6\"},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,\"::\")},e.prototype.toByteArray=function(){var e,t,n,r,o;for(e=[],t=0,n=(o=this.parts).length;t<n;t++)r=o[t],e.push(r>>8),e.push(255&r);return e},e.prototype.toNormalizedString=function(){var e,t,n;return e=function(){var e,n,r,o;for(o=[],e=0,n=(r=this.parts).length;e<n;e++)t=r[e],o.push(t.toString(16));return o}.call(this).join(\":\"),n=\"\",this.zoneId&&(n=\"%\"+this.zoneId),e+n},e.prototype.match=function(e,t){var n;if(void 0===t&&(e=(n=e)[0],t=n[1]),\"ipv6\"!==e.kind())throw new Error(\"ipaddr: cannot match ipv6 address with non-ipv6 one\");return a(this.parts,e.parts,16,t)},e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],\"6to4\":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.range=function(){return n.subnetMatch(this,this.SpecialRanges)},e.prototype.isIPv4MappedAddress=function(){return\"ipv4Mapped\"===this.range()},e.prototype.toIPv4Address=function(){var e,t,r;if(!this.isIPv4MappedAddress())throw new Error(\"ipaddr: trying to convert a generic ipv6 address to ipv4\");return e=(r=this.parts.slice(-2))[0],t=r[1],new n.IPv4([e>>8,255&e,t>>8,255&t])},e.prototype.prefixLengthFromSubnetMask=function(){var e,t,n,r,o,i,s;for(s={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},e=0,o=!1,t=n=7;n>=0;t=n+=-1){if(!((r=this.parts[t])in s))return null;if(i=s[r],o&&0!==i)return null;16!==i&&(o=!0),e+=i}return 128-e},e}(),i=\"(?:[0-9a-f]+::?)+\",s={zoneIndex:new RegExp(\"%[0-9a-z]{1,}\",\"i\"),native:new RegExp(\"^(::)?(\"+i+\")?([0-9a-f]+)?(::)?(%[0-9a-z]{1,})?$\",\"i\"),transitional:new RegExp(\"^((?:\"+i+\")|(?:::)(?:\"+i+\")?)\"+r+\"\\\\.\"+r+\"\\\\.\"+r+\"\\\\.\"+r+\"(%[0-9a-z]{1,})?$\",\"i\")},t=function(e,t){var n,r,o,i,a,c;if(e.indexOf(\"::\")!==e.lastIndexOf(\"::\"))return null;for((c=(e.match(s.zoneIndex)||[])[0])&&(c=c.substring(1),e=e.replace(/%.+$/,\"\")),n=0,r=-1;(r=e.indexOf(\":\",r+1))>=0;)n++;if(\"::\"===e.substr(0,2)&&n--,\"::\"===e.substr(-2,2)&&n--,n>t)return null;for(a=t-n,i=\":\";a--;)i+=\"0:\";return\":\"===(e=e.replace(\"::\",i))[0]&&(e=e.slice(1)),\":\"===e[e.length-1]&&(e=e.slice(0,-1)),{parts:t=function(){var t,n,r,i;for(i=[],t=0,n=(r=e.split(\":\")).length;t<n;t++)o=r[t],i.push(parseInt(o,16));return i}(),zoneId:c}},n.IPv6.parser=function(e){var n,r,o,i,a,c,l;if(s.native.test(e))return t(e,8);if((i=e.match(s.transitional))&&(l=i[6]||\"\",(n=t(i[1].slice(0,-1)+l,6)).parts)){for(r=0,o=(c=[parseInt(i[2]),parseInt(i[3]),parseInt(i[4]),parseInt(i[5])]).length;r<o;r++)if(!(0<=(a=c[r])&&a<=255))return null;return n.parts.push(c[0]<<8|c[1]),n.parts.push(c[2]<<8|c[3]),{parts:n.parts,zoneId:n.zoneId}}return null},n.IPv4.isIPv4=n.IPv6.isIPv6=function(e){return null!==this.parser(e)},n.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(e){return e,!1}},n.IPv4.isValidFourPartDecimal=function(e){return!(!n.IPv4.isValid(e)||!e.match(/^\\d+(\\.\\d+){3}$/))},n.IPv6.isValid=function(e){var t;if(\"string\"==typeof e&&-1===e.indexOf(\":\"))return!1;try{return new this((t=this.parser(e)).parts,t.zoneId),!0}catch(e){return e,!1}},n.IPv4.parse=function(e){var t;if(null===(t=this.parser(e)))throw new Error(\"ipaddr: string is not formatted like ip address\");return new this(t)},n.IPv6.parse=function(e){var t;if(null===(t=this.parser(e)).parts)throw new Error(\"ipaddr: string is not formatted like ip address\");return new this(t.parts,t.zoneId)},n.IPv4.parseCIDR=function(e){var t,n;if((n=e.match(/^(.+)\\/(\\d+)$/))&&(t=parseInt(n[2]))>=0&&t<=32)return[this.parse(n[1]),t];throw new Error(\"ipaddr: string is not formatted like an IPv4 CIDR range\")},n.IPv4.subnetMaskFromPrefixLength=function(e){var t,n,r;if((e=parseInt(e))<0||e>32)throw new Error(\"ipaddr: invalid IPv4 prefix length\");for(r=[0,0,0,0],n=0,t=Math.floor(e/8);n<t;)r[n]=255,n++;return t<4&&(r[t]=Math.pow(2,e%8)-1<<8-e%8),new this(r)},n.IPv4.broadcastAddressFromCIDR=function(e){var t,n,r,o,i;try{for(r=(t=this.parseCIDR(e))[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),o=[],n=0;n<4;)o.push(parseInt(r[n],10)|255^parseInt(i[n],10)),n++;return new this(o)}catch(e){throw e,new Error(\"ipaddr: the address does not have IPv4 CIDR format\")}},n.IPv4.networkAddressFromCIDR=function(e){var t,n,r,o,i;try{for(r=(t=this.parseCIDR(e))[0].toByteArray(),i=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),o=[],n=0;n<4;)o.push(parseInt(r[n],10)&parseInt(i[n],10)),n++;return new this(o)}catch(e){throw e,new Error(\"ipaddr: the address does not have IPv4 CIDR format\")}},n.IPv6.parseCIDR=function(e){var t,n;if((n=e.match(/^(.+)\\/(\\d+)$/))&&(t=parseInt(n[2]))>=0&&t<=128)return[this.parse(n[1]),t];throw new Error(\"ipaddr: string is not formatted like an IPv6 CIDR range\")},n.isValid=function(e){return n.IPv6.isValid(e)||n.IPv4.isValid(e)},n.parse=function(e){if(n.IPv6.isValid(e))return n.IPv6.parse(e);if(n.IPv4.isValid(e))return n.IPv4.parse(e);throw new Error(\"ipaddr: the address has neither IPv6 nor IPv4 format\")},n.parseCIDR=function(e){try{return n.IPv6.parseCIDR(e)}catch(t){t;try{return n.IPv4.parseCIDR(e)}catch(e){throw e,new Error(\"ipaddr: the address has neither IPv6 nor IPv4 CIDR format\")}}},n.fromByteArray=function(e){var t;if(4===(t=e.length))return new n.IPv4(e);if(16===t)return new n.IPv6(e);throw new Error(\"ipaddr: the binary input is neither an IPv6 nor IPv4 address\")},n.process=function(e){var t;return\"ipv6\"===(t=this.parse(e)).kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t}}).call(this)}).call(this,n(144)(e))},function(e,t,n){\"use strict\";e.exports=function(e){if(!e)throw new TypeError(\"argument req is required\");var t=function(e){for(var t=e.length,n=[],r=e.length,o=e.length-1;o>=0;o--)switch(e.charCodeAt(o)){case 32:r===t&&(r=t=o);break;case 44:r!==t&&n.push(e.substring(r,t)),r=t=o;break;default:r=o}r!==t&&n.push(e.substring(r,t));return n}(e.headers[\"x-forwarded-for\"]||\"\");return[e.connection.remoteAddress].concat(t)}},function(e){e.exports={\"application/andrew-inset\":[\"ez\"],\"application/applixware\":[\"aw\"],\"application/atom+xml\":[\"atom\"],\"application/atomcat+xml\":[\"atomcat\"],\"application/atomsvc+xml\":[\"atomsvc\"],\"application/bdoc\":[\"bdoc\"],\"application/ccxml+xml\":[\"ccxml\"],\"application/cdmi-capability\":[\"cdmia\"],\"application/cdmi-container\":[\"cdmic\"],\"application/cdmi-domain\":[\"cdmid\"],\"application/cdmi-object\":[\"cdmio\"],\"application/cdmi-queue\":[\"cdmiq\"],\"application/cu-seeme\":[\"cu\"],\"application/dash+xml\":[\"mpd\"],\"application/davmount+xml\":[\"davmount\"],\"application/docbook+xml\":[\"dbk\"],\"application/dssc+der\":[\"dssc\"],\"application/dssc+xml\":[\"xdssc\"],\"application/ecmascript\":[\"ecma\"],\"application/emma+xml\":[\"emma\"],\"application/epub+zip\":[\"epub\"],\"application/exi\":[\"exi\"],\"application/font-tdpfr\":[\"pfr\"],\"application/font-woff\":[\"woff\"],\"application/font-woff2\":[\"woff2\"],\"application/geo+json\":[\"geojson\"],\"application/gml+xml\":[\"gml\"],\"application/gpx+xml\":[\"gpx\"],\"application/gxf\":[\"gxf\"],\"application/gzip\":[\"gz\"],\"application/hyperstudio\":[\"stk\"],\"application/inkml+xml\":[\"ink\",\"inkml\"],\"application/ipfix\":[\"ipfix\"],\"application/java-archive\":[\"jar\",\"war\",\"ear\"],\"application/java-serialized-object\":[\"ser\"],\"application/java-vm\":[\"class\"],\"application/javascript\":[\"js\",\"mjs\"],\"application/json\":[\"json\",\"map\"],\"application/json5\":[\"json5\"],\"application/jsonml+json\":[\"jsonml\"],\"application/ld+json\":[\"jsonld\"],\"application/lost+xml\":[\"lostxml\"],\"application/mac-binhex40\":[\"hqx\"],\"application/mac-compactpro\":[\"cpt\"],\"application/mads+xml\":[\"mads\"],\"application/manifest+json\":[\"webmanifest\"],\"application/marc\":[\"mrc\"],\"application/marcxml+xml\":[\"mrcx\"],\"application/mathematica\":[\"ma\",\"nb\",\"mb\"],\"application/mathml+xml\":[\"mathml\"],\"application/mbox\":[\"mbox\"],\"application/mediaservercontrol+xml\":[\"mscml\"],\"application/metalink+xml\":[\"metalink\"],\"application/metalink4+xml\":[\"meta4\"],\"application/mets+xml\":[\"mets\"],\"application/mods+xml\":[\"mods\"],\"application/mp21\":[\"m21\",\"mp21\"],\"application/mp4\":[\"mp4s\",\"m4p\"],\"application/msword\":[\"doc\",\"dot\"],\"application/mxf\":[\"mxf\"],\"application/octet-stream\":[\"bin\",\"dms\",\"lrf\",\"mar\",\"so\",\"dist\",\"distz\",\"pkg\",\"bpk\",\"dump\",\"elc\",\"deploy\",\"exe\",\"dll\",\"deb\",\"dmg\",\"iso\",\"img\",\"msi\",\"msp\",\"msm\",\"buffer\"],\"application/oda\":[\"oda\"],\"application/oebps-package+xml\":[\"opf\"],\"application/ogg\":[\"ogx\"],\"application/omdoc+xml\":[\"omdoc\"],\"application/onenote\":[\"onetoc\",\"onetoc2\",\"onetmp\",\"onepkg\"],\"application/oxps\":[\"oxps\"],\"application/patch-ops-error+xml\":[\"xer\"],\"application/pdf\":[\"pdf\"],\"application/pgp-encrypted\":[\"pgp\"],\"application/pgp-signature\":[\"asc\",\"sig\"],\"application/pics-rules\":[\"prf\"],\"application/pkcs10\":[\"p10\"],\"application/pkcs7-mime\":[\"p7m\",\"p7c\"],\"application/pkcs7-signature\":[\"p7s\"],\"application/pkcs8\":[\"p8\"],\"application/pkix-attr-cert\":[\"ac\"],\"application/pkix-cert\":[\"cer\"],\"application/pkix-crl\":[\"crl\"],\"application/pkix-pkipath\":[\"pkipath\"],\"application/pkixcmp\":[\"pki\"],\"application/pls+xml\":[\"pls\"],\"application/postscript\":[\"ai\",\"eps\",\"ps\"],\"application/prs.cww\":[\"cww\"],\"application/pskc+xml\":[\"pskcxml\"],\"application/rdf+xml\":[\"rdf\"],\"application/reginfo+xml\":[\"rif\"],\"application/relax-ng-compact-syntax\":[\"rnc\"],\"application/resource-lists+xml\":[\"rl\"],\"application/resource-lists-diff+xml\":[\"rld\"],\"application/rls-services+xml\":[\"rs\"],\"application/rpki-ghostbusters\":[\"gbr\"],\"application/rpki-manifest\":[\"mft\"],\"application/rpki-roa\":[\"roa\"],\"application/rsd+xml\":[\"rsd\"],\"application/rss+xml\":[\"rss\"],\"application/rtf\":[\"rtf\"],\"application/sbml+xml\":[\"sbml\"],\"application/scvp-cv-request\":[\"scq\"],\"application/scvp-cv-response\":[\"scs\"],\"application/scvp-vp-request\":[\"spq\"],\"application/scvp-vp-response\":[\"spp\"],\"application/sdp\":[\"sdp\"],\"application/set-payment-initiation\":[\"setpay\"],\"application/set-registration-initiation\":[\"setreg\"],\"application/shf+xml\":[\"shf\"],\"application/smil+xml\":[\"smi\",\"smil\"],\"application/sparql-query\":[\"rq\"],\"application/sparql-results+xml\":[\"srx\"],\"application/srgs\":[\"gram\"],\"application/srgs+xml\":[\"grxml\"],\"application/sru+xml\":[\"sru\"],\"application/ssdl+xml\":[\"ssdl\"],\"application/ssml+xml\":[\"ssml\"],\"application/tei+xml\":[\"tei\",\"teicorpus\"],\"application/thraud+xml\":[\"tfi\"],\"application/timestamped-data\":[\"tsd\"],\"application/vnd.3gpp.pic-bw-large\":[\"plb\"],\"application/vnd.3gpp.pic-bw-small\":[\"psb\"],\"application/vnd.3gpp.pic-bw-var\":[\"pvb\"],\"application/vnd.3gpp2.tcap\":[\"tcap\"],\"application/vnd.3m.post-it-notes\":[\"pwn\"],\"application/vnd.accpac.simply.aso\":[\"aso\"],\"application/vnd.accpac.simply.imp\":[\"imp\"],\"application/vnd.acucobol\":[\"acu\"],\"application/vnd.acucorp\":[\"atc\",\"acutc\"],\"application/vnd.adobe.air-application-installer-package+zip\":[\"air\"],\"application/vnd.adobe.formscentral.fcdt\":[\"fcdt\"],\"application/vnd.adobe.fxp\":[\"fxp\",\"fxpl\"],\"application/vnd.adobe.xdp+xml\":[\"xdp\"],\"application/vnd.adobe.xfdf\":[\"xfdf\"],\"application/vnd.ahead.space\":[\"ahead\"],\"application/vnd.airzip.filesecure.azf\":[\"azf\"],\"application/vnd.airzip.filesecure.azs\":[\"azs\"],\"application/vnd.amazon.ebook\":[\"azw\"],\"application/vnd.americandynamics.acc\":[\"acc\"],\"application/vnd.amiga.ami\":[\"ami\"],\"application/vnd.android.package-archive\":[\"apk\"],\"application/vnd.anser-web-certificate-issue-initiation\":[\"cii\"],\"application/vnd.anser-web-funds-transfer-initiation\":[\"fti\"],\"application/vnd.antix.game-component\":[\"atx\"],\"application/vnd.apple.installer+xml\":[\"mpkg\"],\"application/vnd.apple.mpegurl\":[\"m3u8\"],\"application/vnd.apple.pkpass\":[\"pkpass\"],\"application/vnd.aristanetworks.swi\":[\"swi\"],\"application/vnd.astraea-software.iota\":[\"iota\"],\"application/vnd.audiograph\":[\"aep\"],\"application/vnd.blueice.multipass\":[\"mpm\"],\"application/vnd.bmi\":[\"bmi\"],\"application/vnd.businessobjects\":[\"rep\"],\"application/vnd.chemdraw+xml\":[\"cdxml\"],\"application/vnd.chipnuts.karaoke-mmd\":[\"mmd\"],\"application/vnd.cinderella\":[\"cdy\"],\"application/vnd.claymore\":[\"cla\"],\"application/vnd.cloanto.rp9\":[\"rp9\"],\"application/vnd.clonk.c4group\":[\"c4g\",\"c4d\",\"c4f\",\"c4p\",\"c4u\"],\"application/vnd.cluetrust.cartomobile-config\":[\"c11amc\"],\"application/vnd.cluetrust.cartomobile-config-pkg\":[\"c11amz\"],\"application/vnd.commonspace\":[\"csp\"],\"application/vnd.contact.cmsg\":[\"cdbcmsg\"],\"application/vnd.cosmocaller\":[\"cmc\"],\"application/vnd.crick.clicker\":[\"clkx\"],\"application/vnd.crick.clicker.keyboard\":[\"clkk\"],\"application/vnd.crick.clicker.palette\":[\"clkp\"],\"application/vnd.crick.clicker.template\":[\"clkt\"],\"application/vnd.crick.clicker.wordbank\":[\"clkw\"],\"application/vnd.criticaltools.wbs+xml\":[\"wbs\"],\"application/vnd.ctc-posml\":[\"pml\"],\"application/vnd.cups-ppd\":[\"ppd\"],\"application/vnd.curl.car\":[\"car\"],\"application/vnd.curl.pcurl\":[\"pcurl\"],\"application/vnd.dart\":[\"dart\"],\"application/vnd.data-vision.rdz\":[\"rdz\"],\"application/vnd.dece.data\":[\"uvf\",\"uvvf\",\"uvd\",\"uvvd\"],\"application/vnd.dece.ttml+xml\":[\"uvt\",\"uvvt\"],\"application/vnd.dece.unspecified\":[\"uvx\",\"uvvx\"],\"application/vnd.dece.zip\":[\"uvz\",\"uvvz\"],\"application/vnd.denovo.fcselayout-link\":[\"fe_launch\"],\"application/vnd.dna\":[\"dna\"],\"application/vnd.dolby.mlp\":[\"mlp\"],\"application/vnd.dpgraph\":[\"dpg\"],\"application/vnd.dreamfactory\":[\"dfac\"],\"application/vnd.ds-keypoint\":[\"kpxx\"],\"application/vnd.dvb.ait\":[\"ait\"],\"application/vnd.dvb.service\":[\"svc\"],\"application/vnd.dynageo\":[\"geo\"],\"application/vnd.ecowin.chart\":[\"mag\"],\"application/vnd.enliven\":[\"nml\"],\"application/vnd.epson.esf\":[\"esf\"],\"application/vnd.epson.msf\":[\"msf\"],\"application/vnd.epson.quickanime\":[\"qam\"],\"application/vnd.epson.salt\":[\"slt\"],\"application/vnd.epson.ssf\":[\"ssf\"],\"application/vnd.eszigno3+xml\":[\"es3\",\"et3\"],\"application/vnd.ezpix-album\":[\"ez2\"],\"application/vnd.ezpix-package\":[\"ez3\"],\"application/vnd.fdf\":[\"fdf\"],\"application/vnd.fdsn.mseed\":[\"mseed\"],\"application/vnd.fdsn.seed\":[\"seed\",\"dataless\"],\"application/vnd.flographit\":[\"gph\"],\"application/vnd.fluxtime.clip\":[\"ftc\"],\"application/vnd.framemaker\":[\"fm\",\"frame\",\"maker\",\"book\"],\"application/vnd.frogans.fnc\":[\"fnc\"],\"application/vnd.frogans.ltf\":[\"ltf\"],\"application/vnd.fsc.weblaunch\":[\"fsc\"],\"application/vnd.fujitsu.oasys\":[\"oas\"],\"application/vnd.fujitsu.oasys2\":[\"oa2\"],\"application/vnd.fujitsu.oasys3\":[\"oa3\"],\"application/vnd.fujitsu.oasysgp\":[\"fg5\"],\"application/vnd.fujitsu.oasysprs\":[\"bh2\"],\"application/vnd.fujixerox.ddd\":[\"ddd\"],\"application/vnd.fujixerox.docuworks\":[\"xdw\"],\"application/vnd.fujixerox.docuworks.binder\":[\"xbd\"],\"application/vnd.fuzzysheet\":[\"fzs\"],\"application/vnd.genomatix.tuxedo\":[\"txd\"],\"application/vnd.geogebra.file\":[\"ggb\"],\"application/vnd.geogebra.tool\":[\"ggt\"],\"application/vnd.geometry-explorer\":[\"gex\",\"gre\"],\"application/vnd.geonext\":[\"gxt\"],\"application/vnd.geoplan\":[\"g2w\"],\"application/vnd.geospace\":[\"g3w\"],\"application/vnd.gmx\":[\"gmx\"],\"application/vnd.google-apps.document\":[\"gdoc\"],\"application/vnd.google-apps.presentation\":[\"gslides\"],\"application/vnd.google-apps.spreadsheet\":[\"gsheet\"],\"application/vnd.google-earth.kml+xml\":[\"kml\"],\"application/vnd.google-earth.kmz\":[\"kmz\"],\"application/vnd.grafeq\":[\"gqf\",\"gqs\"],\"application/vnd.groove-account\":[\"gac\"],\"application/vnd.groove-help\":[\"ghf\"],\"application/vnd.groove-identity-message\":[\"gim\"],\"application/vnd.groove-injector\":[\"grv\"],\"application/vnd.groove-tool-message\":[\"gtm\"],\"application/vnd.groove-tool-template\":[\"tpl\"],\"application/vnd.groove-vcard\":[\"vcg\"],\"application/vnd.hal+xml\":[\"hal\"],\"application/vnd.handheld-entertainment+xml\":[\"zmm\"],\"application/vnd.hbci\":[\"hbci\"],\"application/vnd.hhe.lesson-player\":[\"les\"],\"application/vnd.hp-hpgl\":[\"hpgl\"],\"application/vnd.hp-hpid\":[\"hpid\"],\"application/vnd.hp-hps\":[\"hps\"],\"application/vnd.hp-jlyt\":[\"jlt\"],\"application/vnd.hp-pcl\":[\"pcl\"],\"application/vnd.hp-pclxl\":[\"pclxl\"],\"application/vnd.hydrostatix.sof-data\":[\"sfd-hdstx\"],\"application/vnd.ibm.minipay\":[\"mpy\"],\"application/vnd.ibm.modcap\":[\"afp\",\"listafp\",\"list3820\"],\"application/vnd.ibm.rights-management\":[\"irm\"],\"application/vnd.ibm.secure-container\":[\"sc\"],\"application/vnd.iccprofile\":[\"icc\",\"icm\"],\"application/vnd.igloader\":[\"igl\"],\"application/vnd.immervision-ivp\":[\"ivp\"],\"application/vnd.immervision-ivu\":[\"ivu\"],\"application/vnd.insors.igm\":[\"igm\"],\"application/vnd.intercon.formnet\":[\"xpw\",\"xpx\"],\"application/vnd.intergeo\":[\"i2g\"],\"application/vnd.intu.qbo\":[\"qbo\"],\"application/vnd.intu.qfx\":[\"qfx\"],\"application/vnd.ipunplugged.rcprofile\":[\"rcprofile\"],\"application/vnd.irepository.package+xml\":[\"irp\"],\"application/vnd.is-xpr\":[\"xpr\"],\"application/vnd.isac.fcs\":[\"fcs\"],\"application/vnd.jam\":[\"jam\"],\"application/vnd.jcp.javame.midlet-rms\":[\"rms\"],\"application/vnd.jisp\":[\"jisp\"],\"application/vnd.joost.joda-archive\":[\"joda\"],\"application/vnd.kahootz\":[\"ktz\",\"ktr\"],\"application/vnd.kde.karbon\":[\"karbon\"],\"application/vnd.kde.kchart\":[\"chrt\"],\"application/vnd.kde.kformula\":[\"kfo\"],\"application/vnd.kde.kivio\":[\"flw\"],\"application/vnd.kde.kontour\":[\"kon\"],\"application/vnd.kde.kpresenter\":[\"kpr\",\"kpt\"],\"application/vnd.kde.kspread\":[\"ksp\"],\"application/vnd.kde.kword\":[\"kwd\",\"kwt\"],\"application/vnd.kenameaapp\":[\"htke\"],\"application/vnd.kidspiration\":[\"kia\"],\"application/vnd.kinar\":[\"kne\",\"knp\"],\"application/vnd.koan\":[\"skp\",\"skd\",\"skt\",\"skm\"],\"application/vnd.kodak-descriptor\":[\"sse\"],\"application/vnd.las.las+xml\":[\"lasxml\"],\"application/vnd.llamagraphics.life-balance.desktop\":[\"lbd\"],\"application/vnd.llamagraphics.life-balance.exchange+xml\":[\"lbe\"],\"application/vnd.lotus-1-2-3\":[\"123\"],\"application/vnd.lotus-approach\":[\"apr\"],\"application/vnd.lotus-freelance\":[\"pre\"],\"application/vnd.lotus-notes\":[\"nsf\"],\"application/vnd.lotus-organizer\":[\"org\"],\"application/vnd.lotus-screencam\":[\"scm\"],\"application/vnd.lotus-wordpro\":[\"lwp\"],\"application/vnd.macports.portpkg\":[\"portpkg\"],\"application/vnd.mcd\":[\"mcd\"],\"application/vnd.medcalcdata\":[\"mc1\"],\"application/vnd.mediastation.cdkey\":[\"cdkey\"],\"application/vnd.mfer\":[\"mwf\"],\"application/vnd.mfmp\":[\"mfm\"],\"application/vnd.micrografx.flo\":[\"flo\"],\"application/vnd.micrografx.igx\":[\"igx\"],\"application/vnd.mif\":[\"mif\"],\"application/vnd.mobius.daf\":[\"daf\"],\"application/vnd.mobius.dis\":[\"dis\"],\"application/vnd.mobius.mbk\":[\"mbk\"],\"application/vnd.mobius.mqy\":[\"mqy\"],\"application/vnd.mobius.msl\":[\"msl\"],\"application/vnd.mobius.plc\":[\"plc\"],\"application/vnd.mobius.txf\":[\"txf\"],\"application/vnd.mophun.application\":[\"mpn\"],\"application/vnd.mophun.certificate\":[\"mpc\"],\"application/vnd.mozilla.xul+xml\":[\"xul\"],\"application/vnd.ms-artgalry\":[\"cil\"],\"application/vnd.ms-cab-compressed\":[\"cab\"],\"application/vnd.ms-excel\":[\"xls\",\"xlm\",\"xla\",\"xlc\",\"xlt\",\"xlw\"],\"application/vnd.ms-excel.addin.macroenabled.12\":[\"xlam\"],\"application/vnd.ms-excel.sheet.binary.macroenabled.12\":[\"xlsb\"],\"application/vnd.ms-excel.sheet.macroenabled.12\":[\"xlsm\"],\"application/vnd.ms-excel.template.macroenabled.12\":[\"xltm\"],\"application/vnd.ms-fontobject\":[\"eot\"],\"application/vnd.ms-htmlhelp\":[\"chm\"],\"application/vnd.ms-ims\":[\"ims\"],\"application/vnd.ms-lrm\":[\"lrm\"],\"application/vnd.ms-officetheme\":[\"thmx\"],\"application/vnd.ms-outlook\":[\"msg\"],\"application/vnd.ms-pki.seccat\":[\"cat\"],\"application/vnd.ms-pki.stl\":[\"stl\"],\"application/vnd.ms-powerpoint\":[\"ppt\",\"pps\",\"pot\"],\"application/vnd.ms-powerpoint.addin.macroenabled.12\":[\"ppam\"],\"application/vnd.ms-powerpoint.presentation.macroenabled.12\":[\"pptm\"],\"application/vnd.ms-powerpoint.slide.macroenabled.12\":[\"sldm\"],\"application/vnd.ms-powerpoint.slideshow.macroenabled.12\":[\"ppsm\"],\"application/vnd.ms-powerpoint.template.macroenabled.12\":[\"potm\"],\"application/vnd.ms-project\":[\"mpp\",\"mpt\"],\"application/vnd.ms-word.document.macroenabled.12\":[\"docm\"],\"application/vnd.ms-word.template.macroenabled.12\":[\"dotm\"],\"application/vnd.ms-works\":[\"wps\",\"wks\",\"wcm\",\"wdb\"],\"application/vnd.ms-wpl\":[\"wpl\"],\"application/vnd.ms-xpsdocument\":[\"xps\"],\"application/vnd.mseq\":[\"mseq\"],\"application/vnd.musician\":[\"mus\"],\"application/vnd.muvee.style\":[\"msty\"],\"application/vnd.mynfc\":[\"taglet\"],\"application/vnd.neurolanguage.nlu\":[\"nlu\"],\"application/vnd.nitf\":[\"ntf\",\"nitf\"],\"application/vnd.noblenet-directory\":[\"nnd\"],\"application/vnd.noblenet-sealer\":[\"nns\"],\"application/vnd.noblenet-web\":[\"nnw\"],\"application/vnd.nokia.n-gage.data\":[\"ngdat\"],\"application/vnd.nokia.n-gage.symbian.install\":[\"n-gage\"],\"application/vnd.nokia.radio-preset\":[\"rpst\"],\"application/vnd.nokia.radio-presets\":[\"rpss\"],\"application/vnd.novadigm.edm\":[\"edm\"],\"application/vnd.novadigm.edx\":[\"edx\"],\"application/vnd.novadigm.ext\":[\"ext\"],\"application/vnd.oasis.opendocument.chart\":[\"odc\"],\"application/vnd.oasis.opendocument.chart-template\":[\"otc\"],\"application/vnd.oasis.opendocument.database\":[\"odb\"],\"application/vnd.oasis.opendocument.formula\":[\"odf\"],\"application/vnd.oasis.opendocument.formula-template\":[\"odft\"],\"application/vnd.oasis.opendocument.graphics\":[\"odg\"],\"application/vnd.oasis.opendocument.graphics-template\":[\"otg\"],\"application/vnd.oasis.opendocument.image\":[\"odi\"],\"application/vnd.oasis.opendocument.image-template\":[\"oti\"],\"application/vnd.oasis.opendocument.presentation\":[\"odp\"],\"application/vnd.oasis.opendocument.presentation-template\":[\"otp\"],\"application/vnd.oasis.opendocument.spreadsheet\":[\"ods\"],\"application/vnd.oasis.opendocument.spreadsheet-template\":[\"ots\"],\"application/vnd.oasis.opendocument.text\":[\"odt\"],\"application/vnd.oasis.opendocument.text-master\":[\"odm\"],\"application/vnd.oasis.opendocument.text-template\":[\"ott\"],\"application/vnd.oasis.opendocument.text-web\":[\"oth\"],\"application/vnd.olpc-sugar\":[\"xo\"],\"application/vnd.oma.dd2+xml\":[\"dd2\"],\"application/vnd.openofficeorg.extension\":[\"oxt\"],\"application/vnd.openxmlformats-officedocument.presentationml.presentation\":[\"pptx\"],\"application/vnd.openxmlformats-officedocument.presentationml.slide\":[\"sldx\"],\"application/vnd.openxmlformats-officedocument.presentationml.slideshow\":[\"ppsx\"],\"application/vnd.openxmlformats-officedocument.presentationml.template\":[\"potx\"],\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":[\"xlsx\"],\"application/vnd.openxmlformats-officedocument.spreadsheetml.template\":[\"xltx\"],\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":[\"docx\"],\"application/vnd.openxmlformats-officedocument.wordprocessingml.template\":[\"dotx\"],\"application/vnd.osgeo.mapguide.package\":[\"mgp\"],\"application/vnd.osgi.dp\":[\"dp\"],\"application/vnd.osgi.subsystem\":[\"esa\"],\"application/vnd.palm\":[\"pdb\",\"pqa\",\"oprc\"],\"application/vnd.pawaafile\":[\"paw\"],\"application/vnd.pg.format\":[\"str\"],\"application/vnd.pg.osasli\":[\"ei6\"],\"application/vnd.picsel\":[\"efif\"],\"application/vnd.pmi.widget\":[\"wg\"],\"application/vnd.pocketlearn\":[\"plf\"],\"application/vnd.powerbuilder6\":[\"pbd\"],\"application/vnd.previewsystems.box\":[\"box\"],\"application/vnd.proteus.magazine\":[\"mgz\"],\"application/vnd.publishare-delta-tree\":[\"qps\"],\"application/vnd.pvi.ptid1\":[\"ptid\"],\"application/vnd.quark.quarkxpress\":[\"qxd\",\"qxt\",\"qwd\",\"qwt\",\"qxl\",\"qxb\"],\"application/vnd.realvnc.bed\":[\"bed\"],\"application/vnd.recordare.musicxml\":[\"mxl\"],\"application/vnd.recordare.musicxml+xml\":[\"musicxml\"],\"application/vnd.rig.cryptonote\":[\"cryptonote\"],\"application/vnd.rim.cod\":[\"cod\"],\"application/vnd.rn-realmedia\":[\"rm\"],\"application/vnd.rn-realmedia-vbr\":[\"rmvb\"],\"application/vnd.route66.link66+xml\":[\"link66\"],\"application/vnd.sailingtracker.track\":[\"st\"],\"application/vnd.seemail\":[\"see\"],\"application/vnd.sema\":[\"sema\"],\"application/vnd.semd\":[\"semd\"],\"application/vnd.semf\":[\"semf\"],\"application/vnd.shana.informed.formdata\":[\"ifm\"],\"application/vnd.shana.informed.formtemplate\":[\"itp\"],\"application/vnd.shana.informed.interchange\":[\"iif\"],\"application/vnd.shana.informed.package\":[\"ipk\"],\"application/vnd.simtech-mindmapper\":[\"twd\",\"twds\"],\"application/vnd.smaf\":[\"mmf\"],\"application/vnd.smart.teacher\":[\"teacher\"],\"application/vnd.solent.sdkm+xml\":[\"sdkm\",\"sdkd\"],\"application/vnd.spotfire.dxp\":[\"dxp\"],\"application/vnd.spotfire.sfs\":[\"sfs\"],\"application/vnd.stardivision.calc\":[\"sdc\"],\"application/vnd.stardivision.draw\":[\"sda\"],\"application/vnd.stardivision.impress\":[\"sdd\"],\"application/vnd.stardivision.math\":[\"smf\"],\"application/vnd.stardivision.writer\":[\"sdw\",\"vor\"],\"application/vnd.stardivision.writer-global\":[\"sgl\"],\"application/vnd.stepmania.package\":[\"smzip\"],\"application/vnd.stepmania.stepchart\":[\"sm\"],\"application/vnd.sun.wadl+xml\":[\"wadl\"],\"application/vnd.sun.xml.calc\":[\"sxc\"],\"application/vnd.sun.xml.calc.template\":[\"stc\"],\"application/vnd.sun.xml.draw\":[\"sxd\"],\"application/vnd.sun.xml.draw.template\":[\"std\"],\"application/vnd.sun.xml.impress\":[\"sxi\"],\"application/vnd.sun.xml.impress.template\":[\"sti\"],\"application/vnd.sun.xml.math\":[\"sxm\"],\"application/vnd.sun.xml.writer\":[\"sxw\"],\"application/vnd.sun.xml.writer.global\":[\"sxg\"],\"application/vnd.sun.xml.writer.template\":[\"stw\"],\"application/vnd.sus-calendar\":[\"sus\",\"susp\"],\"application/vnd.svd\":[\"svd\"],\"application/vnd.symbian.install\":[\"sis\",\"sisx\"],\"application/vnd.syncml+xml\":[\"xsm\"],\"application/vnd.syncml.dm+wbxml\":[\"bdm\"],\"application/vnd.syncml.dm+xml\":[\"xdm\"],\"application/vnd.tao.intent-module-archive\":[\"tao\"],\"application/vnd.tcpdump.pcap\":[\"pcap\",\"cap\",\"dmp\"],\"application/vnd.tmobile-livetv\":[\"tmo\"],\"application/vnd.trid.tpt\":[\"tpt\"],\"application/vnd.triscape.mxs\":[\"mxs\"],\"application/vnd.trueapp\":[\"tra\"],\"application/vnd.ufdl\":[\"ufd\",\"ufdl\"],\"application/vnd.uiq.theme\":[\"utz\"],\"application/vnd.umajin\":[\"umj\"],\"application/vnd.unity\":[\"unityweb\"],\"application/vnd.uoml+xml\":[\"uoml\"],\"application/vnd.vcx\":[\"vcx\"],\"application/vnd.visio\":[\"vsd\",\"vst\",\"vss\",\"vsw\"],\"application/vnd.visionary\":[\"vis\"],\"application/vnd.vsf\":[\"vsf\"],\"application/vnd.wap.wbxml\":[\"wbxml\"],\"application/vnd.wap.wmlc\":[\"wmlc\"],\"application/vnd.wap.wmlscriptc\":[\"wmlsc\"],\"application/vnd.webturbo\":[\"wtb\"],\"application/vnd.wolfram.player\":[\"nbp\"],\"application/vnd.wordperfect\":[\"wpd\"],\"application/vnd.wqd\":[\"wqd\"],\"application/vnd.wt.stf\":[\"stf\"],\"application/vnd.xara\":[\"xar\"],\"application/vnd.xfdl\":[\"xfdl\"],\"application/vnd.yamaha.hv-dic\":[\"hvd\"],\"application/vnd.yamaha.hv-script\":[\"hvs\"],\"application/vnd.yamaha.hv-voice\":[\"hvp\"],\"application/vnd.yamaha.openscoreformat\":[\"osf\"],\"application/vnd.yamaha.openscoreformat.osfpvg+xml\":[\"osfpvg\"],\"application/vnd.yamaha.smaf-audio\":[\"saf\"],\"application/vnd.yamaha.smaf-phrase\":[\"spf\"],\"application/vnd.yellowriver-custom-menu\":[\"cmp\"],\"application/vnd.zul\":[\"zir\",\"zirz\"],\"application/vnd.zzazz.deck+xml\":[\"zaz\"],\"application/voicexml+xml\":[\"vxml\"],\"application/widget\":[\"wgt\"],\"application/winhlp\":[\"hlp\"],\"application/wsdl+xml\":[\"wsdl\"],\"application/wspolicy+xml\":[\"wspolicy\"],\"application/x-7z-compressed\":[\"7z\"],\"application/x-abiword\":[\"abw\"],\"application/x-ace-compressed\":[\"ace\"],\"application/x-apple-diskimage\":[\"dmg\"],\"application/x-arj\":[\"arj\"],\"application/x-authorware-bin\":[\"aab\",\"x32\",\"u32\",\"vox\"],\"application/x-authorware-map\":[\"aam\"],\"application/x-authorware-seg\":[\"aas\"],\"application/x-bcpio\":[\"bcpio\"],\"application/x-bdoc\":[\"bdoc\"],\"application/x-bittorrent\":[\"torrent\"],\"application/x-blorb\":[\"blb\",\"blorb\"],\"application/x-bzip\":[\"bz\"],\"application/x-bzip2\":[\"bz2\",\"boz\"],\"application/x-cbr\":[\"cbr\",\"cba\",\"cbt\",\"cbz\",\"cb7\"],\"application/x-cdlink\":[\"vcd\"],\"application/x-cfs-compressed\":[\"cfs\"],\"application/x-chat\":[\"chat\"],\"application/x-chess-pgn\":[\"pgn\"],\"application/x-chrome-extension\":[\"crx\"],\"application/x-cocoa\":[\"cco\"],\"application/x-conference\":[\"nsc\"],\"application/x-cpio\":[\"cpio\"],\"application/x-csh\":[\"csh\"],\"application/x-debian-package\":[\"deb\",\"udeb\"],\"application/x-dgc-compressed\":[\"dgc\"],\"application/x-director\":[\"dir\",\"dcr\",\"dxr\",\"cst\",\"cct\",\"cxt\",\"w3d\",\"fgd\",\"swa\"],\"application/x-doom\":[\"wad\"],\"application/x-dtbncx+xml\":[\"ncx\"],\"application/x-dtbook+xml\":[\"dtb\"],\"application/x-dtbresource+xml\":[\"res\"],\"application/x-dvi\":[\"dvi\"],\"application/x-envoy\":[\"evy\"],\"application/x-eva\":[\"eva\"],\"application/x-font-bdf\":[\"bdf\"],\"application/x-font-ghostscript\":[\"gsf\"],\"application/x-font-linux-psf\":[\"psf\"],\"application/x-font-otf\":[\"otf\"],\"application/x-font-pcf\":[\"pcf\"],\"application/x-font-snf\":[\"snf\"],\"application/x-font-ttf\":[\"ttf\",\"ttc\"],\"application/x-font-type1\":[\"pfa\",\"pfb\",\"pfm\",\"afm\"],\"application/x-freearc\":[\"arc\"],\"application/x-futuresplash\":[\"spl\"],\"application/x-gca-compressed\":[\"gca\"],\"application/x-glulx\":[\"ulx\"],\"application/x-gnumeric\":[\"gnumeric\"],\"application/x-gramps-xml\":[\"gramps\"],\"application/x-gtar\":[\"gtar\"],\"application/x-hdf\":[\"hdf\"],\"application/x-httpd-php\":[\"php\"],\"application/x-install-instructions\":[\"install\"],\"application/x-iso9660-image\":[\"iso\"],\"application/x-java-archive-diff\":[\"jardiff\"],\"application/x-java-jnlp-file\":[\"jnlp\"],\"application/x-latex\":[\"latex\"],\"application/x-lua-bytecode\":[\"luac\"],\"application/x-lzh-compressed\":[\"lzh\",\"lha\"],\"application/x-makeself\":[\"run\"],\"application/x-mie\":[\"mie\"],\"application/x-mobipocket-ebook\":[\"prc\",\"mobi\"],\"application/x-ms-application\":[\"application\"],\"application/x-ms-shortcut\":[\"lnk\"],\"application/x-ms-wmd\":[\"wmd\"],\"application/x-ms-wmz\":[\"wmz\"],\"application/x-ms-xbap\":[\"xbap\"],\"application/x-msaccess\":[\"mdb\"],\"application/x-msbinder\":[\"obd\"],\"application/x-mscardfile\":[\"crd\"],\"application/x-msclip\":[\"clp\"],\"application/x-msdos-program\":[\"exe\"],\"application/x-msdownload\":[\"exe\",\"dll\",\"com\",\"bat\",\"msi\"],\"application/x-msmediaview\":[\"mvb\",\"m13\",\"m14\"],\"application/x-msmetafile\":[\"wmf\",\"wmz\",\"emf\",\"emz\"],\"application/x-msmoney\":[\"mny\"],\"application/x-mspublisher\":[\"pub\"],\"application/x-msschedule\":[\"scd\"],\"application/x-msterminal\":[\"trm\"],\"application/x-mswrite\":[\"wri\"],\"application/x-netcdf\":[\"nc\",\"cdf\"],\"application/x-ns-proxy-autoconfig\":[\"pac\"],\"application/x-nzb\":[\"nzb\"],\"application/x-perl\":[\"pl\",\"pm\"],\"application/x-pilot\":[\"prc\",\"pdb\"],\"application/x-pkcs12\":[\"p12\",\"pfx\"],\"application/x-pkcs7-certificates\":[\"p7b\",\"spc\"],\"application/x-pkcs7-certreqresp\":[\"p7r\"],\"application/x-rar-compressed\":[\"rar\"],\"application/x-redhat-package-manager\":[\"rpm\"],\"application/x-research-info-systems\":[\"ris\"],\"application/x-sea\":[\"sea\"],\"application/x-sh\":[\"sh\"],\"application/x-shar\":[\"shar\"],\"application/x-shockwave-flash\":[\"swf\"],\"application/x-silverlight-app\":[\"xap\"],\"application/x-sql\":[\"sql\"],\"application/x-stuffit\":[\"sit\"],\"application/x-stuffitx\":[\"sitx\"],\"application/x-subrip\":[\"srt\"],\"application/x-sv4cpio\":[\"sv4cpio\"],\"application/x-sv4crc\":[\"sv4crc\"],\"application/x-t3vm-image\":[\"t3\"],\"application/x-tads\":[\"gam\"],\"application/x-tar\":[\"tar\"],\"application/x-tcl\":[\"tcl\",\"tk\"],\"application/x-tex\":[\"tex\"],\"application/x-tex-tfm\":[\"tfm\"],\"application/x-texinfo\":[\"texinfo\",\"texi\"],\"application/x-tgif\":[\"obj\"],\"application/x-ustar\":[\"ustar\"],\"application/x-virtualbox-hdd\":[\"hdd\"],\"application/x-virtualbox-ova\":[\"ova\"],\"application/x-virtualbox-ovf\":[\"ovf\"],\"application/x-virtualbox-vbox\":[\"vbox\"],\"application/x-virtualbox-vbox-extpack\":[\"vbox-extpack\"],\"application/x-virtualbox-vdi\":[\"vdi\"],\"application/x-virtualbox-vhd\":[\"vhd\"],\"application/x-virtualbox-vmdk\":[\"vmdk\"],\"application/x-wais-source\":[\"src\"],\"application/x-web-app-manifest+json\":[\"webapp\"],\"application/x-x509-ca-cert\":[\"der\",\"crt\",\"pem\"],\"application/x-xfig\":[\"fig\"],\"application/x-xliff+xml\":[\"xlf\"],\"application/x-xpinstall\":[\"xpi\"],\"application/x-xz\":[\"xz\"],\"application/x-zmachine\":[\"z1\",\"z2\",\"z3\",\"z4\",\"z5\",\"z6\",\"z7\",\"z8\"],\"application/xaml+xml\":[\"xaml\"],\"application/xcap-diff+xml\":[\"xdf\"],\"application/xenc+xml\":[\"xenc\"],\"application/xhtml+xml\":[\"xhtml\",\"xht\"],\"application/xml\":[\"xml\",\"xsl\",\"xsd\",\"rng\"],\"application/xml-dtd\":[\"dtd\"],\"application/xop+xml\":[\"xop\"],\"application/xproc+xml\":[\"xpl\"],\"application/xslt+xml\":[\"xslt\"],\"application/xspf+xml\":[\"xspf\"],\"application/xv+xml\":[\"mxml\",\"xhvml\",\"xvml\",\"xvm\"],\"application/yang\":[\"yang\"],\"application/yin+xml\":[\"yin\"],\"application/zip\":[\"zip\"],\"audio/3gpp\":[\"3gpp\"],\"audio/adpcm\":[\"adp\"],\"audio/basic\":[\"au\",\"snd\"],\"audio/midi\":[\"mid\",\"midi\",\"kar\",\"rmi\"],\"audio/mp3\":[\"mp3\"],\"audio/mp4\":[\"m4a\",\"mp4a\"],\"audio/mpeg\":[\"mpga\",\"mp2\",\"mp2a\",\"mp3\",\"m2a\",\"m3a\"],\"audio/ogg\":[\"oga\",\"ogg\",\"spx\"],\"audio/s3m\":[\"s3m\"],\"audio/silk\":[\"sil\"],\"audio/vnd.dece.audio\":[\"uva\",\"uvva\"],\"audio/vnd.digital-winds\":[\"eol\"],\"audio/vnd.dra\":[\"dra\"],\"audio/vnd.dts\":[\"dts\"],\"audio/vnd.dts.hd\":[\"dtshd\"],\"audio/vnd.lucent.voice\":[\"lvp\"],\"audio/vnd.ms-playready.media.pya\":[\"pya\"],\"audio/vnd.nuera.ecelp4800\":[\"ecelp4800\"],\"audio/vnd.nuera.ecelp7470\":[\"ecelp7470\"],\"audio/vnd.nuera.ecelp9600\":[\"ecelp9600\"],\"audio/vnd.rip\":[\"rip\"],\"audio/wav\":[\"wav\"],\"audio/wave\":[\"wav\"],\"audio/webm\":[\"weba\"],\"audio/x-aac\":[\"aac\"],\"audio/x-aiff\":[\"aif\",\"aiff\",\"aifc\"],\"audio/x-caf\":[\"caf\"],\"audio/x-flac\":[\"flac\"],\"audio/x-m4a\":[\"m4a\"],\"audio/x-matroska\":[\"mka\"],\"audio/x-mpegurl\":[\"m3u\"],\"audio/x-ms-wax\":[\"wax\"],\"audio/x-ms-wma\":[\"wma\"],\"audio/x-pn-realaudio\":[\"ram\",\"ra\"],\"audio/x-pn-realaudio-plugin\":[\"rmp\"],\"audio/x-realaudio\":[\"ra\"],\"audio/x-wav\":[\"wav\"],\"audio/xm\":[\"xm\"],\"chemical/x-cdx\":[\"cdx\"],\"chemical/x-cif\":[\"cif\"],\"chemical/x-cmdf\":[\"cmdf\"],\"chemical/x-cml\":[\"cml\"],\"chemical/x-csml\":[\"csml\"],\"chemical/x-xyz\":[\"xyz\"],\"font/otf\":[\"otf\"],\"image/apng\":[\"apng\"],\"image/bmp\":[\"bmp\"],\"image/cgm\":[\"cgm\"],\"image/g3fax\":[\"g3\"],\"image/gif\":[\"gif\"],\"image/ief\":[\"ief\"],\"image/jpeg\":[\"jpeg\",\"jpg\",\"jpe\"],\"image/ktx\":[\"ktx\"],\"image/png\":[\"png\"],\"image/prs.btif\":[\"btif\"],\"image/sgi\":[\"sgi\"],\"image/svg+xml\":[\"svg\",\"svgz\"],\"image/tiff\":[\"tiff\",\"tif\"],\"image/vnd.adobe.photoshop\":[\"psd\"],\"image/vnd.dece.graphic\":[\"uvi\",\"uvvi\",\"uvg\",\"uvvg\"],\"image/vnd.djvu\":[\"djvu\",\"djv\"],\"image/vnd.dvb.subtitle\":[\"sub\"],\"image/vnd.dwg\":[\"dwg\"],\"image/vnd.dxf\":[\"dxf\"],\"image/vnd.fastbidsheet\":[\"fbs\"],\"image/vnd.fpx\":[\"fpx\"],\"image/vnd.fst\":[\"fst\"],\"image/vnd.fujixerox.edmics-mmr\":[\"mmr\"],\"image/vnd.fujixerox.edmics-rlc\":[\"rlc\"],\"image/vnd.ms-modi\":[\"mdi\"],\"image/vnd.ms-photo\":[\"wdp\"],\"image/vnd.net-fpx\":[\"npx\"],\"image/vnd.wap.wbmp\":[\"wbmp\"],\"image/vnd.xiff\":[\"xif\"],\"image/webp\":[\"webp\"],\"image/x-3ds\":[\"3ds\"],\"image/x-cmu-raster\":[\"ras\"],\"image/x-cmx\":[\"cmx\"],\"image/x-freehand\":[\"fh\",\"fhc\",\"fh4\",\"fh5\",\"fh7\"],\"image/x-icon\":[\"ico\"],\"image/x-jng\":[\"jng\"],\"image/x-mrsid-image\":[\"sid\"],\"image/x-ms-bmp\":[\"bmp\"],\"image/x-pcx\":[\"pcx\"],\"image/x-pict\":[\"pic\",\"pct\"],\"image/x-portable-anymap\":[\"pnm\"],\"image/x-portable-bitmap\":[\"pbm\"],\"image/x-portable-graymap\":[\"pgm\"],\"image/x-portable-pixmap\":[\"ppm\"],\"image/x-rgb\":[\"rgb\"],\"image/x-tga\":[\"tga\"],\"image/x-xbitmap\":[\"xbm\"],\"image/x-xpixmap\":[\"xpm\"],\"image/x-xwindowdump\":[\"xwd\"],\"message/rfc822\":[\"eml\",\"mime\"],\"model/gltf+json\":[\"gltf\"],\"model/gltf-binary\":[\"glb\"],\"model/iges\":[\"igs\",\"iges\"],\"model/mesh\":[\"msh\",\"mesh\",\"silo\"],\"model/vnd.collada+xml\":[\"dae\"],\"model/vnd.dwf\":[\"dwf\"],\"model/vnd.gdl\":[\"gdl\"],\"model/vnd.gtw\":[\"gtw\"],\"model/vnd.mts\":[\"mts\"],\"model/vnd.vtu\":[\"vtu\"],\"model/vrml\":[\"wrl\",\"vrml\"],\"model/x3d+binary\":[\"x3db\",\"x3dbz\"],\"model/x3d+vrml\":[\"x3dv\",\"x3dvz\"],\"model/x3d+xml\":[\"x3d\",\"x3dz\"],\"text/cache-manifest\":[\"appcache\",\"manifest\"],\"text/calendar\":[\"ics\",\"ifb\"],\"text/coffeescript\":[\"coffee\",\"litcoffee\"],\"text/css\":[\"css\"],\"text/csv\":[\"csv\"],\"text/hjson\":[\"hjson\"],\"text/html\":[\"html\",\"htm\",\"shtml\"],\"text/jade\":[\"jade\"],\"text/jsx\":[\"jsx\"],\"text/less\":[\"less\"],\"text/markdown\":[\"markdown\",\"md\"],\"text/mathml\":[\"mml\"],\"text/n3\":[\"n3\"],\"text/plain\":[\"txt\",\"text\",\"conf\",\"def\",\"list\",\"log\",\"in\",\"ini\"],\"text/prs.lines.tag\":[\"dsc\"],\"text/richtext\":[\"rtx\"],\"text/rtf\":[\"rtf\"],\"text/sgml\":[\"sgml\",\"sgm\"],\"text/slim\":[\"slim\",\"slm\"],\"text/stylus\":[\"stylus\",\"styl\"],\"text/tab-separated-values\":[\"tsv\"],\"text/troff\":[\"t\",\"tr\",\"roff\",\"man\",\"me\",\"ms\"],\"text/turtle\":[\"ttl\"],\"text/uri-list\":[\"uri\",\"uris\",\"urls\"],\"text/vcard\":[\"vcard\"],\"text/vnd.curl\":[\"curl\"],\"text/vnd.curl.dcurl\":[\"dcurl\"],\"text/vnd.curl.mcurl\":[\"mcurl\"],\"text/vnd.curl.scurl\":[\"scurl\"],\"text/vnd.dvb.subtitle\":[\"sub\"],\"text/vnd.fly\":[\"fly\"],\"text/vnd.fmi.flexstor\":[\"flx\"],\"text/vnd.graphviz\":[\"gv\"],\"text/vnd.in3d.3dml\":[\"3dml\"],\"text/vnd.in3d.spot\":[\"spot\"],\"text/vnd.sun.j2me.app-descriptor\":[\"jad\"],\"text/vnd.wap.wml\":[\"wml\"],\"text/vnd.wap.wmlscript\":[\"wmls\"],\"text/vtt\":[\"vtt\"],\"text/x-asm\":[\"s\",\"asm\"],\"text/x-c\":[\"c\",\"cc\",\"cxx\",\"cpp\",\"h\",\"hh\",\"dic\"],\"text/x-component\":[\"htc\"],\"text/x-fortran\":[\"f\",\"for\",\"f77\",\"f90\"],\"text/x-handlebars-template\":[\"hbs\"],\"text/x-java-source\":[\"java\"],\"text/x-lua\":[\"lua\"],\"text/x-markdown\":[\"mkd\"],\"text/x-nfo\":[\"nfo\"],\"text/x-opml\":[\"opml\"],\"text/x-org\":[\"org\"],\"text/x-pascal\":[\"p\",\"pas\"],\"text/x-processing\":[\"pde\"],\"text/x-sass\":[\"sass\"],\"text/x-scss\":[\"scss\"],\"text/x-setext\":[\"etx\"],\"text/x-sfv\":[\"sfv\"],\"text/x-suse-ymp\":[\"ymp\"],\"text/x-uuencode\":[\"uu\"],\"text/x-vcalendar\":[\"vcs\"],\"text/x-vcard\":[\"vcf\"],\"text/xml\":[\"xml\"],\"text/yaml\":[\"yaml\",\"yml\"],\"video/3gpp\":[\"3gp\",\"3gpp\"],\"video/3gpp2\":[\"3g2\"],\"video/h261\":[\"h261\"],\"video/h263\":[\"h263\"],\"video/h264\":[\"h264\"],\"video/jpeg\":[\"jpgv\"],\"video/jpm\":[\"jpm\",\"jpgm\"],\"video/mj2\":[\"mj2\",\"mjp2\"],\"video/mp2t\":[\"ts\"],\"video/mp4\":[\"mp4\",\"mp4v\",\"mpg4\"],\"video/mpeg\":[\"mpeg\",\"mpg\",\"mpe\",\"m1v\",\"m2v\"],\"video/ogg\":[\"ogv\"],\"video/quicktime\":[\"qt\",\"mov\"],\"video/vnd.dece.hd\":[\"uvh\",\"uvvh\"],\"video/vnd.dece.mobile\":[\"uvm\",\"uvvm\"],\"video/vnd.dece.pd\":[\"uvp\",\"uvvp\"],\"video/vnd.dece.sd\":[\"uvs\",\"uvvs\"],\"video/vnd.dece.video\":[\"uvv\",\"uvvv\"],\"video/vnd.dvb.file\":[\"dvb\"],\"video/vnd.fvt\":[\"fvt\"],\"video/vnd.mpegurl\":[\"mxu\",\"m4u\"],\"video/vnd.ms-playready.media.pyv\":[\"pyv\"],\"video/vnd.uvvu.mp4\":[\"uvu\",\"uvvu\"],\"video/vnd.vivo\":[\"viv\"],\"video/webm\":[\"webm\"],\"video/x-f4v\":[\"f4v\"],\"video/x-fli\":[\"fli\"],\"video/x-flv\":[\"flv\"],\"video/x-m4v\":[\"m4v\"],\"video/x-matroska\":[\"mkv\",\"mk3d\",\"mks\"],\"video/x-mng\":[\"mng\"],\"video/x-ms-asf\":[\"asf\",\"asx\"],\"video/x-ms-vob\":[\"vob\"],\"video/x-ms-wm\":[\"wm\"],\"video/x-ms-wmv\":[\"wmv\"],\"video/x-ms-wmx\":[\"wmx\"],\"video/x-ms-wvx\":[\"wvx\"],\"video/x-msvideo\":[\"avi\"],\"video/x-sgi-movie\":[\"movie\"],\"video/x-smv\":[\"smv\"],\"x-conference/x-cooltalk\":[\"ice\"]}},function(e,t,n){n(21);var r=n(26);function o(){this.types=Object.create(null),this.extensions=Object.create(null)}o.prototype.define=function(e){for(var t in e){for(var n=e[t],r=0;r<n.length;r++)process.env.DEBUG_MIME&&this.types[n[r]]&&console.warn((this._loading||\"define()\").replace(/.*\\//,\"\"),'changes \"'+n[r]+'\" extension type from '+this.types[n[r]]+\" to \"+t),this.types[n[r]]=t;this.extensions[t]||(this.extensions[t]=n[0])}},o.prototype.load=function(e){this._loading=e;var t={};r.readFileSync(e,\"ascii\").split(/[\\r\\n]+/).forEach(function(e){var n=e.replace(/\\s*#.*|^\\s*|\\s*$/g,\"\").split(/\\s+/);t[n.shift()]=n}),this.define(t),this._loading=null},o.prototype.lookup=function(e,t){var n=e.replace(/^.*[\\.\\/\\\\]/,\"\").toLowerCase();return this.types[n]||t||this.default_type},o.prototype.extension=function(e){var t=e.match(/^\\s*([^;\\s]*)(?:;|\\s|$)/)[1].toLowerCase();return this.extensions[t]};var i=new o;i.define(n(236)),i.default_type=i.lookup(\"bin\"),i.Mime=o,i.charsets={lookup:function(e,t){return/^text\\/|^application\\/(javascript|json)/.test(e)?\"UTF-8\":t}},e.exports=i},function(e,t,n){\"use strict\";var r=n(26).ReadStream,o=n(9);function i(){\"number\"==typeof this.fd&&this.close()}e.exports=function(e){if(e instanceof r)return function(e){e.destroy(),\"function\"==typeof e.close&&e.on(\"open\",i);return e}(e);if(!(e instanceof o))return e;\"function\"==typeof e.destroy&&e.destroy();return e}},function(e,t){function n(e){var t=new Error('Cannot find module \"'+e+'\".');throw t.code=\"MODULE_NOT_FOUND\",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=239},function(e,t,n){\"use strict\";var r=n(20)(\"express:view\"),o=n(21),i=n(26),s=o.dirname,a=o.basename,c=o.extname,l=o.join,u=o.resolve;function p(e,t){var o=t||{};if(this.defaultEngine=o.defaultEngine,this.ext=c(e),this.name=e,this.root=o.root,!this.ext&&!this.defaultEngine)throw new Error(\"No default engine was specified and no extension was provided.\");var i=e;if(this.ext||(this.ext=\".\"!==this.defaultEngine[0]?\".\"+this.defaultEngine:this.defaultEngine,i+=this.ext),!o.engines[this.ext]){var s=this.ext.substr(1);r('require \"%s\"',s);var a=n(239)(s).__express;if(\"function\"!=typeof a)throw new Error('Module \"'+s+'\" does not provide a view engine.');o.engines[this.ext]=a}this.engine=o.engines[this.ext],this.path=this.lookup(i)}function d(e){r('stat \"%s\"',e);try{return i.statSync(e)}catch(e){return}}e.exports=p,p.prototype.lookup=function(e){var t,n=[].concat(this.root);r('lookup \"%s\"',e);for(var o=0;o<n.length&&!t;o++){var i=n[o],c=u(i,e),l=s(c),p=a(c);t=this.resolve(l,p)}return t},p.prototype.render=function(e,t){r('render \"%s\"',this.path),this.engine(this.path,e,t)},p.prototype.resolve=function(e,t){var n=this.ext,r=l(e,t),o=d(r);return o&&o.isFile()?r:(o=d(r=l(e,a(t,n),\"index\"+n)))&&o.isFile()?r:void 0}},function(e,t,n){\"use strict\";var r=n(116);t.init=function(e){return function(t,n,o){e.enabled(\"x-powered-by\")&&n.setHeader(\"X-Powered-By\",\"Express\"),t.res=n,n.req=t,t.next=o,r(t,e.request),r(n,e.response),n.locals=n.locals||Object.create(null),o()}}},function(e,t){e.exports=function e(t,r,o){o=o||{};r=r||[];var i=o.strict;var s=!1!==o.end;var a=o.sensitive?\"\":\"i\";var c=0;var l=r.length;var u=0;var p=0;var d;if(t instanceof RegExp){for(;d=n.exec(t.source);)r.push({name:p++,optional:!1,offset:d.index});return t}if(Array.isArray(t))return t=t.map(function(t){return e(t,r,o).source}),new RegExp(\"(?:\"+t.join(\"|\")+\")\",a);t=(\"^\"+t+(i?\"\":\"/\"===t[t.length-1]?\"?\":\"/?\")).replace(/\\/\\(/g,\"/(?:\").replace(/([\\/\\.])/g,\"\\\\$1\").replace(/(\\\\\\/)?(\\\\\\.)?:(\\w+)(\\(.*?\\))?(\\*)?(\\?)?/g,function(e,t,n,o,i,s,a,l){t=t||\"\",n=n||\"\",i=i||\"([^\\\\/\"+n+\"]+?)\",a=a||\"\",r.push({name:o,optional:!!a,offset:l+c});var u=(a?\"\":t)+\"(?:\"+n+(a?t:\"\")+i+(s?\"((?:[\\\\/\"+n+\"].+?)?)\":\"\")+\")\"+a;return c+=u.length-e.length,u}).replace(/\\*/g,function(e,t){for(var n=r.length;n-- >l&&r[n].offset>t;)r[n].offset+=3;return\"(.*)\"});for(;d=n.exec(t);){for(var f=0,h=d.index;\"\\\\\"===t.charAt(--h);)f++;f%2!=1&&((l+u===r.length||r[l+u].offset>d.index)&&r.splice(l+u,0,{name:p++,optional:!1,offset:d.index}),u++)}t+=s?\"$\":\"/\"===t[t.length-1]?\"\":\"(?=\\\\/|$)\";return new RegExp(t,a)};var n=/\\((?!\\?)/g},function(e,t,n){\"use strict\";var r=n(20)(\"finalhandler\"),o=n(89),i=n(88),s=n(90),a=n(59),c=n(93),l=n(158),u=/\\x20{2}/g,p=/\\n/g,d=\"function\"==typeof setImmediate?setImmediate:function(e){process.nextTick(e.bind.apply(e,arguments))},f=s.isFinished;function h(e){return\"boolean\"!=typeof e.headersSent?Boolean(e._header):e.headersSent}e.exports=function(e,t,n){var m=n||{},g=m.env||\"production\",y=m.onerror;return function(n){var m,v,b;if(n||!h(t)){if(n?(void 0!==(b=function(e){if(\"number\"==typeof e.status&&e.status>=400&&e.status<600)return e.status;if(\"number\"==typeof e.statusCode&&e.statusCode>=400&&e.statusCode<600)return e.statusCode;return}(n))&&(m=function(e){if(!e.headers||\"object\"!=typeof e.headers)return;for(var t=Object.create(null),n=Object.keys(e.headers),r=0;r<n.length;r++){var o=n[r];t[o]=e.headers[o]}return t}(n)),void 0===b&&(b=function(e){var t=e.statusCode;(\"number\"!=typeof t||t<400||t>599)&&(t=500);return t}(t)),v=function(e,t,n){var r;\"production\"!==n&&((r=e.stack)||\"function\"!=typeof e.toString||(r=e.toString()));return r||c[t]}(n,b,g)):(b=404,v=\"Cannot \"+e.method+\" \"+o(a.original(e).pathname)),r(\"default %s\",b),n&&y&&d(y,n,e,t),h(t))return r(\"cannot %d after headers sent\",b),void e.socket.destroy();!function(e,t,n,r,o){function a(){var s=function(e){return'<!DOCTYPE html>\\n<html lang=\"en\">\\n<head>\\n<meta charset=\"utf-8\">\\n<title>Error</title>\\n</head>\\n<body>\\n<pre>'+i(e).replace(p,\"<br>\").replace(u,\" &nbsp;\")+\"</pre>\\n</body>\\n</html>\\n\"}(o);t.statusCode=n,t.statusMessage=c[n],function(e,t){if(!t)return;for(var n=Object.keys(t),r=0;r<n.length;r++){var o=n[r];e.setHeader(o,t[o])}}(t,r),t.setHeader(\"Content-Security-Policy\",\"default-src 'self'\"),t.setHeader(\"X-Content-Type-Options\",\"nosniff\"),t.setHeader(\"Content-Type\",\"text/html; charset=utf-8\"),t.setHeader(\"Content-Length\",Buffer.byteLength(s,\"utf8\")),\"HEAD\"!==e.method?t.end(s,\"utf8\"):t.end()}if(f(e))return void a();l(e),s(e,a),e.resume()}(e,t,b,m,v)}else r(\"cannot 404 after headers sent\")}}},function(e,t,n){\"use strict\";var r=n(243),o=n(153),i=n(117),s=n(241),a=n(150),c=n(20)(\"express:application\"),l=n(240),u=n(86),p=n(35).compileETag,d=n(35).compileQueryParser,f=n(35).compileTrust,h=n(31)(\"express\"),m=n(87),g=n(85),y=n(21).resolve,v=n(116),b=Array.prototype.slice,x=e.exports={};x.init=function(){this.cache={},this.engines={},this.settings={},this.defaultConfiguration()},x.defaultConfiguration=function(){var e=\"production\";this.enable(\"x-powered-by\"),this.set(\"etag\",\"weak\"),this.set(\"env\",e),this.set(\"query parser\",\"extended\"),this.set(\"subdomain offset\",2),this.set(\"trust proxy\",!1),Object.defineProperty(this.settings,\"@@symbol:trust_proxy_default\",{configurable:!0,value:!0}),c(\"booting in %s mode\",e),this.on(\"mount\",function(e){!0===this.settings[\"@@symbol:trust_proxy_default\"]&&\"function\"==typeof e.settings[\"trust proxy fn\"]&&(delete this.settings[\"trust proxy\"],delete this.settings[\"trust proxy fn\"]),v(this.request,e.request),v(this.response,e.response),v(this.engines,e.engines),v(this.settings,e.settings)}),this.locals=Object.create(null),this.mountpath=\"/\",this.locals.settings=this.settings,this.set(\"view\",l),this.set(\"views\",y(\"views\")),this.set(\"jsonp callback name\",\"callback\"),this.enable(\"view cache\"),Object.defineProperty(this,\"router\",{get:function(){throw new Error(\"'app.router' is deprecated!\\nPlease see the 3.x to 4.x migration guide for details on how to update your app.\")}})},x.lazyrouter=function(){this._router||(this._router=new o({caseSensitive:this.enabled(\"case sensitive routing\"),strict:this.enabled(\"strict routing\")}),this._router.use(a(this.get(\"query parser fn\"))),this._router.use(s.init(this)))},x.handle=function(e,t,n){var o=this._router,i=n||r(e,t,{env:this.get(\"env\"),onerror:function(e){\"test\"!==this.get(\"env\")&&console.error(e.stack||e.toString())}.bind(this)});if(!o)return c(\"no routes defined on app\"),void i();o.handle(e,t,i)},x.use=function(e){var t=0,n=\"/\";if(\"function\"!=typeof e){for(var r=e;Array.isArray(r)&&0!==r.length;)r=r[0];\"function\"!=typeof r&&(t=1,n=e)}var o=m(b.call(arguments,t));if(0===o.length)throw new TypeError(\"app.use() requires a middleware function\");this.lazyrouter();var i=this._router;return o.forEach(function(e){if(!e||!e.handle||!e.set)return i.use(n,e);c(\".use app under %s\",n),e.mountpath=n,e.parent=this,i.use(n,function(t,n,r){var o=t.app;e.handle(t,n,function(e){v(t,o.request),v(n,o.response),r(e)})}),e.emit(\"mount\",this)},this),this},x.route=function(e){return this.lazyrouter(),this._router.route(e)},x.engine=function(e,t){if(\"function\"!=typeof t)throw new Error(\"callback function required\");var n=\".\"!==e[0]?\".\"+e:e;return this.engines[n]=t,this},x.param=function(e,t){if(this.lazyrouter(),Array.isArray(e)){for(var n=0;n<e.length;n++)this.param(e[n],t);return this}return this._router.param(e,t),this},x.set=function(e,t){if(1===arguments.length)return this.settings[e];switch(c('set \"%s\" to %o',e,t),this.settings[e]=t,e){case\"etag\":this.set(\"etag fn\",p(t));break;case\"query parser\":this.set(\"query parser fn\",d(t));break;case\"trust proxy\":this.set(\"trust proxy fn\",f(t)),Object.defineProperty(this.settings,\"@@symbol:trust_proxy_default\",{configurable:!0,value:!1})}return this},x.path=function(){return this.parent?this.parent.path()+this.mountpath:\"\"},x.enabled=function(e){return Boolean(this.set(e))},x.disabled=function(e){return!this.set(e)},x.enable=function(e){return this.set(e,!0)},x.disable=function(e){return this.set(e,!1)},i.forEach(function(e){x[e]=function(t){if(\"get\"===e&&1===arguments.length)return this.set(t);this.lazyrouter();var n=this._router.route(t);return n[e].apply(n,b.call(arguments,1)),this}}),x.all=function(e){this.lazyrouter();for(var t=this._router.route(e),n=b.call(arguments,1),r=0;r<i.length;r++)t[i[r]].apply(t,n);return this},x.del=h.function(x.delete,\"app.del: Use app.delete instead\"),x.render=function(e,t,n){var r,o=this.cache,i=n,s=this.engines,a=t,c={};if(\"function\"==typeof t&&(i=t,a={}),g(c,this.locals),a._locals&&g(c,a._locals),g(c,a),null==c.cache&&(c.cache=this.enabled(\"view cache\")),c.cache&&(r=o[e]),!r){if(!(r=new(this.get(\"view\"))(e,{defaultEngine:this.get(\"view engine\"),root:this.get(\"views\"),engines:s})).path){var l=Array.isArray(r.root)&&r.root.length>1?'directories \"'+r.root.slice(0,-1).join('\", \"')+'\" or \"'+r.root[r.root.length-1]+'\"':'directory \"'+r.root+'\"',u=new Error('Failed to lookup view \"'+e+'\" in views '+l);return u.view=r,i(u)}c.cache&&(o[e]=r)}!function(e,t,n){try{e.render(t,n)}catch(e){n(e)}}(r,c,i)},x.listen=function(){var e=u.createServer(this);return e.listen.apply(e,arguments)}},function(e,t,n){\"use strict\";e.exports=function(e,t,n){if(!e)throw new TypeError(\"argument dest is required\");if(!t)throw new TypeError(\"argument src is required\");void 0===n&&(n=!0);return Object.getOwnPropertyNames(t).forEach(function(o){if(n||!r.call(e,o)){var i=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,i)}}),e};var r=Object.prototype.hasOwnProperty},function(e,t,n){\"use strict\";var r=n(155),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:\"&\",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\\.([^.[]+)/g,\"[$1]\"):e,i=/(\\[[^[\\]]*])/g,s=/(\\[[^[\\]]*])/.exec(r),a=s?r.slice(0,s.index):r,c=[];if(a){if(!n.plainObjects&&o.call(Object.prototype,a)&&!n.allowPrototypes)return;c.push(a)}for(var l=0;null!==(s=i.exec(r))&&l<n.depth;){if(l+=1,!n.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(s[1])}return s&&c.push(\"[\"+r.slice(s.index)+\"]\"),function(e,t,n){for(var r=t,o=e.length-1;o>=0;--o){var i,s=e[o];if(\"[]\"===s)i=(i=[]).concat(r);else{i=n.plainObjects?Object.create(null):{};var a=\"[\"===s.charAt(0)&&\"]\"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(a,10);!isNaN(c)&&s!==a&&String(c)===a&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(i=[])[c]=r:i[a]=r}r=i}return r}(c,t,n)}};e.exports=function(e,t){var n=t?r.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&\"function\"!=typeof n.decoder)throw new TypeError(\"Decoder has to be a function.\");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter=\"string\"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:i.delimiter,n.depth=\"number\"==typeof n.depth?n.depth:i.depth,n.arrayLimit=\"number\"==typeof n.arrayLimit?n.arrayLimit:i.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder=\"function\"==typeof n.decoder?n.decoder:i.decoder,n.allowDots=\"boolean\"==typeof n.allowDots?n.allowDots:i.allowDots,n.plainObjects=\"boolean\"==typeof n.plainObjects?n.plainObjects:i.plainObjects,n.allowPrototypes=\"boolean\"==typeof n.allowPrototypes?n.allowPrototypes:i.allowPrototypes,n.parameterLimit=\"number\"==typeof n.parameterLimit?n.parameterLimit:i.parameterLimit,n.strictNullHandling=\"boolean\"==typeof n.strictNullHandling?n.strictNullHandling:i.strictNullHandling,\"\"===e||null===e||void 0===e)return n.plainObjects?Object.create(null):{};for(var a=\"string\"==typeof e?function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\\?/,\"\"):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,a=r.split(t.delimiter,s),c=0;c<a.length;++c){var l,u,p=a[c],d=p.indexOf(\"]=\"),f=-1===d?p.indexOf(\"=\"):d+1;-1===f?(l=t.decoder(p,i.decoder),u=t.strictNullHandling?null:\"\"):(l=t.decoder(p.slice(0,f),i.decoder),u=t.decoder(p.slice(f+1),i.decoder)),o.call(n,l)?n[l]=[].concat(n[l]).concat(u):n[l]=u}return n}(e,n):e,c=n.plainObjects?Object.create(null):{},l=Object.keys(a),u=0;u<l.length;++u){var p=l[u],d=s(p,a[p],n);c=r.merge(c,d,n)}return r.compact(c)}},function(e,t,n){\"use strict\";var r=n(155),o=n(154),i={brackets:function(e){return e+\"[]\"},indices:function(e,t){return e+\"[\"+t+\"]\"},repeat:function(e){return e}},s=Date.prototype.toISOString,a={delimiter:\"&\",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},c=function e(t,n,o,i,s,c,l,u,p,d,f,h){var m=t;if(\"function\"==typeof l)m=l(n,m);else if(m instanceof Date)m=d(m);else if(null===m){if(i)return c&&!h?c(n,a.encoder):n;m=\"\"}if(\"string\"==typeof m||\"number\"==typeof m||\"boolean\"==typeof m||r.isBuffer(m))return c?[f(h?n:c(n,a.encoder))+\"=\"+f(c(m,a.encoder))]:[f(n)+\"=\"+f(String(m))];var g,y=[];if(void 0===m)return y;if(Array.isArray(l))g=l;else{var v=Object.keys(m);g=u?v.sort(u):v}for(var b=0;b<g.length;++b){var x=g[b];s&&null===m[x]||(y=Array.isArray(m)?y.concat(e(m[x],o(n,x),o,i,s,c,l,u,p,d,f,h)):y.concat(e(m[x],n+(p?\".\"+x:\"[\"+x+\"]\"),o,i,s,c,l,u,p,d,f,h)))}return y};e.exports=function(e,t){var n=e,s=t?r.assign({},t):{};if(null!==s.encoder&&void 0!==s.encoder&&\"function\"!=typeof s.encoder)throw new TypeError(\"Encoder has to be a function.\");var l=void 0===s.delimiter?a.delimiter:s.delimiter,u=\"boolean\"==typeof s.strictNullHandling?s.strictNullHandling:a.strictNullHandling,p=\"boolean\"==typeof s.skipNulls?s.skipNulls:a.skipNulls,d=\"boolean\"==typeof s.encode?s.encode:a.encode,f=\"function\"==typeof s.encoder?s.encoder:a.encoder,h=\"function\"==typeof s.sort?s.sort:null,m=void 0!==s.allowDots&&s.allowDots,g=\"function\"==typeof s.serializeDate?s.serializeDate:a.serializeDate,y=\"boolean\"==typeof s.encodeValuesOnly?s.encodeValuesOnly:a.encodeValuesOnly;if(void 0===s.format)s.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,s.format))throw new TypeError(\"Unknown format option provided.\");var v,b,x=o.formatters[s.format];\"function\"==typeof s.filter?n=(b=s.filter)(\"\",n):Array.isArray(s.filter)&&(v=b=s.filter);var w,S=[];if(\"object\"!=typeof n||null===n)return\"\";w=s.arrayFormat in i?s.arrayFormat:\"indices\"in s?s.indices?\"indices\":\"repeat\":\"indices\";var k=i[w];v||(v=Object.keys(n)),h&&v.sort(h);for(var O=0;O<v.length;++O){var C=v[O];p&&null===n[C]||(S=S.concat(c(n[C],C,k,u,p,d?f:null,b,h,m,g,x,y)))}var _=S.join(l),E=!0===s.addQueryPrefix?\"?\":\"\";return _.length>0?E+_:\"\"}},function(e,t,n){\"use strict\";var r=n(62),o=n(94),i=n(61),s=n(20)(\"body-parser:urlencoded\"),a=n(31)(\"body-parser\"),c=n(91),l=n(60);e.exports=function(e){var t=e||{};void 0===t.extended&&a(\"undefined extended: provide extended option\");var n=!1!==t.extended,u=!1!==t.inflate,f=\"number\"!=typeof t.limit?r.parse(t.limit||\"100kb\"):t.limit,h=t.type||\"application/x-www-form-urlencoded\",m=t.verify||!1;if(!1!==m&&\"function\"!=typeof m)throw new TypeError(\"option verify must be function\");var g=n?function(e){var t=void 0!==e.parameterLimit?e.parameterLimit:1e3,n=d(\"qs\");if(isNaN(t)||t<1)throw new TypeError(\"option parameterLimit must be a positive number\");isFinite(t)&&(t|=0);return function(e){var r=p(e,t);if(void 0===r)throw s(\"too many parameters\"),i(413,\"too many parameters\",{type:\"parameters.too.many\"});var o=Math.max(100,r);return s(\"parse extended urlencoding\"),n(e,{allowPrototypes:!0,arrayLimit:o,depth:1/0,parameterLimit:t})}}(t):function(e){var t=void 0!==e.parameterLimit?e.parameterLimit:1e3,n=d(\"querystring\");if(isNaN(t)||t<1)throw new TypeError(\"option parameterLimit must be a positive number\");isFinite(t)&&(t|=0);return function(e){var r=p(e,t);if(void 0===r)throw s(\"too many parameters\"),i(413,\"too many parameters\",{type:\"parameters.too.many\"});return s(\"parse urlencoding\"),n(e,void 0,void 0,{maxKeys:t})}}(t),y=\"function\"!=typeof h?function(e){return function(t){return Boolean(l(t,e))}}(h):h;function v(e){return e.length?g(e):{}}return function(e,t,n){if(e._body)return s(\"body already parsed\"),void n();if(e.body=e.body||{},!l.hasBody(e))return s(\"skip empty body\"),void n();if(s(\"content-type %j\",e.headers[\"content-type\"]),!y(e))return s(\"skip parsing\"),void n();var r=function(e){try{return(o.parse(e).parameters.charset||\"\").toLowerCase()}catch(e){return}}(e)||\"utf-8\";if(\"utf-8\"!==r)return s(\"invalid charset\"),void n(i(415,'unsupported charset \"'+r.toUpperCase()+'\"',{charset:r,type:\"charset.unsupported\"}));c(e,t,n,v,s,{debug:s,encoding:r,inflate:u,limit:f,verify:m})}};var u=Object.create(null);function p(e,t){for(var n=0,r=0;-1!==(r=e.indexOf(\"&\",r));)if(r++,++n===t)return;return n}function d(e){var t=u[e];if(void 0!==t)return t.parse;switch(e){case\"qs\":t=n(119);break;case\"querystring\":t=n(118)}return u[e]=t,t.parse}},function(e,t,n){\"use strict\";var r=n(62),o=n(94),i=n(20)(\"body-parser:text\"),s=n(91),a=n(60);e.exports=function(e){var t=e||{},n=t.defaultCharset||\"utf-8\",c=!1!==t.inflate,l=\"number\"!=typeof t.limit?r.parse(t.limit||\"100kb\"):t.limit,u=t.type||\"text/plain\",p=t.verify||!1;if(!1!==p&&\"function\"!=typeof p)throw new TypeError(\"option verify must be function\");var d=\"function\"!=typeof u?function(e){return function(t){return Boolean(a(t,e))}}(u):u;function f(e){return e}return function(e,t,r){if(e._body)return i(\"body already parsed\"),void r();if(e.body=e.body||{},!a.hasBody(e))return i(\"skip empty body\"),void r();if(i(\"content-type %j\",e.headers[\"content-type\"]),!d(e))return i(\"skip parsing\"),void r();var u=function(e){try{return(o.parse(e).parameters.charset||\"\").toLowerCase()}catch(e){return}}(e)||n;s(e,t,r,f,i,{encoding:u,inflate:c,limit:l,verify:p})}}},function(e,t,n){\"use strict\";var r=n(62),o=n(20)(\"body-parser:raw\"),i=n(91),s=n(60);e.exports=function(e){var t=e||{},n=!1!==t.inflate,a=\"number\"!=typeof t.limit?r.parse(t.limit||\"100kb\"):t.limit,c=t.type||\"application/octet-stream\",l=t.verify||!1;if(!1!==l&&\"function\"!=typeof l)throw new TypeError(\"option verify must be function\");var u=\"function\"!=typeof c?function(e){return function(t){return Boolean(s(t,e))}}(c):c;function p(e){return e}return function(e,t,r){return e._body?(o(\"body already parsed\"),void r()):(e.body=e.body||{},s.hasBody(e)?(o(\"content-type %j\",e.headers[\"content-type\"]),u(e)?void i(e,t,r,p,o,{encoding:null,inflate:n,limit:a,verify:l}):(o(\"skip parsing\"),void r())):(o(\"skip empty body\"),void r()))}}},function(e){e.exports={\"application/1d-interleaved-parityfec\":{source:\"iana\"},\"application/3gpdash-qoe-report+xml\":{source:\"iana\"},\"application/3gpp-ims+xml\":{source:\"iana\"},\"application/a2l\":{source:\"iana\"},\"application/activemessage\":{source:\"iana\"},\"application/alto-costmap+json\":{source:\"iana\",compressible:!0},\"application/alto-costmapfilter+json\":{source:\"iana\",compressible:!0},\"application/alto-directory+json\":{source:\"iana\",compressible:!0},\"application/alto-endpointcost+json\":{source:\"iana\",compressible:!0},\"application/alto-endpointcostparams+json\":{source:\"iana\",compressible:!0},\"application/alto-endpointprop+json\":{source:\"iana\",compressible:!0},\"application/alto-endpointpropparams+json\":{source:\"iana\",compressible:!0},\"application/alto-error+json\":{source:\"iana\",compressible:!0},\"application/alto-networkmap+json\":{source:\"iana\",compressible:!0},\"application/alto-networkmapfilter+json\":{source:\"iana\",compressible:!0},\"application/aml\":{source:\"iana\"},\"application/andrew-inset\":{source:\"iana\",extensions:[\"ez\"]},\"application/applefile\":{source:\"iana\"},\"application/applixware\":{source:\"apache\",extensions:[\"aw\"]},\"application/atf\":{source:\"iana\"},\"application/atfx\":{source:\"iana\"},\"application/atom+xml\":{source:\"iana\",compressible:!0,extensions:[\"atom\"]},\"application/atomcat+xml\":{source:\"iana\",extensions:[\"atomcat\"]},\"application/atomdeleted+xml\":{source:\"iana\"},\"application/atomicmail\":{source:\"iana\"},\"application/atomsvc+xml\":{source:\"iana\",extensions:[\"atomsvc\"]},\"application/atxml\":{source:\"iana\"},\"application/auth-policy+xml\":{source:\"iana\"},\"application/bacnet-xdd+zip\":{source:\"iana\"},\"application/batch-smtp\":{source:\"iana\"},\"application/bdoc\":{compressible:!1,extensions:[\"bdoc\"]},\"application/beep+xml\":{source:\"iana\"},\"application/calendar+json\":{source:\"iana\",compressible:!0},\"application/calendar+xml\":{source:\"iana\"},\"application/call-completion\":{source:\"iana\"},\"application/cals-1840\":{source:\"iana\"},\"application/cbor\":{source:\"iana\"},\"application/cccex\":{source:\"iana\"},\"application/ccmp+xml\":{source:\"iana\"},\"application/ccxml+xml\":{source:\"iana\",extensions:[\"ccxml\"]},\"application/cdfx+xml\":{source:\"iana\"},\"application/cdmi-capability\":{source:\"iana\",extensions:[\"cdmia\"]},\"application/cdmi-container\":{source:\"iana\",extensions:[\"cdmic\"]},\"application/cdmi-domain\":{source:\"iana\",extensions:[\"cdmid\"]},\"application/cdmi-object\":{source:\"iana\",extensions:[\"cdmio\"]},\"application/cdmi-queue\":{source:\"iana\",extensions:[\"cdmiq\"]},\"application/cdni\":{source:\"iana\"},\"application/cea\":{source:\"iana\"},\"application/cea-2018+xml\":{source:\"iana\"},\"application/cellml+xml\":{source:\"iana\"},\"application/cfw\":{source:\"iana\"},\"application/clue_info+xml\":{source:\"iana\"},\"application/cms\":{source:\"iana\"},\"application/cnrp+xml\":{source:\"iana\"},\"application/coap-group+json\":{source:\"iana\",compressible:!0},\"application/coap-payload\":{source:\"iana\"},\"application/commonground\":{source:\"iana\"},\"application/conference-info+xml\":{source:\"iana\"},\"application/cose\":{source:\"iana\"},\"application/cose-key\":{source:\"iana\"},\"application/cose-key-set\":{source:\"iana\"},\"application/cpl+xml\":{source:\"iana\"},\"application/csrattrs\":{source:\"iana\"},\"application/csta+xml\":{source:\"iana\"},\"application/cstadata+xml\":{source:\"iana\"},\"application/csvm+json\":{source:\"iana\",compressible:!0},\"application/cu-seeme\":{source:\"apache\",extensions:[\"cu\"]},\"application/cybercash\":{source:\"iana\"},\"application/dart\":{compressible:!0},\"application/dash+xml\":{source:\"iana\",extensions:[\"mpd\"]},\"application/dashdelta\":{source:\"iana\"},\"application/davmount+xml\":{source:\"iana\",extensions:[\"davmount\"]},\"application/dca-rft\":{source:\"iana\"},\"application/dcd\":{source:\"iana\"},\"application/dec-dx\":{source:\"iana\"},\"application/dialog-info+xml\":{source:\"iana\"},\"application/dicom\":{source:\"iana\"},\"application/dicom+json\":{source:\"iana\",compressible:!0},\"application/dicom+xml\":{source:\"iana\"},\"application/dii\":{source:\"iana\"},\"application/dit\":{source:\"iana\"},\"application/dns\":{source:\"iana\"},\"application/docbook+xml\":{source:\"apache\",extensions:[\"dbk\"]},\"application/dskpp+xml\":{source:\"iana\"},\"application/dssc+der\":{source:\"iana\",extensions:[\"dssc\"]},\"application/dssc+xml\":{source:\"iana\",extensions:[\"xdssc\"]},\"application/dvcs\":{source:\"iana\"},\"application/ecmascript\":{source:\"iana\",compressible:!0,extensions:[\"ecma\"]},\"application/edi-consent\":{source:\"iana\"},\"application/edi-x12\":{source:\"iana\",compressible:!1},\"application/edifact\":{source:\"iana\",compressible:!1},\"application/efi\":{source:\"iana\"},\"application/emergencycalldata.comment+xml\":{source:\"iana\"},\"application/emergencycalldata.control+xml\":{source:\"iana\"},\"application/emergencycalldata.deviceinfo+xml\":{source:\"iana\"},\"application/emergencycalldata.ecall.msd\":{source:\"iana\"},\"application/emergencycalldata.providerinfo+xml\":{source:\"iana\"},\"application/emergencycalldata.serviceinfo+xml\":{source:\"iana\"},\"application/emergencycalldata.subscriberinfo+xml\":{source:\"iana\"},\"application/emergencycalldata.veds+xml\":{source:\"iana\"},\"application/emma+xml\":{source:\"iana\",extensions:[\"emma\"]},\"application/emotionml+xml\":{source:\"iana\"},\"application/encaprtp\":{source:\"iana\"},\"application/epp+xml\":{source:\"iana\"},\"application/epub+zip\":{source:\"iana\",extensions:[\"epub\"]},\"application/eshop\":{source:\"iana\"},\"application/exi\":{source:\"iana\",extensions:[\"exi\"]},\"application/fastinfoset\":{source:\"iana\"},\"application/fastsoap\":{source:\"iana\"},\"application/fdt+xml\":{source:\"iana\"},\"application/fhir+xml\":{source:\"iana\"},\"application/fido.trusted-apps+json\":{compressible:!0},\"application/fits\":{source:\"iana\"},\"application/font-sfnt\":{source:\"iana\"},\"application/font-tdpfr\":{source:\"iana\",extensions:[\"pfr\"]},\"application/font-woff\":{source:\"iana\",compressible:!1,extensions:[\"woff\"]},\"application/framework-attributes+xml\":{source:\"iana\"},\"application/geo+json\":{source:\"iana\",compressible:!0,extensions:[\"geojson\"]},\"application/geo+json-seq\":{source:\"iana\"},\"application/geoxacml+xml\":{source:\"iana\"},\"application/gml+xml\":{source:\"iana\",extensions:[\"gml\"]},\"application/gpx+xml\":{source:\"apache\",extensions:[\"gpx\"]},\"application/gxf\":{source:\"apache\",extensions:[\"gxf\"]},\"application/gzip\":{source:\"iana\",compressible:!1,extensions:[\"gz\"]},\"application/h224\":{source:\"iana\"},\"application/held+xml\":{source:\"iana\"},\"application/hjson\":{extensions:[\"hjson\"]},\"application/http\":{source:\"iana\"},\"application/hyperstudio\":{source:\"iana\",extensions:[\"stk\"]},\"application/ibe-key-request+xml\":{source:\"iana\"},\"application/ibe-pkg-reply+xml\":{source:\"iana\"},\"application/ibe-pp-data\":{source:\"iana\"},\"application/iges\":{source:\"iana\"},\"application/im-iscomposing+xml\":{source:\"iana\"},\"application/index\":{source:\"iana\"},\"application/index.cmd\":{source:\"iana\"},\"application/index.obj\":{source:\"iana\"},\"application/index.response\":{source:\"iana\"},\"application/index.vnd\":{source:\"iana\"},\"application/inkml+xml\":{source:\"iana\",extensions:[\"ink\",\"inkml\"]},\"application/iotp\":{source:\"iana\"},\"application/ipfix\":{source:\"iana\",extensions:[\"ipfix\"]},\"application/ipp\":{source:\"iana\"},\"application/isup\":{source:\"iana\"},\"application/its+xml\":{source:\"iana\"},\"application/java-archive\":{source:\"apache\",compressible:!1,extensions:[\"jar\",\"war\",\"ear\"]},\"application/java-serialized-object\":{source:\"apache\",compressible:!1,extensions:[\"ser\"]},\"application/java-vm\":{source:\"apache\",compressible:!1,extensions:[\"class\"]},\"application/javascript\":{source:\"iana\",charset:\"UTF-8\",compressible:!0,extensions:[\"js\",\"mjs\"]},\"application/jf2feed+json\":{source:\"iana\",compressible:!0},\"application/jose\":{source:\"iana\"},\"application/jose+json\":{source:\"iana\",compressible:!0},\"application/jrd+json\":{source:\"iana\",compressible:!0},\"application/json\":{source:\"iana\",charset:\"UTF-8\",compressible:!0,extensions:[\"json\",\"map\"]},\"application/json-patch+json\":{source:\"iana\",compressible:!0},\"application/json-seq\":{source:\"iana\"},\"application/json5\":{extensions:[\"json5\"]},\"application/jsonml+json\":{source:\"apache\",compressible:!0,extensions:[\"jsonml\"]},\"application/jwk+json\":{source:\"iana\",compressible:!0},\"application/jwk-set+json\":{source:\"iana\",compressible:!0},\"application/jwt\":{source:\"iana\"},\"application/kpml-request+xml\":{source:\"iana\"},\"application/kpml-response+xml\":{source:\"iana\"},\"application/ld+json\":{source:\"iana\",compressible:!0,extensions:[\"jsonld\"]},\"application/lgr+xml\":{source:\"iana\"},\"application/link-format\":{source:\"iana\"},\"application/load-control+xml\":{source:\"iana\"},\"application/lost+xml\":{source:\"iana\",extensions:[\"lostxml\"]},\"application/lostsync+xml\":{source:\"iana\"},\"application/lxf\":{source:\"iana\"},\"application/mac-binhex40\":{source:\"iana\",extensions:[\"hqx\"]},\"application/mac-compactpro\":{source:\"apache\",extensions:[\"cpt\"]},\"application/macwriteii\":{source:\"iana\"},\"application/mads+xml\":{source:\"iana\",extensions:[\"mads\"]},\"application/manifest+json\":{charset:\"UTF-8\",compressible:!0,extensions:[\"webmanifest\"]},\"application/marc\":{source:\"iana\",extensions:[\"mrc\"]},\"application/marcxml+xml\":{source:\"iana\",extensions:[\"mrcx\"]},\"application/mathematica\":{source:\"iana\",extensions:[\"ma\",\"nb\",\"mb\"]},\"application/mathml+xml\":{source:\"iana\",extensions:[\"mathml\"]},\"application/mathml-content+xml\":{source:\"iana\"},\"application/mathml-presentation+xml\":{source:\"iana\"},\"application/mbms-associated-procedure-description+xml\":{source:\"iana\"},\"application/mbms-deregister+xml\":{source:\"iana\"},\"application/mbms-envelope+xml\":{source:\"iana\"},\"application/mbms-msk+xml\":{source:\"iana\"},\"application/mbms-msk-response+xml\":{source:\"iana\"},\"application/mbms-protection-description+xml\":{source:\"iana\"},\"application/mbms-reception-report+xml\":{source:\"iana\"},\"application/mbms-register+xml\":{source:\"iana\"},\"application/mbms-register-response+xml\":{source:\"iana\"},\"application/mbms-schedule+xml\":{source:\"iana\"},\"application/mbms-user-service-description+xml\":{source:\"iana\"},\"application/mbox\":{source:\"iana\",extensions:[\"mbox\"]},\"application/media-policy-dataset+xml\":{source:\"iana\"},\"application/media_control+xml\":{source:\"iana\"},\"application/mediaservercontrol+xml\":{source:\"iana\",extensions:[\"mscml\"]},\"application/merge-patch+json\":{source:\"iana\",compressible:!0},\"application/metalink+xml\":{source:\"apache\",extensions:[\"metalink\"]},\"application/metalink4+xml\":{source:\"iana\",extensions:[\"meta4\"]},\"application/mets+xml\":{source:\"iana\",extensions:[\"mets\"]},\"application/mf4\":{source:\"iana\"},\"application/mikey\":{source:\"iana\"},\"application/mmt-usd+xml\":{source:\"iana\"},\"application/mods+xml\":{source:\"iana\",extensions:[\"mods\"]},\"application/moss-keys\":{source:\"iana\"},\"application/moss-signature\":{source:\"iana\"},\"application/mosskey-data\":{source:\"iana\"},\"application/mosskey-request\":{source:\"iana\"},\"application/mp21\":{source:\"iana\",extensions:[\"m21\",\"mp21\"]},\"application/mp4\":{source:\"iana\",extensions:[\"mp4s\",\"m4p\"]},\"application/mpeg4-generic\":{source:\"iana\"},\"application/mpeg4-iod\":{source:\"iana\"},\"application/mpeg4-iod-xmt\":{source:\"iana\"},\"application/mrb-consumer+xml\":{source:\"iana\"},\"application/mrb-publish+xml\":{source:\"iana\"},\"application/msc-ivr+xml\":{source:\"iana\"},\"application/msc-mixer+xml\":{source:\"iana\"},\"application/msword\":{source:\"iana\",compressible:!1,extensions:[\"doc\",\"dot\"]},\"application/mud+json\":{source:\"iana\",compressible:!0},\"application/mxf\":{source:\"iana\",extensions:[\"mxf\"]},\"application/n-quads\":{source:\"iana\"},\"application/n-triples\":{source:\"iana\"},\"application/nasdata\":{source:\"iana\"},\"application/news-checkgroups\":{source:\"iana\"},\"application/news-groupinfo\":{source:\"iana\"},\"application/news-transmission\":{source:\"iana\"},\"application/nlsml+xml\":{source:\"iana\"},\"application/node\":{source:\"iana\"},\"application/nss\":{source:\"iana\"},\"application/ocsp-request\":{source:\"iana\"},\"application/ocsp-response\":{source:\"iana\"},\"application/octet-stream\":{source:\"iana\",compressible:!1,extensions:[\"bin\",\"dms\",\"lrf\",\"mar\",\"so\",\"dist\",\"distz\",\"pkg\",\"bpk\",\"dump\",\"elc\",\"deploy\",\"exe\",\"dll\",\"deb\",\"dmg\",\"iso\",\"img\",\"msi\",\"msp\",\"msm\",\"buffer\"]},\"application/oda\":{source:\"iana\",extensions:[\"oda\"]},\"application/odx\":{source:\"iana\"},\"application/oebps-package+xml\":{source:\"iana\",extensions:[\"opf\"]},\"application/ogg\":{source:\"iana\",compressible:!1,extensions:[\"ogx\"]},\"application/omdoc+xml\":{source:\"apache\",extensions:[\"omdoc\"]},\"application/onenote\":{source:\"apache\",extensions:[\"onetoc\",\"onetoc2\",\"onetmp\",\"onepkg\"]},\"application/oxps\":{source:\"iana\",extensions:[\"oxps\"]},\"application/p2p-overlay+xml\":{source:\"iana\"},\"application/parityfec\":{source:\"iana\"},\"application/passport\":{source:\"iana\"},\"application/patch-ops-error+xml\":{source:\"iana\",extensions:[\"xer\"]},\"application/pdf\":{source:\"iana\",compressible:!1,extensions:[\"pdf\"]},\"application/pdx\":{source:\"iana\"},\"application/pgp-encrypted\":{source:\"iana\",compressible:!1,extensions:[\"pgp\"]},\"application/pgp-keys\":{source:\"iana\"},\"application/pgp-signature\":{source:\"iana\",extensions:[\"asc\",\"sig\"]},\"application/pics-rules\":{source:\"apache\",extensions:[\"prf\"]},\"application/pidf+xml\":{source:\"iana\"},\"application/pidf-diff+xml\":{source:\"iana\"},\"application/pkcs10\":{source:\"iana\",extensions:[\"p10\"]},\"application/pkcs12\":{source:\"iana\"},\"application/pkcs7-mime\":{source:\"iana\",extensions:[\"p7m\",\"p7c\"]},\"application/pkcs7-signature\":{source:\"iana\",extensions:[\"p7s\"]},\"application/pkcs8\":{source:\"iana\",extensions:[\"p8\"]},\"application/pkcs8-encrypted\":{source:\"iana\"},\"application/pkix-attr-cert\":{source:\"iana\",extensions:[\"ac\"]},\"application/pkix-cert\":{source:\"iana\",extensions:[\"cer\"]},\"application/pkix-crl\":{source:\"iana\",extensions:[\"crl\"]},\"application/pkix-pkipath\":{source:\"iana\",extensions:[\"pkipath\"]},\"application/pkixcmp\":{source:\"iana\",extensions:[\"pki\"]},\"application/pls+xml\":{source:\"iana\",extensions:[\"pls\"]},\"application/poc-settings+xml\":{source:\"iana\"},\"application/postscript\":{source:\"iana\",compressible:!0,extensions:[\"ai\",\"eps\",\"ps\"]},\"application/ppsp-tracker+json\":{source:\"iana\",compressible:!0},\"application/problem+json\":{source:\"iana\",compressible:!0},\"application/problem+xml\":{source:\"iana\"},\"application/provenance+xml\":{source:\"iana\"},\"application/prs.alvestrand.titrax-sheet\":{source:\"iana\"},\"application/prs.cww\":{source:\"iana\",extensions:[\"cww\"]},\"application/prs.hpub+zip\":{source:\"iana\"},\"application/prs.nprend\":{source:\"iana\"},\"application/prs.plucker\":{source:\"iana\"},\"application/prs.rdf-xml-crypt\":{source:\"iana\"},\"application/prs.xsf+xml\":{source:\"iana\"},\"application/pskc+xml\":{source:\"iana\",extensions:[\"pskcxml\"]},\"application/qsig\":{source:\"iana\"},\"application/raml+yaml\":{compressible:!0,extensions:[\"raml\"]},\"application/raptorfec\":{source:\"iana\"},\"application/rdap+json\":{source:\"iana\",compressible:!0},\"application/rdf+xml\":{source:\"iana\",compressible:!0,extensions:[\"rdf\"]},\"application/reginfo+xml\":{source:\"iana\",extensions:[\"rif\"]},\"application/relax-ng-compact-syntax\":{source:\"iana\",extensions:[\"rnc\"]},\"application/remote-printing\":{source:\"iana\"},\"application/reputon+json\":{source:\"iana\",compressible:!0},\"application/resource-lists+xml\":{source:\"iana\",extensions:[\"rl\"]},\"application/resource-lists-diff+xml\":{source:\"iana\",extensions:[\"rld\"]},\"application/rfc+xml\":{source:\"iana\"},\"application/riscos\":{source:\"iana\"},\"application/rlmi+xml\":{source:\"iana\"},\"application/rls-services+xml\":{source:\"iana\",extensions:[\"rs\"]},\"application/route-apd+xml\":{source:\"iana\"},\"application/route-s-tsid+xml\":{source:\"iana\"},\"application/route-usd+xml\":{source:\"iana\"},\"application/rpki-ghostbusters\":{source:\"iana\",extensions:[\"gbr\"]},\"application/rpki-manifest\":{source:\"iana\",extensions:[\"mft\"]},\"application/rpki-publication\":{source:\"iana\"},\"application/rpki-roa\":{source:\"iana\",extensions:[\"roa\"]},\"application/rpki-updown\":{source:\"iana\"},\"application/rsd+xml\":{source:\"apache\",extensions:[\"rsd\"]},\"application/rss+xml\":{source:\"apache\",compressible:!0,extensions:[\"rss\"]},\"application/rtf\":{source:\"iana\",compressible:!0,extensions:[\"rtf\"]},\"application/rtploopback\":{source:\"iana\"},\"application/rtx\":{source:\"iana\"},\"application/samlassertion+xml\":{source:\"iana\"},\"application/samlmetadata+xml\":{source:\"iana\"},\"application/sbml+xml\":{source:\"iana\",extensions:[\"sbml\"]},\"application/scaip+xml\":{source:\"iana\"},\"application/scim+json\":{source:\"iana\",compressible:!0},\"application/scvp-cv-request\":{source:\"iana\",extensions:[\"scq\"]},\"application/scvp-cv-response\":{source:\"iana\",extensions:[\"scs\"]},\"application/scvp-vp-request\":{source:\"iana\",extensions:[\"spq\"]},\"application/scvp-vp-response\":{source:\"iana\",extensions:[\"spp\"]},\"application/sdp\":{source:\"iana\",extensions:[\"sdp\"]},\"application/sep+xml\":{source:\"iana\"},\"application/sep-exi\":{source:\"iana\"},\"application/session-info\":{source:\"iana\"},\"application/set-payment\":{source:\"iana\"},\"application/set-payment-initiation\":{source:\"iana\",extensions:[\"setpay\"]},\"application/set-registration\":{source:\"iana\"},\"application/set-registration-initiation\":{source:\"iana\",extensions:[\"setreg\"]},\"application/sgml\":{source:\"iana\"},\"application/sgml-open-catalog\":{source:\"iana\"},\"application/shf+xml\":{source:\"iana\",extensions:[\"shf\"]},\"application/sieve\":{source:\"iana\"},\"application/simple-filter+xml\":{source:\"iana\"},\"application/simple-message-summary\":{source:\"iana\"},\"application/simplesymbolcontainer\":{source:\"iana\"},\"application/slate\":{source:\"iana\"},\"application/smil\":{source:\"iana\"},\"application/smil+xml\":{source:\"iana\",extensions:[\"smi\",\"smil\"]},\"application/smpte336m\":{source:\"iana\"},\"application/soap+fastinfoset\":{source:\"iana\"},\"application/soap+xml\":{source:\"iana\",compressible:!0},\"application/sparql-query\":{source:\"iana\",extensions:[\"rq\"]},\"application/sparql-results+xml\":{source:\"iana\",extensions:[\"srx\"]},\"application/spirits-event+xml\":{source:\"iana\"},\"application/sql\":{source:\"iana\"},\"application/srgs\":{source:\"iana\",extensions:[\"gram\"]},\"application/srgs+xml\":{source:\"iana\",extensions:[\"grxml\"]},\"application/sru+xml\":{source:\"iana\",extensions:[\"sru\"]},\"application/ssdl+xml\":{source:\"apache\",extensions:[\"ssdl\"]},\"application/ssml+xml\":{source:\"iana\",extensions:[\"ssml\"]},\"application/tamp-apex-update\":{source:\"iana\"},\"application/tamp-apex-update-confirm\":{source:\"iana\"},\"application/tamp-community-update\":{source:\"iana\"},\"application/tamp-community-update-confirm\":{source:\"iana\"},\"application/tamp-error\":{source:\"iana\"},\"application/tamp-sequence-adjust\":{source:\"iana\"},\"application/tamp-sequence-adjust-confirm\":{source:\"iana\"},\"application/tamp-status-query\":{source:\"iana\"},\"application/tamp-status-response\":{source:\"iana\"},\"application/tamp-update\":{source:\"iana\"},\"application/tamp-update-confirm\":{source:\"iana\"},\"application/tar\":{compressible:!0},\"application/tei+xml\":{source:\"iana\",extensions:[\"tei\",\"teicorpus\"]},\"application/thraud+xml\":{source:\"iana\",extensions:[\"tfi\"]},\"application/timestamp-query\":{source:\"iana\"},\"application/timestamp-reply\":{source:\"iana\"},\"application/timestamped-data\":{source:\"iana\",extensions:[\"tsd\"]},\"application/tnauthlist\":{source:\"iana\"},\"application/trig\":{source:\"iana\"},\"application/ttml+xml\":{source:\"iana\"},\"application/tve-trigger\":{source:\"iana\"},\"application/ulpfec\":{source:\"iana\"},\"application/urc-grpsheet+xml\":{source:\"iana\"},\"application/urc-ressheet+xml\":{source:\"iana\"},\"application/urc-targetdesc+xml\":{source:\"iana\"},\"application/urc-uisocketdesc+xml\":{source:\"iana\"},\"application/vcard+json\":{source:\"iana\",compressible:!0},\"application/vcard+xml\":{source:\"iana\"},\"application/vemmi\":{source:\"iana\"},\"application/vividence.scriptfile\":{source:\"apache\"},\"application/vnd.1000minds.decision-model+xml\":{source:\"iana\"},\"application/vnd.3gpp-prose+xml\":{source:\"iana\"},\"application/vnd.3gpp-prose-pc3ch+xml\":{source:\"iana\"},\"application/vnd.3gpp-v2x-local-service-information\":{source:\"iana\"},\"application/vnd.3gpp.access-transfer-events+xml\":{source:\"iana\"},\"application/vnd.3gpp.bsf+xml\":{source:\"iana\"},\"application/vnd.3gpp.gmop+xml\":{source:\"iana\"},\"application/vnd.3gpp.mcptt-affiliation-command+xml\":{source:\"iana\"},\"application/vnd.3gpp.mcptt-floor-request+xml\":{source:\"iana\"},\"application/vnd.3gpp.mcptt-info+xml\":{source:\"iana\"},\"application/vnd.3gpp.mcptt-location-info+xml\":{source:\"iana\"},\"application/vnd.3gpp.mcptt-mbms-usage-info+xml\":{source:\"iana\"},\"application/vnd.3gpp.mcptt-signed+xml\":{source:\"iana\"},\"application/vnd.3gpp.mid-call+xml\":{source:\"iana\"},\"application/vnd.3gpp.pic-bw-large\":{source:\"iana\",extensions:[\"plb\"]},\"application/vnd.3gpp.pic-bw-small\":{source:\"iana\",extensions:[\"psb\"]},\"application/vnd.3gpp.pic-bw-var\":{source:\"iana\",extensions:[\"pvb\"]},\"application/vnd.3gpp.sms\":{source:\"iana\"},\"application/vnd.3gpp.sms+xml\":{source:\"iana\"},\"application/vnd.3gpp.srvcc-ext+xml\":{source:\"iana\"},\"application/vnd.3gpp.srvcc-info+xml\":{source:\"iana\"},\"application/vnd.3gpp.state-and-event-info+xml\":{source:\"iana\"},\"application/vnd.3gpp.ussd+xml\":{source:\"iana\"},\"application/vnd.3gpp2.bcmcsinfo+xml\":{source:\"iana\"},\"application/vnd.3gpp2.sms\":{source:\"iana\"},\"application/vnd.3gpp2.tcap\":{source:\"iana\",extensions:[\"tcap\"]},\"application/vnd.3lightssoftware.imagescal\":{source:\"iana\"},\"application/vnd.3m.post-it-notes\":{source:\"iana\",extensions:[\"pwn\"]},\"application/vnd.accpac.simply.aso\":{source:\"iana\",extensions:[\"aso\"]},\"application/vnd.accpac.simply.imp\":{source:\"iana\",extensions:[\"imp\"]},\"application/vnd.acucobol\":{source:\"iana\",extensions:[\"acu\"]},\"application/vnd.acucorp\":{source:\"iana\",extensions:[\"atc\",\"acutc\"]},\"application/vnd.adobe.air-application-installer-package+zip\":{source:\"apache\",extensions:[\"air\"]},\"application/vnd.adobe.flash.movie\":{source:\"iana\"},\"application/vnd.adobe.formscentral.fcdt\":{source:\"iana\",extensions:[\"fcdt\"]},\"application/vnd.adobe.fxp\":{source:\"iana\",extensions:[\"fxp\",\"fxpl\"]},\"application/vnd.adobe.partial-upload\":{source:\"iana\"},\"application/vnd.adobe.xdp+xml\":{source:\"iana\",extensions:[\"xdp\"]},\"application/vnd.adobe.xfdf\":{source:\"iana\",extensions:[\"xfdf\"]},\"application/vnd.aether.imp\":{source:\"iana\"},\"application/vnd.ah-barcode\":{source:\"iana\"},\"application/vnd.ahead.space\":{source:\"iana\",extensions:[\"ahead\"]},\"application/vnd.airzip.filesecure.azf\":{source:\"iana\",extensions:[\"azf\"]},\"application/vnd.airzip.filesecure.azs\":{source:\"iana\",extensions:[\"azs\"]},\"application/vnd.amadeus+json\":{source:\"iana\",compressible:!0},\"application/vnd.amazon.ebook\":{source:\"apache\",extensions:[\"azw\"]},\"application/vnd.amazon.mobi8-ebook\":{source:\"iana\"},\"application/vnd.americandynamics.acc\":{source:\"iana\",extensions:[\"acc\"]},\"application/vnd.amiga.ami\":{source:\"iana\",extensions:[\"ami\"]},\"application/vnd.amundsen.maze+xml\":{source:\"iana\"},\"application/vnd.android.package-archive\":{source:\"apache\",compressible:!1,extensions:[\"apk\"]},\"application/vnd.anki\":{source:\"iana\"},\"application/vnd.anser-web-certificate-issue-initiation\":{source:\"iana\",extensions:[\"cii\"]},\"application/vnd.anser-web-funds-transfer-initiation\":{source:\"apache\",extensions:[\"fti\"]},\"application/vnd.antix.game-component\":{source:\"iana\",extensions:[\"atx\"]},\"application/vnd.apache.thrift.binary\":{source:\"iana\"},\"application/vnd.apache.thrift.compact\":{source:\"iana\"},\"application/vnd.apache.thrift.json\":{source:\"iana\"},\"application/vnd.api+json\":{source:\"iana\",compressible:!0},\"application/vnd.apothekende.reservation+json\":{source:\"iana\",compressible:!0},\"application/vnd.apple.installer+xml\":{source:\"iana\",extensions:[\"mpkg\"]},\"application/vnd.apple.mpegurl\":{source:\"iana\",extensions:[\"m3u8\"]},\"application/vnd.apple.pkpass\":{compressible:!1,extensions:[\"pkpass\"]},\"application/vnd.arastra.swi\":{source:\"iana\"},\"application/vnd.aristanetworks.swi\":{source:\"iana\",extensions:[\"swi\"]},\"application/vnd.artsquare\":{source:\"iana\"},\"application/vnd.astraea-software.iota\":{source:\"iana\",extensions:[\"iota\"]},\"application/vnd.audiograph\":{source:\"iana\",extensions:[\"aep\"]},\"application/vnd.autopackage\":{source:\"iana\"},\"application/vnd.avalon+json\":{source:\"iana\",compressible:!0},\"application/vnd.avistar+xml\":{source:\"iana\"},\"application/vnd.balsamiq.bmml+xml\":{source:\"iana\"},\"application/vnd.balsamiq.bmpr\":{source:\"iana\"},\"application/vnd.bbf.usp.msg\":{source:\"iana\"},\"application/vnd.bbf.usp.msg+json\":{source:\"iana\",compressible:!0},\"application/vnd.bekitzur-stech+json\":{source:\"iana\",compressible:!0},\"application/vnd.bint.med-content\":{source:\"iana\"},\"application/vnd.biopax.rdf+xml\":{source:\"iana\"},\"application/vnd.blink-idb-value-wrapper\":{source:\"iana\"},\"application/vnd.blueice.multipass\":{source:\"iana\",extensions:[\"mpm\"]},\"application/vnd.bluetooth.ep.oob\":{source:\"iana\"},\"application/vnd.bluetooth.le.oob\":{source:\"iana\"},\"application/vnd.bmi\":{source:\"iana\",extensions:[\"bmi\"]},\"application/vnd.businessobjects\":{source:\"iana\",extensions:[\"rep\"]},\"application/vnd.cab-jscript\":{source:\"iana\"},\"application/vnd.canon-cpdl\":{source:\"iana\"},\"application/vnd.canon-lips\":{source:\"iana\"},\"application/vnd.capasystems-pg+json\":{source:\"iana\",compressible:!0},\"application/vnd.cendio.thinlinc.clientconf\":{source:\"iana\"},\"application/vnd.century-systems.tcp_stream\":{source:\"iana\"},\"application/vnd.chemdraw+xml\":{source:\"iana\",extensions:[\"cdxml\"]},\"application/vnd.chess-pgn\":{source:\"iana\"},\"application/vnd.chipnuts.karaoke-mmd\":{source:\"iana\",extensions:[\"mmd\"]},\"application/vnd.cinderella\":{source:\"iana\",extensions:[\"cdy\"]},\"application/vnd.cirpack.isdn-ext\":{source:\"iana\"},\"application/vnd.citationstyles.style+xml\":{source:\"iana\"},\"application/vnd.claymore\":{source:\"iana\",extensions:[\"cla\"]},\"application/vnd.cloanto.rp9\":{source:\"iana\",extensions:[\"rp9\"]},\"application/vnd.clonk.c4group\":{source:\"iana\",extensions:[\"c4g\",\"c4d\",\"c4f\",\"c4p\",\"c4u\"]},\"application/vnd.cluetrust.cartomobile-config\":{source:\"iana\",extensions:[\"c11amc\"]},\"application/vnd.cluetrust.cartomobile-config-pkg\":{source:\"iana\",extensions:[\"c11amz\"]},\"application/vnd.coffeescript\":{source:\"iana\"},\"application/vnd.collabio.xodocuments.document\":{source:\"iana\"},\"application/vnd.collabio.xodocuments.document-template\":{source:\"iana\"},\"application/vnd.collabio.xodocuments.presentation\":{source:\"iana\"},\"application/vnd.collabio.xodocuments.presentation-template\":{source:\"iana\"},\"application/vnd.collabio.xodocuments.spreadsheet\":{source:\"iana\"},\"application/vnd.collabio.xodocuments.spreadsheet-template\":{source:\"iana\"},\"application/vnd.collection+json\":{source:\"iana\",compressible:!0},\"application/vnd.collection.doc+json\":{source:\"iana\",compressible:!0},\"application/vnd.collection.next+json\":{source:\"iana\",compressible:!0},\"application/vnd.comicbook+zip\":{source:\"iana\"},\"application/vnd.comicbook-rar\":{source:\"iana\"},\"application/vnd.commerce-battelle\":{source:\"iana\"},\"application/vnd.commonspace\":{source:\"iana\",extensions:[\"csp\"]},\"application/vnd.contact.cmsg\":{source:\"iana\",extensions:[\"cdbcmsg\"]},\"application/vnd.coreos.ignition+json\":{source:\"iana\",compressible:!0},\"application/vnd.cosmocaller\":{source:\"iana\",extensions:[\"cmc\"]},\"application/vnd.crick.clicker\":{source:\"iana\",extensions:[\"clkx\"]},\"application/vnd.crick.clicker.keyboard\":{source:\"iana\",extensions:[\"clkk\"]},\"application/vnd.crick.clicker.palette\":{source:\"iana\",extensions:[\"clkp\"]},\"application/vnd.crick.clicker.template\":{source:\"iana\",extensions:[\"clkt\"]},\"application/vnd.crick.clicker.wordbank\":{source:\"iana\",extensions:[\"clkw\"]},\"application/vnd.criticaltools.wbs+xml\":{source:\"iana\",extensions:[\"wbs\"]},\"application/vnd.ctc-posml\":{source:\"iana\",extensions:[\"pml\"]},\"application/vnd.ctct.ws+xml\":{source:\"iana\"},\"application/vnd.cups-pdf\":{source:\"iana\"},\"application/vnd.cups-postscript\":{source:\"iana\"},\"application/vnd.cups-ppd\":{source:\"iana\",extensions:[\"ppd\"]},\"application/vnd.cups-raster\":{source:\"iana\"},\"application/vnd.cups-raw\":{source:\"iana\"},\"application/vnd.curl\":{source:\"iana\"},\"application/vnd.curl.car\":{source:\"apache\",extensions:[\"car\"]},\"application/vnd.curl.pcurl\":{source:\"apache\",extensions:[\"pcurl\"]},\"application/vnd.cyan.dean.root+xml\":{source:\"iana\"},\"application/vnd.cybank\":{source:\"iana\"},\"application/vnd.d2l.coursepackage1p0+zip\":{source:\"iana\"},\"application/vnd.dart\":{source:\"iana\",compressible:!0,extensions:[\"dart\"]},\"application/vnd.data-vision.rdz\":{source:\"iana\",extensions:[\"rdz\"]},\"application/vnd.datapackage+json\":{source:\"iana\",compressible:!0},\"application/vnd.dataresource+json\":{source:\"iana\",compressible:!0},\"application/vnd.debian.binary-package\":{source:\"iana\"},\"application/vnd.dece.data\":{source:\"iana\",extensions:[\"uvf\",\"uvvf\",\"uvd\",\"uvvd\"]},\"application/vnd.dece.ttml+xml\":{source:\"iana\",extensions:[\"uvt\",\"uvvt\"]},\"application/vnd.dece.unspecified\":{source:\"iana\",extensions:[\"uvx\",\"uvvx\"]},\"application/vnd.dece.zip\":{source:\"iana\",extensions:[\"uvz\",\"uvvz\"]},\"application/vnd.denovo.fcselayout-link\":{source:\"iana\",extensions:[\"fe_launch\"]},\"application/vnd.desmume-movie\":{source:\"iana\"},\"application/vnd.desmume.movie\":{source:\"apache\"},\"application/vnd.dir-bi.plate-dl-nosuffix\":{source:\"iana\"},\"application/vnd.dm.delegation+xml\":{source:\"iana\"},\"application/vnd.dna\":{source:\"iana\",extensions:[\"dna\"]},\"application/vnd.document+json\":{source:\"iana\",compressible:!0},\"application/vnd.dolby.mlp\":{source:\"apache\",extensions:[\"mlp\"]},\"application/vnd.dolby.mobile.1\":{source:\"iana\"},\"application/vnd.dolby.mobile.2\":{source:\"iana\"},\"application/vnd.doremir.scorecloud-binary-document\":{source:\"iana\"},\"application/vnd.dpgraph\":{source:\"iana\",extensions:[\"dpg\"]},\"application/vnd.dreamfactory\":{source:\"iana\",extensions:[\"dfac\"]},\"application/vnd.drive+json\":{source:\"iana\",compressible:!0},\"application/vnd.ds-keypoint\":{source:\"apache\",extensions:[\"kpxx\"]},\"application/vnd.dtg.local\":{source:\"iana\"},\"application/vnd.dtg.local.flash\":{source:\"iana\"},\"application/vnd.dtg.local.html\":{source:\"iana\"},\"application/vnd.dvb.ait\":{source:\"iana\",extensions:[\"ait\"]},\"application/vnd.dvb.dvbj\":{source:\"iana\"},\"application/vnd.dvb.esgcontainer\":{source:\"iana\"},\"application/vnd.dvb.ipdcdftnotifaccess\":{source:\"iana\"},\"application/vnd.dvb.ipdcesgaccess\":{source:\"iana\"},\"application/vnd.dvb.ipdcesgaccess2\":{source:\"iana\"},\"application/vnd.dvb.ipdcesgpdd\":{source:\"iana\"},\"application/vnd.dvb.ipdcroaming\":{source:\"iana\"},\"application/vnd.dvb.iptv.alfec-base\":{source:\"iana\"},\"application/vnd.dvb.iptv.alfec-enhancement\":{source:\"iana\"},\"application/vnd.dvb.notif-aggregate-root+xml\":{source:\"iana\"},\"application/vnd.dvb.notif-container+xml\":{source:\"iana\"},\"application/vnd.dvb.notif-generic+xml\":{source:\"iana\"},\"application/vnd.dvb.notif-ia-msglist+xml\":{source:\"iana\"},\"application/vnd.dvb.notif-ia-registration-request+xml\":{source:\"iana\"},\"application/vnd.dvb.notif-ia-registration-response+xml\":{source:\"iana\"},\"application/vnd.dvb.notif-init+xml\":{source:\"iana\"},\"application/vnd.dvb.pfr\":{source:\"iana\"},\"application/vnd.dvb.service\":{source:\"iana\",extensions:[\"svc\"]},\"application/vnd.dxr\":{source:\"iana\"},\"application/vnd.dynageo\":{source:\"iana\",extensions:[\"geo\"]},\"application/vnd.dzr\":{source:\"iana\"},\"application/vnd.easykaraoke.cdgdownload\":{source:\"iana\"},\"application/vnd.ecdis-update\":{source:\"iana\"},\"application/vnd.ecip.rlp\":{source:\"iana\"},\"application/vnd.ecowin.chart\":{source:\"iana\",extensions:[\"mag\"]},\"application/vnd.ecowin.filerequest\":{source:\"iana\"},\"application/vnd.ecowin.fileupdate\":{source:\"iana\"},\"application/vnd.ecowin.series\":{source:\"iana\"},\"application/vnd.ecowin.seriesrequest\":{source:\"iana\"},\"application/vnd.ecowin.seriesupdate\":{source:\"iana\"},\"application/vnd.efi.img\":{source:\"iana\"},\"application/vnd.efi.iso\":{source:\"iana\"},\"application/vnd.emclient.accessrequest+xml\":{source:\"iana\"},\"application/vnd.enliven\":{source:\"iana\",extensions:[\"nml\"]},\"application/vnd.enphase.envoy\":{source:\"iana\"},\"application/vnd.eprints.data+xml\":{source:\"iana\"},\"application/vnd.epson.esf\":{source:\"iana\",extensions:[\"esf\"]},\"application/vnd.epson.msf\":{source:\"iana\",extensions:[\"msf\"]},\"application/vnd.epson.quickanime\":{source:\"iana\",extensions:[\"qam\"]},\"application/vnd.epson.salt\":{source:\"iana\",extensions:[\"slt\"]},\"application/vnd.epson.ssf\":{source:\"iana\",extensions:[\"ssf\"]},\"application/vnd.ericsson.quickcall\":{source:\"iana\"},\"application/vnd.espass-espass+zip\":{source:\"iana\"},\"application/vnd.eszigno3+xml\":{source:\"iana\",extensions:[\"es3\",\"et3\"]},\"application/vnd.etsi.aoc+xml\":{source:\"iana\"},\"application/vnd.etsi.asic-e+zip\":{source:\"iana\"},\"application/vnd.etsi.asic-s+zip\":{source:\"iana\"},\"application/vnd.etsi.cug+xml\":{source:\"iana\"},\"application/vnd.etsi.iptvcommand+xml\":{source:\"iana\"},\"application/vnd.etsi.iptvdiscovery+xml\":{source:\"iana\"},\"application/vnd.etsi.iptvprofile+xml\":{source:\"iana\"},\"application/vnd.etsi.iptvsad-bc+xml\":{source:\"iana\"},\"application/vnd.etsi.iptvsad-cod+xml\":{source:\"iana\"},\"application/vnd.etsi.iptvsad-npvr+xml\":{source:\"iana\"},\"application/vnd.etsi.iptvservice+xml\":{source:\"iana\"},\"application/vnd.etsi.iptvsync+xml\":{source:\"iana\"},\"application/vnd.etsi.iptvueprofile+xml\":{source:\"iana\"},\"application/vnd.etsi.mcid+xml\":{source:\"iana\"},\"application/vnd.etsi.mheg5\":{source:\"iana\"},\"application/vnd.etsi.overload-control-policy-dataset+xml\":{source:\"iana\"},\"application/vnd.etsi.pstn+xml\":{source:\"iana\"},\"application/vnd.etsi.sci+xml\":{source:\"iana\"},\"application/vnd.etsi.simservs+xml\":{source:\"iana\"},\"application/vnd.etsi.timestamp-token\":{source:\"iana\"},\"application/vnd.etsi.tsl+xml\":{source:\"iana\"},\"application/vnd.etsi.tsl.der\":{source:\"iana\"},\"application/vnd.eudora.data\":{source:\"iana\"},\"application/vnd.evolv.ecig.profile\":{source:\"iana\"},\"application/vnd.evolv.ecig.settings\":{source:\"iana\"},\"application/vnd.evolv.ecig.theme\":{source:\"iana\"},\"application/vnd.ezpix-album\":{source:\"iana\",extensions:[\"ez2\"]},\"application/vnd.ezpix-package\":{source:\"iana\",extensions:[\"ez3\"]},\"application/vnd.f-secure.mobile\":{source:\"iana\"},\"application/vnd.fastcopy-disk-image\":{source:\"iana\"},\"application/vnd.fdf\":{source:\"iana\",extensions:[\"fdf\"]},\"application/vnd.fdsn.mseed\":{source:\"iana\",extensions:[\"mseed\"]},\"application/vnd.fdsn.seed\":{source:\"iana\",extensions:[\"seed\",\"dataless\"]},\"application/vnd.ffsns\":{source:\"iana\"},\"application/vnd.filmit.zfc\":{source:\"iana\"},\"application/vnd.fints\":{source:\"iana\"},\"application/vnd.firemonkeys.cloudcell\":{source:\"iana\"},\"application/vnd.flographit\":{source:\"iana\",extensions:[\"gph\"]},\"application/vnd.fluxtime.clip\":{source:\"iana\",extensions:[\"ftc\"]},\"application/vnd.font-fontforge-sfd\":{source:\"iana\"},\"application/vnd.framemaker\":{source:\"iana\",extensions:[\"fm\",\"frame\",\"maker\",\"book\"]},\"application/vnd.frogans.fnc\":{source:\"iana\",extensions:[\"fnc\"]},\"application/vnd.frogans.ltf\":{source:\"iana\",extensions:[\"ltf\"]},\"application/vnd.fsc.weblaunch\":{source:\"iana\",extensions:[\"fsc\"]},\"application/vnd.fujitsu.oasys\":{source:\"iana\",extensions:[\"oas\"]},\"application/vnd.fujitsu.oasys2\":{source:\"iana\",extensions:[\"oa2\"]},\"application/vnd.fujitsu.oasys3\":{source:\"iana\",extensions:[\"oa3\"]},\"application/vnd.fujitsu.oasysgp\":{source:\"iana\",extensions:[\"fg5\"]},\"application/vnd.fujitsu.oasysprs\":{source:\"iana\",extensions:[\"bh2\"]},\"application/vnd.fujixerox.art-ex\":{source:\"iana\"},\"application/vnd.fujixerox.art4\":{source:\"iana\"},\"application/vnd.fujixerox.ddd\":{source:\"iana\",extensions:[\"ddd\"]},\"application/vnd.fujixerox.docuworks\":{source:\"iana\",extensions:[\"xdw\"]},\"application/vnd.fujixerox.docuworks.binder\":{source:\"iana\",extensions:[\"xbd\"]},\"application/vnd.fujixerox.docuworks.container\":{source:\"iana\"},\"application/vnd.fujixerox.hbpl\":{source:\"iana\"},\"application/vnd.fut-misnet\":{source:\"iana\"},\"application/vnd.fuzzysheet\":{source:\"iana\",extensions:[\"fzs\"]},\"application/vnd.genomatix.tuxedo\":{source:\"iana\",extensions:[\"txd\"]},\"application/vnd.geo+json\":{source:\"iana\",compressible:!0},\"application/vnd.geocube+xml\":{source:\"iana\"},\"application/vnd.geogebra.file\":{source:\"iana\",extensions:[\"ggb\"]},\"application/vnd.geogebra.tool\":{source:\"iana\",extensions:[\"ggt\"]},\"application/vnd.geometry-explorer\":{source:\"iana\",extensions:[\"gex\",\"gre\"]},\"application/vnd.geonext\":{source:\"iana\",extensions:[\"gxt\"]},\"application/vnd.geoplan\":{source:\"iana\",extensions:[\"g2w\"]},\"application/vnd.geospace\":{source:\"iana\",extensions:[\"g3w\"]},\"application/vnd.gerber\":{source:\"iana\"},\"application/vnd.globalplatform.card-content-mgt\":{source:\"iana\"},\"application/vnd.globalplatform.card-content-mgt-response\":{source:\"iana\"},\"application/vnd.gmx\":{source:\"iana\",extensions:[\"gmx\"]},\"application/vnd.google-apps.document\":{compressible:!1,extensions:[\"gdoc\"]},\"application/vnd.google-apps.presentation\":{compressible:!1,extensions:[\"gslides\"]},\"application/vnd.google-apps.spreadsheet\":{compressible:!1,extensions:[\"gsheet\"]},\"application/vnd.google-earth.kml+xml\":{source:\"iana\",compressible:!0,extensions:[\"kml\"]},\"application/vnd.google-earth.kmz\":{source:\"iana\",compressible:!1,extensions:[\"kmz\"]},\"application/vnd.gov.sk.e-form+xml\":{source:\"iana\"},\"application/vnd.gov.sk.e-form+zip\":{source:\"iana\"},\"application/vnd.gov.sk.xmldatacontainer+xml\":{source:\"iana\"},\"application/vnd.grafeq\":{source:\"iana\",extensions:[\"gqf\",\"gqs\"]},\"application/vnd.gridmp\":{source:\"iana\"},\"application/vnd.groove-account\":{source:\"iana\",extensions:[\"gac\"]},\"application/vnd.groove-help\":{source:\"iana\",extensions:[\"ghf\"]},\"application/vnd.groove-identity-message\":{source:\"iana\",extensions:[\"gim\"]},\"application/vnd.groove-injector\":{source:\"iana\",extensions:[\"grv\"]},\"application/vnd.groove-tool-message\":{source:\"iana\",extensions:[\"gtm\"]},\"application/vnd.groove-tool-template\":{source:\"iana\",extensions:[\"tpl\"]},\"application/vnd.groove-vcard\":{source:\"iana\",extensions:[\"vcg\"]},\"application/vnd.hal+json\":{source:\"iana\",compressible:!0},\"application/vnd.hal+xml\":{source:\"iana\",extensions:[\"hal\"]},\"application/vnd.handheld-entertainment+xml\":{source:\"iana\",extensions:[\"zmm\"]},\"application/vnd.hbci\":{source:\"iana\",extensions:[\"hbci\"]},\"application/vnd.hc+json\":{source:\"iana\",compressible:!0},\"application/vnd.hcl-bireports\":{source:\"iana\"},\"application/vnd.hdt\":{source:\"iana\"},\"application/vnd.heroku+json\":{source:\"iana\",compressible:!0},\"application/vnd.hhe.lesson-player\":{source:\"iana\",extensions:[\"les\"]},\"application/vnd.hp-hpgl\":{source:\"iana\",extensions:[\"hpgl\"]},\"application/vnd.hp-hpid\":{source:\"iana\",extensions:[\"hpid\"]},\"application/vnd.hp-hps\":{source:\"iana\",extensions:[\"hps\"]},\"application/vnd.hp-jlyt\":{source:\"iana\",extensions:[\"jlt\"]},\"application/vnd.hp-pcl\":{source:\"iana\",extensions:[\"pcl\"]},\"application/vnd.hp-pclxl\":{source:\"iana\",extensions:[\"pclxl\"]},\"application/vnd.httphone\":{source:\"iana\"},\"application/vnd.hydrostatix.sof-data\":{source:\"iana\",extensions:[\"sfd-hdstx\"]},\"application/vnd.hyper-item+json\":{source:\"iana\",compressible:!0},\"application/vnd.hyperdrive+json\":{source:\"iana\",compressible:!0},\"application/vnd.hzn-3d-crossword\":{source:\"iana\"},\"application/vnd.ibm.afplinedata\":{source:\"iana\"},\"application/vnd.ibm.electronic-media\":{source:\"iana\"},\"application/vnd.ibm.minipay\":{source:\"iana\",extensions:[\"mpy\"]},\"application/vnd.ibm.modcap\":{source:\"iana\",extensions:[\"afp\",\"listafp\",\"list3820\"]},\"application/vnd.ibm.rights-management\":{source:\"iana\",extensions:[\"irm\"]},\"application/vnd.ibm.secure-container\":{source:\"iana\",extensions:[\"sc\"]},\"application/vnd.iccprofile\":{source:\"iana\",extensions:[\"icc\",\"icm\"]},\"application/vnd.ieee.1905\":{source:\"iana\"},\"application/vnd.igloader\":{source:\"iana\",extensions:[\"igl\"]},\"application/vnd.imagemeter.folder+zip\":{source:\"iana\"},\"application/vnd.imagemeter.image+zip\":{source:\"iana\"},\"application/vnd.immervision-ivp\":{source:\"iana\",extensions:[\"ivp\"]},\"application/vnd.immervision-ivu\":{source:\"iana\",extensions:[\"ivu\"]},\"application/vnd.ims.imsccv1p1\":{source:\"iana\"},\"application/vnd.ims.imsccv1p2\":{source:\"iana\"},\"application/vnd.ims.imsccv1p3\":{source:\"iana\"},\"application/vnd.ims.lis.v2.result+json\":{source:\"iana\",compressible:!0},\"application/vnd.ims.lti.v2.toolconsumerprofile+json\":{source:\"iana\",compressible:!0},\"application/vnd.ims.lti.v2.toolproxy+json\":{source:\"iana\",compressible:!0},\"application/vnd.ims.lti.v2.toolproxy.id+json\":{source:\"iana\",compressible:!0},\"application/vnd.ims.lti.v2.toolsettings+json\":{source:\"iana\",compressible:!0},\"application/vnd.ims.lti.v2.toolsettings.simple+json\":{source:\"iana\",compressible:!0},\"application/vnd.informedcontrol.rms+xml\":{source:\"iana\"},\"application/vnd.informix-visionary\":{source:\"iana\"},\"application/vnd.infotech.project\":{source:\"iana\"},\"application/vnd.infotech.project+xml\":{source:\"iana\"},\"application/vnd.innopath.wamp.notification\":{source:\"iana\"},\"application/vnd.insors.igm\":{source:\"iana\",extensions:[\"igm\"]},\"application/vnd.intercon.formnet\":{source:\"iana\",extensions:[\"xpw\",\"xpx\"]},\"application/vnd.intergeo\":{source:\"iana\",extensions:[\"i2g\"]},\"application/vnd.intertrust.digibox\":{source:\"iana\"},\"application/vnd.intertrust.nncp\":{source:\"iana\"},\"application/vnd.intu.qbo\":{source:\"iana\",extensions:[\"qbo\"]},\"application/vnd.intu.qfx\":{source:\"iana\",extensions:[\"qfx\"]},\"application/vnd.iptc.g2.catalogitem+xml\":{source:\"iana\"},\"application/vnd.iptc.g2.conceptitem+xml\":{source:\"iana\"},\"application/vnd.iptc.g2.knowledgeitem+xml\":{source:\"iana\"},\"application/vnd.iptc.g2.newsitem+xml\":{source:\"iana\"},\"application/vnd.iptc.g2.newsmessage+xml\":{source:\"iana\"},\"application/vnd.iptc.g2.packageitem+xml\":{source:\"iana\"},\"application/vnd.iptc.g2.planningitem+xml\":{source:\"iana\"},\"application/vnd.ipunplugged.rcprofile\":{source:\"iana\",extensions:[\"rcprofile\"]},\"application/vnd.irepository.package+xml\":{source:\"iana\",extensions:[\"irp\"]},\"application/vnd.is-xpr\":{source:\"iana\",extensions:[\"xpr\"]},\"application/vnd.isac.fcs\":{source:\"iana\",extensions:[\"fcs\"]},\"application/vnd.jam\":{source:\"iana\",extensions:[\"jam\"]},\"application/vnd.japannet-directory-service\":{source:\"iana\"},\"application/vnd.japannet-jpnstore-wakeup\":{source:\"iana\"},\"application/vnd.japannet-payment-wakeup\":{source:\"iana\"},\"application/vnd.japannet-registration\":{source:\"iana\"},\"application/vnd.japannet-registration-wakeup\":{source:\"iana\"},\"application/vnd.japannet-setstore-wakeup\":{source:\"iana\"},\"application/vnd.japannet-verification\":{source:\"iana\"},\"application/vnd.japannet-verification-wakeup\":{source:\"iana\"},\"application/vnd.jcp.javame.midlet-rms\":{source:\"iana\",extensions:[\"rms\"]},\"application/vnd.jisp\":{source:\"iana\",extensions:[\"jisp\"]},\"application/vnd.joost.joda-archive\":{source:\"iana\",extensions:[\"joda\"]},\"application/vnd.jsk.isdn-ngn\":{source:\"iana\"},\"application/vnd.kahootz\":{source:\"iana\",extensions:[\"ktz\",\"ktr\"]},\"application/vnd.kde.karbon\":{source:\"iana\",extensions:[\"karbon\"]},\"application/vnd.kde.kchart\":{source:\"iana\",extensions:[\"chrt\"]},\"application/vnd.kde.kformula\":{source:\"iana\",extensions:[\"kfo\"]},\"application/vnd.kde.kivio\":{source:\"iana\",extensions:[\"flw\"]},\"application/vnd.kde.kontour\":{source:\"iana\",extensions:[\"kon\"]},\"application/vnd.kde.kpresenter\":{source:\"iana\",extensions:[\"kpr\",\"kpt\"]},\"application/vnd.kde.kspread\":{source:\"iana\",extensions:[\"ksp\"]},\"application/vnd.kde.kword\":{source:\"iana\",extensions:[\"kwd\",\"kwt\"]},\"application/vnd.kenameaapp\":{source:\"iana\",extensions:[\"htke\"]},\"application/vnd.kidspiration\":{source:\"iana\",extensions:[\"kia\"]},\"application/vnd.kinar\":{source:\"iana\",extensions:[\"kne\",\"knp\"]},\"application/vnd.koan\":{source:\"iana\",extensions:[\"skp\",\"skd\",\"skt\",\"skm\"]},\"application/vnd.kodak-descriptor\":{source:\"iana\",extensions:[\"sse\"]},\"application/vnd.las.las+json\":{source:\"iana\",compressible:!0},\"application/vnd.las.las+xml\":{source:\"iana\",extensions:[\"lasxml\"]},\"application/vnd.liberty-request+xml\":{source:\"iana\"},\"application/vnd.llamagraphics.life-balance.desktop\":{source:\"iana\",extensions:[\"lbd\"]},\"application/vnd.llamagraphics.life-balance.exchange+xml\":{source:\"iana\",extensions:[\"lbe\"]},\"application/vnd.lotus-1-2-3\":{source:\"iana\",extensions:[\"123\"]},\"application/vnd.lotus-approach\":{source:\"iana\",extensions:[\"apr\"]},\"application/vnd.lotus-freelance\":{source:\"iana\",extensions:[\"pre\"]},\"application/vnd.lotus-notes\":{source:\"iana\",extensions:[\"nsf\"]},\"application/vnd.lotus-organizer\":{source:\"iana\",extensions:[\"org\"]},\"application/vnd.lotus-screencam\":{source:\"iana\",extensions:[\"scm\"]},\"application/vnd.lotus-wordpro\":{source:\"iana\",extensions:[\"lwp\"]},\"application/vnd.macports.portpkg\":{source:\"iana\",extensions:[\"portpkg\"]},\"application/vnd.mapbox-vector-tile\":{source:\"iana\"},\"application/vnd.marlin.drm.actiontoken+xml\":{source:\"iana\"},\"application/vnd.marlin.drm.conftoken+xml\":{source:\"iana\"},\"application/vnd.marlin.drm.license+xml\":{source:\"iana\"},\"application/vnd.marlin.drm.mdcf\":{source:\"iana\"},\"application/vnd.mason+json\":{source:\"iana\",compressible:!0},\"application/vnd.maxmind.maxmind-db\":{source:\"iana\"},\"application/vnd.mcd\":{source:\"iana\",extensions:[\"mcd\"]},\"application/vnd.medcalcdata\":{source:\"iana\",extensions:[\"mc1\"]},\"application/vnd.mediastation.cdkey\":{source:\"iana\",extensions:[\"cdkey\"]},\"application/vnd.meridian-slingshot\":{source:\"iana\"},\"application/vnd.mfer\":{source:\"iana\",extensions:[\"mwf\"]},\"application/vnd.mfmp\":{source:\"iana\",extensions:[\"mfm\"]},\"application/vnd.micro+json\":{source:\"iana\",compressible:!0},\"application/vnd.micrografx.flo\":{source:\"iana\",extensions:[\"flo\"]},\"application/vnd.micrografx.igx\":{source:\"iana\",extensions:[\"igx\"]},\"application/vnd.microsoft.portable-executable\":{source:\"iana\"},\"application/vnd.microsoft.windows.thumbnail-cache\":{source:\"iana\"},\"application/vnd.miele+json\":{source:\"iana\",compressible:!0},\"application/vnd.mif\":{source:\"iana\",extensions:[\"mif\"]},\"application/vnd.minisoft-hp3000-save\":{source:\"iana\"},\"application/vnd.mitsubishi.misty-guard.trustweb\":{source:\"iana\"},\"application/vnd.mobius.daf\":{source:\"iana\",extensions:[\"daf\"]},\"application/vnd.mobius.dis\":{source:\"iana\",extensions:[\"dis\"]},\"application/vnd.mobius.mbk\":{source:\"iana\",extensions:[\"mbk\"]},\"application/vnd.mobius.mqy\":{source:\"iana\",extensions:[\"mqy\"]},\"application/vnd.mobius.msl\":{source:\"iana\",extensions:[\"msl\"]},\"application/vnd.mobius.plc\":{source:\"iana\",extensions:[\"plc\"]},\"application/vnd.mobius.txf\":{source:\"iana\",extensions:[\"txf\"]},\"application/vnd.mophun.application\":{source:\"iana\",extensions:[\"mpn\"]},\"application/vnd.mophun.certificate\":{source:\"iana\",extensions:[\"mpc\"]},\"application/vnd.motorola.flexsuite\":{source:\"iana\"},\"application/vnd.motorola.flexsuite.adsi\":{source:\"iana\"},\"application/vnd.motorola.flexsuite.fis\":{source:\"iana\"},\"application/vnd.motorola.flexsuite.gotap\":{source:\"iana\"},\"application/vnd.motorola.flexsuite.kmr\":{source:\"iana\"},\"application/vnd.motorola.flexsuite.ttc\":{source:\"iana\"},\"application/vnd.motorola.flexsuite.wem\":{source:\"iana\"},\"application/vnd.motorola.iprm\":{source:\"iana\"},\"application/vnd.mozilla.xul+xml\":{source:\"iana\",compressible:!0,extensions:[\"xul\"]},\"application/vnd.ms-3mfdocument\":{source:\"iana\"},\"application/vnd.ms-artgalry\":{source:\"iana\",extensions:[\"cil\"]},\"application/vnd.ms-asf\":{source:\"iana\"},\"application/vnd.ms-cab-compressed\":{source:\"iana\",extensions:[\"cab\"]},\"application/vnd.ms-color.iccprofile\":{source:\"apache\"},\"application/vnd.ms-excel\":{source:\"iana\",compressible:!1,extensions:[\"xls\",\"xlm\",\"xla\",\"xlc\",\"xlt\",\"xlw\"]},\"application/vnd.ms-excel.addin.macroenabled.12\":{source:\"iana\",extensions:[\"xlam\"]},\"application/vnd.ms-excel.sheet.binary.macroenabled.12\":{source:\"iana\",extensions:[\"xlsb\"]},\"application/vnd.ms-excel.sheet.macroenabled.12\":{source:\"iana\",extensions:[\"xlsm\"]},\"application/vnd.ms-excel.template.macroenabled.12\":{source:\"iana\",extensions:[\"xltm\"]},\"application/vnd.ms-fontobject\":{source:\"iana\",compressible:!0,extensions:[\"eot\"]},\"application/vnd.ms-htmlhelp\":{source:\"iana\",extensions:[\"chm\"]},\"application/vnd.ms-ims\":{source:\"iana\",extensions:[\"ims\"]},\"application/vnd.ms-lrm\":{source:\"iana\",extensions:[\"lrm\"]},\"application/vnd.ms-office.activex+xml\":{source:\"iana\"},\"application/vnd.ms-officetheme\":{source:\"iana\",extensions:[\"thmx\"]},\"application/vnd.ms-opentype\":{source:\"apache\",compressible:!0},\"application/vnd.ms-outlook\":{compressible:!1,extensions:[\"msg\"]},\"application/vnd.ms-package.obfuscated-opentype\":{source:\"apache\"},\"application/vnd.ms-pki.seccat\":{source:\"apache\",extensions:[\"cat\"]},\"application/vnd.ms-pki.stl\":{source:\"apache\",extensions:[\"stl\"]},\"application/vnd.ms-playready.initiator+xml\":{source:\"iana\"},\"application/vnd.ms-powerpoint\":{source:\"iana\",compressible:!1,extensions:[\"ppt\",\"pps\",\"pot\"]},\"application/vnd.ms-powerpoint.addin.macroenabled.12\":{source:\"iana\",extensions:[\"ppam\"]},\"application/vnd.ms-powerpoint.presentation.macroenabled.12\":{source:\"iana\",extensions:[\"pptm\"]},\"application/vnd.ms-powerpoint.slide.macroenabled.12\":{source:\"iana\",extensions:[\"sldm\"]},\"application/vnd.ms-powerpoint.slideshow.macroenabled.12\":{source:\"iana\",extensions:[\"ppsm\"]},\"application/vnd.ms-powerpoint.template.macroenabled.12\":{source:\"iana\",extensions:[\"potm\"]},\"application/vnd.ms-printdevicecapabilities+xml\":{source:\"iana\"},\"application/vnd.ms-printing.printticket+xml\":{source:\"apache\"},\"application/vnd.ms-printschematicket+xml\":{source:\"iana\"},\"application/vnd.ms-project\":{source:\"iana\",extensions:[\"mpp\",\"mpt\"]},\"application/vnd.ms-tnef\":{source:\"iana\"},\"application/vnd.ms-windows.devicepairing\":{source:\"iana\"},\"application/vnd.ms-windows.nwprinting.oob\":{source:\"iana\"},\"application/vnd.ms-windows.printerpairing\":{source:\"iana\"},\"application/vnd.ms-windows.wsd.oob\":{source:\"iana\"},\"application/vnd.ms-wmdrm.lic-chlg-req\":{source:\"iana\"},\"application/vnd.ms-wmdrm.lic-resp\":{source:\"iana\"},\"application/vnd.ms-wmdrm.meter-chlg-req\":{source:\"iana\"},\"application/vnd.ms-wmdrm.meter-resp\":{source:\"iana\"},\"application/vnd.ms-word.document.macroenabled.12\":{source:\"iana\",extensions:[\"docm\"]},\"application/vnd.ms-word.template.macroenabled.12\":{source:\"iana\",extensions:[\"dotm\"]},\"application/vnd.ms-works\":{source:\"iana\",extensions:[\"wps\",\"wks\",\"wcm\",\"wdb\"]},\"application/vnd.ms-wpl\":{source:\"iana\",extensions:[\"wpl\"]},\"application/vnd.ms-xpsdocument\":{source:\"iana\",compressible:!1,extensions:[\"xps\"]},\"application/vnd.msa-disk-image\":{source:\"iana\"},\"application/vnd.mseq\":{source:\"iana\",extensions:[\"mseq\"]},\"application/vnd.msign\":{source:\"iana\"},\"application/vnd.multiad.creator\":{source:\"iana\"},\"application/vnd.multiad.creator.cif\":{source:\"iana\"},\"application/vnd.music-niff\":{source:\"iana\"},\"application/vnd.musician\":{source:\"iana\",extensions:[\"mus\"]},\"application/vnd.muvee.style\":{source:\"iana\",extensions:[\"msty\"]},\"application/vnd.mynfc\":{source:\"iana\",extensions:[\"taglet\"]},\"application/vnd.ncd.control\":{source:\"iana\"},\"application/vnd.ncd.reference\":{source:\"iana\"},\"application/vnd.nearst.inv+json\":{source:\"iana\",compressible:!0},\"application/vnd.nervana\":{source:\"iana\"},\"application/vnd.netfpx\":{source:\"iana\"},\"application/vnd.neurolanguage.nlu\":{source:\"iana\",extensions:[\"nlu\"]},\"application/vnd.nintendo.nitro.rom\":{source:\"iana\"},\"application/vnd.nintendo.snes.rom\":{source:\"iana\"},\"application/vnd.nitf\":{source:\"iana\",extensions:[\"ntf\",\"nitf\"]},\"application/vnd.noblenet-directory\":{source:\"iana\",extensions:[\"nnd\"]},\"application/vnd.noblenet-sealer\":{source:\"iana\",extensions:[\"nns\"]},\"application/vnd.noblenet-web\":{source:\"iana\",extensions:[\"nnw\"]},\"application/vnd.nokia.catalogs\":{source:\"iana\"},\"application/vnd.nokia.conml+wbxml\":{source:\"iana\"},\"application/vnd.nokia.conml+xml\":{source:\"iana\"},\"application/vnd.nokia.iptv.config+xml\":{source:\"iana\"},\"application/vnd.nokia.isds-radio-presets\":{source:\"iana\"},\"application/vnd.nokia.landmark+wbxml\":{source:\"iana\"},\"application/vnd.nokia.landmark+xml\":{source:\"iana\"},\"application/vnd.nokia.landmarkcollection+xml\":{source:\"iana\"},\"application/vnd.nokia.n-gage.ac+xml\":{source:\"iana\"},\"application/vnd.nokia.n-gage.data\":{source:\"iana\",extensions:[\"ngdat\"]},\"application/vnd.nokia.n-gage.symbian.install\":{source:\"iana\",extensions:[\"n-gage\"]},\"application/vnd.nokia.ncd\":{source:\"iana\"},\"application/vnd.nokia.pcd+wbxml\":{source:\"iana\"},\"application/vnd.nokia.pcd+xml\":{source:\"iana\"},\"application/vnd.nokia.radio-preset\":{source:\"iana\",extensions:[\"rpst\"]},\"application/vnd.nokia.radio-presets\":{source:\"iana\",extensions:[\"rpss\"]},\"application/vnd.novadigm.edm\":{source:\"iana\",extensions:[\"edm\"]},\"application/vnd.novadigm.edx\":{source:\"iana\",extensions:[\"edx\"]},\"application/vnd.novadigm.ext\":{source:\"iana\",extensions:[\"ext\"]},\"application/vnd.ntt-local.content-share\":{source:\"iana\"},\"application/vnd.ntt-local.file-transfer\":{source:\"iana\"},\"application/vnd.ntt-local.ogw_remote-access\":{source:\"iana\"},\"application/vnd.ntt-local.sip-ta_remote\":{source:\"iana\"},\"application/vnd.ntt-local.sip-ta_tcp_stream\":{source:\"iana\"},\"application/vnd.oasis.opendocument.chart\":{source:\"iana\",extensions:[\"odc\"]},\"application/vnd.oasis.opendocument.chart-template\":{source:\"iana\",extensions:[\"otc\"]},\"application/vnd.oasis.opendocument.database\":{source:\"iana\",extensions:[\"odb\"]},\"application/vnd.oasis.opendocument.formula\":{source:\"iana\",extensions:[\"odf\"]},\"application/vnd.oasis.opendocument.formula-template\":{source:\"iana\",extensions:[\"odft\"]},\"application/vnd.oasis.opendocument.graphics\":{source:\"iana\",compressible:!1,extensions:[\"odg\"]},\"application/vnd.oasis.opendocument.graphics-template\":{source:\"iana\",extensions:[\"otg\"]},\"application/vnd.oasis.opendocument.image\":{source:\"iana\",extensions:[\"odi\"]},\"application/vnd.oasis.opendocument.image-template\":{source:\"iana\",extensions:[\"oti\"]},\"application/vnd.oasis.opendocument.presentation\":{source:\"iana\",compressible:!1,extensions:[\"odp\"]},\"application/vnd.oasis.opendocument.presentation-template\":{source:\"iana\",extensions:[\"otp\"]},\"application/vnd.oasis.opendocument.spreadsheet\":{source:\"iana\",compressible:!1,extensions:[\"ods\"]},\"application/vnd.oasis.opendocument.spreadsheet-template\":{source:\"iana\",extensions:[\"ots\"]},\"application/vnd.oasis.opendocument.text\":{source:\"iana\",compressible:!1,extensions:[\"odt\"]},\"application/vnd.oasis.opendocument.text-master\":{source:\"iana\",extensions:[\"odm\"]},\"application/vnd.oasis.opendocument.text-template\":{source:\"iana\",extensions:[\"ott\"]},\"application/vnd.oasis.opendocument.text-web\":{source:\"iana\",extensions:[\"oth\"]},\"application/vnd.obn\":{source:\"iana\"},\"application/vnd.ocf+cbor\":{source:\"iana\"},\"application/vnd.oftn.l10n+json\":{source:\"iana\",compressible:!0},\"application/vnd.oipf.contentaccessdownload+xml\":{source:\"iana\"},\"application/vnd.oipf.contentaccessstreaming+xml\":{source:\"iana\"},\"application/vnd.oipf.cspg-hexbinary\":{source:\"iana\"},\"application/vnd.oipf.dae.svg+xml\":{source:\"iana\"},\"application/vnd.oipf.dae.xhtml+xml\":{source:\"iana\"},\"application/vnd.oipf.mippvcontrolmessage+xml\":{source:\"iana\"},\"application/vnd.oipf.pae.gem\":{source:\"iana\"},\"application/vnd.oipf.spdiscovery+xml\":{source:\"iana\"},\"application/vnd.oipf.spdlist+xml\":{source:\"iana\"},\"application/vnd.oipf.ueprofile+xml\":{source:\"iana\"},\"application/vnd.oipf.userprofile+xml\":{source:\"iana\"},\"application/vnd.olpc-sugar\":{source:\"iana\",extensions:[\"xo\"]},\"application/vnd.oma-scws-config\":{source:\"iana\"},\"application/vnd.oma-scws-http-request\":{source:\"iana\"},\"application/vnd.oma-scws-http-response\":{source:\"iana\"},\"application/vnd.oma.bcast.associated-procedure-parameter+xml\":{source:\"iana\"},\"application/vnd.oma.bcast.drm-trigger+xml\":{source:\"iana\"},\"application/vnd.oma.bcast.imd+xml\":{source:\"iana\"},\"application/vnd.oma.bcast.ltkm\":{source:\"iana\"},\"application/vnd.oma.bcast.notification+xml\":{source:\"iana\"},\"application/vnd.oma.bcast.provisioningtrigger\":{source:\"iana\"},\"application/vnd.oma.bcast.sgboot\":{source:\"iana\"},\"application/vnd.oma.bcast.sgdd+xml\":{source:\"iana\"},\"application/vnd.oma.bcast.sgdu\":{source:\"iana\"},\"application/vnd.oma.bcast.simple-symbol-container\":{source:\"iana\"},\"application/vnd.oma.bcast.smartcard-trigger+xml\":{source:\"iana\"},\"application/vnd.oma.bcast.sprov+xml\":{source:\"iana\"},\"application/vnd.oma.bcast.stkm\":{source:\"iana\"},\"application/vnd.oma.cab-address-book+xml\":{source:\"iana\"},\"application/vnd.oma.cab-feature-handler+xml\":{source:\"iana\"},\"application/vnd.oma.cab-pcc+xml\":{source:\"iana\"},\"application/vnd.oma.cab-subs-invite+xml\":{source:\"iana\"},\"application/vnd.oma.cab-user-prefs+xml\":{source:\"iana\"},\"application/vnd.oma.dcd\":{source:\"iana\"},\"application/vnd.oma.dcdc\":{source:\"iana\"},\"application/vnd.oma.dd2+xml\":{source:\"iana\",extensions:[\"dd2\"]},\"application/vnd.oma.drm.risd+xml\":{source:\"iana\"},\"application/vnd.oma.group-usage-list+xml\":{source:\"iana\"},\"application/vnd.oma.lwm2m+json\":{source:\"iana\",compressible:!0},\"application/vnd.oma.lwm2m+tlv\":{source:\"iana\"},\"application/vnd.oma.pal+xml\":{source:\"iana\"},\"application/vnd.oma.poc.detailed-progress-report+xml\":{source:\"iana\"},\"application/vnd.oma.poc.final-report+xml\":{source:\"iana\"},\"application/vnd.oma.poc.groups+xml\":{source:\"iana\"},\"application/vnd.oma.poc.invocation-descriptor+xml\":{source:\"iana\"},\"application/vnd.oma.poc.optimized-progress-report+xml\":{source:\"iana\"},\"application/vnd.oma.push\":{source:\"iana\"},\"application/vnd.oma.scidm.messages+xml\":{source:\"iana\"},\"application/vnd.oma.xcap-directory+xml\":{source:\"iana\"},\"application/vnd.omads-email+xml\":{source:\"iana\"},\"application/vnd.omads-file+xml\":{source:\"iana\"},\"application/vnd.omads-folder+xml\":{source:\"iana\"},\"application/vnd.omaloc-supl-init\":{source:\"iana\"},\"application/vnd.onepager\":{source:\"iana\"},\"application/vnd.onepagertamp\":{source:\"iana\"},\"application/vnd.onepagertamx\":{source:\"iana\"},\"application/vnd.onepagertat\":{source:\"iana\"},\"application/vnd.onepagertatp\":{source:\"iana\"},\"application/vnd.onepagertatx\":{source:\"iana\"},\"application/vnd.openblox.game+xml\":{source:\"iana\"},\"application/vnd.openblox.game-binary\":{source:\"iana\"},\"application/vnd.openeye.oeb\":{source:\"iana\"},\"application/vnd.openofficeorg.extension\":{source:\"apache\",extensions:[\"oxt\"]},\"application/vnd.openstreetmap.data+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.custom-properties+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.customxmlproperties+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.drawing+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.drawingml.chart+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.extended-properties+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.comments+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.presentation\":{source:\"iana\",compressible:!1,extensions:[\"pptx\"]},\"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.slide\":{source:\"iana\",extensions:[\"sldx\"]},\"application/vnd.openxmlformats-officedocument.presentationml.slide+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.slideshow\":{source:\"iana\",extensions:[\"ppsx\"]},\"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.tags+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.template\":{source:\"iana\",extensions:[\"potx\"]},\"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\":{source:\"iana\",compressible:!1,extensions:[\"xlsx\"]},\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.template\":{source:\"iana\",extensions:[\"xltx\"]},\"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.theme+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.themeoverride+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.vmldrawing\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\":{source:\"iana\",compressible:!1,extensions:[\"docx\"]},\"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.template\":{source:\"iana\",extensions:[\"dotx\"]},\"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-package.core-properties+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml\":{source:\"iana\"},\"application/vnd.openxmlformats-package.relationships+xml\":{source:\"iana\"},\"application/vnd.oracle.resource+json\":{source:\"iana\",compressible:!0},\"application/vnd.orange.indata\":{source:\"iana\"},\"application/vnd.osa.netdeploy\":{source:\"iana\"},\"application/vnd.osgeo.mapguide.package\":{source:\"iana\",extensions:[\"mgp\"]},\"application/vnd.osgi.bundle\":{source:\"iana\"},\"application/vnd.osgi.dp\":{source:\"iana\",extensions:[\"dp\"]},\"application/vnd.osgi.subsystem\":{source:\"iana\",extensions:[\"esa\"]},\"application/vnd.otps.ct-kip+xml\":{source:\"iana\"},\"application/vnd.oxli.countgraph\":{source:\"iana\"},\"application/vnd.pagerduty+json\":{source:\"iana\",compressible:!0},\"application/vnd.palm\":{source:\"iana\",extensions:[\"pdb\",\"pqa\",\"oprc\"]},\"application/vnd.panoply\":{source:\"iana\"},\"application/vnd.paos+xml\":{source:\"iana\"},\"application/vnd.paos.xml\":{source:\"apache\"},\"application/vnd.patentdive\":{source:\"iana\"},\"application/vnd.pawaafile\":{source:\"iana\",extensions:[\"paw\"]},\"application/vnd.pcos\":{source:\"iana\"},\"application/vnd.pg.format\":{source:\"iana\",extensions:[\"str\"]},\"application/vnd.pg.osasli\":{source:\"iana\",extensions:[\"ei6\"]},\"application/vnd.piaccess.application-licence\":{source:\"iana\"},\"application/vnd.picsel\":{source:\"iana\",extensions:[\"efif\"]},\"application/vnd.pmi.widget\":{source:\"iana\",extensions:[\"wg\"]},\"application/vnd.poc.group-advertisement+xml\":{source:\"iana\"},\"application/vnd.pocketlearn\":{source:\"iana\",extensions:[\"plf\"]},\"application/vnd.powerbuilder6\":{source:\"iana\",extensions:[\"pbd\"]},\"application/vnd.powerbuilder6-s\":{source:\"iana\"},\"application/vnd.powerbuilder7\":{source:\"iana\"},\"application/vnd.powerbuilder7-s\":{source:\"iana\"},\"application/vnd.powerbuilder75\":{source:\"iana\"},\"application/vnd.powerbuilder75-s\":{source:\"iana\"},\"application/vnd.preminet\":{source:\"iana\"},\"application/vnd.previewsystems.box\":{source:\"iana\",extensions:[\"box\"]},\"application/vnd.proteus.magazine\":{source:\"iana\",extensions:[\"mgz\"]},\"application/vnd.publishare-delta-tree\":{source:\"iana\",extensions:[\"qps\"]},\"application/vnd.pvi.ptid1\":{source:\"iana\",extensions:[\"ptid\"]},\"application/vnd.pwg-multiplexed\":{source:\"iana\"},\"application/vnd.pwg-xhtml-print+xml\":{source:\"iana\"},\"application/vnd.qualcomm.brew-app-res\":{source:\"iana\"},\"application/vnd.quarantainenet\":{source:\"iana\"},\"application/vnd.quark.quarkxpress\":{source:\"iana\",extensions:[\"qxd\",\"qxt\",\"qwd\",\"qwt\",\"qxl\",\"qxb\"]},\"application/vnd.quobject-quoxdocument\":{source:\"iana\"},\"application/vnd.radisys.moml+xml\":{source:\"iana\"},\"application/vnd.radisys.msml+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-audit+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-audit-conf+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-audit-conn+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-audit-dialog+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-audit-stream+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-conf+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-dialog+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-dialog-base+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-dialog-fax-detect+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-dialog-fax-sendrecv+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-dialog-group+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-dialog-speech+xml\":{source:\"iana\"},\"application/vnd.radisys.msml-dialog-transform+xml\":{source:\"iana\"},\"application/vnd.rainstor.data\":{source:\"iana\"},\"application/vnd.rapid\":{source:\"iana\"},\"application/vnd.rar\":{source:\"iana\"},\"application/vnd.realvnc.bed\":{source:\"iana\",extensions:[\"bed\"]},\"application/vnd.recordare.musicxml\":{source:\"iana\",extensions:[\"mxl\"]},\"application/vnd.recordare.musicxml+xml\":{source:\"iana\",extensions:[\"musicxml\"]},\"application/vnd.renlearn.rlprint\":{source:\"iana\"},\"application/vnd.restful+json\":{source:\"iana\",compressible:!0},\"application/vnd.rig.cryptonote\":{source:\"iana\",extensions:[\"cryptonote\"]},\"application/vnd.rim.cod\":{source:\"apache\",extensions:[\"cod\"]},\"application/vnd.rn-realmedia\":{source:\"apache\",extensions:[\"rm\"]},\"application/vnd.rn-realmedia-vbr\":{source:\"apache\",extensions:[\"rmvb\"]},\"application/vnd.route66.link66+xml\":{source:\"iana\",extensions:[\"link66\"]},\"application/vnd.rs-274x\":{source:\"iana\"},\"application/vnd.ruckus.download\":{source:\"iana\"},\"application/vnd.s3sms\":{source:\"iana\"},\"application/vnd.sailingtracker.track\":{source:\"iana\",extensions:[\"st\"]},\"application/vnd.sbm.cid\":{source:\"iana\"},\"application/vnd.sbm.mid2\":{source:\"iana\"},\"application/vnd.scribus\":{source:\"iana\"},\"application/vnd.sealed.3df\":{source:\"iana\"},\"application/vnd.sealed.csf\":{source:\"iana\"},\"application/vnd.sealed.doc\":{source:\"iana\"},\"application/vnd.sealed.eml\":{source:\"iana\"},\"application/vnd.sealed.mht\":{source:\"iana\"},\"application/vnd.sealed.net\":{source:\"iana\"},\"application/vnd.sealed.ppt\":{source:\"iana\"},\"application/vnd.sealed.tiff\":{source:\"iana\"},\"application/vnd.sealed.xls\":{source:\"iana\"},\"application/vnd.sealedmedia.softseal.html\":{source:\"iana\"},\"application/vnd.sealedmedia.softseal.pdf\":{source:\"iana\"},\"application/vnd.seemail\":{source:\"iana\",extensions:[\"see\"]},\"application/vnd.sema\":{source:\"iana\",extensions:[\"sema\"]},\"application/vnd.semd\":{source:\"iana\",extensions:[\"semd\"]},\"application/vnd.semf\":{source:\"iana\",extensions:[\"semf\"]},\"application/vnd.shana.informed.formdata\":{source:\"iana\",extensions:[\"ifm\"]},\"application/vnd.shana.informed.formtemplate\":{source:\"iana\",extensions:[\"itp\"]},\"application/vnd.shana.informed.interchange\":{source:\"iana\",extensions:[\"iif\"]},\"application/vnd.shana.informed.package\":{source:\"iana\",extensions:[\"ipk\"]},\"application/vnd.sigrok.session\":{source:\"iana\"},\"application/vnd.simtech-mindmapper\":{source:\"iana\",extensions:[\"twd\",\"twds\"]},\"application/vnd.siren+json\":{source:\"iana\",compressible:!0},\"application/vnd.smaf\":{source:\"iana\",extensions:[\"mmf\"]},\"application/vnd.smart.notebook\":{source:\"iana\"},\"application/vnd.smart.teacher\":{source:\"iana\",extensions:[\"teacher\"]},\"application/vnd.software602.filler.form+xml\":{source:\"iana\"},\"application/vnd.software602.filler.form-xml-zip\":{source:\"iana\"},\"application/vnd.solent.sdkm+xml\":{source:\"iana\",extensions:[\"sdkm\",\"sdkd\"]},\"application/vnd.spotfire.dxp\":{source:\"iana\",extensions:[\"dxp\"]},\"application/vnd.spotfire.sfs\":{source:\"iana\",extensions:[\"sfs\"]},\"application/vnd.sqlite3\":{source:\"iana\"},\"application/vnd.sss-cod\":{source:\"iana\"},\"application/vnd.sss-dtf\":{source:\"iana\"},\"application/vnd.sss-ntf\":{source:\"iana\"},\"application/vnd.stardivision.calc\":{source:\"apache\",extensions:[\"sdc\"]},\"application/vnd.stardivision.draw\":{source:\"apache\",extensions:[\"sda\"]},\"application/vnd.stardivision.impress\":{source:\"apache\",extensions:[\"sdd\"]},\"application/vnd.stardivision.math\":{source:\"apache\",extensions:[\"smf\"]},\"application/vnd.stardivision.writer\":{source:\"apache\",extensions:[\"sdw\",\"vor\"]},\"application/vnd.stardivision.writer-global\":{source:\"apache\",extensions:[\"sgl\"]},\"application/vnd.stepmania.package\":{source:\"iana\",extensions:[\"smzip\"]},\"application/vnd.stepmania.stepchart\":{source:\"iana\",extensions:[\"sm\"]},\"application/vnd.street-stream\":{source:\"iana\"},\"application/vnd.sun.wadl+xml\":{source:\"iana\",compressible:!0,extensions:[\"wadl\"]},\"application/vnd.sun.xml.calc\":{source:\"apache\",extensions:[\"sxc\"]},\"application/vnd.sun.xml.calc.template\":{source:\"apache\",extensions:[\"stc\"]},\"application/vnd.sun.xml.draw\":{source:\"apache\",extensions:[\"sxd\"]},\"application/vnd.sun.xml.draw.template\":{source:\"apache\",extensions:[\"std\"]},\"application/vnd.sun.xml.impress\":{source:\"apache\",extensions:[\"sxi\"]},\"application/vnd.sun.xml.impress.template\":{source:\"apache\",extensions:[\"sti\"]},\"application/vnd.sun.xml.math\":{source:\"apache\",extensions:[\"sxm\"]},\"application/vnd.sun.xml.writer\":{source:\"apache\",extensions:[\"sxw\"]},\"application/vnd.sun.xml.writer.global\":{source:\"apache\",extensions:[\"sxg\"]},\"application/vnd.sun.xml.writer.template\":{source:\"apache\",extensions:[\"stw\"]},\"application/vnd.sus-calendar\":{source:\"iana\",extensions:[\"sus\",\"susp\"]},\"application/vnd.svd\":{source:\"iana\",extensions:[\"svd\"]},\"application/vnd.swiftview-ics\":{source:\"iana\"},\"application/vnd.symbian.install\":{source:\"apache\",extensions:[\"sis\",\"sisx\"]},\"application/vnd.syncml+xml\":{source:\"iana\",extensions:[\"xsm\"]},\"application/vnd.syncml.dm+wbxml\":{source:\"iana\",extensions:[\"bdm\"]},\"application/vnd.syncml.dm+xml\":{source:\"iana\",extensions:[\"xdm\"]},\"application/vnd.syncml.dm.notification\":{source:\"iana\"},\"application/vnd.syncml.dmddf+wbxml\":{source:\"iana\"},\"application/vnd.syncml.dmddf+xml\":{source:\"iana\"},\"application/vnd.syncml.dmtnds+wbxml\":{source:\"iana\"},\"application/vnd.syncml.dmtnds+xml\":{source:\"iana\"},\"application/vnd.syncml.ds.notification\":{source:\"iana\"},\"application/vnd.tableschema+json\":{source:\"iana\",compressible:!0},\"application/vnd.tao.intent-module-archive\":{source:\"iana\",extensions:[\"tao\"]},\"application/vnd.tcpdump.pcap\":{source:\"iana\",extensions:[\"pcap\",\"cap\",\"dmp\"]},\"application/vnd.tmd.mediaflex.api+xml\":{source:\"iana\"},\"application/vnd.tml\":{source:\"iana\"},\"application/vnd.tmobile-livetv\":{source:\"iana\",extensions:[\"tmo\"]},\"application/vnd.tri.onesource\":{source:\"iana\"},\"application/vnd.trid.tpt\":{source:\"iana\",extensions:[\"tpt\"]},\"application/vnd.triscape.mxs\":{source:\"iana\",extensions:[\"mxs\"]},\"application/vnd.trueapp\":{source:\"iana\",extensions:[\"tra\"]},\"application/vnd.truedoc\":{source:\"iana\"},\"application/vnd.ubisoft.webplayer\":{source:\"iana\"},\"application/vnd.ufdl\":{source:\"iana\",extensions:[\"ufd\",\"ufdl\"]},\"application/vnd.uiq.theme\":{source:\"iana\",extensions:[\"utz\"]},\"application/vnd.umajin\":{source:\"iana\",extensions:[\"umj\"]},\"application/vnd.unity\":{source:\"iana\",extensions:[\"unityweb\"]},\"application/vnd.uoml+xml\":{source:\"iana\",extensions:[\"uoml\"]},\"application/vnd.uplanet.alert\":{source:\"iana\"},\"application/vnd.uplanet.alert-wbxml\":{source:\"iana\"},\"application/vnd.uplanet.bearer-choice\":{source:\"iana\"},\"application/vnd.uplanet.bearer-choice-wbxml\":{source:\"iana\"},\"application/vnd.uplanet.cacheop\":{source:\"iana\"},\"application/vnd.uplanet.cacheop-wbxml\":{source:\"iana\"},\"application/vnd.uplanet.channel\":{source:\"iana\"},\"application/vnd.uplanet.channel-wbxml\":{source:\"iana\"},\"application/vnd.uplanet.list\":{source:\"iana\"},\"application/vnd.uplanet.list-wbxml\":{source:\"iana\"},\"application/vnd.uplanet.listcmd\":{source:\"iana\"},\"application/vnd.uplanet.listcmd-wbxml\":{source:\"iana\"},\"application/vnd.uplanet.signal\":{source:\"iana\"},\"application/vnd.uri-map\":{source:\"iana\"},\"application/vnd.valve.source.material\":{source:\"iana\"},\"application/vnd.vcx\":{source:\"iana\",extensions:[\"vcx\"]},\"application/vnd.vd-study\":{source:\"iana\"},\"application/vnd.vectorworks\":{source:\"iana\"},\"application/vnd.vel+json\":{source:\"iana\",compressible:!0},\"application/vnd.verimatrix.vcas\":{source:\"iana\"},\"application/vnd.vidsoft.vidconference\":{source:\"iana\"},\"application/vnd.visio\":{source:\"iana\",extensions:[\"vsd\",\"vst\",\"vss\",\"vsw\"]},\"application/vnd.visionary\":{source:\"iana\",extensions:[\"vis\"]},\"application/vnd.vividence.scriptfile\":{source:\"iana\"},\"application/vnd.vsf\":{source:\"iana\",extensions:[\"vsf\"]},\"application/vnd.wap.sic\":{source:\"iana\"},\"application/vnd.wap.slc\":{source:\"iana\"},\"application/vnd.wap.wbxml\":{source:\"iana\",extensions:[\"wbxml\"]},\"application/vnd.wap.wmlc\":{source:\"iana\",extensions:[\"wmlc\"]},\"application/vnd.wap.wmlscriptc\":{source:\"iana\",extensions:[\"wmlsc\"]},\"application/vnd.webturbo\":{source:\"iana\",extensions:[\"wtb\"]},\"application/vnd.wfa.p2p\":{source:\"iana\"},\"application/vnd.wfa.wsc\":{source:\"iana\"},\"application/vnd.windows.devicepairing\":{source:\"iana\"},\"application/vnd.wmc\":{source:\"iana\"},\"application/vnd.wmf.bootstrap\":{source:\"iana\"},\"application/vnd.wolfram.mathematica\":{source:\"iana\"},\"application/vnd.wolfram.mathematica.package\":{source:\"iana\"},\"application/vnd.wolfram.player\":{source:\"iana\",extensions:[\"nbp\"]},\"application/vnd.wordperfect\":{source:\"iana\",extensions:[\"wpd\"]},\"application/vnd.wqd\":{source:\"iana\",extensions:[\"wqd\"]},\"application/vnd.wrq-hp3000-labelled\":{source:\"iana\"},\"application/vnd.wt.stf\":{source:\"iana\",extensions:[\"stf\"]},\"application/vnd.wv.csp+wbxml\":{source:\"iana\"},\"application/vnd.wv.csp+xml\":{source:\"iana\"},\"application/vnd.wv.ssp+xml\":{source:\"iana\"},\"application/vnd.xacml+json\":{source:\"iana\",compressible:!0},\"application/vnd.xara\":{source:\"iana\",extensions:[\"xar\"]},\"application/vnd.xfdl\":{source:\"iana\",extensions:[\"xfdl\"]},\"application/vnd.xfdl.webform\":{source:\"iana\"},\"application/vnd.xmi+xml\":{source:\"iana\"},\"application/vnd.xmpie.cpkg\":{source:\"iana\"},\"application/vnd.xmpie.dpkg\":{source:\"iana\"},\"application/vnd.xmpie.plan\":{source:\"iana\"},\"application/vnd.xmpie.ppkg\":{source:\"iana\"},\"application/vnd.xmpie.xlim\":{source:\"iana\"},\"application/vnd.yamaha.hv-dic\":{source:\"iana\",extensions:[\"hvd\"]},\"application/vnd.yamaha.hv-script\":{source:\"iana\",extensions:[\"hvs\"]},\"application/vnd.yamaha.hv-voice\":{source:\"iana\",extensions:[\"hvp\"]},\"application/vnd.yamaha.openscoreformat\":{source:\"iana\",extensions:[\"osf\"]},\"application/vnd.yamaha.openscoreformat.osfpvg+xml\":{source:\"iana\",extensions:[\"osfpvg\"]},\"application/vnd.yamaha.remote-setup\":{source:\"iana\"},\"application/vnd.yamaha.smaf-audio\":{source:\"iana\",extensions:[\"saf\"]},\"application/vnd.yamaha.smaf-phrase\":{source:\"iana\",extensions:[\"spf\"]},\"application/vnd.yamaha.through-ngn\":{source:\"iana\"},\"application/vnd.yamaha.tunnel-udpencap\":{source:\"iana\"},\"application/vnd.yaoweme\":{source:\"iana\"},\"application/vnd.yellowriver-custom-menu\":{source:\"iana\",extensions:[\"cmp\"]},\"application/vnd.youtube.yt\":{source:\"iana\"},\"application/vnd.zul\":{source:\"iana\",extensions:[\"zir\",\"zirz\"]},\"application/vnd.zzazz.deck+xml\":{source:\"iana\",extensions:[\"zaz\"]},\"application/voicexml+xml\":{source:\"iana\",extensions:[\"vxml\"]},\"application/voucher-cms+json\":{source:\"iana\",compressible:!0},\"application/vq-rtcpxr\":{source:\"iana\"},\"application/wasm\":{compressible:!0,extensions:[\"wasm\"]},\"application/watcherinfo+xml\":{source:\"iana\"},\"application/webpush-options+json\":{source:\"iana\",compressible:!0},\"application/whoispp-query\":{source:\"iana\"},\"application/whoispp-response\":{source:\"iana\"},\"application/widget\":{source:\"iana\",extensions:[\"wgt\"]},\"application/winhlp\":{source:\"apache\",extensions:[\"hlp\"]},\"application/wita\":{source:\"iana\"},\"application/wordperfect5.1\":{source:\"iana\"},\"application/wsdl+xml\":{source:\"iana\",extensions:[\"wsdl\"]},\"application/wspolicy+xml\":{source:\"iana\",extensions:[\"wspolicy\"]},\"application/x-7z-compressed\":{source:\"apache\",compressible:!1,extensions:[\"7z\"]},\"application/x-abiword\":{source:\"apache\",extensions:[\"abw\"]},\"application/x-ace-compressed\":{source:\"apache\",extensions:[\"ace\"]},\"application/x-amf\":{source:\"apache\"},\"application/x-apple-diskimage\":{source:\"apache\",extensions:[\"dmg\"]},\"application/x-arj\":{compressible:!1,extensions:[\"arj\"]},\"application/x-authorware-bin\":{source:\"apache\",extensions:[\"aab\",\"x32\",\"u32\",\"vox\"]},\"application/x-authorware-map\":{source:\"apache\",extensions:[\"aam\"]},\"application/x-authorware-seg\":{source:\"apache\",extensions:[\"aas\"]},\"application/x-bcpio\":{source:\"apache\",extensions:[\"bcpio\"]},\"application/x-bdoc\":{compressible:!1,extensions:[\"bdoc\"]},\"application/x-bittorrent\":{source:\"apache\",extensions:[\"torrent\"]},\"application/x-blorb\":{source:\"apache\",extensions:[\"blb\",\"blorb\"]},\"application/x-bzip\":{source:\"apache\",compressible:!1,extensions:[\"bz\"]},\"application/x-bzip2\":{source:\"apache\",compressible:!1,extensions:[\"bz2\",\"boz\"]},\"application/x-cbr\":{source:\"apache\",extensions:[\"cbr\",\"cba\",\"cbt\",\"cbz\",\"cb7\"]},\"application/x-cdlink\":{source:\"apache\",extensions:[\"vcd\"]},\"application/x-cfs-compressed\":{source:\"apache\",extensions:[\"cfs\"]},\"application/x-chat\":{source:\"apache\",extensions:[\"chat\"]},\"application/x-chess-pgn\":{source:\"apache\",extensions:[\"pgn\"]},\"application/x-chrome-extension\":{extensions:[\"crx\"]},\"application/x-cocoa\":{source:\"nginx\",extensions:[\"cco\"]},\"application/x-compress\":{source:\"apache\"},\"application/x-conference\":{source:\"apache\",extensions:[\"nsc\"]},\"application/x-cpio\":{source:\"apache\",extensions:[\"cpio\"]},\"application/x-csh\":{source:\"apache\",extensions:[\"csh\"]},\"application/x-deb\":{compressible:!1},\"application/x-debian-package\":{source:\"apache\",extensions:[\"deb\",\"udeb\"]},\"application/x-dgc-compressed\":{source:\"apache\",extensions:[\"dgc\"]},\"application/x-director\":{source:\"apache\",extensions:[\"dir\",\"dcr\",\"dxr\",\"cst\",\"cct\",\"cxt\",\"w3d\",\"fgd\",\"swa\"]},\"application/x-doom\":{source:\"apache\",extensions:[\"wad\"]},\"application/x-dtbncx+xml\":{source:\"apache\",extensions:[\"ncx\"]},\"application/x-dtbook+xml\":{source:\"apache\",extensions:[\"dtb\"]},\"application/x-dtbresource+xml\":{source:\"apache\",extensions:[\"res\"]},\"application/x-dvi\":{source:\"apache\",compressible:!1,extensions:[\"dvi\"]},\"application/x-envoy\":{source:\"apache\",extensions:[\"evy\"]},\"application/x-eva\":{source:\"apache\",extensions:[\"eva\"]},\"application/x-font-bdf\":{source:\"apache\",extensions:[\"bdf\"]},\"application/x-font-dos\":{source:\"apache\"},\"application/x-font-framemaker\":{source:\"apache\"},\"application/x-font-ghostscript\":{source:\"apache\",extensions:[\"gsf\"]},\"application/x-font-libgrx\":{source:\"apache\"},\"application/x-font-linux-psf\":{source:\"apache\",extensions:[\"psf\"]},\"application/x-font-pcf\":{source:\"apache\",extensions:[\"pcf\"]},\"application/x-font-snf\":{source:\"apache\",extensions:[\"snf\"]},\"application/x-font-speedo\":{source:\"apache\"},\"application/x-font-sunos-news\":{source:\"apache\"},\"application/x-font-type1\":{source:\"apache\",extensions:[\"pfa\",\"pfb\",\"pfm\",\"afm\"]},\"application/x-font-vfont\":{source:\"apache\"},\"application/x-freearc\":{source:\"apache\",extensions:[\"arc\"]},\"application/x-futuresplash\":{source:\"apache\",extensions:[\"spl\"]},\"application/x-gca-compressed\":{source:\"apache\",extensions:[\"gca\"]},\"application/x-glulx\":{source:\"apache\",extensions:[\"ulx\"]},\"application/x-gnumeric\":{source:\"apache\",extensions:[\"gnumeric\"]},\"application/x-gramps-xml\":{source:\"apache\",extensions:[\"gramps\"]},\"application/x-gtar\":{source:\"apache\",extensions:[\"gtar\"]},\"application/x-gzip\":{source:\"apache\"},\"application/x-hdf\":{source:\"apache\",extensions:[\"hdf\"]},\"application/x-httpd-php\":{compressible:!0,extensions:[\"php\"]},\"application/x-install-instructions\":{source:\"apache\",extensions:[\"install\"]},\"application/x-iso9660-image\":{source:\"apache\",extensions:[\"iso\"]},\"application/x-java-archive-diff\":{source:\"nginx\",extensions:[\"jardiff\"]},\"application/x-java-jnlp-file\":{source:\"apache\",compressible:!1,extensions:[\"jnlp\"]},\"application/x-javascript\":{compressible:!0},\"application/x-latex\":{source:\"apache\",compressible:!1,extensions:[\"latex\"]},\"application/x-lua-bytecode\":{extensions:[\"luac\"]},\"application/x-lzh-compressed\":{source:\"apache\",extensions:[\"lzh\",\"lha\"]},\"application/x-makeself\":{source:\"nginx\",extensions:[\"run\"]},\"application/x-mie\":{source:\"apache\",extensions:[\"mie\"]},\"application/x-mobipocket-ebook\":{source:\"apache\",extensions:[\"prc\",\"mobi\"]},\"application/x-mpegurl\":{compressible:!1},\"application/x-ms-application\":{source:\"apache\",extensions:[\"application\"]},\"application/x-ms-shortcut\":{source:\"apache\",extensions:[\"lnk\"]},\"application/x-ms-wmd\":{source:\"apache\",extensions:[\"wmd\"]},\"application/x-ms-wmz\":{source:\"apache\",extensions:[\"wmz\"]},\"application/x-ms-xbap\":{source:\"apache\",extensions:[\"xbap\"]},\"application/x-msaccess\":{source:\"apache\",extensions:[\"mdb\"]},\"application/x-msbinder\":{source:\"apache\",extensions:[\"obd\"]},\"application/x-mscardfile\":{source:\"apache\",extensions:[\"crd\"]},\"application/x-msclip\":{source:\"apache\",extensions:[\"clp\"]},\"application/x-msdos-program\":{extensions:[\"exe\"]},\"application/x-msdownload\":{source:\"apache\",extensions:[\"exe\",\"dll\",\"com\",\"bat\",\"msi\"]},\"application/x-msmediaview\":{source:\"apache\",extensions:[\"mvb\",\"m13\",\"m14\"]},\"application/x-msmetafile\":{source:\"apache\",extensions:[\"wmf\",\"wmz\",\"emf\",\"emz\"]},\"application/x-msmoney\":{source:\"apache\",extensions:[\"mny\"]},\"application/x-mspublisher\":{source:\"apache\",extensions:[\"pub\"]},\"application/x-msschedule\":{source:\"apache\",extensions:[\"scd\"]},\"application/x-msterminal\":{source:\"apache\",extensions:[\"trm\"]},\"application/x-mswrite\":{source:\"apache\",extensions:[\"wri\"]},\"application/x-netcdf\":{source:\"apache\",extensions:[\"nc\",\"cdf\"]},\"application/x-ns-proxy-autoconfig\":{compressible:!0,extensions:[\"pac\"]},\"application/x-nzb\":{source:\"apache\",extensions:[\"nzb\"]},\"application/x-perl\":{source:\"nginx\",extensions:[\"pl\",\"pm\"]},\"application/x-pilot\":{source:\"nginx\",extensions:[\"prc\",\"pdb\"]},\"application/x-pkcs12\":{source:\"apache\",compressible:!1,extensions:[\"p12\",\"pfx\"]},\"application/x-pkcs7-certificates\":{source:\"apache\",extensions:[\"p7b\",\"spc\"]},\"application/x-pkcs7-certreqresp\":{source:\"apache\",extensions:[\"p7r\"]},\"application/x-rar-compressed\":{source:\"apache\",compressible:!1,extensions:[\"rar\"]},\"application/x-redhat-package-manager\":{source:\"nginx\",extensions:[\"rpm\"]},\"application/x-research-info-systems\":{source:\"apache\",extensions:[\"ris\"]},\"application/x-sea\":{source:\"nginx\",extensions:[\"sea\"]},\"application/x-sh\":{source:\"apache\",compressible:!0,extensions:[\"sh\"]},\"application/x-shar\":{source:\"apache\",extensions:[\"shar\"]},\"application/x-shockwave-flash\":{source:\"apache\",compressible:!1,extensions:[\"swf\"]},\"application/x-silverlight-app\":{source:\"apache\",extensions:[\"xap\"]},\"application/x-sql\":{source:\"apache\",extensions:[\"sql\"]},\"application/x-stuffit\":{source:\"apache\",compressible:!1,extensions:[\"sit\"]},\"application/x-stuffitx\":{source:\"apache\",extensions:[\"sitx\"]},\"application/x-subrip\":{source:\"apache\",extensions:[\"srt\"]},\"application/x-sv4cpio\":{source:\"apache\",extensions:[\"sv4cpio\"]},\"application/x-sv4crc\":{source:\"apache\",extensions:[\"sv4crc\"]},\"application/x-t3vm-image\":{source:\"apache\",extensions:[\"t3\"]},\"application/x-tads\":{source:\"apache\",extensions:[\"gam\"]},\"application/x-tar\":{source:\"apache\",compressible:!0,extensions:[\"tar\"]},\"application/x-tcl\":{source:\"apache\",extensions:[\"tcl\",\"tk\"]},\"application/x-tex\":{source:\"apache\",extensions:[\"tex\"]},\"application/x-tex-tfm\":{source:\"apache\",extensions:[\"tfm\"]},\"application/x-texinfo\":{source:\"apache\",extensions:[\"texinfo\",\"texi\"]},\"application/x-tgif\":{source:\"apache\",extensions:[\"obj\"]},\"application/x-ustar\":{source:\"apache\",extensions:[\"ustar\"]},\"application/x-virtualbox-hdd\":{compressible:!0,extensions:[\"hdd\"]},\"application/x-virtualbox-ova\":{compressible:!0,extensions:[\"ova\"]},\"application/x-virtualbox-ovf\":{compressible:!0,extensions:[\"ovf\"]},\"application/x-virtualbox-vbox\":{compressible:!0,extensions:[\"vbox\"]},\"application/x-virtualbox-vbox-extpack\":{compressible:!1,extensions:[\"vbox-extpack\"]},\"application/x-virtualbox-vdi\":{compressible:!0,extensions:[\"vdi\"]},\"application/x-virtualbox-vhd\":{compressible:!0,extensions:[\"vhd\"]},\"application/x-virtualbox-vmdk\":{compressible:!0,extensions:[\"vmdk\"]},\"application/x-wais-source\":{source:\"apache\",extensions:[\"src\"]},\"application/x-web-app-manifest+json\":{compressible:!0,extensions:[\"webapp\"]},\"application/x-www-form-urlencoded\":{source:\"iana\",compressible:!0},\"application/x-x509-ca-cert\":{source:\"apache\",extensions:[\"der\",\"crt\",\"pem\"]},\"application/x-xfig\":{source:\"apache\",extensions:[\"fig\"]},\"application/x-xliff+xml\":{source:\"apache\",extensions:[\"xlf\"]},\"application/x-xpinstall\":{source:\"apache\",compressible:!1,extensions:[\"xpi\"]},\"application/x-xz\":{source:\"apache\",extensions:[\"xz\"]},\"application/x-zmachine\":{source:\"apache\",extensions:[\"z1\",\"z2\",\"z3\",\"z4\",\"z5\",\"z6\",\"z7\",\"z8\"]},\"application/x400-bp\":{source:\"iana\"},\"application/xacml+xml\":{source:\"iana\"},\"application/xaml+xml\":{source:\"apache\",extensions:[\"xaml\"]},\"application/xcap-att+xml\":{source:\"iana\"},\"application/xcap-caps+xml\":{source:\"iana\"},\"application/xcap-diff+xml\":{source:\"iana\",extensions:[\"xdf\"]},\"application/xcap-el+xml\":{source:\"iana\"},\"application/xcap-error+xml\":{source:\"iana\"},\"application/xcap-ns+xml\":{source:\"iana\"},\"application/xcon-conference-info+xml\":{source:\"iana\"},\"application/xcon-conference-info-diff+xml\":{source:\"iana\"},\"application/xenc+xml\":{source:\"iana\",extensions:[\"xenc\"]},\"application/xhtml+xml\":{source:\"iana\",compressible:!0,extensions:[\"xhtml\",\"xht\"]},\"application/xhtml-voice+xml\":{source:\"apache\"},\"application/xml\":{source:\"iana\",compressible:!0,extensions:[\"xml\",\"xsl\",\"xsd\",\"rng\"]},\"application/xml-dtd\":{source:\"iana\",compressible:!0,extensions:[\"dtd\"]},\"application/xml-external-parsed-entity\":{source:\"iana\"},\"application/xml-patch+xml\":{source:\"iana\"},\"application/xmpp+xml\":{source:\"iana\"},\"application/xop+xml\":{source:\"iana\",compressible:!0,extensions:[\"xop\"]},\"application/xproc+xml\":{source:\"apache\",extensions:[\"xpl\"]},\"application/xslt+xml\":{source:\"iana\",extensions:[\"xslt\"]},\"application/xspf+xml\":{source:\"apache\",extensions:[\"xspf\"]},\"application/xv+xml\":{source:\"iana\",extensions:[\"mxml\",\"xhvml\",\"xvml\",\"xvm\"]},\"application/yang\":{source:\"iana\",extensions:[\"yang\"]},\"application/yang-data+json\":{source:\"iana\",compressible:!0},\"application/yang-data+xml\":{source:\"iana\"},\"application/yang-patch+json\":{source:\"iana\",compressible:!0},\"application/yang-patch+xml\":{source:\"iana\"},\"application/yin+xml\":{source:\"iana\",extensions:[\"yin\"]},\"application/zip\":{source:\"iana\",compressible:!1,extensions:[\"zip\"]},\"application/zlib\":{source:\"iana\"},\"audio/1d-interleaved-parityfec\":{source:\"iana\"},\"audio/32kadpcm\":{source:\"iana\"},\"audio/3gpp\":{source:\"iana\",compressible:!1,extensions:[\"3gpp\"]},\"audio/3gpp2\":{source:\"iana\"},\"audio/ac3\":{source:\"iana\"},\"audio/adpcm\":{source:\"apache\",extensions:[\"adp\"]},\"audio/amr\":{source:\"iana\"},\"audio/amr-wb\":{source:\"iana\"},\"audio/amr-wb+\":{source:\"iana\"},\"audio/aptx\":{source:\"iana\"},\"audio/asc\":{source:\"iana\"},\"audio/atrac-advanced-lossless\":{source:\"iana\"},\"audio/atrac-x\":{source:\"iana\"},\"audio/atrac3\":{source:\"iana\"},\"audio/basic\":{source:\"iana\",compressible:!1,extensions:[\"au\",\"snd\"]},\"audio/bv16\":{source:\"iana\"},\"audio/bv32\":{source:\"iana\"},\"audio/clearmode\":{source:\"iana\"},\"audio/cn\":{source:\"iana\"},\"audio/dat12\":{source:\"iana\"},\"audio/dls\":{source:\"iana\"},\"audio/dsr-es201108\":{source:\"iana\"},\"audio/dsr-es202050\":{source:\"iana\"},\"audio/dsr-es202211\":{source:\"iana\"},\"audio/dsr-es202212\":{source:\"iana\"},\"audio/dv\":{source:\"iana\"},\"audio/dvi4\":{source:\"iana\"},\"audio/eac3\":{source:\"iana\"},\"audio/encaprtp\":{source:\"iana\"},\"audio/evrc\":{source:\"iana\"},\"audio/evrc-qcp\":{source:\"iana\"},\"audio/evrc0\":{source:\"iana\"},\"audio/evrc1\":{source:\"iana\"},\"audio/evrcb\":{source:\"iana\"},\"audio/evrcb0\":{source:\"iana\"},\"audio/evrcb1\":{source:\"iana\"},\"audio/evrcnw\":{source:\"iana\"},\"audio/evrcnw0\":{source:\"iana\"},\"audio/evrcnw1\":{source:\"iana\"},\"audio/evrcwb\":{source:\"iana\"},\"audio/evrcwb0\":{source:\"iana\"},\"audio/evrcwb1\":{source:\"iana\"},\"audio/evs\":{source:\"iana\"},\"audio/fwdred\":{source:\"iana\"},\"audio/g711-0\":{source:\"iana\"},\"audio/g719\":{source:\"iana\"},\"audio/g722\":{source:\"iana\"},\"audio/g7221\":{source:\"iana\"},\"audio/g723\":{source:\"iana\"},\"audio/g726-16\":{source:\"iana\"},\"audio/g726-24\":{source:\"iana\"},\"audio/g726-32\":{source:\"iana\"},\"audio/g726-40\":{source:\"iana\"},\"audio/g728\":{source:\"iana\"},\"audio/g729\":{source:\"iana\"},\"audio/g7291\":{source:\"iana\"},\"audio/g729d\":{source:\"iana\"},\"audio/g729e\":{source:\"iana\"},\"audio/gsm\":{source:\"iana\"},\"audio/gsm-efr\":{source:\"iana\"},\"audio/gsm-hr-08\":{source:\"iana\"},\"audio/ilbc\":{source:\"iana\"},\"audio/ip-mr_v2.5\":{source:\"iana\"},\"audio/isac\":{source:\"apache\"},\"audio/l16\":{source:\"iana\"},\"audio/l20\":{source:\"iana\"},\"audio/l24\":{source:\"iana\",compressible:!1},\"audio/l8\":{source:\"iana\"},\"audio/lpc\":{source:\"iana\"},\"audio/melp\":{source:\"iana\"},\"audio/melp1200\":{source:\"iana\"},\"audio/melp2400\":{source:\"iana\"},\"audio/melp600\":{source:\"iana\"},\"audio/midi\":{source:\"apache\",extensions:[\"mid\",\"midi\",\"kar\",\"rmi\"]},\"audio/mobile-xmf\":{source:\"iana\"},\"audio/mp3\":{compressible:!1,extensions:[\"mp3\"]},\"audio/mp4\":{source:\"iana\",compressible:!1,extensions:[\"m4a\",\"mp4a\"]},\"audio/mp4a-latm\":{source:\"iana\"},\"audio/mpa\":{source:\"iana\"},\"audio/mpa-robust\":{source:\"iana\"},\"audio/mpeg\":{source:\"iana\",compressible:!1,extensions:[\"mpga\",\"mp2\",\"mp2a\",\"mp3\",\"m2a\",\"m3a\"]},\"audio/mpeg4-generic\":{source:\"iana\"},\"audio/musepack\":{source:\"apache\"},\"audio/ogg\":{source:\"iana\",compressible:!1,extensions:[\"oga\",\"ogg\",\"spx\"]},\"audio/opus\":{source:\"iana\"},\"audio/parityfec\":{source:\"iana\"},\"audio/pcma\":{source:\"iana\"},\"audio/pcma-wb\":{source:\"iana\"},\"audio/pcmu\":{source:\"iana\"},\"audio/pcmu-wb\":{source:\"iana\"},\"audio/prs.sid\":{source:\"iana\"},\"audio/qcelp\":{source:\"iana\"},\"audio/raptorfec\":{source:\"iana\"},\"audio/red\":{source:\"iana\"},\"audio/rtp-enc-aescm128\":{source:\"iana\"},\"audio/rtp-midi\":{source:\"iana\"},\"audio/rtploopback\":{source:\"iana\"},\"audio/rtx\":{source:\"iana\"},\"audio/s3m\":{source:\"apache\",extensions:[\"s3m\"]},\"audio/silk\":{source:\"apache\",extensions:[\"sil\"]},\"audio/smv\":{source:\"iana\"},\"audio/smv-qcp\":{source:\"iana\"},\"audio/smv0\":{source:\"iana\"},\"audio/sp-midi\":{source:\"iana\"},\"audio/speex\":{source:\"iana\"},\"audio/t140c\":{source:\"iana\"},\"audio/t38\":{source:\"iana\"},\"audio/telephone-event\":{source:\"iana\"},\"audio/tone\":{source:\"iana\"},\"audio/uemclip\":{source:\"iana\"},\"audio/ulpfec\":{source:\"iana\"},\"audio/vdvi\":{source:\"iana\"},\"audio/vmr-wb\":{source:\"iana\"},\"audio/vnd.3gpp.iufp\":{source:\"iana\"},\"audio/vnd.4sb\":{source:\"iana\"},\"audio/vnd.audiokoz\":{source:\"iana\"},\"audio/vnd.celp\":{source:\"iana\"},\"audio/vnd.cisco.nse\":{source:\"iana\"},\"audio/vnd.cmles.radio-events\":{source:\"iana\"},\"audio/vnd.cns.anp1\":{source:\"iana\"},\"audio/vnd.cns.inf1\":{source:\"iana\"},\"audio/vnd.dece.audio\":{source:\"iana\",extensions:[\"uva\",\"uvva\"]},\"audio/vnd.digital-winds\":{source:\"iana\",extensions:[\"eol\"]},\"audio/vnd.dlna.adts\":{source:\"iana\"},\"audio/vnd.dolby.heaac.1\":{source:\"iana\"},\"audio/vnd.dolby.heaac.2\":{source:\"iana\"},\"audio/vnd.dolby.mlp\":{source:\"iana\"},\"audio/vnd.dolby.mps\":{source:\"iana\"},\"audio/vnd.dolby.pl2\":{source:\"iana\"},\"audio/vnd.dolby.pl2x\":{source:\"iana\"},\"audio/vnd.dolby.pl2z\":{source:\"iana\"},\"audio/vnd.dolby.pulse.1\":{source:\"iana\"},\"audio/vnd.dra\":{source:\"iana\",extensions:[\"dra\"]},\"audio/vnd.dts\":{source:\"iana\",extensions:[\"dts\"]},\"audio/vnd.dts.hd\":{source:\"iana\",extensions:[\"dtshd\"]},\"audio/vnd.dvb.file\":{source:\"iana\"},\"audio/vnd.everad.plj\":{source:\"iana\"},\"audio/vnd.hns.audio\":{source:\"iana\"},\"audio/vnd.lucent.voice\":{source:\"iana\",extensions:[\"lvp\"]},\"audio/vnd.ms-playready.media.pya\":{source:\"iana\",extensions:[\"pya\"]},\"audio/vnd.nokia.mobile-xmf\":{source:\"iana\"},\"audio/vnd.nortel.vbk\":{source:\"iana\"},\"audio/vnd.nuera.ecelp4800\":{source:\"iana\",extensions:[\"ecelp4800\"]},\"audio/vnd.nuera.ecelp7470\":{source:\"iana\",extensions:[\"ecelp7470\"]},\"audio/vnd.nuera.ecelp9600\":{source:\"iana\",extensions:[\"ecelp9600\"]},\"audio/vnd.octel.sbc\":{source:\"iana\"},\"audio/vnd.presonus.multitrack\":{source:\"iana\"},\"audio/vnd.qcelp\":{source:\"iana\"},\"audio/vnd.rhetorex.32kadpcm\":{source:\"iana\"},\"audio/vnd.rip\":{source:\"iana\",extensions:[\"rip\"]},\"audio/vnd.rn-realaudio\":{compressible:!1},\"audio/vnd.sealedmedia.softseal.mpeg\":{source:\"iana\"},\"audio/vnd.vmx.cvsd\":{source:\"iana\"},\"audio/vnd.wave\":{compressible:!1},\"audio/vorbis\":{source:\"iana\",compressible:!1},\"audio/vorbis-config\":{source:\"iana\"},\"audio/wav\":{compressible:!1,extensions:[\"wav\"]},\"audio/wave\":{compressible:!1,extensions:[\"wav\"]},\"audio/webm\":{source:\"apache\",compressible:!1,extensions:[\"weba\"]},\"audio/x-aac\":{source:\"apache\",compressible:!1,extensions:[\"aac\"]},\"audio/x-aiff\":{source:\"apache\",extensions:[\"aif\",\"aiff\",\"aifc\"]},\"audio/x-caf\":{source:\"apache\",compressible:!1,extensions:[\"caf\"]},\"audio/x-flac\":{source:\"apache\",extensions:[\"flac\"]},\"audio/x-m4a\":{source:\"nginx\",extensions:[\"m4a\"]},\"audio/x-matroska\":{source:\"apache\",extensions:[\"mka\"]},\"audio/x-mpegurl\":{source:\"apache\",extensions:[\"m3u\"]},\"audio/x-ms-wax\":{source:\"apache\",extensions:[\"wax\"]},\"audio/x-ms-wma\":{source:\"apache\",extensions:[\"wma\"]},\"audio/x-pn-realaudio\":{source:\"apache\",extensions:[\"ram\",\"ra\"]},\"audio/x-pn-realaudio-plugin\":{source:\"apache\",extensions:[\"rmp\"]},\"audio/x-realaudio\":{source:\"nginx\",extensions:[\"ra\"]},\"audio/x-tta\":{source:\"apache\"},\"audio/x-wav\":{source:\"apache\",extensions:[\"wav\"]},\"audio/xm\":{source:\"apache\",extensions:[\"xm\"]},\"chemical/x-cdx\":{source:\"apache\",extensions:[\"cdx\"]},\"chemical/x-cif\":{source:\"apache\",extensions:[\"cif\"]},\"chemical/x-cmdf\":{source:\"apache\",extensions:[\"cmdf\"]},\"chemical/x-cml\":{source:\"apache\",extensions:[\"cml\"]},\"chemical/x-csml\":{source:\"apache\",extensions:[\"csml\"]},\"chemical/x-pdb\":{source:\"apache\"},\"chemical/x-xyz\":{source:\"apache\",extensions:[\"xyz\"]},\"font/collection\":{source:\"iana\",extensions:[\"ttc\"]},\"font/otf\":{source:\"iana\",compressible:!0,extensions:[\"otf\"]},\"font/sfnt\":{source:\"iana\"},\"font/ttf\":{source:\"iana\",extensions:[\"ttf\"]},\"font/woff\":{source:\"iana\",extensions:[\"woff\"]},\"font/woff2\":{source:\"iana\",extensions:[\"woff2\"]},\"image/aces\":{source:\"iana\"},\"image/apng\":{compressible:!1,extensions:[\"apng\"]},\"image/bmp\":{source:\"iana\",compressible:!0,extensions:[\"bmp\"]},\"image/cgm\":{source:\"iana\",extensions:[\"cgm\"]},\"image/dicom-rle\":{source:\"iana\"},\"image/emf\":{source:\"iana\"},\"image/fits\":{source:\"iana\"},\"image/g3fax\":{source:\"iana\",extensions:[\"g3\"]},\"image/gif\":{source:\"iana\",compressible:!1,extensions:[\"gif\"]},\"image/ief\":{source:\"iana\",extensions:[\"ief\"]},\"image/jls\":{source:\"iana\"},\"image/jp2\":{source:\"iana\",compressible:!1,extensions:[\"jp2\",\"jpg2\"]},\"image/jpeg\":{source:\"iana\",compressible:!1,extensions:[\"jpeg\",\"jpg\",\"jpe\"]},\"image/jpm\":{source:\"iana\",compressible:!1,extensions:[\"jpm\"]},\"image/jpx\":{source:\"iana\",compressible:!1,extensions:[\"jpx\",\"jpf\"]},\"image/ktx\":{source:\"iana\",extensions:[\"ktx\"]},\"image/naplps\":{source:\"iana\"},\"image/pjpeg\":{compressible:!1},\"image/png\":{source:\"iana\",compressible:!1,extensions:[\"png\"]},\"image/prs.btif\":{source:\"iana\",extensions:[\"btif\"]},\"image/prs.pti\":{source:\"iana\"},\"image/pwg-raster\":{source:\"iana\"},\"image/sgi\":{source:\"apache\",extensions:[\"sgi\"]},\"image/svg+xml\":{source:\"iana\",compressible:!0,extensions:[\"svg\",\"svgz\"]},\"image/t38\":{source:\"iana\"},\"image/tiff\":{source:\"iana\",compressible:!1,extensions:[\"tiff\",\"tif\"]},\"image/tiff-fx\":{source:\"iana\"},\"image/vnd.adobe.photoshop\":{source:\"iana\",compressible:!0,extensions:[\"psd\"]},\"image/vnd.airzip.accelerator.azv\":{source:\"iana\"},\"image/vnd.cns.inf2\":{source:\"iana\"},\"image/vnd.dece.graphic\":{source:\"iana\",extensions:[\"uvi\",\"uvvi\",\"uvg\",\"uvvg\"]},\"image/vnd.djvu\":{source:\"iana\",extensions:[\"djvu\",\"djv\"]},\"image/vnd.dvb.subtitle\":{source:\"iana\",extensions:[\"sub\"]},\"image/vnd.dwg\":{source:\"iana\",extensions:[\"dwg\"]},\"image/vnd.dxf\":{source:\"iana\",extensions:[\"dxf\"]},\"image/vnd.fastbidsheet\":{source:\"iana\",extensions:[\"fbs\"]},\"image/vnd.fpx\":{source:\"iana\",extensions:[\"fpx\"]},\"image/vnd.fst\":{source:\"iana\",extensions:[\"fst\"]},\"image/vnd.fujixerox.edmics-mmr\":{source:\"iana\",extensions:[\"mmr\"]},\"image/vnd.fujixerox.edmics-rlc\":{source:\"iana\",extensions:[\"rlc\"]},\"image/vnd.globalgraphics.pgb\":{source:\"iana\"},\"image/vnd.microsoft.icon\":{source:\"iana\"},\"image/vnd.mix\":{source:\"iana\"},\"image/vnd.mozilla.apng\":{source:\"iana\"},\"image/vnd.ms-modi\":{source:\"iana\",extensions:[\"mdi\"]},\"image/vnd.ms-photo\":{source:\"apache\",extensions:[\"wdp\"]},\"image/vnd.net-fpx\":{source:\"iana\",extensions:[\"npx\"]},\"image/vnd.radiance\":{source:\"iana\"},\"image/vnd.sealed.png\":{source:\"iana\"},\"image/vnd.sealedmedia.softseal.gif\":{source:\"iana\"},\"image/vnd.sealedmedia.softseal.jpg\":{source:\"iana\"},\"image/vnd.svf\":{source:\"iana\"},\"image/vnd.tencent.tap\":{source:\"iana\"},\"image/vnd.valve.source.texture\":{source:\"iana\"},\"image/vnd.wap.wbmp\":{source:\"iana\",extensions:[\"wbmp\"]},\"image/vnd.xiff\":{source:\"iana\",extensions:[\"xif\"]},\"image/vnd.zbrush.pcx\":{source:\"iana\"},\"image/webp\":{source:\"apache\",extensions:[\"webp\"]},\"image/wmf\":{source:\"iana\"},\"image/x-3ds\":{source:\"apache\",extensions:[\"3ds\"]},\"image/x-cmu-raster\":{source:\"apache\",extensions:[\"ras\"]},\"image/x-cmx\":{source:\"apache\",extensions:[\"cmx\"]},\"image/x-freehand\":{source:\"apache\",extensions:[\"fh\",\"fhc\",\"fh4\",\"fh5\",\"fh7\"]},\"image/x-icon\":{source:\"apache\",compressible:!0,extensions:[\"ico\"]},\"image/x-jng\":{source:\"nginx\",extensions:[\"jng\"]},\"image/x-mrsid-image\":{source:\"apache\",extensions:[\"sid\"]},\"image/x-ms-bmp\":{source:\"nginx\",compressible:!0,extensions:[\"bmp\"]},\"image/x-pcx\":{source:\"apache\",extensions:[\"pcx\"]},\"image/x-pict\":{source:\"apache\",extensions:[\"pic\",\"pct\"]},\"image/x-portable-anymap\":{source:\"apache\",extensions:[\"pnm\"]},\"image/x-portable-bitmap\":{source:\"apache\",extensions:[\"pbm\"]},\"image/x-portable-graymap\":{source:\"apache\",extensions:[\"pgm\"]},\"image/x-portable-pixmap\":{source:\"apache\",extensions:[\"ppm\"]},\"image/x-rgb\":{source:\"apache\",extensions:[\"rgb\"]},\"image/x-tga\":{source:\"apache\",extensions:[\"tga\"]},\"image/x-xbitmap\":{source:\"apache\",extensions:[\"xbm\"]},\"image/x-xcf\":{compressible:!1},\"image/x-xpixmap\":{source:\"apache\",extensions:[\"xpm\"]},\"image/x-xwindowdump\":{source:\"apache\",extensions:[\"xwd\"]},\"message/cpim\":{source:\"iana\"},\"message/delivery-status\":{source:\"iana\"},\"message/disposition-notification\":{source:\"iana\",extensions:[\"disposition-notification\"]},\"message/external-body\":{source:\"iana\"},\"message/feedback-report\":{source:\"iana\"},\"message/global\":{source:\"iana\",extensions:[\"u8msg\"]},\"message/global-delivery-status\":{source:\"iana\",extensions:[\"u8dsn\"]},\"message/global-disposition-notification\":{source:\"iana\",extensions:[\"u8mdn\"]},\"message/global-headers\":{source:\"iana\",extensions:[\"u8hdr\"]},\"message/http\":{source:\"iana\",compressible:!1},\"message/imdn+xml\":{source:\"iana\",compressible:!0},\"message/news\":{source:\"iana\"},\"message/partial\":{source:\"iana\",compressible:!1},\"message/rfc822\":{source:\"iana\",compressible:!0,extensions:[\"eml\",\"mime\"]},\"message/s-http\":{source:\"iana\"},\"message/sip\":{source:\"iana\"},\"message/sipfrag\":{source:\"iana\"},\"message/tracking-status\":{source:\"iana\"},\"message/vnd.si.simp\":{source:\"iana\"},\"message/vnd.wfa.wsc\":{source:\"iana\",extensions:[\"wsc\"]},\"model/3mf\":{source:\"iana\"},\"model/gltf+json\":{source:\"iana\",compressible:!0,extensions:[\"gltf\"]},\"model/gltf-binary\":{source:\"iana\",compressible:!0,extensions:[\"glb\"]},\"model/iges\":{source:\"iana\",compressible:!1,extensions:[\"igs\",\"iges\"]},\"model/mesh\":{source:\"iana\",compressible:!1,extensions:[\"msh\",\"mesh\",\"silo\"]},\"model/vnd.collada+xml\":{source:\"iana\",extensions:[\"dae\"]},\"model/vnd.dwf\":{source:\"iana\",extensions:[\"dwf\"]},\"model/vnd.flatland.3dml\":{source:\"iana\"},\"model/vnd.gdl\":{source:\"iana\",extensions:[\"gdl\"]},\"model/vnd.gs-gdl\":{source:\"apache\"},\"model/vnd.gs.gdl\":{source:\"iana\"},\"model/vnd.gtw\":{source:\"iana\",extensions:[\"gtw\"]},\"model/vnd.moml+xml\":{source:\"iana\"},\"model/vnd.mts\":{source:\"iana\",extensions:[\"mts\"]},\"model/vnd.opengex\":{source:\"iana\"},\"model/vnd.parasolid.transmit.binary\":{source:\"iana\"},\"model/vnd.parasolid.transmit.text\":{source:\"iana\"},\"model/vnd.rosette.annotated-data-model\":{source:\"iana\"},\"model/vnd.valve.source.compiled-map\":{source:\"iana\"},\"model/vnd.vtu\":{source:\"iana\",extensions:[\"vtu\"]},\"model/vrml\":{source:\"iana\",compressible:!1,extensions:[\"wrl\",\"vrml\"]},\"model/x3d+binary\":{source:\"apache\",compressible:!1,extensions:[\"x3db\",\"x3dbz\"]},\"model/x3d+fastinfoset\":{source:\"iana\"},\"model/x3d+vrml\":{source:\"apache\",compressible:!1,extensions:[\"x3dv\",\"x3dvz\"]},\"model/x3d+xml\":{source:\"iana\",compressible:!0,extensions:[\"x3d\",\"x3dz\"]},\"model/x3d-vrml\":{source:\"iana\"},\"multipart/alternative\":{source:\"iana\",compressible:!1},\"multipart/appledouble\":{source:\"iana\"},\"multipart/byteranges\":{source:\"iana\"},\"multipart/digest\":{source:\"iana\"},\"multipart/encrypted\":{source:\"iana\",compressible:!1},\"multipart/form-data\":{source:\"iana\",compressible:!1},\"multipart/header-set\":{source:\"iana\"},\"multipart/mixed\":{source:\"iana\",compressible:!1},\"multipart/multilingual\":{source:\"iana\"},\"multipart/parallel\":{source:\"iana\"},\"multipart/related\":{source:\"iana\",compressible:!1},\"multipart/report\":{source:\"iana\"},\"multipart/signed\":{source:\"iana\",compressible:!1},\"multipart/vnd.bint.med-plus\":{source:\"iana\"},\"multipart/voice-message\":{source:\"iana\"},\"multipart/x-mixed-replace\":{source:\"iana\"},\"text/1d-interleaved-parityfec\":{source:\"iana\"},\"text/cache-manifest\":{source:\"iana\",compressible:!0,extensions:[\"appcache\",\"manifest\"]},\"text/calendar\":{source:\"iana\",extensions:[\"ics\",\"ifb\"]},\"text/calender\":{compressible:!0},\"text/cmd\":{compressible:!0},\"text/coffeescript\":{extensions:[\"coffee\",\"litcoffee\"]},\"text/css\":{source:\"iana\",charset:\"UTF-8\",compressible:!0,extensions:[\"css\"]},\"text/csv\":{source:\"iana\",compressible:!0,extensions:[\"csv\"]},\"text/csv-schema\":{source:\"iana\"},\"text/directory\":{source:\"iana\"},\"text/dns\":{source:\"iana\"},\"text/ecmascript\":{source:\"iana\"},\"text/encaprtp\":{source:\"iana\"},\"text/enriched\":{source:\"iana\"},\"text/fwdred\":{source:\"iana\"},\"text/grammar-ref-list\":{source:\"iana\"},\"text/html\":{source:\"iana\",compressible:!0,extensions:[\"html\",\"htm\",\"shtml\"]},\"text/jade\":{extensions:[\"jade\"]},\"text/javascript\":{source:\"iana\",compressible:!0},\"text/jcr-cnd\":{source:\"iana\"},\"text/jsx\":{compressible:!0,extensions:[\"jsx\"]},\"text/less\":{extensions:[\"less\"]},\"text/markdown\":{source:\"iana\",compressible:!0,extensions:[\"markdown\",\"md\"]},\"text/mathml\":{source:\"nginx\",extensions:[\"mml\"]},\"text/mizar\":{source:\"iana\"},\"text/n3\":{source:\"iana\",compressible:!0,extensions:[\"n3\"]},\"text/parameters\":{source:\"iana\"},\"text/parityfec\":{source:\"iana\"},\"text/plain\":{source:\"iana\",compressible:!0,extensions:[\"txt\",\"text\",\"conf\",\"def\",\"list\",\"log\",\"in\",\"ini\"]},\"text/provenance-notation\":{source:\"iana\"},\"text/prs.fallenstein.rst\":{source:\"iana\"},\"text/prs.lines.tag\":{source:\"iana\",extensions:[\"dsc\"]},\"text/prs.prop.logic\":{source:\"iana\"},\"text/raptorfec\":{source:\"iana\"},\"text/red\":{source:\"iana\"},\"text/rfc822-headers\":{source:\"iana\"},\"text/richtext\":{source:\"iana\",compressible:!0,extensions:[\"rtx\"]},\"text/rtf\":{source:\"iana\",compressible:!0,extensions:[\"rtf\"]},\"text/rtp-enc-aescm128\":{source:\"iana\"},\"text/rtploopback\":{source:\"iana\"},\"text/rtx\":{source:\"iana\"},\"text/sgml\":{source:\"iana\",extensions:[\"sgml\",\"sgm\"]},\"text/shex\":{extensions:[\"shex\"]},\"text/slim\":{extensions:[\"slim\",\"slm\"]},\"text/strings\":{source:\"iana\"},\"text/stylus\":{extensions:[\"stylus\",\"styl\"]},\"text/t140\":{source:\"iana\"},\"text/tab-separated-values\":{source:\"iana\",compressible:!0,extensions:[\"tsv\"]},\"text/troff\":{source:\"iana\",extensions:[\"t\",\"tr\",\"roff\",\"man\",\"me\",\"ms\"]},\"text/turtle\":{source:\"iana\",extensions:[\"ttl\"]},\"text/ulpfec\":{source:\"iana\"},\"text/uri-list\":{source:\"iana\",compressible:!0,extensions:[\"uri\",\"uris\",\"urls\"]},\"text/vcard\":{source:\"iana\",compressible:!0,extensions:[\"vcard\"]},\"text/vnd.a\":{source:\"iana\"},\"text/vnd.abc\":{source:\"iana\"},\"text/vnd.ascii-art\":{source:\"iana\"},\"text/vnd.curl\":{source:\"iana\",extensions:[\"curl\"]},\"text/vnd.curl.dcurl\":{source:\"apache\",extensions:[\"dcurl\"]},\"text/vnd.curl.mcurl\":{source:\"apache\",extensions:[\"mcurl\"]},\"text/vnd.curl.scurl\":{source:\"apache\",extensions:[\"scurl\"]},\"text/vnd.debian.copyright\":{source:\"iana\"},\"text/vnd.dmclientscript\":{source:\"iana\"},\"text/vnd.dvb.subtitle\":{source:\"iana\",extensions:[\"sub\"]},\"text/vnd.esmertec.theme-descriptor\":{source:\"iana\"},\"text/vnd.fly\":{source:\"iana\",extensions:[\"fly\"]},\"text/vnd.fmi.flexstor\":{source:\"iana\",extensions:[\"flx\"]},\"text/vnd.graphviz\":{source:\"iana\",extensions:[\"gv\"]},\"text/vnd.in3d.3dml\":{source:\"iana\",extensions:[\"3dml\"]},\"text/vnd.in3d.spot\":{source:\"iana\",extensions:[\"spot\"]},\"text/vnd.iptc.newsml\":{source:\"iana\"},\"text/vnd.iptc.nitf\":{source:\"iana\"},\"text/vnd.latex-z\":{source:\"iana\"},\"text/vnd.motorola.reflex\":{source:\"iana\"},\"text/vnd.ms-mediapackage\":{source:\"iana\"},\"text/vnd.net2phone.commcenter.command\":{source:\"iana\"},\"text/vnd.radisys.msml-basic-layout\":{source:\"iana\"},\"text/vnd.si.uricatalogue\":{source:\"iana\"},\"text/vnd.sun.j2me.app-descriptor\":{source:\"iana\",extensions:[\"jad\"]},\"text/vnd.trolltech.linguist\":{source:\"iana\"},\"text/vnd.wap.si\":{source:\"iana\"},\"text/vnd.wap.sl\":{source:\"iana\"},\"text/vnd.wap.wml\":{source:\"iana\",extensions:[\"wml\"]},\"text/vnd.wap.wmlscript\":{source:\"iana\",extensions:[\"wmls\"]},\"text/vtt\":{charset:\"UTF-8\",compressible:!0,extensions:[\"vtt\"]},\"text/x-asm\":{source:\"apache\",extensions:[\"s\",\"asm\"]},\"text/x-c\":{source:\"apache\",extensions:[\"c\",\"cc\",\"cxx\",\"cpp\",\"h\",\"hh\",\"dic\"]},\"text/x-component\":{source:\"nginx\",extensions:[\"htc\"]},\"text/x-fortran\":{source:\"apache\",extensions:[\"f\",\"for\",\"f77\",\"f90\"]},\"text/x-gwt-rpc\":{compressible:!0},\"text/x-handlebars-template\":{extensions:[\"hbs\"]},\"text/x-java-source\":{source:\"apache\",extensions:[\"java\"]},\"text/x-jquery-tmpl\":{compressible:!0},\"text/x-lua\":{extensions:[\"lua\"]},\"text/x-markdown\":{compressible:!0,extensions:[\"mkd\"]},\"text/x-nfo\":{source:\"apache\",extensions:[\"nfo\"]},\"text/x-opml\":{source:\"apache\",extensions:[\"opml\"]},\"text/x-org\":{compressible:!0,extensions:[\"org\"]},\"text/x-pascal\":{source:\"apache\",extensions:[\"p\",\"pas\"]},\"text/x-processing\":{compressible:!0,extensions:[\"pde\"]},\"text/x-sass\":{extensions:[\"sass\"]},\"text/x-scss\":{extensions:[\"scss\"]},\"text/x-setext\":{source:\"apache\",extensions:[\"etx\"]},\"text/x-sfv\":{source:\"apache\",extensions:[\"sfv\"]},\"text/x-suse-ymp\":{compressible:!0,extensions:[\"ymp\"]},\"text/x-uuencode\":{source:\"apache\",extensions:[\"uu\"]},\"text/x-vcalendar\":{source:\"apache\",extensions:[\"vcs\"]},\"text/x-vcard\":{source:\"apache\",extensions:[\"vcf\"]},\"text/xml\":{source:\"iana\",compressible:!0,extensions:[\"xml\"]},\"text/xml-external-parsed-entity\":{source:\"iana\"},\"text/yaml\":{extensions:[\"yaml\",\"yml\"]},\"video/1d-interleaved-parityfec\":{source:\"iana\"},\"video/3gpp\":{source:\"iana\",extensions:[\"3gp\",\"3gpp\"]},\"video/3gpp-tt\":{source:\"iana\"},\"video/3gpp2\":{source:\"iana\",extensions:[\"3g2\"]},\"video/bmpeg\":{source:\"iana\"},\"video/bt656\":{source:\"iana\"},\"video/celb\":{source:\"iana\"},\"video/dv\":{source:\"iana\"},\"video/encaprtp\":{source:\"iana\"},\"video/h261\":{source:\"iana\",extensions:[\"h261\"]},\"video/h263\":{source:\"iana\",extensions:[\"h263\"]},\"video/h263-1998\":{source:\"iana\"},\"video/h263-2000\":{source:\"iana\"},\"video/h264\":{source:\"iana\",extensions:[\"h264\"]},\"video/h264-rcdo\":{source:\"iana\"},\"video/h264-svc\":{source:\"iana\"},\"video/h265\":{source:\"iana\"},\"video/iso.segment\":{source:\"iana\"},\"video/jpeg\":{source:\"iana\",extensions:[\"jpgv\"]},\"video/jpeg2000\":{source:\"iana\"},\"video/jpm\":{source:\"apache\",extensions:[\"jpm\",\"jpgm\"]},\"video/mj2\":{source:\"iana\",extensions:[\"mj2\",\"mjp2\"]},\"video/mp1s\":{source:\"iana\"},\"video/mp2p\":{source:\"iana\"},\"video/mp2t\":{source:\"iana\",extensions:[\"ts\"]},\"video/mp4\":{source:\"iana\",compressible:!1,extensions:[\"mp4\",\"mp4v\",\"mpg4\"]},\"video/mp4v-es\":{source:\"iana\"},\"video/mpeg\":{source:\"iana\",compressible:!1,extensions:[\"mpeg\",\"mpg\",\"mpe\",\"m1v\",\"m2v\"]},\"video/mpeg4-generic\":{source:\"iana\"},\"video/mpv\":{source:\"iana\"},\"video/nv\":{source:\"iana\"},\"video/ogg\":{source:\"iana\",compressible:!1,extensions:[\"ogv\"]},\"video/parityfec\":{source:\"iana\"},\"video/pointer\":{source:\"iana\"},\"video/quicktime\":{source:\"iana\",compressible:!1,extensions:[\"qt\",\"mov\"]},\"video/raptorfec\":{source:\"iana\"},\"video/raw\":{source:\"iana\"},\"video/rtp-enc-aescm128\":{source:\"iana\"},\"video/rtploopback\":{source:\"iana\"},\"video/rtx\":{source:\"iana\"},\"video/smpte291\":{source:\"iana\"},\"video/smpte292m\":{source:\"iana\"},\"video/ulpfec\":{source:\"iana\"},\"video/vc1\":{source:\"iana\"},\"video/vnd.cctv\":{source:\"iana\"},\"video/vnd.dece.hd\":{source:\"iana\",extensions:[\"uvh\",\"uvvh\"]},\"video/vnd.dece.mobile\":{source:\"iana\",extensions:[\"uvm\",\"uvvm\"]},\"video/vnd.dece.mp4\":{source:\"iana\"},\"video/vnd.dece.pd\":{source:\"iana\",extensions:[\"uvp\",\"uvvp\"]},\"video/vnd.dece.sd\":{source:\"iana\",extensions:[\"uvs\",\"uvvs\"]},\"video/vnd.dece.video\":{source:\"iana\",extensions:[\"uvv\",\"uvvv\"]},\"video/vnd.directv.mpeg\":{source:\"iana\"},\"video/vnd.directv.mpeg-tts\":{source:\"iana\"},\"video/vnd.dlna.mpeg-tts\":{source:\"iana\"},\"video/vnd.dvb.file\":{source:\"iana\",extensions:[\"dvb\"]},\"video/vnd.fvt\":{source:\"iana\",extensions:[\"fvt\"]},\"video/vnd.hns.video\":{source:\"iana\"},\"video/vnd.iptvforum.1dparityfec-1010\":{source:\"iana\"},\"video/vnd.iptvforum.1dparityfec-2005\":{source:\"iana\"},\"video/vnd.iptvforum.2dparityfec-1010\":{source:\"iana\"},\"video/vnd.iptvforum.2dparityfec-2005\":{source:\"iana\"},\"video/vnd.iptvforum.ttsavc\":{source:\"iana\"},\"video/vnd.iptvforum.ttsmpeg2\":{source:\"iana\"},\"video/vnd.motorola.video\":{source:\"iana\"},\"video/vnd.motorola.videop\":{source:\"iana\"},\"video/vnd.mpegurl\":{source:\"iana\",extensions:[\"mxu\",\"m4u\"]},\"video/vnd.ms-playready.media.pyv\":{source:\"iana\",extensions:[\"pyv\"]},\"video/vnd.nokia.interleaved-multimedia\":{source:\"iana\"},\"video/vnd.nokia.mp4vr\":{source:\"iana\"},\"video/vnd.nokia.videovoip\":{source:\"iana\"},\"video/vnd.objectvideo\":{source:\"iana\"},\"video/vnd.radgamettools.bink\":{source:\"iana\"},\"video/vnd.radgamettools.smacker\":{source:\"iana\"},\"video/vnd.sealed.mpeg1\":{source:\"iana\"},\"video/vnd.sealed.mpeg4\":{source:\"iana\"},\"video/vnd.sealed.swf\":{source:\"iana\"},\"video/vnd.sealedmedia.softseal.mov\":{source:\"iana\"},\"video/vnd.uvvu.mp4\":{source:\"iana\",extensions:[\"uvu\",\"uvvu\"]},\"video/vnd.vivo\":{source:\"iana\",extensions:[\"viv\"]},\"video/vp8\":{source:\"iana\"},\"video/webm\":{source:\"apache\",compressible:!1,extensions:[\"webm\"]},\"video/x-f4v\":{source:\"apache\",extensions:[\"f4v\"]},\"video/x-fli\":{source:\"apache\",extensions:[\"fli\"]},\"video/x-flv\":{source:\"apache\",compressible:!1,extensions:[\"flv\"]},\"video/x-m4v\":{source:\"apache\",extensions:[\"m4v\"]},\"video/x-matroska\":{source:\"apache\",compressible:!1,extensions:[\"mkv\",\"mk3d\",\"mks\"]},\"video/x-mng\":{source:\"apache\",extensions:[\"mng\"]},\"video/x-ms-asf\":{source:\"apache\",extensions:[\"asf\",\"asx\"]},\"video/x-ms-vob\":{source:\"apache\",extensions:[\"vob\"]},\"video/x-ms-wm\":{source:\"apache\",extensions:[\"wm\"]},\"video/x-ms-wmv\":{source:\"apache\",compressible:!1,extensions:[\"wmv\"]},\"video/x-ms-wmx\":{source:\"apache\",extensions:[\"wmx\"]},\"video/x-ms-wvx\":{source:\"apache\",extensions:[\"wvx\"]},\"video/x-msvideo\":{source:\"apache\",extensions:[\"avi\"]},\"video/x-sgi-movie\":{source:\"apache\",extensions:[\"movie\"]},\"video/x-smv\":{source:\"apache\",extensions:[\"smv\"]},\"x-conference/x-cooltalk\":{source:\"apache\",extensions:[\"ice\"]},\"x-shader/x-fragment\":{compressible:!0},\"x-shader/x-vertex\":{compressible:!0}}},function(e,t,n){e.exports=n(251)},function(e,t){var n=/; *([!#$%&'\\*\\+\\-\\.0-9A-Z\\^_`a-z\\|~]+) *= *(\"(?:[ !\\u0023-\\u005b\\u005d-\\u007e\\u0080-\\u00ff]|\\\\[\\u0020-\\u007e])*\"|[!#$%&'\\*\\+\\-\\.0-9A-Z\\^_`a-z\\|~]+) */g,r=/^[\\u0020-\\u007e\\u0080-\\u00ff]+$/,o=/^[!#$%&'\\*\\+\\-\\.0-9A-Z\\^_`a-z\\|~]+$/,i=/\\\\([\\u0000-\\u007f])/g,s=/([\\\\\"])/g,a=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,c=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,l=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;function u(e){var t=String(e);if(o.test(t))return t;if(t.length>0&&!r.test(t))throw new TypeError(\"invalid parameter value\");return'\"'+t.replace(s,\"\\\\$1\")+'\"'}t.format=function(e){if(!e||\"object\"!=typeof e)throw new TypeError(\"argument obj is required\");var t=e.parameters,n=e.subtype,r=e.suffix,i=e.type;if(!i||!c.test(i))throw new TypeError(\"invalid type\");if(!n||!a.test(n))throw new TypeError(\"invalid subtype\");var s=i+\"/\"+n;if(r){if(!c.test(r))throw new TypeError(\"invalid suffix\");s+=\"+\"+r}if(t&&\"object\"==typeof t)for(var l,p=Object.keys(t).sort(),d=0;d<p.length;d++){if(l=p[d],!o.test(l))throw new TypeError(\"invalid parameter name\");s+=\"; \"+l+\"=\"+u(t[l])}return s},t.parse=function(e){if(!e)throw new TypeError(\"argument string is required\");\"object\"==typeof e&&(e=function(e){if(\"function\"==typeof e.getHeader)return e.getHeader(\"content-type\");if(\"object\"==typeof e.headers)return e.headers&&e.headers[\"content-type\"]}(e));if(\"string\"!=typeof e)throw new TypeError(\"argument string is required to be a string\");var t,r,o,s=e.indexOf(\";\"),a=function(e){var t=l.exec(e.toLowerCase());if(!t)throw new TypeError(\"invalid media type\");var n,r=t[1],o=t[2],i=o.lastIndexOf(\"+\");-1!==i&&(n=o.substr(i+1),o=o.substr(0,i));return{type:r,subtype:o,suffix:n}}(-1!==s?e.substr(0,s):e),c={};n.lastIndex=s;for(;r=n.exec(e);){if(r.index!==s)throw new TypeError(\"invalid parameter format\");s+=r[0].length,t=r[1].toLowerCase(),'\"'===(o=r[2])[0]&&(o=o.substr(1,o.length-2).replace(i,\"$1\")),c[t]=o}if(-1!==s&&s!==e.length)throw new TypeError(\"invalid parameter format\");return a.parameters=c,a}},function(e,t,n){\"use strict\";function r(e,t){return function(n){for(var r=new Array(arguments.length),o=\"error\"===e?n:null,i=0;i<r.length;i++)r[i]=arguments[i];t(o,this,e,r)}}e.exports=function(e,t){if(!Array.isArray(e))throw new TypeError(\"arg must be an array of [ee, events...] arrays\");for(var n=[],o=0;o<e.length;o++){var i=e[o];if(!Array.isArray(i)||i.length<2)throw new TypeError(\"each array member must be [ee, events...]\");for(var s=i[0],a=1;a<i.length;a++){var c=i[a],l=r(c,u);s.on(c,l),n.push({ee:s,event:c,fn:l})}}function u(){p(),t.apply(null,arguments)}function p(){for(var e,t=0;t<n.length;t++)(e=n[t]).ee.removeListener(e.event,e.fn)}function d(e){t=e}return d.cancel=p,d}},function(e,t,n){\"use strict\";var r=n(10).Buffer;e.exports=function(e){var t=void 0;e.supportsNodeEncodingsExtension=!(new r(0)instanceof Uint8Array),e.extendNodeEncodings=function(){if(!t){if(t={},!e.supportsNodeEncodingsExtension)return console.error(\"ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node\"),void console.error(\"See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility\");var o={hex:!0,utf8:!0,\"utf-8\":!0,ascii:!0,binary:!0,base64:!0,ucs2:!0,\"ucs-2\":!0,utf16le:!0,\"utf-16le\":!0};r.isNativeEncoding=function(e){return e&&o[e.toLowerCase()]};var i=n(10).SlowBuffer;if(t.SlowBufferToString=i.prototype.toString,i.prototype.toString=function(n,o,i){return n=String(n||\"utf8\").toLowerCase(),r.isNativeEncoding(n)?t.SlowBufferToString.call(this,n,o,i):(void 0===o&&(o=0),void 0===i&&(i=this.length),e.decode(this.slice(o,i),n))},t.SlowBufferWrite=i.prototype.write,i.prototype.write=function(n,o,i,s){if(isFinite(o))isFinite(i)||(s=i,i=void 0);else{var a=s;s=o,o=i,i=a}o=+o||0;var c=this.length-o;if(i?(i=+i)>c&&(i=c):i=c,s=String(s||\"utf8\").toLowerCase(),r.isNativeEncoding(s))return t.SlowBufferWrite.call(this,n,o,i,s);if(n.length>0&&(i<0||o<0))throw new RangeError(\"attempt to write beyond buffer bounds\");var l=e.encode(n,s);return l.length<i&&(i=l.length),l.copy(this,o,0,i),i},t.BufferIsEncoding=r.isEncoding,r.isEncoding=function(t){return r.isNativeEncoding(t)||e.encodingExists(t)},t.BufferByteLength=r.byteLength,r.byteLength=i.byteLength=function(n,o){return o=String(o||\"utf8\").toLowerCase(),r.isNativeEncoding(o)?t.BufferByteLength.call(this,n,o):e.encode(n,o).length},t.BufferToString=r.prototype.toString,r.prototype.toString=function(n,o,i){return n=String(n||\"utf8\").toLowerCase(),r.isNativeEncoding(n)?t.BufferToString.call(this,n,o,i):(void 0===o&&(o=0),void 0===i&&(i=this.length),e.decode(this.slice(o,i),n))},t.BufferWrite=r.prototype.write,r.prototype.write=function(n,o,i,s){var a=o,c=i,l=s;if(isFinite(o))isFinite(i)||(s=i,i=void 0);else{var u=s;s=o,o=i,i=u}if(s=String(s||\"utf8\").toLowerCase(),r.isNativeEncoding(s))return t.BufferWrite.call(this,n,a,c,l);o=+o||0;var p=this.length-o;if(i?(i=+i)>p&&(i=p):i=p,n.length>0&&(i<0||o<0))throw new RangeError(\"attempt to write beyond buffer bounds\");var d=e.encode(n,s);return d.length<i&&(i=d.length),d.copy(this,o,0,i),i},e.supportsStreams){var s=n(9).Readable;t.ReadableSetEncoding=s.prototype.setEncoding,s.prototype.setEncoding=function(t,n){this._readableState.decoder=e.getDecoder(t,n),this._readableState.encoding=t},s.prototype.collect=e._collect}}},e.undoExtendNodeEncodings=function(){if(e.supportsNodeEncodingsExtension){if(!t)throw new Error(\"require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.\");delete r.isNativeEncoding;var o=n(10).SlowBuffer;if(o.prototype.toString=t.SlowBufferToString,o.prototype.write=t.SlowBufferWrite,r.isEncoding=t.BufferIsEncoding,r.byteLength=t.BufferByteLength,r.prototype.toString=t.BufferToString,r.prototype.write=t.BufferWrite,e.supportsStreams){var i=n(9).Readable;i.prototype.setEncoding=t.ReadableSetEncoding,delete i.prototype.collect}t=void 0}}}},function(e,t,n){\"use strict\";var r=n(10).Buffer,o=n(9).Transform;function i(e,t){this.conv=e,(t=t||{}).decodeStrings=!1,o.call(this,t)}function s(e,t){this.conv=e,(t=t||{}).encoding=this.encoding=\"utf8\",o.call(this,t)}e.exports=function(e){e.encodeStream=function(t,n){return new i(e.getEncoder(t,n),n)},e.decodeStream=function(t,n){return new s(e.getDecoder(t,n),n)},e.supportsStreams=!0,e.IconvLiteEncoderStream=i,e.IconvLiteDecoderStream=s,e._collect=s.prototype.collect},i.prototype=Object.create(o.prototype,{constructor:{value:i}}),i.prototype._transform=function(e,t,n){if(\"string\"!=typeof e)return n(new Error(\"Iconv encoding stream needs strings as its input.\"));try{var r=this.conv.write(e);r&&r.length&&this.push(r),n()}catch(e){n(e)}},i.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(t){e(t)}},i.prototype.collect=function(e){var t=[];return this.on(\"error\",e),this.on(\"data\",function(e){t.push(e)}),this.on(\"end\",function(){e(null,r.concat(t))}),this},s.prototype=Object.create(o.prototype,{constructor:{value:s}}),s.prototype._transform=function(e,t,n){if(!r.isBuffer(e))return n(new Error(\"Iconv decoding stream needs buffers as its input.\"));try{var o=this.conv.write(e);o&&o.length&&this.push(o,this.encoding),n()}catch(e){n(e)}},s.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(t){e(t)}},s.prototype.collect=function(e){var t=\"\";return this.on(\"error\",e),this.on(\"data\",function(e){t+=e}),this.on(\"end\",function(){e(null,t)}),this}},function(e){e.exports=[[\"8740\",\"\"],[\"8767\",\"\"],[\"87a1\",\"\"],[\"8840\",\"\",4,\"\"],[\"88a1\",\"\"],[\"8940\",\"\"],[\"8943\",\"\"],[\"8946\",\"\"],[\"894c\",\"\"],[\"89a1\",\"\"],[\"89ab\",\"\"],[\"89b0\",\"\"],[\"89b5\",\"\"],[\"89c1\",\"\"],[\"89c5\",\"\"],[\"8a40\",\"\"],[\"8a43\",\"\"],[\"8a64\",\"\"],[\"8a76\",\"\"],[\"8aa1\",\"\"],[\"8aac\",\"\"],[\"8ab2\",\"\"],[\"8abb\",\"\"],[\"8ac9\",\"\"],[\"8ace\",\"\"],[\"8adf\",\"\"],[\"8af6\",\"\"],[\"8b40\",\"\"],[\"8b55\",\"\"],[\"8ba1\",\"\"],[\"8bde\",\"\"],[\"8c40\",\"\"],[\"8ca1\",\"\"],[\"8ca7\",\"\"],[\"8cc9\",\"\"],[\"8cce\",\"\"],[\"8ce6\",\"\"],[\"8d40\",\"\"],[\"8d42\",\"\"],[\"8da1\",\"\"],[\"8e40\",\"\"],[\"8ea1\",\"\"],[\"8f40\",\"\"],[\"8fa1\",\"\"],[\"9040\",\"\"],[\"90a1\",\"\"],[\"9140\",\"\"],[\"91a1\",\"\"],[\"9240\",\"\"],[\"92a1\",\"\"],[\"9340\",\"\"],[\"93a1\",\"\"],[\"9440\",\"\"],[\"94a1\",\"\"],[\"9540\",\"\"],[\"95a1\",\"\"],[\"9640\",\"\"],[\"96a1\",\"\"],[\"9740\",\"\"],[\"97a1\",\"\"],[\"9840\",\"\"],[\"98a1\",\"\"],[\"9940\",\"\"],[\"99a1\",\"\"],[\"9a40\",\"\"],[\"9aa1\",\"\"],[\"9b40\",\"\"],[\"9b62\",\"\"],[\"9ba1\",\"\"],[\"9c40\",\"\"],[\"9ca1\",\"\"],[\"9d40\",\"\"],[\"9da1\",\"\"],[\"9e40\",\"\"],[\"9ea1\",\"\"],[\"9ead\",\"\"],[\"9ec5\",\"\"],[\"9ef5\",\"\"],[\"9f40\",\"\"],[\"9f4f\",\"\"],[\"9fa1\",\"\"],[\"9fae\",\"\"],[\"9fb2\",\"\"],[\"9fc1\",\"\"],[\"9fc9\",\"\"],[\"9fdb\",\"\"],[\"9fe7\",\"\"],[\"9feb\",\"\"],[\"9ff0\",\"\"],[\"a040\",\"\"],[\"a055\",\"\"],[\"a058\",\"\"],[\"a05b\",\"\"],[\"a063\",\"\"],[\"a073\",\"\"],[\"a0a1\",\"\"],[\"a0a6\",\"\"],[\"a0ae\",\"\"],[\"a0b0\",\"\"],[\"a0d4\",\"\"],[\"a0e2\",\"\"],[\"a3c0\",\"\",31,\"\"],[\"c6a1\",\"\",9,\"\",9,\"\",9,\"\",23],[\"c740\",\"\",58,\"\"],[\"c7a1\",\"\",81,\"\",5,\"\",4],[\"c840\",\"\",26,\"\",25,\"\"],[\"c8a1\",\"\"],[\"c8cd\",\"\"],[\"c8f5\",\"\"],[\"f9fe\",\"\"],[\"fa40\",\"\"],[\"faa1\",\"\"],[\"fb40\",\"\"],[\"fba1\",\"\"],[\"fc40\",\"\"],[\"fca1\",\"\"],[\"fd40\",\"\"],[\"fda1\",\"\"],[\"fe40\",\"\"],[\"fea1\",\"\"]]},function(e){e.exports=[[\"0\",\"\\0\",127],[\"8141\",\"\",4,\"\",6,\"\"],[\"8161\",\"\",9,\"\",5,\"\"],[\"8181\",\"\",18,\"\",4,\"\",6,\"\",5,\"\",6,\"\",7,\"\",7,\"\",4,\"\",4,\"\"],[\"8241\",\"\",7,\"\",5],[\"8261\",\"\",6,\"\",5,\"\"],[\"8281\",\"\",7,\"\",7,\"\",4,\"\",10,\"\",5,\"\",17,\"\",7,\"\",6,\"\",7,\"\",18],[\"8341\",\"\",5,\"\",5,\"\",7],[\"8361\",\"\",18,\"\"],[\"8381\",\"\",4,\"\",6,\"\",5,\"\",5,\"\",46,\"\",6,\"\",5,\"\",8],[\"8441\",\"\",5,\"\",8],[\"8461\",\"\",18],[\"8481\",\"\",7,\"\",6,\"\",5,\"\",10,\"\",5,\"\",18,\"\",5,\"\",6,\"\",5,\"\",26,\"\"],[\"8541\",\"\",5,\"\",4,\"\",6,\"\",4],[\"8561\",\"\",5,\"\",5,\"\",6,\"\"],[\"8581\",\"\",6,\"\",6,\"\",9,\"\",26,\"\",29,\"\",6,\"\",5,\"\"],[\"8641\",\"\",6,\"\",5,\"\"],[\"8661\",\"\",6,\"\",10],[\"8681\",\"\",22,\"\",4,\"\",6,\"\",5,\"\",6,\"\",22,\"\",4,\"\"],[\"8741\",\"\",9,\"\",15],[\"8761\",\"\",18,\"\"],[\"8781\",\"\",5,\"\",7,\"\",7,\"\",5,\"\",6,\"\",5,\"\",18,\"\",6,\"\",26,\"\",6,\"\",4],[\"8841\",\"\",4,\"\",5,\"\",6,\"\",4],[\"8861\",\"\",4,\"\"],[\"8881\",\"\",15,\"\",4,\"\",6,\"\",5,\"\",54,\"\"],[\"8941\",\"\",6,\"\",5,\"\"],[\"8961\",\"\",10,\"\",5,\"\"],[\"8981\",\"\",21,\"\",18,\"\",18,\"\",6,\"\",6,\"\",7,\"\",15],[\"8a41\",\"\",10,\"\",6,\"\"],[\"8a61\",\"\",4,\"\",18,\"\"],[\"8a81\",\"\",4,\"\",19,\"\",5,\"\",7,\"\",5,\"\",6,\"\",5,\"\",4,\"\",5,\"\",26,\"\"],[\"8b41\",\"\",5,\"\",4,\"\",6,\"\"],[\"8b61\",\"\",6,\"\",8],[\"8b81\",\"\",52,\"\",4,\"\",6,\"\",5,\"\",18,\"\",18],[\"8c41\",\"\",15,\"\",4],[\"8c61\",\"\",6,\"\",5,\"\",6,\"\",5],[\"8c81\",\"\",12,\"\",26,\"\",50,\"\",5,\"\",16],[\"8d41\",\"\",16,\"\",8],[\"8d61\",\"\",17,\"\"],[\"8d81\",\"\",4,\"\",33,\"\",6,\"\",7,\"\",6,\"\",9,\"\",6,\"\",5,\"\",6,\"\"],[\"8e41\",\"\",6,\"\",5,\"\",8],[\"8e61\",\"\",4,\"\",19],[\"8e81\",\"\",13,\"\",6,\"\",4,\"\",6,\"\",5,\"\",6,\"\",5,\"\",11,\"\",7,\"\",6,\"\",5,\"\",7],[\"8f41\",\"\",7,\"\",17],[\"8f61\",\"\",7,\"\",6,\"\",4],[\"8f81\",\"\",5,\"\",7,\"\",5,\"\",6,\"\",5,\"\",18,\"\",6,\"\",26,\"\",6,\"\",5],[\"9041\",\"\",6,\"\",5,\"\"],[\"9061\",\"\",5,\"\",15],[\"9081\",\"\",12,\"\",6,\"\",5,\"\",4,\"\",6,\"\",4,\"\",5,\"\",11,\"\",33,\"\"],[\"9141\",\"\",6,\"\",5],[\"9161\",\"\",9,\"\",5],[\"9181\",\"\",20,\"\",4,\"\",5,\"\",14,\"\",33,\"\",7,\"\",5,\"\",6],[\"9241\",\"\",7,\"\",4,\"\"],[\"9261\",\"\",7,\"\",7,\"\",4],[\"9281\",\"\",21,\"\",18,\"\",6,\"\",7,\"\",6,\"\",35,\"\"],[\"9341\",\"\",4,\"\"],[\"9361\",\"\",6,\"\",8],[\"9381\",\"\",37,\"\",4,\"\",4,\"\",6,\"\",5,\"\",7,\"\",22,\"\"],[\"9441\",\"\",5,\"\",5,\"\",8],[\"9461\",\"\",5,\"\",6,\"\",12],[\"9481\",\"\",5,\"\",6,\"\",6,\"\",9,\"\",22,\"\",4,\"\",6,\"\",10,\"\",6,\"\",24],[\"9541\",\"\",11,\"\",5,\"\"],[\"9561\",\"\",6,\"\",5,\"\"],[\"9581\",\"\",6,\"\",35,\"\",4,\"\",4,\"\",4,\"\",6,\"\",5,\"\",13,\"\",14],[\"9641\",\"\",23,\"\"],[\"9661\",\"\",6,\"\",5,\"\",8],[\"9681\",\"\",10,\"\",5,\"\",13,\"\",33,\"\",6,\"\",44],[\"9741\",\"\",16,\"\",8],[\"9761\",\"\",17,\"\",7],[\"9781\",\"\",11,\"\",5,\"\",6,\"\",89,\"\"],[\"9841\",\"\",16,\"\",5,\"\"],[\"9861\",\"\",6,\"\",15],[\"9881\",\"\",21,\"\",6,\"\",5,\"\",4,\"\",6,\"\",5,\"\",6,\"\",5,\"\",6,\"\",5,\"\"],[\"9941\",\"\",6,\"\",5,\"\"],[\"9961\",\"\",6,\"\",5,\"\"],[\"9981\",\"\",8,\"\",5,\"\",4,\"\",11,\"\",5,\"\",6,\"\",6,\"\",6,\"\",7,\"\",6,\"\",5,\"\"],[\"9a41\",\"\",16],[\"9a61\",\"\",6,\"\",6,\"\"],[\"9a81\",\"\",4,\"\",6,\"\",5,\"\",5,\"\",6,\"\",5,\"\",5,\"\",33,\"\",5,\"\",6,\"\"],[\"9b41\",\"\",6,\"\",8],[\"9b61\",\"\",17,\"\",7],[\"9b81\",\"\",25,\"\",4,\"\",5,\"\",50,\"\",22,\"\"],[\"9c41\",\"\",4,\"\",5,\"\",5],[\"9c61\",\"\",8,\"\",6,\"\",9],[\"9c81\",\"\",8,\"\",6,\"\",6,\"\",9,\"\",26,\"\",6,\"\",5,\"\",18,\"\",6,\"\",12],[\"9d41\",\"\",13,\"\",8],[\"9d61\",\"\",25],[\"9d81\",\"\",8,\"\",5,\"\",9,\"\",6,\"\",10,\"\",6,\"\",5,\"\",6,\"\",5,\"\"],[\"9e41\",\"\",7,\"\",9,\"\"],[\"9e61\",\"\",4,\"\",6,\"\"],[\"9e81\",\"\",6,\"\",6,\"\",6,\"\",5,\"\",10,\"\",5,\"\",6,\"\",5,\"\",6,\"\"],[\"9f41\",\"\",5,\"\",4,\"\",5,\"\"],[\"9f61\",\"\",6,\"\",5,\"\"],[\"9f81\",\"\",4,\"\",5,\"\",6,\"\",5,\"\",6,\"\",4,\"\",6,\"\",7,\"\",4,\"\",4,\"\"],[\"a041\",\"\",5,\"\",6,\"\"],[\"a061\",\"\",5,\"\",13],[\"a081\",\"\",4,\"\",4,\"\",4,\"\",6,\"\",5,\"\",6,\"\",5,\"\",26,\"\",4,\"\",5,\"\",7,\"\"],[\"a141\",\"\",18,\"\"],[\"a161\",\"\",6,\"\",5,\"\"],[\"a181\",\"\",14,\"\",5,\"\",4,\"\",9,\"\"],[\"a241\",\"\",5,\"\",18],[\"a261\",\"\",6,\"\",18],[\"a281\",\"\",7,\"\",6,\"\",7,\"\"],[\"a341\",\"\",6,\"\",10,\"\"],[\"a361\",\"\",6,\"\",16],[\"a381\",\"\",16,\"\",4,\"\",58,\"\",32,\"\"],[\"a441\",\"\",5,\"\"],[\"a461\",\"\",5,\"\",12],[\"a481\",\"\",28,\"\",93],[\"a541\",\"\",4,\"\",6,\"\",5,\"\"],[\"a561\",\"\",17,\"\",5,\"\"],[\"a581\",\"\",16,\"\",14,\"\",9],[\"a5b0\",\"\",9],[\"a5c1\",\"\",16,\"\",6],[\"a5e1\",\"\",16,\"\",6],[\"a641\",\"\",19,\"\"],[\"a661\",\"\",5,\"\",5,\"\",6],[\"a681\",\"\",6,\"\",18,\"\",7],[\"a741\",\"\",4,\"\",6,\"\",7],[\"a761\",\"\",22,\"\"],[\"a781\",\"\",6,\"\",5,\"\",7,\"\",9,\"\",9,\"\",4,\"\",5,\"\",4,\"\"],[\"a841\",\"\",10,\"\",14],[\"a861\",\"\",18,\"\",6],[\"a881\",\"\",19,\"\",11,\"\"],[\"a8a6\",\"\"],[\"a8a8\",\"\"],[\"a8b1\",\"\",27,\"\",25,\"\",14,\"\"],[\"a941\",\"\",14,\"\",10],[\"a961\",\"\",18],[\"a981\",\"\",14,\"\",6,\"\",27,\"\",25,\"\",14,\"\"],[\"aa41\",\"\",6,\"\",4,\"\"],[\"aa61\",\"\",4,\"\",5,\"\",6,\"\"],[\"aa81\",\"\",29,\"\",82],[\"ab41\",\"\",6,\"\",5,\"\"],[\"ab61\",\"\",6,\"\",5,\"\",5],[\"ab81\",\"\",8,\"\",6,\"\",12,\"\",85],[\"ac41\",\"\",5,\"\",6,\"\"],[\"ac61\",\"\",11,\"\",4],[\"ac81\",\"\",28,\"\",5,\"\",25],[\"acd1\",\"\",5,\"\",25],[\"ad41\",\"\",6,\"\",5,\"\",7],[\"ad61\",\"\",6,\"\",10,\"\"],[\"ad81\",\"\",5,\"\",18,\"\"],[\"ae41\",\"\",5,\"\",16],[\"ae61\",\"\",5,\"\",6,\"\",4],[\"ae81\",\"\",6,\"\",5,\"\"],[\"af41\",\"\",19],[\"af61\",\"\",13,\"\",5,\"\"],[\"af81\",\"\",5,\"\",6,\"\",5,\"\"],[\"b041\",\"\",5,\"\",5,\"\",12],[\"b061\",\"\",5,\"\",19],[\"b081\",\"\",13,\"\",6,\"\",5,\"\",7,\"\",4,\"\"],[\"b141\",\"\",6,\"\",5,\"\"],[\"b161\",\"\",6,\"\",5,\"\",11],[\"b181\",\"\",14,\"\",6,\"\"],[\"b241\",\"\",6,\"\",5,\"\"],[\"b261\",\"\",18,\"\",5,\"\"],[\"b281\",\"\",5,\"\",18,\"\",6,\"\"],[\"b341\",\"\",19,\"\"],[\"b361\",\"\",5,\"\",5,\"\",5],[\"b381\",\"\",5,\"\",5,\"\",19,\"\",4,\"\"],[\"b441\",\"\",5,\"\",6,\"\",5],[\"b461\",\"\",6,\"\",10,\"\"],[\"b481\",\"\",6,\"\",18,\"\",4,\"\",4,\"\"],[\"b541\",\"\",14,\"\",5],[\"b561\",\"\",5,\"\",5,\"\",4],[\"b581\",\"\",6,\"\",5,\"\",11,\"\"],[\"b641\",\"\",7,\"\",17],[\"b661\",\"\",15,\"\"],[\"b681\",\"\",5,\"\",6,\"\",5,\"\"],[\"b741\",\"\",13,\"\",6,\"\"],[\"b761\",\"\",20,\"\"],[\"b781\",\"\",6,\"\",14,\"\"],[\"b841\",\"\",7,\"\",17],[\"b861\",\"\",8,\"\",13],[\"b881\",\"\",5,\"\",24,\"\",4,\"\"],[\"b941\",\"\",6,\"\",5,\"\"],[\"b961\",\"\",14,\"\",6,\"\"],[\"b981\",\"\",22,\"\",4,\"\",4,\"\"],[\"ba41\",\"\",5,\"\",6,\"\"],[\"ba61\",\"\",5,\"\",4,\"\",5],[\"ba81\",\"\",6,\"\",9,\"\"],[\"bb41\",\"\",4,\"\",5,\"\",4,\"\"],[\"bb61\",\"\",6,\"\",5,\"\"],[\"bb81\",\"\",31,\"\"],[\"bc41\",\"\",17,\"\"],[\"bc61\",\"\",5,\"\",6,\"\"],[\"bc81\",\"\",4,\"\",6,\"\",5,\"\",5,\"\",4,\"\"],[\"bd41\",\"\",7,\"\",7,\"\"],[\"bd61\",\"\",5,\"\",13],[\"bd81\",\"\",5,\"\",25,\"\"],[\"be41\",\"\",7,\"\",14],[\"be61\",\"\",7,\"\",7,\"\"],[\"be81\",\"\",4,\"\",4,\"\",5,\"\",8,\"\",6,\"\"],[\"bf41\",\"\",10,\"\",14],[\"bf61\",\"\",18,\"\"],[\"bf81\",\"\",5,\"\",7,\"\",6,\"\",5,\"\"],[\"c041\",\"\",5,\"\",6,\"\",5],[\"c061\",\"\",25],[\"c081\",\"\",6,\"\",5,\"\",7,\"\"],[\"c141\",\"\",5,\"\",6,\"\"],[\"c161\",\"\",19,\"\"],[\"c181\",\"\",31,\"\"],[\"c241\",\"\",4,\"\",5,\"\"],[\"c261\",\"\",4,\"\",5,\"\",6,\"\"],[\"c281\",\"\",5,\"\",7,\"\",9,\"\"],[\"c341\",\"\",4],[\"c361\",\"\",4,\"\",5,\"\",11],[\"c381\",\"\",5,\"\",7,\"\",5,\"\"],[\"c441\",\"\",7,\"\",7,\"\"],[\"c461\",\"\",5,\"\",4],[\"c481\",\"\",5,\"\",11,\"\"],[\"c541\",\"\",6,\"\",5,\"\"],[\"c561\",\"\",6,\"\",5,\"\",4],[\"c581\",\"\",6,\"\",5,\"\"],[\"c641\",\"\",6,\"\",5],[\"c6a1\",\"\"],[\"c7a1\",\"\"],[\"c8a1\",\"\"],[\"caa1\",\"\"],[\"cba1\",\"\"],[\"cca1\",\"\"],[\"cda1\",\"\"],[\"cea1\",\"\"],[\"cfa1\",\"\"],[\"d0a1\",\"\"],[\"d1a1\",\"\",5,\"\",4,\"\"],[\"d2a1\",\"\",4,\"\",5,\"\",10,\"\",7,\"\",5,\"\"],[\"d3a1\",\"\"],[\"d4a1\",\"\"],[\"d5a1\",\"\"],[\"d6a1\",\"\"],[\"d7a1\",\"\"],[\"d8a1\",\"\"],[\"d9a1\",\"\"],[\"daa1\",\"\"],[\"dba1\",\"\"],[\"dca1\",\"\"],[\"dda1\",\"\"],[\"dea1\",\"\"],[\"dfa1\",\"\"],[\"e0a1\",\"\"],[\"e1a1\",\"\"],[\"e2a1\",\"\"],[\"e3a1\",\"\"],[\"e4a1\",\"\"],[\"e5a1\",\"\"],[\"e6a1\",\"\"],[\"e7a1\",\"\"],[\"e8a1\",\"\"],[\"e9a1\",\"\"],[\"eaa1\",\"\"],[\"eba1\",\"\"],[\"eca1\",\"\"],[\"eda1\",\"\"],[\"eea1\",\"\"],[\"efa1\",\"\"],[\"f0a1\",\"\"],[\"f1a1\",\"\"],[\"f2a1\",\"\"],[\"f3a1\",\"\"],[\"f4a1\",\"\"],[\"f5a1\",\"\"],[\"f6a1\",\"\"],[\"f7a1\",\"\"],[\"f8a1\",\"\"],[\"f9a1\",\"\"],[\"faa1\",\"\"],[\"fba1\",\"\"],[\"fca1\",\"\"],[\"fda1\",\"\"]]},function(e){e.exports={uChars:[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars:[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3]}},function(e){e.exports=[[\"0\",\"\\0\",127],[\"8ea1\",\"\",62],[\"a1a1\",\"\",9,\"\"],[\"a2a1\",\"\"],[\"a2ba\",\"\"],[\"a2ca\",\"\"],[\"a2dc\",\"\"],[\"a2f2\",\"\"],[\"a2fe\",\"\"],[\"a3b0\",\"\",9],[\"a3c1\",\"\",25],[\"a3e1\",\"\",25],[\"a4a1\",\"\",82],[\"a5a1\",\"\",85],[\"a6a1\",\"\",16,\"\",6],[\"a6c1\",\"\",16,\"\",6],[\"a7a1\",\"\",5,\"\",25],[\"a7d1\",\"\",5,\"\",25],[\"a8a1\",\"\"],[\"ada1\",\"\",19,\"\",9],[\"adc0\",\"\"],[\"addf\",\"\",4,\"\"],[\"b0a1\",\"\"],[\"b1a1\",\"\"],[\"b2a1\",\"\"],[\"b3a1\",\"\"],[\"b4a1\",\"\"],[\"b5a1\",\"\"],[\"b6a1\",\"\"],[\"b7a1\",\"\"],[\"b8a1\",\"\"],[\"b9a1\",\"\"],[\"baa1\",\"\"],[\"bba1\",\"\"],[\"bca1\",\"\"],[\"bda1\",\"\"],[\"bea1\",\"\"],[\"bfa1\",\"\"],[\"c0a1\",\"\"],[\"c1a1\",\"\"],[\"c2a1\",\"\"],[\"c3a1\",\"\"],[\"c4a1\",\"\"],[\"c5a1\",\"\"],[\"c6a1\",\"\"],[\"c7a1\",\"\"],[\"c8a1\",\"\"],[\"c9a1\",\"\"],[\"caa1\",\"\"],[\"cba1\",\"\"],[\"cca1\",\"\"],[\"cda1\",\"\"],[\"cea1\",\"\"],[\"cfa1\",\"\"],[\"d0a1\",\"\"],[\"d1a1\",\"\"],[\"d2a1\",\"\"],[\"d3a1\",\"\"],[\"d4a1\",\"\"],[\"d5a1\",\"\"],[\"d6a1\",\"\"],[\"d7a1\",\"\"],[\"d8a1\",\"\"],[\"d9a1\",\"\"],[\"daa1\",\"\"],[\"dba1\",\"\"],[\"dca1\",\"\"],[\"dda1\",\"\"],[\"dea1\",\"\"],[\"dfa1\",\"\"],[\"e0a1\",\"\"],[\"e1a1\",\"\"],[\"e2a1\",\"\"],[\"e3a1\",\"\"],[\"e4a1\",\"\"],[\"e5a1\",\"\"],[\"e6a1\",\"\"],[\"e7a1\",\"\"],[\"e8a1\",\"\"],[\"e9a1\",\"\"],[\"eaa1\",\"\"],[\"eba1\",\"\"],[\"eca1\",\"\"],[\"eda1\",\"\"],[\"eea1\",\"\"],[\"efa1\",\"\"],[\"f0a1\",\"\"],[\"f1a1\",\"\"],[\"f2a1\",\"\"],[\"f3a1\",\"\"],[\"f4a1\",\"\"],[\"f9a1\",\"\"],[\"faa1\",\"\"],[\"fba1\",\"\"],[\"fca1\",\"\"],[\"fcf1\",\"\",9,\"\"],[\"8fa2af\",\"\"],[\"8fa2c2\",\"\"],[\"8fa2eb\",\"\"],[\"8fa6e1\",\"\"],[\"8fa6e7\",\"\"],[\"8fa6e9\",\"\"],[\"8fa6ec\",\"\"],[\"8fa6f1\",\"\"],[\"8fa7c2\",\"\",10,\"\"],[\"8fa7f2\",\"\",10,\"\"],[\"8fa9a1\",\"\"],[\"8fa9a4\",\"\"],[\"8fa9a6\",\"\"],[\"8fa9a8\",\"\"],[\"8fa9ab\",\"\"],[\"8fa9af\",\"\"],[\"8fa9c1\",\"\"],[\"8faaa1\",\"\"],[\"8faaba\",\"\"],[\"8faba1\",\"\"],[\"8fabbd\",\"\"],[\"8fabc5\",\"\"],[\"8fb0a1\",\"\"],[\"8fb1a1\",\"\"],[\"8fb2a1\",\"\",4,\"\"],[\"8fb3a1\",\"\"],[\"8fb4a1\",\"\"],[\"8fb5a1\",\"\"],[\"8fb6a1\",\"\",5,\"\",4,\"\"],[\"8fb7a1\",\"\",4,\"\"],[\"8fb8a1\",\"\"],[\"8fb9a1\",\"\"],[\"8fbaa1\",\"\",4,\"\"],[\"8fbba1\",\"\"],[\"8fbca1\",\"\",4,\"\"],[\"8fbda1\",\"\",4,\"\"],[\"8fbea1\",\"\",4,\"\"],[\"8fbfa1\",\"\"],[\"8fc0a1\",\"\"],[\"8fc1a1\",\"\"],[\"8fc2a1\",\"\"],[\"8fc3a1\",\"\",4,\"\"],[\"8fc4a1\",\"\"],[\"8fc5a1\",\"\"],[\"8fc6a1\",\"\"],[\"8fc7a1\",\"\"],[\"8fc8a1\",\"\"],[\"8fc9a1\",\"\",4,\"\",4,\"\"],[\"8fcaa1\",\"\"],[\"8fcba1\",\"\"],[\"8fcca1\",\"\",9,\"\"],[\"8fcda1\",\"\",5,\"\"],[\"8fcea1\",\"\",6,\"\"],[\"8fcfa1\",\"\"],[\"8fd0a1\",\"\"],[\"8fd1a1\",\"\"],[\"8fd2a1\",\"\",5],[\"8fd3a1\",\"\"],[\"8fd4a1\",\"\",4,\"\"],[\"8fd5a1\",\"\"],[\"8fd6a1\",\"\"],[\"8fd7a1\",\"\"],[\"8fd8a1\",\"\"],[\"8fd9a1\",\"\",4,\"\",6,\"\"],[\"8fdaa1\",\"\",4,\"\"],[\"8fdba1\",\"\",6,\"\"],[\"8fdca1\",\"\",4,\"\"],[\"8fdda1\",\"\",4,\"\"],[\"8fdea1\",\"\",4,\"\"],[\"8fdfa1\",\"\"],[\"8fe0a1\",\"\"],[\"8fe1a1\",\"\",4,\"\"],[\"8fe2a1\",\"\"],[\"8fe3a1\",\"\",5,\"\",4,\"\"],[\"8fe4a1\",\"\",4,\"\"],[\"8fe5a1\",\"\",4,\"\"],[\"8fe6a1\",\"\"],[\"8fe7a1\",\"\"],[\"8fe8a1\",\"\",4,\"\"],[\"8fe9a1\",\"\",4],[\"8feaa1\",\"\",4,\"\"],[\"8feba1\",\"\",4,\"\"],[\"8feca1\",\"\"],[\"8feda1\",\"\",4,\"\",4,\"\"]]},function(e){e.exports=[[\"0\",\"\\0\",128],[\"a1\",\"\",62],[\"8140\",\"\",9,\"\"],[\"8180\",\"\"],[\"81b8\",\"\"],[\"81c8\",\"\"],[\"81da\",\"\"],[\"81f0\",\"\"],[\"81fc\",\"\"],[\"824f\",\"\",9],[\"8260\",\"\",25],[\"8281\",\"\",25],[\"829f\",\"\",82],[\"8340\",\"\",62],[\"8380\",\"\",22],[\"839f\",\"\",16,\"\",6],[\"83bf\",\"\",16,\"\",6],[\"8440\",\"\",5,\"\",25],[\"8470\",\"\",5,\"\",7],[\"8480\",\"\",17],[\"849f\",\"\"],[\"8740\",\"\",19,\"\",9],[\"875f\",\"\"],[\"877e\",\"\"],[\"8780\",\"\",4,\"\"],[\"889f\",\"\"],[\"8940\",\"\"],[\"8980\",\"\"],[\"8a40\",\"\"],[\"8a80\",\"\"],[\"8b40\",\"\"],[\"8b80\",\"\"],[\"8c40\",\"\"],[\"8c80\",\"\"],[\"8d40\",\"\"],[\"8d80\",\"\"],[\"8e40\",\"\"],[\"8e80\",\"\"],[\"8f40\",\"\"],[\"8f80\",\"\"],[\"9040\",\"\"],[\"9080\",\"\"],[\"9140\",\"\"],[\"9180\",\"\"],[\"9240\",\"\"],[\"9280\",\"\"],[\"9340\",\"\"],[\"9380\",\"\"],[\"9440\",\"\"],[\"9480\",\"\"],[\"9540\",\"\"],[\"9580\",\"\"],[\"9640\",\"\"],[\"9680\",\"\"],[\"9740\",\"\"],[\"9780\",\"\"],[\"9840\",\"\"],[\"989f\",\"\"],[\"9940\",\"\"],[\"9980\",\"\"],[\"9a40\",\"\"],[\"9a80\",\"\"],[\"9b40\",\"\"],[\"9b80\",\"\"],[\"9c40\",\"\"],[\"9c80\",\"\"],[\"9d40\",\"\"],[\"9d80\",\"\"],[\"9e40\",\"\"],[\"9e80\",\"\"],[\"9f40\",\"\"],[\"9f80\",\"\"],[\"e040\",\"\"],[\"e080\",\"\"],[\"e140\",\"\"],[\"e180\",\"\"],[\"e240\",\"\"],[\"e280\",\"\"],[\"e340\",\"\"],[\"e380\",\"\"],[\"e440\",\"\"],[\"e480\",\"\"],[\"e540\",\"\"],[\"e580\",\"\"],[\"e640\",\"\"],[\"e680\",\"\"],[\"e740\",\"\"],[\"e780\",\"\"],[\"e840\",\"\"],[\"e880\",\"\"],[\"e940\",\"\"],[\"e980\",\"\"],[\"ea40\",\"\"],[\"ea80\",\"\"],[\"ed40\",\"\"],[\"ed80\",\"\"],[\"ee40\",\"\"],[\"ee80\",\"\"],[\"eeef\",\"\",9,\"\"],[\"f040\",\"\",62],[\"f080\",\"\",124],[\"f140\",\"\",62],[\"f180\",\"\",124],[\"f240\",\"\",62],[\"f280\",\"\",124],[\"f340\",\"\",62],[\"f380\",\"\",124],[\"f440\",\"\",62],[\"f480\",\"\",124],[\"f540\",\"\",62],[\"f580\",\"\",124],[\"f640\",\"\",62],[\"f680\",\"\",124],[\"f740\",\"\",62],[\"f780\",\"\",124],[\"f840\",\"\",62],[\"f880\",\"\",124],[\"f940\",\"\"],[\"fa40\",\"\",9,\"\",9,\"\"],[\"fa80\",\"\"],[\"fb40\",\"\"],[\"fb80\",\"\"],[\"fc40\",\"\"]]},function(e,t,n){\"use strict\";e.exports={shiftjis:{type:\"_dbcs\",table:function(){return n(261)},encodeAdd:{\"\":92,\"\":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:\"shiftjis\",mskanji:\"shiftjis\",sjis:\"shiftjis\",windows31j:\"shiftjis\",ms31j:\"shiftjis\",xsjis:\"shiftjis\",windows932:\"shiftjis\",ms932:\"shiftjis\",932:\"shiftjis\",cp932:\"shiftjis\",eucjp:{type:\"_dbcs\",table:function(){return n(260)},encodeAdd:{\"\":92,\"\":126}},gb2312:\"cp936\",gb231280:\"cp936\",gb23121980:\"cp936\",csgb2312:\"cp936\",csiso58gb231280:\"cp936\",euccn:\"cp936\",windows936:\"cp936\",ms936:\"cp936\",936:\"cp936\",cp936:{type:\"_dbcs\",table:function(){return n(120)}},gbk:{type:\"_dbcs\",table:function(){return n(120).concat(n(160))}},xgbk:\"gbk\",isoir58:\"gbk\",gb18030:{type:\"_dbcs\",table:function(){return n(120).concat(n(160))},gb18030:function(){return n(259)},encodeSkipVals:[128],encodeAdd:{\"\":41699}},chinese:\"gb18030\",windows949:\"cp949\",ms949:\"cp949\",949:\"cp949\",cp949:{type:\"_dbcs\",table:function(){return n(258)}},cseuckr:\"cp949\",csksc56011987:\"cp949\",euckr:\"cp949\",isoir149:\"cp949\",korean:\"cp949\",ksc56011987:\"cp949\",ksc56011989:\"cp949\",ksc5601:\"cp949\",windows950:\"cp950\",ms950:\"cp950\",950:\"cp950\",cp950:{type:\"_dbcs\",table:function(){return n(159)}},big5:\"big5hkscs\",big5hkscs:{type:\"_dbcs\",table:function(){return n(159).concat(n(257))},encodeSkipVals:[41676]},cnbig5:\"big5hkscs\",csbig5:\"big5hkscs\",xxbig5:\"big5hkscs\"}},function(e,t,n){\"use strict\";var r=n(10).Buffer;t._dbcs=l;for(var o=-1,i=-2,s=-1e3,a=new Array(256),c=0;c<256;c++)a[c]=o;function l(e,t){if(this.encodingName=e.encodingName,!e)throw new Error(\"DBCS codec is called without the data.\");if(!e.table)throw new Error(\"Encoding '\"+this.encodingName+\"' has no data.\");var n=e.table();this.decodeTables=[],this.decodeTables[0]=a.slice(0),this.decodeTableSeq=[];for(var r=0;r<n.length;r++)this._addDecodeChunk(n[r]);this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var c={};if(e.encodeSkipVals)for(r=0;r<e.encodeSkipVals.length;r++){var l=e.encodeSkipVals[r];if(\"number\"==typeof l)c[l]=!0;else for(var u=l.from;u<=l.to;u++)c[u]=!0}if(this._fillEncodeTable(0,0,c),e.encodeAdd)for(var p in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,p)&&this._setEncodeChar(p.charCodeAt(0),e.encodeAdd[p]);if(this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===o&&(this.defCharSB=this.encodeTable[0][\"?\"]),this.defCharSB===o&&(this.defCharSB=\"?\".charCodeAt(0)),\"function\"==typeof e.gb18030){this.gb18030=e.gb18030();var d=this.decodeTables.length,f=this.decodeTables[d]=a.slice(0),h=this.decodeTables.length,m=this.decodeTables[h]=a.slice(0);for(r=129;r<=254;r++){var g=s-this.decodeTables[0][r],y=this.decodeTables[g];for(u=48;u<=57;u++)y[u]=s-d}for(r=129;r<=254;r++)f[r]=s-h;for(r=48;r<=57;r++)m[r]=i}}function u(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function p(e,t){this.nodeIdx=0,this.prevBuf=new r(0),this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function d(e,t){if(e[0]>t)return-1;for(var n=0,r=e.length;n<r-1;){var o=n+Math.floor((r-n+1)/2);e[o]<=t?n=o:r=o}return n}l.prototype.encoder=u,l.prototype.decoder=p,l.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>=8)t.push(255&e);0==t.length&&t.push(0);for(var n=this.decodeTables[0],r=t.length-1;r>0;r--){var i=n[t[r]];if(i==o)n[t[r]]=s-this.decodeTables.length,this.decodeTables.push(n=a.slice(0));else{if(!(i<=s))throw new Error(\"Overwrite byte in \"+this.encodingName+\", addr: \"+e.toString(16));n=this.decodeTables[s-i]}}return n},l.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),n=this._getDecodeTrieNode(t);t&=255;for(var r=1;r<e.length;r++){var o=e[r];if(\"string\"==typeof o)for(var i=0;i<o.length;){var s=o.charCodeAt(i++);if(55296<=s&&s<56320){var a=o.charCodeAt(i++);if(!(56320<=a&&a<57344))throw new Error(\"Incorrect surrogate pair in \"+this.encodingName+\" at chunk \"+e[0]);n[t++]=65536+1024*(s-55296)+(a-56320)}else if(4080<s&&s<=4095){for(var c=4095-s+2,l=[],u=0;u<c;u++)l.push(o.charCodeAt(i++));n[t++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(l)}else n[t++]=s}else{if(\"number\"!=typeof o)throw new Error(\"Incorrect type '\"+typeof o+\"' given in \"+this.encodingName+\" at chunk \"+e[0]);var p=n[t-1]+1;for(i=0;i<o;i++)n[t++]=p++}}if(t>255)throw new Error(\"Incorrect chunk in \"+this.encodingName+\" at addr \"+e[0]+\": too long\"+t)},l.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=a.slice(0)),this.encodeTable[t]},l.prototype._setEncodeChar=function(e,t){var n=this._getEncodeBucket(e),r=255&e;n[r]<=-10?this.encodeTableSeq[-10-n[r]][-1]=t:n[r]==o&&(n[r]=t)},l.prototype._setEncodeSequence=function(e,t){var n,r=e[0],i=this._getEncodeBucket(r),s=255&r;i[s]<=-10?n=this.encodeTableSeq[-10-i[s]]:(n={},i[s]!==o&&(n[-1]=i[s]),i[s]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(n));for(var a=1;a<e.length-1;a++){var c=n[r];\"object\"==typeof c?n=c:(n=n[r]={},void 0!==c&&(n[-1]=c))}n[r=e[e.length-1]]=t},l.prototype._fillEncodeTable=function(e,t,n){for(var r=this.decodeTables[e],o=0;o<256;o++){var i=r[o],a=t+o;n[a]||(i>=0?this._setEncodeChar(i,a):i<=s?this._fillEncodeTable(s-i,a<<8,n):i<=-10&&this._setEncodeSequence(this.decodeTableSeq[-10-i],a))}},u.prototype.write=function(e){for(var t=new r(e.length*(this.gb18030?4:3)),n=this.leadSurrogate,i=this.seqObj,s=-1,a=0,c=0;;){if(-1===s){if(a==e.length)break;var l=e.charCodeAt(a++)}else{l=s;s=-1}if(55296<=l&&l<57344)if(l<56320){if(-1===n){n=l;continue}n=l,l=o}else-1!==n?(l=65536+1024*(n-55296)+(l-56320),n=-1):l=o;else-1!==n&&(s=l,l=o,n=-1);var u=o;if(void 0!==i&&l!=o){var p=i[l];if(\"object\"==typeof p){i=p;continue}\"number\"==typeof p?u=p:void 0==p&&void 0!==(p=i[-1])&&(u=p,s=l),i=void 0}else if(l>=0){var f=this.encodeTable[l>>8];if(void 0!==f&&(u=f[255&l]),u<=-10){i=this.encodeTableSeq[-10-u];continue}if(u==o&&this.gb18030){var h=d(this.gb18030.uChars,l);if(-1!=h){u=this.gb18030.gbChars[h]+(l-this.gb18030.uChars[h]);t[c++]=129+Math.floor(u/12600),u%=12600,t[c++]=48+Math.floor(u/1260),u%=1260,t[c++]=129+Math.floor(u/10),u%=10,t[c++]=48+u;continue}}}u===o&&(u=this.defaultCharSingleByte),u<256?t[c++]=u:u<65536?(t[c++]=u>>8,t[c++]=255&u):(t[c++]=u>>16,t[c++]=u>>8&255,t[c++]=255&u)}return this.seqObj=i,this.leadSurrogate=n,t.slice(0,c)},u.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=new r(10),t=0;if(this.seqObj){var n=this.seqObj[-1];void 0!==n&&(n<256?e[t++]=n:(e[t++]=n>>8,e[t++]=255&n)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},u.prototype.findIdx=d,p.prototype.write=function(e){var t=new r(2*e.length),n=this.nodeIdx,a=this.prevBuf,c=this.prevBuf.length,l=-this.prevBuf.length;c>0&&(a=r.concat([a,e.slice(0,10)]));for(var u=0,p=0;u<e.length;u++){var f,h=u>=0?e[u]:a[u+c];if((f=this.decodeTables[n][h])>=0);else if(f===o)u=l,f=this.defaultCharUnicode.charCodeAt(0);else if(f===i){var m=l>=0?e.slice(l,u+1):a.slice(l+c,u+1+c),g=12600*(m[0]-129)+1260*(m[1]-48)+10*(m[2]-129)+(m[3]-48),y=d(this.gb18030.gbChars,g);f=this.gb18030.uChars[y]+g-this.gb18030.gbChars[y]}else{if(f<=s){n=s-f;continue}if(!(f<=-10))throw new Error(\"iconv-lite internal error: invalid decoding table value \"+f+\" at \"+n+\"/\"+h);for(var v=this.decodeTableSeq[-10-f],b=0;b<v.length-1;b++)f=v[b],t[p++]=255&f,t[p++]=f>>8;f=v[v.length-1]}if(f>65535){f-=65536;var x=55296+Math.floor(f/1024);t[p++]=255&x,t[p++]=x>>8,f=56320+f%1024}t[p++]=255&f,t[p++]=f>>8,n=0,l=u+1}return this.nodeIdx=n,this.prevBuf=l>=0?e.slice(l):a.slice(l+c),t.slice(0,p).toString(\"ucs2\")},p.prototype.end=function(){for(var e=\"\";this.prevBuf.length>0;){e+=this.defaultCharUnicode;var t=this.prevBuf.slice(1);this.prevBuf=new r(0),this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.nodeIdx=0,e}},function(e,t,n){\"use strict\";e.exports={437:\"cp437\",737:\"cp737\",775:\"cp775\",850:\"cp850\",852:\"cp852\",855:\"cp855\",856:\"cp856\",857:\"cp857\",858:\"cp858\",860:\"cp860\",861:\"cp861\",862:\"cp862\",863:\"cp863\",864:\"cp864\",865:\"cp865\",866:\"cp866\",869:\"cp869\",874:\"windows874\",922:\"cp922\",1046:\"cp1046\",1124:\"cp1124\",1125:\"cp1125\",1129:\"cp1129\",1133:\"cp1133\",1161:\"cp1161\",1162:\"cp1162\",1163:\"cp1163\",1250:\"windows1250\",1251:\"windows1251\",1252:\"windows1252\",1253:\"windows1253\",1254:\"windows1254\",1255:\"windows1255\",1256:\"windows1256\",1257:\"windows1257\",1258:\"windows1258\",28591:\"iso88591\",28592:\"iso88592\",28593:\"iso88593\",28594:\"iso88594\",28595:\"iso88595\",28596:\"iso88596\",28597:\"iso88597\",28598:\"iso88598\",28599:\"iso88599\",28600:\"iso885910\",28601:\"iso885911\",28603:\"iso885913\",28604:\"iso885914\",28605:\"iso885915\",28606:\"iso885916\",windows874:{type:\"_sbcs\",chars:\"\"},win874:\"windows874\",cp874:\"windows874\",windows1250:{type:\"_sbcs\",chars:\"\"},win1250:\"windows1250\",cp1250:\"windows1250\",windows1251:{type:\"_sbcs\",chars:\"\"},win1251:\"windows1251\",cp1251:\"windows1251\",windows1252:{type:\"_sbcs\",chars:\"\"},win1252:\"windows1252\",cp1252:\"windows1252\",windows1253:{type:\"_sbcs\",chars:\"\"},win1253:\"windows1253\",cp1253:\"windows1253\",windows1254:{type:\"_sbcs\",chars:\"\"},win1254:\"windows1254\",cp1254:\"windows1254\",windows1255:{type:\"_sbcs\",chars:\"\"},win1255:\"windows1255\",cp1255:\"windows1255\",windows1256:{type:\"_sbcs\",chars:\"\"},win1256:\"windows1256\",cp1256:\"windows1256\",windows1257:{type:\"_sbcs\",chars:\"\"},win1257:\"windows1257\",cp1257:\"windows1257\",windows1258:{type:\"_sbcs\",chars:\"\"},win1258:\"windows1258\",cp1258:\"windows1258\",iso88591:{type:\"_sbcs\",chars:\"\"},cp28591:\"iso88591\",iso88592:{type:\"_sbcs\",chars:\"\"},cp28592:\"iso88592\",iso88593:{type:\"_sbcs\",chars:\"\"},cp28593:\"iso88593\",iso88594:{type:\"_sbcs\",chars:\"\"},cp28594:\"iso88594\",iso88595:{type:\"_sbcs\",chars:\"\"},cp28595:\"iso88595\",iso88596:{type:\"_sbcs\",chars:\"\"},cp28596:\"iso88596\",iso88597:{type:\"_sbcs\",chars:\"\"},cp28597:\"iso88597\",iso88598:{type:\"_sbcs\",chars:\"\"},cp28598:\"iso88598\",iso88599:{type:\"_sbcs\",chars:\"\"},cp28599:\"iso88599\",iso885910:{type:\"_sbcs\",chars:\"\"},cp28600:\"iso885910\",iso885911:{type:\"_sbcs\",chars:\"\"},cp28601:\"iso885911\",iso885913:{type:\"_sbcs\",chars:\"\"},cp28603:\"iso885913\",iso885914:{type:\"_sbcs\",chars:\"\"},cp28604:\"iso885914\",iso885915:{type:\"_sbcs\",chars:\"\"},cp28605:\"iso885915\",iso885916:{type:\"_sbcs\",chars:\"\"},cp28606:\"iso885916\",cp437:{type:\"_sbcs\",chars:\"\"},ibm437:\"cp437\",csibm437:\"cp437\",cp737:{type:\"_sbcs\",chars:\"\"},ibm737:\"cp737\",csibm737:\"cp737\",cp775:{type:\"_sbcs\",chars:\"\"},ibm775:\"cp775\",csibm775:\"cp775\",cp850:{type:\"_sbcs\",chars:\"\"},ibm850:\"cp850\",csibm850:\"cp850\",cp852:{type:\"_sbcs\",chars:\"\"},ibm852:\"cp852\",csibm852:\"cp852\",cp855:{type:\"_sbcs\",chars:\"\"},ibm855:\"cp855\",csibm855:\"cp855\",cp856:{type:\"_sbcs\",chars:\"\"},ibm856:\"cp856\",csibm856:\"cp856\",cp857:{type:\"_sbcs\",chars:\"\"},ibm857:\"cp857\",csibm857:\"cp857\",cp858:{type:\"_sbcs\",chars:\"\"},ibm858:\"cp858\",csibm858:\"cp858\",cp860:{type:\"_sbcs\",chars:\"\"},ibm860:\"cp860\",csibm860:\"cp860\",cp861:{type:\"_sbcs\",chars:\"\"},ibm861:\"cp861\",csibm861:\"cp861\",cp862:{type:\"_sbcs\",chars:\"\"},ibm862:\"cp862\",csibm862:\"cp862\",cp863:{type:\"_sbcs\",chars:\"\"},ibm863:\"cp863\",csibm863:\"cp863\",cp864:{type:\"_sbcs\",chars:\"\\0\u0001\u0002\u0003\u0004\u0005\u0006\u0007\\b\\t\\n\\v\\f\\r\u000e\u000f\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f !\\\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"},ibm864:\"cp864\",csibm864:\"cp864\",cp865:{type:\"_sbcs\",chars:\"\"},ibm865:\"cp865\",csibm865:\"cp865\",cp866:{type:\"_sbcs\",chars:\"\"},ibm866:\"cp866\",csibm866:\"cp866\",cp869:{type:\"_sbcs\",chars:\"\"},ibm869:\"cp869\",csibm869:\"cp869\",cp922:{type:\"_sbcs\",chars:\"\"},ibm922:\"cp922\",csibm922:\"cp922\",cp1046:{type:\"_sbcs\",chars:\"\"},ibm1046:\"cp1046\",csibm1046:\"cp1046\",cp1124:{type:\"_sbcs\",chars:\"\"},ibm1124:\"cp1124\",csibm1124:\"cp1124\",cp1125:{type:\"_sbcs\",chars:\"\"},ibm1125:\"cp1125\",csibm1125:\"cp1125\",cp1129:{type:\"_sbcs\",chars:\"\"},ibm1129:\"cp1129\",csibm1129:\"cp1129\",cp1133:{type:\"_sbcs\",chars:\"\"},ibm1133:\"cp1133\",csibm1133:\"cp1133\",cp1161:{type:\"_sbcs\",chars:\"\"},ibm1161:\"cp1161\",csibm1161:\"cp1161\",cp1162:{type:\"_sbcs\",chars:\"\"},ibm1162:\"cp1162\",csibm1162:\"cp1162\",cp1163:{type:\"_sbcs\",chars:\"\"},ibm1163:\"cp1163\",csibm1163:\"cp1163\",maccroatian:{type:\"_sbcs\",chars:\"\"},maccyrillic:{type:\"_sbcs\",chars:\"\"},macgreek:{type:\"_sbcs\",chars:\"\"},maciceland:{type:\"_sbcs\",chars:\"\"},macroman:{type:\"_sbcs\",chars:\"\"},macromania:{type:\"_sbcs\",chars:\"\"},macthai:{type:\"_sbcs\",chars:\"\\ufeff\"},macturkish:{type:\"_sbcs\",chars:\"\"},macukraine:{type:\"_sbcs\",chars:\"\"},koi8r:{type:\"_sbcs\",chars:\"\"},koi8u:{type:\"_sbcs\",chars:\"\"},koi8ru:{type:\"_sbcs\",chars:\"\"},koi8t:{type:\"_sbcs\",chars:\"\"},armscii8:{type:\"_sbcs\",chars:\")(.,-\"},rk1048:{type:\"_sbcs\",chars:\"\"},tcvn:{type:\"_sbcs\",chars:\"\\0\u0003\u0007\\b\\t\\n\\v\\f\\r\u000e\u000f\u0010\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"},georgianacademy:{type:\"_sbcs\",chars:\"\"},georgianps:{type:\"_sbcs\",chars:\"\"},pt154:{type:\"_sbcs\",chars:\"\"},viscii:{type:\"_sbcs\",chars:\"\\0\u0001\u0003\u0004\u0007\\b\\t\\n\\v\\f\\r\u000e\u000f\u0010\u0011\u0012\u0013\u0015\u0016\u0017\u0018\u001a\u001b\u001c\u001d\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"},iso646cn:{type:\"_sbcs\",chars:\"\\0\u0001\u0002\u0003\u0004\u0005\u0006\u0007\\b\\t\\n\\v\\f\\r\u000e\u000f\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f !\\\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}\"},iso646jp:{type:\"_sbcs\",chars:\"\\0\u0001\u0002\u0003\u0004\u0005\u0006\u0007\\b\\t\\n\\v\\f\\r\u000e\u000f\u0010\u0011\u0012\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001a\u001b\u001c\u001d\u001e\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}\"},hproman8:{type:\"_sbcs\",chars:\"\"},macintosh:{type:\"_sbcs\",chars:\"\"},ascii:{type:\"_sbcs\",chars:\"\"},tis620:{type:\"_sbcs\",chars:\"\"}}},function(e,t,n){\"use strict\";e.exports={10029:\"maccenteuro\",maccenteuro:{type:\"_sbcs\",chars:\"\"},808:\"cp808\",ibm808:\"cp808\",cp808:{type:\"_sbcs\",chars:\"\"},ascii8bit:\"ascii\",usascii:\"ascii\",ansix34:\"ascii\",ansix341968:\"ascii\",ansix341986:\"ascii\",csascii:\"ascii\",cp367:\"ascii\",ibm367:\"ascii\",isoir6:\"ascii\",iso646us:\"ascii\",iso646irv:\"ascii\",us:\"ascii\",latin1:\"iso88591\",latin2:\"iso88592\",latin3:\"iso88593\",latin4:\"iso88594\",latin5:\"iso88599\",latin6:\"iso885910\",latin7:\"iso885913\",latin8:\"iso885914\",latin9:\"iso885915\",latin10:\"iso885916\",csisolatin1:\"iso88591\",csisolatin2:\"iso88592\",csisolatin3:\"iso88593\",csisolatin4:\"iso88594\",csisolatincyrillic:\"iso88595\",csisolatinarabic:\"iso88596\",csisolatingreek:\"iso88597\",csisolatinhebrew:\"iso88598\",csisolatin5:\"iso88599\",csisolatin6:\"iso885910\",l1:\"iso88591\",l2:\"iso88592\",l3:\"iso88593\",l4:\"iso88594\",l5:\"iso88599\",l6:\"iso885910\",l7:\"iso885913\",l8:\"iso885914\",l9:\"iso885915\",l10:\"iso885916\",isoir14:\"iso646jp\",isoir57:\"iso646cn\",isoir100:\"iso88591\",isoir101:\"iso88592\",isoir109:\"iso88593\",isoir110:\"iso88594\",isoir144:\"iso88595\",isoir127:\"iso88596\",isoir126:\"iso88597\",isoir138:\"iso88598\",isoir148:\"iso88599\",isoir157:\"iso885910\",isoir166:\"tis620\",isoir179:\"iso885913\",isoir199:\"iso885914\",isoir203:\"iso885915\",isoir226:\"iso885916\",cp819:\"iso88591\",ibm819:\"iso88591\",cyrillic:\"iso88595\",arabic:\"iso88596\",arabic8:\"iso88596\",ecma114:\"iso88596\",asmo708:\"iso88596\",greek:\"iso88597\",greek8:\"iso88597\",ecma118:\"iso88597\",elot928:\"iso88597\",hebrew:\"iso88598\",hebrew8:\"iso88598\",turkish:\"iso88599\",turkish8:\"iso88599\",thai:\"iso885911\",thai8:\"iso885911\",celtic:\"iso885914\",celtic8:\"iso885914\",isoceltic:\"iso885914\",tis6200:\"tis620\",tis62025291:\"tis620\",tis62025330:\"tis620\",10000:\"macroman\",10006:\"macgreek\",10007:\"maccyrillic\",10079:\"maciceland\",10081:\"macturkish\",cspc8codepage437:\"cp437\",cspc775baltic:\"cp775\",cspc850multilingual:\"cp850\",cspcp852:\"cp852\",cspc862latinhebrew:\"cp862\",cpgr:\"cp869\",msee:\"cp1250\",mscyrl:\"cp1251\",msansi:\"cp1252\",msgreek:\"cp1253\",msturk:\"cp1254\",mshebr:\"cp1255\",msarab:\"cp1256\",winbaltrim:\"cp1257\",cp20866:\"koi8r\",20866:\"koi8r\",ibm878:\"koi8r\",cskoi8r:\"koi8r\",cp21866:\"koi8u\",21866:\"koi8u\",ibm1168:\"koi8u\",strk10482002:\"rk1048\",tcvn5712:\"tcvn\",tcvn57121:\"tcvn\",gb198880:\"iso646cn\",cn:\"iso646cn\",csiso14jisc6220ro:\"iso646jp\",jisc62201969ro:\"iso646jp\",jp:\"iso646jp\",cshproman8:\"hproman8\",r8:\"hproman8\",roman8:\"hproman8\",xroman8:\"hproman8\",ibm1051:\"hproman8\",mac:\"macintosh\",csmacintosh:\"macintosh\"}},function(e,t,n){\"use strict\";var r=n(10).Buffer;function o(e,t){if(!e)throw new Error(\"SBCS codec is called without the data.\");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error(\"Encoding '\"+e.type+\"' has incorrect 'chars' (must be of len 128 or 256)\");if(128===e.chars.length){for(var n=\"\",o=0;o<128;o++)n+=String.fromCharCode(o);e.chars=n+e.chars}this.decodeBuf=new r(e.chars,\"ucs2\");var i=new r(65536);i.fill(t.defaultCharSingleByte.charCodeAt(0));for(o=0;o<e.chars.length;o++)i[e.chars.charCodeAt(o)]=o;this.encodeBuf=i}function i(e,t){this.encodeBuf=t.encodeBuf}function s(e,t){this.decodeBuf=t.decodeBuf}t._sbcs=o,o.prototype.encoder=i,o.prototype.decoder=s,i.prototype.write=function(e){for(var t=new r(e.length),n=0;n<e.length;n++)t[n]=this.encodeBuf[e.charCodeAt(n)];return t},i.prototype.end=function(){},s.prototype.write=function(e){for(var t=this.decodeBuf,n=new r(2*e.length),o=0,i=0,s=0;s<e.length;s++)o=2*e[s],n[i=2*s]=t[o],n[i+1]=t[o+1];return n.toString(\"ucs2\")},s.prototype.end=function(){}},function(e,t,n){\"use strict\";var r=n(10).Buffer;function o(e,t){this.iconv=t}t.utf7=o,t.unicode11utf7=\"utf7\",o.prototype.encoder=s,o.prototype.decoder=a,o.prototype.bomAware=!0;var i=/[^A-Za-z0-9'\\(\\),-\\.\\/:\\? \\n\\r\\t]+/g;function s(e,t){this.iconv=t.iconv}function a(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=\"\"}s.prototype.write=function(e){return new r(e.replace(i,function(e){return\"+\"+(\"+\"===e?\"\":this.iconv.encode(e,\"utf16-be\").toString(\"base64\").replace(/=+$/,\"\"))+\"-\"}.bind(this)))},s.prototype.end=function(){};for(var c=/[A-Za-z0-9\\/+]/,l=[],u=0;u<256;u++)l[u]=c.test(String.fromCharCode(u));var p=\"+\".charCodeAt(0),d=\"-\".charCodeAt(0),f=\"&\".charCodeAt(0);function h(e,t){this.iconv=t}function m(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=new r(6),this.base64AccumIdx=0}function g(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=\"\"}a.prototype.write=function(e){for(var t=\"\",n=0,o=this.inBase64,i=this.base64Accum,s=0;s<e.length;s++)if(o){if(!l[e[s]]){if(s==n&&e[s]==d)t+=\"+\";else{var a=i+e.slice(n,s).toString();t+=this.iconv.decode(new r(a,\"base64\"),\"utf16-be\")}e[s]!=d&&s--,n=s+1,o=!1,i=\"\"}}else e[s]==p&&(t+=this.iconv.decode(e.slice(n,s),\"ascii\"),n=s+1,o=!0);if(o){var c=(a=i+e.slice(n).toString()).length-a.length%8;i=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(new r(a,\"base64\"),\"utf16-be\")}else t+=this.iconv.decode(e.slice(n),\"ascii\");return this.inBase64=o,this.base64Accum=i,t},a.prototype.end=function(){var e=\"\";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(new r(this.base64Accum,\"base64\"),\"utf16-be\")),this.inBase64=!1,this.base64Accum=\"\",e},t.utf7imap=h,h.prototype.encoder=m,h.prototype.decoder=g,h.prototype.bomAware=!0,m.prototype.write=function(e){for(var t=this.inBase64,n=this.base64Accum,o=this.base64AccumIdx,i=new r(5*e.length+10),s=0,a=0;a<e.length;a++){var c=e.charCodeAt(a);32<=c&&c<=126?(t&&(o>0&&(s+=i.write(n.slice(0,o).toString(\"base64\").replace(/\\//g,\",\").replace(/=+$/,\"\"),s),o=0),i[s++]=d,t=!1),t||(i[s++]=c,c===f&&(i[s++]=d))):(t||(i[s++]=f,t=!0),t&&(n[o++]=c>>8,n[o++]=255&c,o==n.length&&(s+=i.write(n.toString(\"base64\").replace(/\\//g,\",\"),s),o=0)))}return this.inBase64=t,this.base64AccumIdx=o,i.slice(0,s)},m.prototype.end=function(){var e=new r(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString(\"base64\").replace(/\\//g,\",\").replace(/=+$/,\"\"),t),this.base64AccumIdx=0),e[t++]=d,this.inBase64=!1),e.slice(0,t)};var y=l.slice();y[\",\".charCodeAt(0)]=!0,g.prototype.write=function(e){for(var t=\"\",n=0,o=this.inBase64,i=this.base64Accum,s=0;s<e.length;s++)if(o){if(!y[e[s]]){if(s==n&&e[s]==d)t+=\"&\";else{var a=i+e.slice(n,s).toString().replace(/,/g,\"/\");t+=this.iconv.decode(new r(a,\"base64\"),\"utf16-be\")}e[s]!=d&&s--,n=s+1,o=!1,i=\"\"}}else e[s]==f&&(t+=this.iconv.decode(e.slice(n,s),\"ascii\"),n=s+1,o=!0);if(o){var c=(a=i+e.slice(n).toString().replace(/,/g,\"/\")).length-a.length%8;i=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(new r(a,\"base64\"),\"utf16-be\")}else t+=this.iconv.decode(e.slice(n),\"ascii\");return this.inBase64=o,this.base64Accum=i,t},g.prototype.end=function(){var e=\"\";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(new r(this.base64Accum,\"base64\"),\"utf16-be\")),this.inBase64=!1,this.base64Accum=\"\",e}},function(e,t,n){\"use strict\";var r=n(10).Buffer;function o(){}function i(){}function s(){this.overflowByte=-1}function a(e,t){this.iconv=t}function c(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder(\"utf-16le\",e)}function l(e,t){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=e||{},this.iconv=t.iconv}function u(e,t){var n=t||\"utf-16le\";if(e.length>=2)if(254==e[0]&&255==e[1])n=\"utf-16be\";else if(255==e[0]&&254==e[1])n=\"utf-16le\";else{for(var r=0,o=0,i=Math.min(e.length-e.length%2,64),s=0;s<i;s+=2)0===e[s]&&0!==e[s+1]&&o++,0!==e[s]&&0===e[s+1]&&r++;o>r?n=\"utf-16be\":o<r&&(n=\"utf-16le\")}return n}t.utf16be=o,o.prototype.encoder=i,o.prototype.decoder=s,o.prototype.bomAware=!0,i.prototype.write=function(e){for(var t=new r(e,\"ucs2\"),n=0;n<t.length;n+=2){var o=t[n];t[n]=t[n+1],t[n+1]=o}return t},i.prototype.end=function(){},s.prototype.write=function(e){if(0==e.length)return\"\";var t=new r(e.length+1),n=0,o=0;for(-1!==this.overflowByte&&(t[0]=e[0],t[1]=this.overflowByte,n=1,o=2);n<e.length-1;n+=2,o+=2)t[o]=e[n+1],t[o+1]=e[n];return this.overflowByte=n==e.length-1?e[e.length-1]:-1,t.slice(0,o).toString(\"ucs2\")},s.prototype.end=function(){},t.utf16=a,a.prototype.encoder=c,a.prototype.decoder=l,c.prototype.write=function(e){return this.encoder.write(e)},c.prototype.end=function(){return this.encoder.end()},l.prototype.write=function(e){if(!this.decoder){if(this.initialBytes.push(e),this.initialBytesLen+=e.length,this.initialBytesLen<16)return\"\";var t=u(e=r.concat(this.initialBytes),this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(e)},l.prototype.end=function(){if(!this.decoder){var e=r.concat(this.initialBytes),t=u(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);var n=this.decoder.write(e),o=this.decoder.end();return o?n+o:n}return this.decoder.end()}},function(e,t){e.exports=require(\"string_decoder\")},function(e,t,n){\"use strict\";var r=n(10).Buffer;function o(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,\"base64\"===this.enc?this.encoder=c:\"cesu8\"===this.enc&&(this.enc=\"utf8\",this.encoder=l,\"\"!==new r(\"eda0bdedb2a9\",\"hex\").toString()&&(this.decoder=u,this.defaultCharUnicode=t.defaultCharUnicode))}e.exports={utf8:{type:\"_internal\",bomAware:!0},cesu8:{type:\"_internal\",bomAware:!0},unicode11utf8:\"utf8\",ucs2:{type:\"_internal\",bomAware:!0},utf16le:\"ucs2\",binary:{type:\"_internal\"},base64:{type:\"_internal\"},hex:{type:\"_internal\"},_internal:o},o.prototype.encoder=a,o.prototype.decoder=s;var i=n(269).StringDecoder;function s(e,t){i.call(this,t.enc)}function a(e,t){this.enc=t.enc}function c(e,t){this.prevStr=\"\"}function l(e,t){}function u(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}i.prototype.end||(i.prototype.end=function(){}),s.prototype=i.prototype,a.prototype.write=function(e){return new r(e,this.enc)},a.prototype.end=function(){},c.prototype.write=function(e){var t=(e=this.prevStr+e).length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),new r(e,\"base64\")},c.prototype.end=function(){return new r(this.prevStr,\"base64\")},l.prototype.write=function(e){for(var t=new r(3*e.length),n=0,o=0;o<e.length;o++){var i=e.charCodeAt(o);i<128?t[n++]=i:i<2048?(t[n++]=192+(i>>>6),t[n++]=128+(63&i)):(t[n++]=224+(i>>>12),t[n++]=128+(i>>>6&63),t[n++]=128+(63&i))}return t.slice(0,n)},l.prototype.end=function(){},u.prototype.write=function(e){for(var t=this.acc,n=this.contBytes,r=this.accBytes,o=\"\",i=0;i<e.length;i++){var s=e[i];128!=(192&s)?(n>0&&(o+=this.defaultCharUnicode,n=0),s<128?o+=String.fromCharCode(s):s<224?(t=31&s,n=1,r=1):s<240?(t=15&s,n=2,r=1):o+=this.defaultCharUnicode):n>0?(t=t<<6|63&s,r++,0===--n&&(o+=2===r&&t<128&&t>0?this.defaultCharUnicode:3===r&&t<2048?this.defaultCharUnicode:String.fromCharCode(t))):o+=this.defaultCharUnicode}return this.acc=t,this.contBytes=n,this.accBytes=r,o},u.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},function(e,t,n){\"use strict\";for(var r=[n(270),n(268),n(267),n(266),n(265),n(264),n(263),n(262)],o=0;o<r.length;o++){e=r[o];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}},function(e,t,n){\"use strict\";function r(e,t){this.encoder=e,this.addBOM=!0}function o(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}t.PrependBOM=r,r.prototype.write=function(e){return this.addBOM&&(e=\"\\ufeff\"+e,this.addBOM=!1),this.encoder.write(e)},r.prototype.end=function(){return this.encoder.end()},t.StripBOM=o,o.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t?t:(\"\\ufeff\"===t[0]&&(t=t.slice(1),\"function\"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0,t)},o.prototype.end=function(){return this.decoder.end()}},function(e,t,n){\"use strict\";var r=n(62),o=n(61),i=n(161),s=n(158);e.exports=function(e,t,n){var o=n,i=t||{};!0!==t&&\"string\"!=typeof t||(i={encoding:t});\"function\"==typeof t&&(o=t,i={});if(void 0!==o&&\"function\"!=typeof o)throw new TypeError(\"argument callback must be a function\");if(!o&&!global.Promise)throw new TypeError(\"argument callback is required\");var s=!0!==i.encoding?i.encoding:\"utf-8\",a=r.parse(i.limit),l=null==i.length||isNaN(i.length)?null:parseInt(i.length,10);if(o)return c(e,s,l,a,o);return new Promise(function(t,n){c(e,s,l,a,function(e,r){if(e)return n(e);t(r)})})};var a=/^Encoding not recognized: /;function c(e,t,n,r,c){var l=!1,u=!0;if(null!==r&&null!==n&&n>r)return m(o(413,\"request entity too large\",{expected:n,length:n,limit:r,type:\"entity.too.large\"}));var p=e._readableState;if(e._decoder||p&&(p.encoding||p.decoder))return m(o(500,\"stream encoding should not be set\",{type:\"stream.encoding.set\"}));var d,f=0;try{d=function(e){if(!e)return null;try{return i.getDecoder(e)}catch(t){if(!a.test(t.message))throw t;throw o(415,\"specified encoding unsupported\",{encoding:e,type:\"encoding.unsupported\"})}}(t)}catch(e){return m(e)}var h=d?\"\":[];function m(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];function r(){b(),t[0]&&function(e){s(e),\"function\"==typeof e.pause&&e.pause()}(e),c.apply(null,t)}l=!0,u?process.nextTick(r):r()}function g(){l||m(o(400,\"request aborted\",{code:\"ECONNABORTED\",expected:n,length:n,received:f,type:\"request.aborted\"}))}function y(e){l||(f+=e.length,null!==r&&f>r?m(o(413,\"request entity too large\",{limit:r,received:f,type:\"entity.too.large\"})):d?h+=d.write(e):h.push(e))}function v(e){if(!l){if(e)return m(e);if(null!==n&&f!==n)m(o(400,\"request size did not match content length\",{expected:n,length:n,received:f,type:\"request.size.invalid\"}));else m(null,d?h+(d.end()||\"\"):Buffer.concat(h))}}function b(){h=null,e.removeListener(\"aborted\",g),e.removeListener(\"data\",y),e.removeListener(\"end\",v),e.removeListener(\"error\",v),e.removeListener(\"close\",b)}e.on(\"aborted\",g),e.on(\"close\",b),e.on(\"data\",y),e.on(\"end\",v),e.on(\"error\",v),u=!1}},function(e,t){e.exports=require(\"tty\")},function(e,t,n){var r=n(274),o=n(0);(t=e.exports=n(163)).init=function(e){e.inspectOpts={};for(var n=Object.keys(t.inspectOpts),r=0;r<n.length;r++)e.inspectOpts[n[r]]=t.inspectOpts[n[r]]},t.log=function(){return s.write(o.format.apply(o,arguments)+\"\\n\")},t.formatArgs=function(e){var n=this.namespace;if(this.useColors){var r=this.color,o=\"  \u001b[3\"+r+\";1m\"+n+\" \u001b[0m\";e[0]=o+e[0].split(\"\\n\").join(\"\\n\"+o),e.push(\"\u001b[3\"+r+\"m+\"+t.humanize(this.diff)+\"\u001b[0m\")}else e[0]=(new Date).toUTCString()+\" \"+n+\" \"+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=a,t.useColors=function(){return\"colors\"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(i)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var n=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(e,t){return t.toUpperCase()}),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&(\"null\"===r?null:Number(r)),e[n]=r,e},{});var i=parseInt(process.env.DEBUG_FD,10)||2;1!==i&&2!==i&&o.deprecate(function(){},\"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)\")();var s=1===i?process.stdout:2===i?process.stderr:function(e){var t;switch(process.binding(\"tty_wrap\").guessHandleType(e)){case\"TTY\":(t=new r.WriteStream(e))._type=\"tty\",t._handle&&t._handle.unref&&t._handle.unref();break;case\"FILE\":var o=n(26);(t=new o.SyncWriteStream(e,{autoClose:!1}))._type=\"fs\";break;case\"PIPE\":case\"TCP\":var i=n(92);(t=new i.Socket({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type=\"pipe\",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error(\"Implement me. Unknown stream file type!\")}return t.fd=e,t._isStdio=!0,t}(i);function a(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).split(\"\\n\").map(function(e){return e.trim()}).join(\" \")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)},t.enable(a())},function(e,t,n){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&\"undefined\"!=typeof process&&\"env\"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(163)).log=function(){return\"object\"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?\"%c\":\"\")+this.namespace+(n?\" %c\":\" \")+e[0]+(n?\"%c \":\" \")+\"+\"+t.humanize(this.diff),!n)return;var r=\"color: \"+this.color;e.splice(1,0,r,\"color: inherit\");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){\"%%\"!==e&&\"%c\"===e&&(i=++o)}),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem(\"debug\"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if(\"undefined\"!=typeof window&&window.process&&\"renderer\"===window.process.type)return!0;return\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)},t.storage=\"undefined\"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=[\"lightseagreen\",\"forestgreen\",\"goldenrod\",\"dodgerblue\",\"darkorchid\",\"crimson\"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return\"[UnexpectedJSONParseError]: \"+e.message}},t.enable(r())},function(e,t){\"function\"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e){e.exports={100:\"Continue\",101:\"Switching Protocols\",102:\"Processing\",200:\"OK\",201:\"Created\",202:\"Accepted\",203:\"Non-Authoritative Information\",204:\"No Content\",205:\"Reset Content\",206:\"Partial Content\",207:\"Multi-Status\",208:\"Already Reported\",226:\"IM Used\",300:\"Multiple Choices\",301:\"Moved Permanently\",302:\"Found\",303:\"See Other\",304:\"Not Modified\",305:\"Use Proxy\",306:\"(Unused)\",307:\"Temporary Redirect\",308:\"Permanent Redirect\",400:\"Bad Request\",401:\"Unauthorized\",402:\"Payment Required\",403:\"Forbidden\",404:\"Not Found\",405:\"Method Not Allowed\",406:\"Not Acceptable\",407:\"Proxy Authentication Required\",408:\"Request Timeout\",409:\"Conflict\",410:\"Gone\",411:\"Length Required\",412:\"Precondition Failed\",413:\"Payload Too Large\",414:\"URI Too Long\",415:\"Unsupported Media Type\",416:\"Range Not Satisfiable\",417:\"Expectation Failed\",418:\"I'm a teapot\",421:\"Misdirected Request\",422:\"Unprocessable Entity\",423:\"Locked\",424:\"Failed Dependency\",425:\"Unordered Collection\",426:\"Upgrade Required\",428:\"Precondition Required\",429:\"Too Many Requests\",431:\"Request Header Fields Too Large\",451:\"Unavailable For Legal Reasons\",500:\"Internal Server Error\",501:\"Not Implemented\",502:\"Bad Gateway\",503:\"Service Unavailable\",504:\"Gateway Timeout\",505:\"HTTP Version Not Supported\",506:\"Variant Also Negotiates\",507:\"Insufficient Storage\",508:\"Loop Detected\",509:\"Bandwidth Limit Exceeded\",510:\"Not Extended\",511:\"Network Authentication Required\"}},function(e,t){e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e})},function(e,t,n){\"use strict\";e.exports=function(e,t){return e.listeners(t).length}},function(e,t,n){\"use strict\";e.exports=function(e){var t=!0,n=function(e){var t,n=\"\";e.isNative()?n=\"native\":e.isEval()?(t=e.getScriptNameOrSourceURL())||(n=e.getEvalOrigin()):t=e.getFileName();if(t){n+=t;var r=e.getLineNumber();if(null!=r){n+=\":\"+r;var o=e.getColumnNumber();o&&(n+=\":\"+o)}}return n||\"unknown source\"}(e),r=e.getFunctionName(),o=e.isConstructor(),i=\"\";if(e.isToplevel()||o)o?i+=\"new \"+(r||\"<anonymous>\"):r?i+=r:(t=!1,i+=n);else{var s=e.getMethodName(),a=(c=e.receiver).constructor&&c.constructor.name||null;r?(a&&0!==r.indexOf(a)&&(i+=a+\".\"),i+=r,s&&r.lastIndexOf(\".\"+s)!==r.length-s.length-1&&(i+=\" [as \"+s+\"]\")):i+=a+\".\"+(s||\"<anonymous>\")}var c;t&&(i+=\" (\"+n+\")\");return i}},function(module,exports,__webpack_require__){var callSiteToString=__webpack_require__(164).callSiteToString,eventListenerCount=__webpack_require__(164).eventListenerCount,relative=__webpack_require__(21).relative;module.exports=depd;var basePath=process.cwd();function containsNamespace(e,t){var n=e.split(/[ ,]+/);t=String(t).toLowerCase();for(var r=0;r<n.length;r++)if((e=n[r])&&(\"*\"===e||e.toLowerCase()===t))return!0;return!1}function convertDataDescriptorToAccessor(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t),o=r.value;return r.get=function(){return o},r.writable&&(r.set=function(e){return o=e}),delete r.value,delete r.writable,Object.defineProperty(e,t,r),r}function createArgumentsString(e){for(var t=\"\",n=0;n<e;n++)t+=\", arg\"+n;return t.substr(2)}function createStackString(e){var t=this.name+\": \"+this.namespace;this.message&&(t+=\" deprecated \"+this.message);for(var n=0;n<e.length;n++)t+=\"\\n    at \"+callSiteToString(e[n]);return t}function depd(e){if(!e)throw new TypeError(\"argument namespace is required\");var t=callSiteLocation(getStack()[1])[0];function n(e){log.call(n,e)}return n._file=t,n._ignored=isignored(e),n._namespace=e,n._traced=istraced(e),n._warned=Object.create(null),n.function=wrapfunction,n.property=wrapproperty,n}function isignored(e){return!!process.noDeprecation||containsNamespace(process.env.NO_DEPRECATION||\"\",e)}function istraced(e){return!!process.traceDeprecation||containsNamespace(process.env.TRACE_DEPRECATION||\"\",e)}function log(e,t){var n=0!==eventListenerCount(process,\"deprecation\");if(n||!this._ignored){var r,o,i,s=0,a=!1,c=getStack(),l=this._file;for(t?((i=callSiteLocation(c[1])).name=t.name,l=i[0]):i=t=callSiteLocation(c[s=2]);s<c.length;s++)if((o=(r=callSiteLocation(c[s]))[0])===l)a=!0;else if(o===this._file)l=this._file;else if(a)break;var u=r?t.join(\":\")+\"__\"+r.join(\":\"):void 0;if(!(void 0!==u&&u in this._warned))if(this._warned[u]=!0,e||(e=i!==t&&i.name?defaultMessage(i):defaultMessage(t)),n){var p=DeprecationError(this._namespace,e,c.slice(s));process.emit(\"deprecation\",p)}else{var d=(process.stderr.isTTY?formatColor:formatPlain).call(this,e,r,c.slice(s));process.stderr.write(d+\"\\n\",\"utf8\")}}}function callSiteLocation(e){var t=e.getFileName()||\"<anonymous>\",n=e.getLineNumber(),r=e.getColumnNumber();e.isEval()&&(t=e.getEvalOrigin()+\", \"+t);var o=[t,n,r];return o.callSite=e,o.name=e.getFunctionName(),o}function defaultMessage(e){var t=e.callSite,n=e.name;n||(n=\"<anonymous@\"+formatLocation(e)+\">\");var r=t.getThis(),o=r&&t.getTypeName();return\"Object\"===o&&(o=void 0),\"Function\"===o&&(o=r.name||o),o&&t.getMethodName()?o+\".\"+n:n}function formatPlain(e,t,n){var r=(new Date).toUTCString()+\" \"+this._namespace+\" deprecated \"+e;if(this._traced){for(var o=0;o<n.length;o++)r+=\"\\n    at \"+callSiteToString(n[o]);return r}return t&&(r+=\" at \"+formatLocation(t)),r}function formatColor(e,t,n){var r=\"\u001b[36;1m\"+this._namespace+\"\u001b[22;39m \u001b[33;1mdeprecated\u001b[22;39m \u001b[0m\"+e+\"\u001b[39m\";if(this._traced){for(var o=0;o<n.length;o++)r+=\"\\n    \u001b[36mat \"+callSiteToString(n[o])+\"\u001b[39m\";return r}return t&&(r+=\" \u001b[36m\"+formatLocation(t)+\"\u001b[39m\"),r}function formatLocation(e){return relative(basePath,e[0])+\":\"+e[1]+\":\"+e[2]}function getStack(){var e=Error.stackTraceLimit,t={},n=Error.prepareStackTrace;Error.prepareStackTrace=prepareObjectStackTrace,Error.stackTraceLimit=Math.max(10,e),Error.captureStackTrace(t);var r=t.stack.slice(1);return Error.prepareStackTrace=n,Error.stackTraceLimit=e,r}function prepareObjectStackTrace(e,t){return t}function wrapfunction(fn,message){if(\"function\"!=typeof fn)throw new TypeError(\"argument fn must be a function\");var args=createArgumentsString(fn.length),deprecate=this,stack=getStack(),site=callSiteLocation(stack[1]);site.name=fn.name;var deprecatedfn=eval(\"(function (\"+args+') {\\n\"use strict\"\\nlog.call(deprecate, message, site)\\nreturn fn.apply(this, arguments)\\n})');return deprecatedfn}function wrapproperty(e,t,n){if(!e||\"object\"!=typeof e&&\"function\"!=typeof e)throw new TypeError(\"argument obj must be object\");var r=Object.getOwnPropertyDescriptor(e,t);if(!r)throw new TypeError(\"must call property on owner object\");if(!r.configurable)throw new TypeError(\"property must be configurable\");var o=this,i=callSiteLocation(getStack()[1]);i.name=t,\"value\"in r&&(r=convertDataDescriptorToAccessor(e,t,n));var s=r.get,a=r.set;\"function\"==typeof s&&(r.get=function(){return log.call(o,n,i),s.apply(this,arguments)}),\"function\"==typeof a&&(r.set=function(){return log.call(o,n,i),a.apply(this,arguments)}),Object.defineProperty(e,t,r)}function DeprecationError(e,t,n){var r,o=new Error;return Object.defineProperty(o,\"constructor\",{value:DeprecationError}),Object.defineProperty(o,\"message\",{configurable:!0,enumerable:!1,value:t,writable:!0}),Object.defineProperty(o,\"name\",{enumerable:!1,configurable:!0,value:\"DeprecationError\",writable:!0}),Object.defineProperty(o,\"namespace\",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(o,\"stack\",{configurable:!0,enumerable:!1,get:function(){return void 0!==r?r:r=createStackString.call(this,n)},set:function(e){r=e}}),o}},function(e,t,n){\"use strict\";var r=n(62),o=n(94),i=n(61),s=n(20)(\"body-parser:json\"),a=n(91),c=n(60);e.exports=function(e){var t=e||{},n=\"number\"!=typeof t.limit?r.parse(t.limit||\"100kb\"):t.limit,p=!1!==t.inflate,d=t.reviver,f=!1!==t.strict,h=t.type||\"application/json\",m=t.verify||!1;if(!1!==m&&\"function\"!=typeof m)throw new TypeError(\"option verify must be function\");var g=\"function\"!=typeof h?function(e){return function(t){return Boolean(c(t,e))}}(h):h;function y(e){if(0===e.length)return{};if(f){var t=(n=e,l.exec(n)[1]);if(\"{\"!==t&&\"[\"!==t)throw s(\"strict violation\"),function(e,t){var n=e.indexOf(t),r=e.substring(0,n)+\"#\";try{throw JSON.parse(r),new SyntaxError(\"strict violation\")}catch(e){return u(e,{message:e.message.replace(\"#\",t),stack:e.stack})}}(e,t)}var n;try{return s(\"parse json\"),JSON.parse(e,d)}catch(e){throw u(e,{stack:e.stack})}}return function(e,t,r){if(e._body)return s(\"body already parsed\"),void r();if(e.body=e.body||{},!c.hasBody(e))return s(\"skip empty body\"),void r();if(s(\"content-type %j\",e.headers[\"content-type\"]),!g(e))return s(\"skip parsing\"),void r();var l=function(e){try{return(o.parse(e).parameters.charset||\"\").toLowerCase()}catch(e){return}}(e)||\"utf-8\";if(\"utf-\"!==l.substr(0,4))return s(\"invalid charset\"),void r(i(415,'unsupported charset \"'+l.toUpperCase()+'\"',{charset:l,type:\"charset.unsupported\"}));a(e,t,r,y,s,{encoding:l,inflate:p,limit:n,verify:m})}};var l=/^[\\x20\\x09\\x0a\\x0d]*(.)/;function u(e,t){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r];\"stack\"!==o&&\"message\"!==o&&delete e[o]}for(var i=Object.keys(t),s=0;s<i.length;s++){var a=i[s];e[a]=t[a]}return e}},function(e,t,n){\"use strict\";e.exports=function(e,t){return e.listeners(t).length}},function(e,t,n){\"use strict\";e.exports=function(e){var t=!0,n=function(e){var t,n=\"\";e.isNative()?n=\"native\":e.isEval()?(t=e.getScriptNameOrSourceURL())||(n=e.getEvalOrigin()):t=e.getFileName();if(t){n+=t;var r=e.getLineNumber();if(null!=r){n+=\":\"+r;var o=e.getColumnNumber();o&&(n+=\":\"+o)}}return n||\"unknown source\"}(e),r=e.getFunctionName(),o=e.isConstructor(),i=\"\";if(e.isToplevel()||o)o?i+=\"new \"+(r||\"<anonymous>\"):r?i+=r:(t=!1,i+=n);else{var s=e.getMethodName(),a=(c=e.receiver).constructor&&c.constructor.name||null;r?(a&&0!==r.indexOf(a)&&(i+=a+\".\"),i+=r,s&&r.lastIndexOf(\".\"+s)!==r.length-s.length-1&&(i+=\" [as \"+s+\"]\")):i+=a+\".\"+(s||\"<anonymous>\")}var c;t&&(i+=\" (\"+n+\")\");return i}},function(e,t,n){\"use strict\";var r=n(166),o=n(5).EventEmitter,i=n(245),s=n(244),a=n(152),c=n(153),l=n(233),u=n(226);(t=e.exports=function(){var e=function(t,n,r){e.handle(t,n,r)};return i(e,o.prototype,!1),i(e,s,!1),e.request=Object.create(l,{app:{configurable:!0,enumerable:!0,writable:!0,value:e}}),e.response=Object.create(u,{app:{configurable:!0,enumerable:!0,writable:!0,value:e}}),e.init(),e}).application=s,t.request=l,t.response=u,t.Route=a,t.Router=c,t.json=r.json,t.query=n(150),t.static=n(222),t.urlencoded=r.urlencoded,[\"bodyParser\",\"compress\",\"cookieSession\",\"session\",\"logger\",\"cookieParser\",\"favicon\",\"responseTime\",\"errorHandler\",\"timeout\",\"methodOverride\",\"vhost\",\"csrf\",\"directory\",\"limit\",\"multipart\",\"staticCache\"].forEach(function(e){Object.defineProperty(t,e,{get:function(){throw new Error(\"Most middleware (like \"+e+\") is no longer bundled with Express and must be installed separately. Please see https://github.com/senchalabs/connect#middleware.\")},configurable:!0})})},function(e,t,n){\"use strict\";e.exports=n(286)},function(e,t,n){var r=n(287),o=n(166),i=(n(221),n(194)(\"localhost:27017/jodel\"),r.Router());i.post(\"/user/:id/coordinates\",function(e,t){console.log(\"req.params\",e.params),t.send(\"OK OK\")}),i.get(\"/user/:id/coordinates\",function(e,t){t.send([])});var s=r();s.use(o.json()),s.use(\"/\",i),s.set(\"port\",process.env.PORT||3e3);var a=s.listen(s.get(\"port\"),function(){console.log(\"Express server listening on port \"+a.address().port)});e.exports=s}]);","extractedComments":[]}